const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nodeConfig-BeIGTHyp.js","assets/index.esm2017-DEs6YOCN.js","assets/config-COIi6VQ1.js"])))=>i.map(i=>d[i]);
import{o as C0,c as Ce,q as Ze,g as De,a as It,b as Yt,d as Ae,u as Wt,w as qt,e as pt,f as ss,h as Gs,i as A0,j as us,k as T0,s as bl,l as Yi,m as Ts,n as gn,p as E0,r as Uf,t as px}from"./index.esm2017-DEs6YOCN.js";import{initializeFirebase as mh,auth as rt,getDb as fe,checkFirebaseConnection as Wr}from"./config-COIi6VQ1.js";function P0(t,s){for(var a=0;a<s.length;a++){const i=s[a];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const d=Object.getOwnPropertyDescriptor(i,l);d&&Object.defineProperty(t,l,d.get?d:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(l){if(l.ep)return;l.ep=!0;const d=a(l);fetch(l.href,d)}})();function ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Td={exports:{}},wi={},Ed={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function D0(){if(Bf)return st;Bf=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),j=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=j&&E[j]||E["@@iterator"],typeof E=="function"?E:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function C(E,f,P){this.props=E,this.context=f,this.refs=b,this.updater=P||D}C.prototype.isReactComponent={},C.prototype.setState=function(E,f){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,f,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function A(){}A.prototype=C.prototype;function L(E,f,P){this.props=E,this.context=f,this.refs=b,this.updater=P||D}var N=L.prototype=new A;N.constructor=L,S(N,C.prototype),N.isPureReactComponent=!0;var I=Array.isArray,W=Object.prototype.hasOwnProperty,B={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function F(E,f,P){var M,K={},ue=null,be=null;if(f!=null)for(M in f.ref!==void 0&&(be=f.ref),f.key!==void 0&&(ue=""+f.key),f)W.call(f,M)&&!Q.hasOwnProperty(M)&&(K[M]=f[M]);var pe=arguments.length-2;if(pe===1)K.children=P;else if(1<pe){for(var X=Array(pe),_=0;_<pe;_++)X[_]=arguments[_+2];K.children=X}if(E&&E.defaultProps)for(M in pe=E.defaultProps,pe)K[M]===void 0&&(K[M]=pe[M]);return{$$typeof:t,type:E,key:ue,ref:be,props:K,_owner:B.current}}function te(E,f){return{$$typeof:t,type:E.type,key:f,ref:E.ref,props:E.props,_owner:E._owner}}function ce(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function z(E){var f={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(P){return f[P]})}var ee=/\/+/g;function oe(E,f){return typeof E=="object"&&E!==null&&E.key!=null?z(""+E.key):f.toString(36)}function re(E,f,P,M,K){var ue=typeof E;(ue==="undefined"||ue==="boolean")&&(E=null);var be=!1;if(E===null)be=!0;else switch(ue){case"string":case"number":be=!0;break;case"object":switch(E.$$typeof){case t:case s:be=!0}}if(be)return be=E,K=K(be),E=M===""?"."+oe(be,0):M,I(K)?(P="",E!=null&&(P=E.replace(ee,"$&/")+"/"),re(K,f,P,"",function(_){return _})):K!=null&&(ce(K)&&(K=te(K,P+(!K.key||be&&be.key===K.key?"":(""+K.key).replace(ee,"$&/")+"/")+E)),f.push(K)),1;if(be=0,M=M===""?".":M+":",I(E))for(var pe=0;pe<E.length;pe++){ue=E[pe];var X=M+oe(ue,pe);be+=re(ue,f,P,X,K)}else if(X=w(E),typeof X=="function")for(E=X.call(E),pe=0;!(ue=E.next()).done;)ue=ue.value,X=M+oe(ue,pe++),be+=re(ue,f,P,X,K);else if(ue==="object")throw f=String(E),Error("Objects are not valid as a React child (found: "+(f==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":f)+"). If you meant to render a collection of children, use an array instead.");return be}function le(E,f,P){if(E==null)return E;var M=[],K=0;return re(E,M,"","",function(ue){return f.call(P,ue,K++)}),M}function O(E){if(E._status===-1){var f=E._result;f=f(),f.then(function(P){(E._status===0||E._status===-1)&&(E._status=1,E._result=P)},function(P){(E._status===0||E._status===-1)&&(E._status=2,E._result=P)}),E._status===-1&&(E._status=0,E._result=f)}if(E._status===1)return E._result.default;throw E._result}var q={current:null},Y={transition:null},T={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};function R(){throw Error("act(...) is not supported in production builds of React.")}return st.Children={map:le,forEach:function(E,f,P){le(E,function(){f.apply(this,arguments)},P)},count:function(E){var f=0;return le(E,function(){f++}),f},toArray:function(E){return le(E,function(f){return f})||[]},only:function(E){if(!ce(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},st.Component=C,st.Fragment=a,st.Profiler=l,st.PureComponent=L,st.StrictMode=i,st.Suspense=g,st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,st.act=R,st.cloneElement=function(E,f,P){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var M=S({},E.props),K=E.key,ue=E.ref,be=E._owner;if(f!=null){if(f.ref!==void 0&&(ue=f.ref,be=B.current),f.key!==void 0&&(K=""+f.key),E.type&&E.type.defaultProps)var pe=E.type.defaultProps;for(X in f)W.call(f,X)&&!Q.hasOwnProperty(X)&&(M[X]=f[X]===void 0&&pe!==void 0?pe[X]:f[X])}var X=arguments.length-2;if(X===1)M.children=P;else if(1<X){pe=Array(X);for(var _=0;_<X;_++)pe[_]=arguments[_+2];M.children=pe}return{$$typeof:t,type:E.type,key:K,ref:ue,props:M,_owner:be}},st.createContext=function(E){return E={$$typeof:u,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:d,_context:E},E.Consumer=E},st.createElement=F,st.createFactory=function(E){var f=F.bind(null,E);return f.type=E,f},st.createRef=function(){return{current:null}},st.forwardRef=function(E){return{$$typeof:m,render:E}},st.isValidElement=ce,st.lazy=function(E){return{$$typeof:h,_payload:{_status:-1,_result:E},_init:O}},st.memo=function(E,f){return{$$typeof:v,type:E,compare:f===void 0?null:f}},st.startTransition=function(E){var f=Y.transition;Y.transition={};try{E()}finally{Y.transition=f}},st.unstable_act=R,st.useCallback=function(E,f){return q.current.useCallback(E,f)},st.useContext=function(E){return q.current.useContext(E)},st.useDebugValue=function(){},st.useDeferredValue=function(E){return q.current.useDeferredValue(E)},st.useEffect=function(E,f){return q.current.useEffect(E,f)},st.useId=function(){return q.current.useId()},st.useImperativeHandle=function(E,f,P){return q.current.useImperativeHandle(E,f,P)},st.useInsertionEffect=function(E,f){return q.current.useInsertionEffect(E,f)},st.useLayoutEffect=function(E,f){return q.current.useLayoutEffect(E,f)},st.useMemo=function(E,f){return q.current.useMemo(E,f)},st.useReducer=function(E,f,P){return q.current.useReducer(E,f,P)},st.useRef=function(E){return q.current.useRef(E)},st.useState=function(E){return q.current.useState(E)},st.useSyncExternalStore=function(E,f,P){return q.current.useSyncExternalStore(E,f,P)},st.useTransition=function(){return q.current.useTransition()},st.version="18.3.1",st}var Wf;function fh(){return Wf||(Wf=1,Ed.exports=D0()),Ed.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function L0(){if(Vf)return wi;Vf=1;var t=fh(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(m,g,v){var h,j={},w=null,D=null;v!==void 0&&(w=""+v),g.key!==void 0&&(w=""+g.key),g.ref!==void 0&&(D=g.ref);for(h in g)i.call(g,h)&&!d.hasOwnProperty(h)&&(j[h]=g[h]);if(m&&m.defaultProps)for(h in g=m.defaultProps,g)j[h]===void 0&&(j[h]=g[h]);return{$$typeof:s,type:m,key:w,ref:D,props:j,_owner:l.current}}return wi.Fragment=a,wi.jsx=u,wi.jsxs=u,wi}var _f;function R0(){return _f||(_f=1,Td.exports=L0()),Td.exports}var e=R0(),y=fh();const Ll=ph(y),M0=P0({__proto__:null,default:Ll},[y]);var al={},Pd={exports:{}},As={},Dd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function I0(){return $f||($f=1,function(t){function s(Y,T){var R=Y.length;Y.push(T);e:for(;0<R;){var E=R-1>>>1,f=Y[E];if(0<l(f,T))Y[E]=T,Y[R]=f,R=E;else break e}}function a(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var T=Y[0],R=Y.pop();if(R!==T){Y[0]=R;e:for(var E=0,f=Y.length,P=f>>>1;E<P;){var M=2*(E+1)-1,K=Y[M],ue=M+1,be=Y[ue];if(0>l(K,R))ue<f&&0>l(be,K)?(Y[E]=be,Y[ue]=R,E=ue):(Y[E]=K,Y[M]=R,E=M);else if(ue<f&&0>l(be,R))Y[E]=be,Y[ue]=R,E=ue;else break e}}return T}function l(Y,T){var R=Y.sortIndex-T.sortIndex;return R!==0?R:Y.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var u=Date,m=u.now();t.unstable_now=function(){return u.now()-m}}var g=[],v=[],h=1,j=null,w=3,D=!1,S=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Y){for(var T=a(v);T!==null;){if(T.callback===null)i(v);else if(T.startTime<=Y)i(v),T.sortIndex=T.expirationTime,s(g,T);else break;T=a(v)}}function I(Y){if(b=!1,N(Y),!S)if(a(g)!==null)S=!0,O(W);else{var T=a(v);T!==null&&q(I,T.startTime-Y)}}function W(Y,T){S=!1,b&&(b=!1,A(F),F=-1),D=!0;var R=w;try{for(N(T),j=a(g);j!==null&&(!(j.expirationTime>T)||Y&&!z());){var E=j.callback;if(typeof E=="function"){j.callback=null,w=j.priorityLevel;var f=E(j.expirationTime<=T);T=t.unstable_now(),typeof f=="function"?j.callback=f:j===a(g)&&i(g),N(T)}else i(g);j=a(g)}if(j!==null)var P=!0;else{var M=a(v);M!==null&&q(I,M.startTime-T),P=!1}return P}finally{j=null,w=R,D=!1}}var B=!1,Q=null,F=-1,te=5,ce=-1;function z(){return!(t.unstable_now()-ce<te)}function ee(){if(Q!==null){var Y=t.unstable_now();ce=Y;var T=!0;try{T=Q(!0,Y)}finally{T?oe():(B=!1,Q=null)}}else B=!1}var oe;if(typeof L=="function")oe=function(){L(ee)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,le=re.port2;re.port1.onmessage=ee,oe=function(){le.postMessage(null)}}else oe=function(){C(ee,0)};function O(Y){Q=Y,B||(B=!0,oe())}function q(Y,T){F=C(function(){Y(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){S||D||(S=!0,O(W))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return a(g)},t.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var T=3;break;default:T=w}var R=w;w=T;try{return Y()}finally{w=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,T){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var R=w;w=Y;try{return T()}finally{w=R}},t.unstable_scheduleCallback=function(Y,T,R){var E=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?E+R:E):R=E,Y){case 1:var f=-1;break;case 2:f=250;break;case 5:f=1073741823;break;case 4:f=1e4;break;default:f=5e3}return f=R+f,Y={id:h++,callback:T,priorityLevel:Y,startTime:R,expirationTime:f,sortIndex:-1},R>E?(Y.sortIndex=R,s(v,Y),a(g)===null&&Y===a(v)&&(b?(A(F),F=-1):b=!0,q(I,R-E))):(Y.sortIndex=f,s(g,Y),S||D||(S=!0,O(W))),Y},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Y){var T=w;return function(){var R=w;w=T;try{return Y.apply(this,arguments)}finally{w=R}}}}(Ld)),Ld}var zf;function O0(){return zf||(zf=1,Dd.exports=I0()),Dd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf;function F0(){if(Hf)return As;Hf=1;var t=fh(),s=O0();function a(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function d(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(l[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},j={};function w(n){return g.call(j,n)?!0:g.call(h,n)?!1:v.test(n)?j[n]=!0:(h[n]=!0,!1)}function D(n,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,r,o,c){if(r===null||typeof r>"u"||D(n,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(n,r,o,c,p,x,k){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=n,this.type=r,this.sanitizeURL=x,this.removeEmptyString=k}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new b(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];C[r]=new b(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new b(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new b(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new b(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new b(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new b(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new b(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new b(n,5,!1,n.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function L(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(A,L);C[r]=new b(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(A,L);C[r]=new b(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(A,L);C[r]=new b(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new b(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new b(n,1,!1,n.toLowerCase(),null,!0,!0)});function N(n,r,o,c){var p=C.hasOwnProperty(r)?C[r]:null;(p!==null?p.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,o,p,c)&&(o=null),c||p===null?w(r)&&(o===null?n.removeAttribute(r):n.setAttribute(r,""+o)):p.mustUseProperty?n[p.propertyName]=o===null?p.type===3?!1:"":o:(r=p.attributeName,c=p.attributeNamespace,o===null?n.removeAttribute(r):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,c?n.setAttributeNS(c,r,o):n.setAttribute(r,o))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),B=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),Y=Symbol.iterator;function T(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var R=Object.assign,E;function f(n){if(E===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);E=r&&r[1]||""}return`
`+E+n}var P=!1;function M(n,r){if(!n||P)return"";P=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(ie){var c=ie}Reflect.construct(n,[],r)}else{try{r.call()}catch(ie){c=ie}n.call(r.prototype)}else{try{throw Error()}catch(ie){c=ie}n()}}catch(ie){if(ie&&c&&typeof ie.stack=="string"){for(var p=ie.stack.split(`
`),x=c.stack.split(`
`),k=p.length-1,U=x.length-1;1<=k&&0<=U&&p[k]!==x[U];)U--;for(;1<=k&&0<=U;k--,U--)if(p[k]!==x[U]){if(k!==1||U!==1)do if(k--,U--,0>U||p[k]!==x[U]){var H=`
`+p[k].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=k&&0<=U);break}}}finally{P=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?f(n):""}function K(n){switch(n.tag){case 5:return f(n.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 2:case 15:return n=M(n.type,!1),n;case 11:return n=M(n.type.render,!1),n;case 1:return n=M(n.type,!0),n;default:return""}}function ue(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case B:return"Portal";case te:return"Profiler";case F:return"StrictMode";case oe:return"Suspense";case re:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case z:return(n.displayName||"Context")+".Consumer";case ce:return(n._context.displayName||"Context")+".Provider";case ee:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case le:return r=n.displayName||null,r!==null?r:ue(n.type)||"Memo";case O:r=n._payload,n=n._init;try{return ue(n(r))}catch{}}return null}function be(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(r);case 8:return r===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function pe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function X(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _(n){var r=X(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,x=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return p.call(this)},set:function(k){c=""+k,x.call(this,k)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function V(n){n._valueTracker||(n._valueTracker=_(n))}function J(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=X(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function ae(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ge(n,r){var o=r.checked;return R({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function We(n,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=pe(r.value!=null?r.value:o),n._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ze(n,r){r=r.checked,r!=null&&N(n,"checked",r,!1)}function Ge(n,r){ze(n,r);var o=pe(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ve(n,r.type,o):r.hasOwnProperty("defaultValue")&&Ve(n,r.type,pe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function vt(n,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,o||r===n.value||(n.value=r),n.defaultValue=r}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function Ve(n,r,o){(r!=="number"||ae(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var Ke=Array.isArray;function et(n,r,o,c){if(n=n.options,r){r={};for(var p=0;p<o.length;p++)r["$"+o[p]]=!0;for(o=0;o<n.length;o++)p=r.hasOwnProperty("$"+n[o].value),n[o].selected!==p&&(n[o].selected=p),p&&c&&(n[o].defaultSelected=!0)}else{for(o=""+pe(o),r=null,p=0;p<n.length;p++){if(n[p].value===o){n[p].selected=!0,c&&(n[p].defaultSelected=!0);return}r!==null||n[p].disabled||(r=n[p])}r!==null&&(r.selected=!0)}}function rs(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(a(91));return R({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function He(n,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(a(92));if(Ke(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),o=r}n._wrapperState={initialValue:pe(o)}}function xt(n,r){var o=pe(r.value),c=pe(r.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),r.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),c!=null&&(n.defaultValue=""+c)}function Jt(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Ps(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Us(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Ps(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Dt,Lt=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,p){MSApp.execUnsafeLocalFunction(function(){return n(r,o,c,p)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Dt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Vt(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bn=["Webkit","ms","Moz","O"];Object.keys(xs).forEach(function(n){bn.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),xs[r]=xs[n]})});function Ds(n,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||xs.hasOwnProperty(n)&&xs[n]?(""+r).trim():r+"px"}function Ks(n,r){n=n.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,p=Ds(o,r[o],c);o==="float"&&(o="cssFloat"),c?n.setProperty(o,p):n[o]=p}}var me=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(n,r){if(r){if(me[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(a(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(a(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(a(61))}if(r.style!=null&&typeof r.style!="object")throw Error(a(62))}}function Me(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function Qe(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var it=null,Ie=null,Te=null;function Ee(n){if(n=ii(n)){if(typeof it!="function")throw Error(a(280));var r=n.stateNode;r&&(r=jo(r),it(n.stateNode,n.type,r))}}function Xe(n){Ie?Te?Te.push(n):Te=[n]:Ie=n}function nt(){if(Ie){var n=Ie,r=Te;if(Te=Ie=null,Ee(n),r)for(n=0;n<r.length;n++)Ee(r[n])}}function Re(n,r){return n(r)}function ct(){}var Zt=!1;function ys(n,r,o){if(Zt)return n(r,o);Zt=!0;try{return Re(n,r,o)}finally{Zt=!1,(Ie!==null||Te!==null)&&(ct(),nt())}}function Nt(n,r){var o=n.stateNode;if(o===null)return null;var c=jo(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var Js=!1;if(m)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Js=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Js=!1}function ln(n,r,o,c,p,x,k,U,H){var ie=Array.prototype.slice.call(arguments,3);try{r.apply(o,ie)}catch(ye){this.onError(ye)}}var js=!1,cn=null,Nn=!1,Bn=null,dn={onError:function(n){js=!0,cn=n}};function xr(n,r,o,c,p,x,k,U,H){js=!1,cn=null,ln.apply(dn,arguments)}function Wa(n,r,o,c,p,x,k,U,H){if(xr.apply(this,arguments),js){if(js){var ie=cn;js=!1,cn=null}else throw Error(a(198));Nn||(Nn=!0,Bn=ie)}}function Bs(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function Je(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function ht(n){if(Bs(n)!==n)throw Error(a(188))}function yt(n){var r=n.alternate;if(!r){if(r=Bs(n),r===null)throw Error(a(188));return r!==n?null:n}for(var o=n,c=r;;){var p=o.return;if(p===null)break;var x=p.alternate;if(x===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===o)return ht(p),n;if(x===c)return ht(p),r;x=x.sibling}throw Error(a(188))}if(o.return!==c.return)o=p,c=x;else{for(var k=!1,U=p.child;U;){if(U===o){k=!0,o=p,c=x;break}if(U===c){k=!0,c=p,o=x;break}U=U.sibling}if(!k){for(U=x.child;U;){if(U===o){k=!0,o=x,c=p;break}if(U===c){k=!0,c=x,o=p;break}U=U.sibling}if(!k)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:r}function as(n){return n=yt(n),n!==null?is(n):null}function is(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=is(n);if(r!==null)return r;n=n.sibling}return null}var kn=s.unstable_scheduleCallback,zr=s.unstable_cancelCallback,Va=s.unstable_shouldYield,Gl=s.unstable_requestPaint,kt=s.unstable_now,Ql=s.unstable_getCurrentPriorityLevel,Sn=s.unstable_ImmediatePriority,Hr=s.unstable_UserBlockingPriority,yr=s.unstable_NormalPriority,Kl=s.unstable_LowPriority,qr=s.unstable_IdlePriority,$=null,G=null;function he(n){if(G&&typeof G.onCommitFiberRoot=="function")try{G.onCommitFiberRoot($,n,void 0,(n.current.flags&128)===128)}catch{}}var Se=Math.clz32?Math.clz32:tt,de=Math.log,Ne=Math.LN2;function tt(n){return n>>>=0,n===0?32:31-(de(n)/Ne|0)|0}var ps=64,lt=4194304;function dt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _t(n,r){var o=n.pendingLanes;if(o===0)return 0;var c=0,p=n.suspendedLanes,x=n.pingedLanes,k=o&268435455;if(k!==0){var U=k&~p;U!==0?c=dt(U):(x&=k,x!==0&&(c=dt(x)))}else k=o&~p,k!==0?c=dt(k):x!==0&&(c=dt(x));if(c===0)return 0;if(r!==0&&r!==c&&(r&p)===0&&(p=c&-c,x=r&-r,p>=x||p===16&&(x&4194240)!==0))return r;if((c&4)!==0&&(c|=o&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)o=31-Se(r),p=1<<o,c|=n[o],r&=~p;return c}function ws(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xs(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,p=n.expirationTimes,x=n.pendingLanes;0<x;){var k=31-Se(x),U=1<<k,H=p[k];H===-1?((U&o)===0||(U&c)!==0)&&(p[k]=ws(U,r)):H<=r&&(n.expiredLanes|=U),x&=~U}}function Wn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Yr(){var n=ps;return ps<<=1,(ps&4194240)===0&&(ps=64),n}function _a(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function $a(n,r,o){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Se(r),n[r]=o}function Yj(n,r){var o=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<o;){var p=31-Se(o),x=1<<p;r[p]=0,c[p]=-1,n[p]=-1,o&=~x}}function Jl(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Se(o),p=1<<c;p&r|n[c]&r&&(n[c]|=r),o&=~p}}var ut=0;function fm(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var gm,Zl,vm,xm,ym,Xl=!1,ro=[],Vn=null,_n=null,$n=null,za=new Map,Ha=new Map,zn=[],Gj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jm(n,r){switch(n){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":za.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(r.pointerId)}}function qa(n,r,o,c,p,x){return n===null||n.nativeEvent!==x?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:x,targetContainers:[p]},r!==null&&(r=ii(r),r!==null&&Zl(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),n)}function Qj(n,r,o,c,p){switch(r){case"focusin":return Vn=qa(Vn,n,r,o,c,p),!0;case"dragenter":return _n=qa(_n,n,r,o,c,p),!0;case"mouseover":return $n=qa($n,n,r,o,c,p),!0;case"pointerover":var x=p.pointerId;return za.set(x,qa(za.get(x)||null,n,r,o,c,p)),!0;case"gotpointercapture":return x=p.pointerId,Ha.set(x,qa(Ha.get(x)||null,n,r,o,c,p)),!0}return!1}function wm(n){var r=jr(n.target);if(r!==null){var o=Bs(r);if(o!==null){if(r=o.tag,r===13){if(r=Je(o),r!==null){n.blockedOn=r,ym(n.priority,function(){vm(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ao(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=tc(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);je=c,o.target.dispatchEvent(c),je=null}else return r=ii(o),r!==null&&Zl(r),n.blockedOn=o,!1;r.shift()}return!0}function bm(n,r,o){ao(n)&&o.delete(r)}function Kj(){Xl=!1,Vn!==null&&ao(Vn)&&(Vn=null),_n!==null&&ao(_n)&&(_n=null),$n!==null&&ao($n)&&($n=null),za.forEach(bm),Ha.forEach(bm)}function Ya(n,r){n.blockedOn===r&&(n.blockedOn=null,Xl||(Xl=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Kj)))}function Ga(n){function r(p){return Ya(p,n)}if(0<ro.length){Ya(ro[0],n);for(var o=1;o<ro.length;o++){var c=ro[o];c.blockedOn===n&&(c.blockedOn=null)}}for(Vn!==null&&Ya(Vn,n),_n!==null&&Ya(_n,n),$n!==null&&Ya($n,n),za.forEach(r),Ha.forEach(r),o=0;o<zn.length;o++)c=zn[o],c.blockedOn===n&&(c.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)wm(o),o.blockedOn===null&&zn.shift()}var Gr=I.ReactCurrentBatchConfig,io=!0;function Jj(n,r,o,c){var p=ut,x=Gr.transition;Gr.transition=null;try{ut=1,ec(n,r,o,c)}finally{ut=p,Gr.transition=x}}function Zj(n,r,o,c){var p=ut,x=Gr.transition;Gr.transition=null;try{ut=4,ec(n,r,o,c)}finally{ut=p,Gr.transition=x}}function ec(n,r,o,c){if(io){var p=tc(n,r,o,c);if(p===null)xc(n,r,c,oo,o),jm(n,c);else if(Qj(p,n,r,o,c))c.stopPropagation();else if(jm(n,c),r&4&&-1<Gj.indexOf(n)){for(;p!==null;){var x=ii(p);if(x!==null&&gm(x),x=tc(n,r,o,c),x===null&&xc(n,r,c,oo,o),x===p)break;p=x}p!==null&&c.stopPropagation()}else xc(n,r,c,null,o)}}var oo=null;function tc(n,r,o,c){if(oo=null,n=Qe(c),n=jr(n),n!==null)if(r=Bs(n),r===null)n=null;else if(o=r.tag,o===13){if(n=Je(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return oo=n,null}function Nm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ql()){case Sn:return 1;case Hr:return 4;case yr:case Kl:return 16;case qr:return 536870912;default:return 16}default:return 16}}var Hn=null,sc=null,lo=null;function km(){if(lo)return lo;var n,r=sc,o=r.length,c,p="value"in Hn?Hn.value:Hn.textContent,x=p.length;for(n=0;n<o&&r[n]===p[n];n++);var k=o-n;for(c=1;c<=k&&r[o-c]===p[x-c];c++);return lo=p.slice(n,1<c?1-c:void 0)}function co(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function uo(){return!0}function Sm(){return!1}function Ls(n){function r(o,c,p,x,k){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(o=n[U],this[U]=o?o(x):x[U]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?uo:Sm,this.isPropagationStopped=Sm,this}return R(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=uo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=uo)},persist:function(){},isPersistent:uo}),r}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nc=Ls(Qr),Qa=R({},Qr,{view:0,detail:0}),Xj=Ls(Qa),rc,ac,Ka,ho=R({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ka&&(Ka&&n.type==="mousemove"?(rc=n.screenX-Ka.screenX,ac=n.screenY-Ka.screenY):ac=rc=0,Ka=n),rc)},movementY:function(n){return"movementY"in n?n.movementY:ac}}),Cm=Ls(ho),ew=R({},ho,{dataTransfer:0}),tw=Ls(ew),sw=R({},Qa,{relatedTarget:0}),ic=Ls(sw),nw=R({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),rw=Ls(nw),aw=R({},Qr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iw=Ls(aw),ow=R({},Qr,{data:0}),Am=Ls(ow),lw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uw(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=dw[n])?!!r[n]:!1}function oc(){return uw}var hw=R({},Qa,{key:function(n){if(n.key){var r=lw[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=co(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(n){return n.type==="keypress"?co(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?co(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mw=Ls(hw),pw=R({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tm=Ls(pw),fw=R({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),gw=Ls(fw),vw=R({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xw=Ls(vw),yw=R({},ho,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jw=Ls(yw),ww=[9,13,27,32],lc=m&&"CompositionEvent"in window,Ja=null;m&&"documentMode"in document&&(Ja=document.documentMode);var bw=m&&"TextEvent"in window&&!Ja,Em=m&&(!lc||Ja&&8<Ja&&11>=Ja),Pm=" ",Dm=!1;function Lm(n,r){switch(n){case"keyup":return ww.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Kr=!1;function Nw(n,r){switch(n){case"compositionend":return Rm(r);case"keypress":return r.which!==32?null:(Dm=!0,Pm);case"textInput":return n=r.data,n===Pm&&Dm?null:n;default:return null}}function kw(n,r){if(Kr)return n==="compositionend"||!lc&&Lm(n,r)?(n=km(),lo=sc=Hn=null,Kr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Em&&r.locale!=="ko"?null:r.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Sw[n.type]:r==="textarea"}function Im(n,r,o,c){Xe(c),r=vo(r,"onChange"),0<r.length&&(o=new nc("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var Za=null,Xa=null;function Cw(n){Xm(n,0)}function mo(n){var r=ta(n);if(J(r))return n}function Aw(n,r){if(n==="change")return r}var Om=!1;if(m){var cc;if(m){var dc="oninput"in document;if(!dc){var Fm=document.createElement("div");Fm.setAttribute("oninput","return;"),dc=typeof Fm.oninput=="function"}cc=dc}else cc=!1;Om=cc&&(!document.documentMode||9<document.documentMode)}function Um(){Za&&(Za.detachEvent("onpropertychange",Bm),Xa=Za=null)}function Bm(n){if(n.propertyName==="value"&&mo(Xa)){var r=[];Im(r,Xa,n,Qe(n)),ys(Cw,r)}}function Tw(n,r,o){n==="focusin"?(Um(),Za=r,Xa=o,Za.attachEvent("onpropertychange",Bm)):n==="focusout"&&Um()}function Ew(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mo(Xa)}function Pw(n,r){if(n==="click")return mo(r)}function Dw(n,r){if(n==="input"||n==="change")return mo(r)}function Lw(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var en=typeof Object.is=="function"?Object.is:Lw;function ei(n,r){if(en(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!g.call(r,p)||!en(n[p],r[p]))return!1}return!0}function Wm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vm(n,r){var o=Wm(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Wm(o)}}function _m(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?_m(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function $m(){for(var n=window,r=ae();r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ae(n.document)}return r}function uc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Rw(n){var r=$m(),o=n.focusedElem,c=n.selectionRange;if(r!==o&&o&&o.ownerDocument&&_m(o.ownerDocument.documentElement,o)){if(c!==null&&uc(o)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(n,o.value.length);else if(n=(r=o.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var p=o.textContent.length,x=Math.min(c.start,p);c=c.end===void 0?x:Math.min(c.end,p),!n.extend&&x>c&&(p=c,c=x,x=p),p=Vm(o,x);var k=Vm(o,c);p&&k&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==k.node||n.focusOffset!==k.offset)&&(r=r.createRange(),r.setStart(p.node,p.offset),n.removeAllRanges(),x>c?(n.addRange(r),n.extend(k.node,k.offset)):(r.setEnd(k.node,k.offset),n.addRange(r)))}}for(r=[],n=o;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)n=r[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Mw=m&&"documentMode"in document&&11>=document.documentMode,Jr=null,hc=null,ti=null,mc=!1;function zm(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;mc||Jr==null||Jr!==ae(c)||(c=Jr,"selectionStart"in c&&uc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ti&&ei(ti,c)||(ti=c,c=vo(hc,"onSelect"),0<c.length&&(r=new nc("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=Jr)))}function po(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Zr={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},pc={},Hm={};m&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function fo(n){if(pc[n])return pc[n];if(!Zr[n])return n;var r=Zr[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Hm)return pc[n]=r[o];return n}var qm=fo("animationend"),Ym=fo("animationiteration"),Gm=fo("animationstart"),Qm=fo("transitionend"),Km=new Map,Jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(n,r){Km.set(n,r),d(r,[n])}for(var fc=0;fc<Jm.length;fc++){var gc=Jm[fc],Iw=gc.toLowerCase(),Ow=gc[0].toUpperCase()+gc.slice(1);qn(Iw,"on"+Ow)}qn(qm,"onAnimationEnd"),qn(Ym,"onAnimationIteration"),qn(Gm,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(Qm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(si));function Zm(n,r,o){var c=n.type||"unknown-event";n.currentTarget=o,Wa(c,r,void 0,n),n.currentTarget=null}function Xm(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],p=c.event;c=c.listeners;e:{var x=void 0;if(r)for(var k=c.length-1;0<=k;k--){var U=c[k],H=U.instance,ie=U.currentTarget;if(U=U.listener,H!==x&&p.isPropagationStopped())break e;Zm(p,U,ie),x=H}else for(k=0;k<c.length;k++){if(U=c[k],H=U.instance,ie=U.currentTarget,U=U.listener,H!==x&&p.isPropagationStopped())break e;Zm(p,U,ie),x=H}}}if(Nn)throw n=Bn,Nn=!1,Bn=null,n}function ft(n,r){var o=r[kc];o===void 0&&(o=r[kc]=new Set);var c=n+"__bubble";o.has(c)||(ep(r,n,2,!1),o.add(c))}function vc(n,r,o){var c=0;r&&(c|=4),ep(o,n,c,r)}var go="_reactListening"+Math.random().toString(36).slice(2);function ni(n){if(!n[go]){n[go]=!0,i.forEach(function(o){o!=="selectionchange"&&(Fw.has(o)||vc(o,!1,n),vc(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[go]||(r[go]=!0,vc("selectionchange",!1,r))}}function ep(n,r,o,c){switch(Nm(r)){case 1:var p=Jj;break;case 4:p=Zj;break;default:p=ec}o=p.bind(null,r,o,n),p=void 0,!Js||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),c?p!==void 0?n.addEventListener(r,o,{capture:!0,passive:p}):n.addEventListener(r,o,!0):p!==void 0?n.addEventListener(r,o,{passive:p}):n.addEventListener(r,o,!1)}function xc(n,r,o,c,p){var x=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var k=c.tag;if(k===3||k===4){var U=c.stateNode.containerInfo;if(U===p||U.nodeType===8&&U.parentNode===p)break;if(k===4)for(k=c.return;k!==null;){var H=k.tag;if((H===3||H===4)&&(H=k.stateNode.containerInfo,H===p||H.nodeType===8&&H.parentNode===p))return;k=k.return}for(;U!==null;){if(k=jr(U),k===null)return;if(H=k.tag,H===5||H===6){c=x=k;continue e}U=U.parentNode}}c=c.return}ys(function(){var ie=x,ye=Qe(o),we=[];e:{var xe=Km.get(n);if(xe!==void 0){var Le=nc,Fe=n;switch(n){case"keypress":if(co(o)===0)break e;case"keydown":case"keyup":Le=mw;break;case"focusin":Fe="focus",Le=ic;break;case"focusout":Fe="blur",Le=ic;break;case"beforeblur":case"afterblur":Le=ic;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=gw;break;case qm:case Ym:case Gm:Le=rw;break;case Qm:Le=xw;break;case"scroll":Le=Xj;break;case"wheel":Le=jw;break;case"copy":case"cut":case"paste":Le=iw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Tm}var Ue=(r&4)!==0,Rt=!Ue&&n==="scroll",se=Ue?xe!==null?xe+"Capture":null:xe;Ue=[];for(var Z=ie,ne;Z!==null;){ne=Z;var ke=ne.stateNode;if(ne.tag===5&&ke!==null&&(ne=ke,se!==null&&(ke=Nt(Z,se),ke!=null&&Ue.push(ri(Z,ke,ne)))),Rt)break;Z=Z.return}0<Ue.length&&(xe=new Le(xe,Fe,null,o,ye),we.push({event:xe,listeners:Ue}))}}if((r&7)===0){e:{if(xe=n==="mouseover"||n==="pointerover",Le=n==="mouseout"||n==="pointerout",xe&&o!==je&&(Fe=o.relatedTarget||o.fromElement)&&(jr(Fe)||Fe[Cn]))break e;if((Le||xe)&&(xe=ye.window===ye?ye:(xe=ye.ownerDocument)?xe.defaultView||xe.parentWindow:window,Le?(Fe=o.relatedTarget||o.toElement,Le=ie,Fe=Fe?jr(Fe):null,Fe!==null&&(Rt=Bs(Fe),Fe!==Rt||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(Le=null,Fe=ie),Le!==Fe)){if(Ue=Cm,ke="onMouseLeave",se="onMouseEnter",Z="mouse",(n==="pointerout"||n==="pointerover")&&(Ue=Tm,ke="onPointerLeave",se="onPointerEnter",Z="pointer"),Rt=Le==null?xe:ta(Le),ne=Fe==null?xe:ta(Fe),xe=new Ue(ke,Z+"leave",Le,o,ye),xe.target=Rt,xe.relatedTarget=ne,ke=null,jr(ye)===ie&&(Ue=new Ue(se,Z+"enter",Fe,o,ye),Ue.target=ne,Ue.relatedTarget=Rt,ke=Ue),Rt=ke,Le&&Fe)t:{for(Ue=Le,se=Fe,Z=0,ne=Ue;ne;ne=Xr(ne))Z++;for(ne=0,ke=se;ke;ke=Xr(ke))ne++;for(;0<Z-ne;)Ue=Xr(Ue),Z--;for(;0<ne-Z;)se=Xr(se),ne--;for(;Z--;){if(Ue===se||se!==null&&Ue===se.alternate)break t;Ue=Xr(Ue),se=Xr(se)}Ue=null}else Ue=null;Le!==null&&tp(we,xe,Le,Ue,!1),Fe!==null&&Rt!==null&&tp(we,Rt,Fe,Ue,!0)}}e:{if(xe=ie?ta(ie):window,Le=xe.nodeName&&xe.nodeName.toLowerCase(),Le==="select"||Le==="input"&&xe.type==="file")var Be=Aw;else if(Mm(xe))if(Om)Be=Dw;else{Be=Ew;var _e=Tw}else(Le=xe.nodeName)&&Le.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(Be=Pw);if(Be&&(Be=Be(n,ie))){Im(we,Be,o,ye);break e}_e&&_e(n,xe,ie),n==="focusout"&&(_e=xe._wrapperState)&&_e.controlled&&xe.type==="number"&&Ve(xe,"number",xe.value)}switch(_e=ie?ta(ie):window,n){case"focusin":(Mm(_e)||_e.contentEditable==="true")&&(Jr=_e,hc=ie,ti=null);break;case"focusout":ti=hc=Jr=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,zm(we,o,ye);break;case"selectionchange":if(Mw)break;case"keydown":case"keyup":zm(we,o,ye)}var $e;if(lc)e:{switch(n){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Kr?Lm(n,o)&&(Ye="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ye="onCompositionStart");Ye&&(Em&&o.locale!=="ko"&&(Kr||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Kr&&($e=km()):(Hn=ye,sc="value"in Hn?Hn.value:Hn.textContent,Kr=!0)),_e=vo(ie,Ye),0<_e.length&&(Ye=new Am(Ye,n,null,o,ye),we.push({event:Ye,listeners:_e}),$e?Ye.data=$e:($e=Rm(o),$e!==null&&(Ye.data=$e)))),($e=bw?Nw(n,o):kw(n,o))&&(ie=vo(ie,"onBeforeInput"),0<ie.length&&(ye=new Am("onBeforeInput","beforeinput",null,o,ye),we.push({event:ye,listeners:ie}),ye.data=$e))}Xm(we,r)})}function ri(n,r,o){return{instance:n,listener:r,currentTarget:o}}function vo(n,r){for(var o=r+"Capture",c=[];n!==null;){var p=n,x=p.stateNode;p.tag===5&&x!==null&&(p=x,x=Nt(n,o),x!=null&&c.unshift(ri(n,x,p)),x=Nt(n,r),x!=null&&c.push(ri(n,x,p))),n=n.return}return c}function Xr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tp(n,r,o,c,p){for(var x=r._reactName,k=[];o!==null&&o!==c;){var U=o,H=U.alternate,ie=U.stateNode;if(H!==null&&H===c)break;U.tag===5&&ie!==null&&(U=ie,p?(H=Nt(o,x),H!=null&&k.unshift(ri(o,H,U))):p||(H=Nt(o,x),H!=null&&k.push(ri(o,H,U)))),o=o.return}k.length!==0&&n.push({event:r,listeners:k})}var Uw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function sp(n){return(typeof n=="string"?n:""+n).replace(Uw,`
`).replace(Bw,"")}function xo(n,r,o){if(r=sp(r),sp(n)!==r&&o)throw Error(a(425))}function yo(){}var yc=null,jc=null;function wc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,Ww=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,Vw=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(n){return np.resolve(null).then(n).catch(_w)}:bc;function _w(n){setTimeout(function(){throw n})}function Nc(n,r){var o=r,c=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(c===0){n.removeChild(p),Ga(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=p}while(o);Ga(r)}function Yn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function rp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}var ea=Math.random().toString(36).slice(2),un="__reactFiber$"+ea,ai="__reactProps$"+ea,Cn="__reactContainer$"+ea,kc="__reactEvents$"+ea,$w="__reactListeners$"+ea,zw="__reactHandles$"+ea;function jr(n){var r=n[un];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Cn]||o[un]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=rp(n);n!==null;){if(o=n[un])return o;n=rp(n)}return r}n=o,o=n.parentNode}return null}function ii(n){return n=n[un]||n[Cn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ta(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(a(33))}function jo(n){return n[ai]||null}var Sc=[],sa=-1;function Gn(n){return{current:n}}function gt(n){0>sa||(n.current=Sc[sa],Sc[sa]=null,sa--)}function mt(n,r){sa++,Sc[sa]=n.current,n.current=r}var Qn={},os=Gn(Qn),bs=Gn(!1),wr=Qn;function na(n,r){var o=n.type.contextTypes;if(!o)return Qn;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var p={},x;for(x in o)p[x]=r[x];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=p),p}function Ns(n){return n=n.childContextTypes,n!=null}function wo(){gt(bs),gt(os)}function ap(n,r,o){if(os.current!==Qn)throw Error(a(168));mt(os,r),mt(bs,o)}function ip(n,r,o){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var p in c)if(!(p in r))throw Error(a(108,be(n)||"Unknown",p));return R({},o,c)}function bo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qn,wr=os.current,mt(os,n),mt(bs,bs.current),!0}function op(n,r,o){var c=n.stateNode;if(!c)throw Error(a(169));o?(n=ip(n,r,wr),c.__reactInternalMemoizedMergedChildContext=n,gt(bs),gt(os),mt(os,n)):gt(bs),mt(bs,o)}var An=null,No=!1,Cc=!1;function lp(n){An===null?An=[n]:An.push(n)}function Hw(n){No=!0,lp(n)}function Kn(){if(!Cc&&An!==null){Cc=!0;var n=0,r=ut;try{var o=An;for(ut=1;n<o.length;n++){var c=o[n];do c=c(!0);while(c!==null)}An=null,No=!1}catch(p){throw An!==null&&(An=An.slice(n+1)),kn(Sn,Kn),p}finally{ut=r,Cc=!1}}return null}var ra=[],aa=0,ko=null,So=0,Ws=[],Vs=0,br=null,Tn=1,En="";function Nr(n,r){ra[aa++]=So,ra[aa++]=ko,ko=n,So=r}function cp(n,r,o){Ws[Vs++]=Tn,Ws[Vs++]=En,Ws[Vs++]=br,br=n;var c=Tn;n=En;var p=32-Se(c)-1;c&=~(1<<p),o+=1;var x=32-Se(r)+p;if(30<x){var k=p-p%5;x=(c&(1<<k)-1).toString(32),c>>=k,p-=k,Tn=1<<32-Se(r)+p|o<<p|c,En=x+n}else Tn=1<<x|o<<p|c,En=n}function Ac(n){n.return!==null&&(Nr(n,1),cp(n,1,0))}function Tc(n){for(;n===ko;)ko=ra[--aa],ra[aa]=null,So=ra[--aa],ra[aa]=null;for(;n===br;)br=Ws[--Vs],Ws[Vs]=null,En=Ws[--Vs],Ws[Vs]=null,Tn=Ws[--Vs],Ws[Vs]=null}var Rs=null,Ms=null,jt=!1,tn=null;function dp(n,r){var o=Hs(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=n,r=n.deletions,r===null?(n.deletions=[o],n.flags|=16):r.push(o)}function up(n,r){switch(n.tag){case 5:var o=n.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Rs=n,Ms=Yn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Rs=n,Ms=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=br!==null?{id:Tn,overflow:En}:null,n.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Hs(18,null,null,0),o.stateNode=r,o.return=n,n.child=o,Rs=n,Ms=null,!0):!1;default:return!1}}function Ec(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pc(n){if(jt){var r=Ms;if(r){var o=r;if(!up(n,r)){if(Ec(n))throw Error(a(418));r=Yn(o.nextSibling);var c=Rs;r&&up(n,r)?dp(c,o):(n.flags=n.flags&-4097|2,jt=!1,Rs=n)}}else{if(Ec(n))throw Error(a(418));n.flags=n.flags&-4097|2,jt=!1,Rs=n}}}function hp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rs=n}function Co(n){if(n!==Rs)return!1;if(!jt)return hp(n),jt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!wc(n.type,n.memoizedProps)),r&&(r=Ms)){if(Ec(n))throw mp(),Error(a(418));for(;r;)dp(n,r),r=Yn(r.nextSibling)}if(hp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(r===0){Ms=Yn(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}n=n.nextSibling}Ms=null}}else Ms=Rs?Yn(n.stateNode.nextSibling):null;return!0}function mp(){for(var n=Ms;n;)n=Yn(n.nextSibling)}function ia(){Ms=Rs=null,jt=!1}function Dc(n){tn===null?tn=[n]:tn.push(n)}var qw=I.ReactCurrentBatchConfig;function oi(n,r,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(a(309));var c=o.stateNode}if(!c)throw Error(a(147,n));var p=c,x=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===x?r.ref:(r=function(k){var U=p.refs;k===null?delete U[x]:U[x]=k},r._stringRef=x,r)}if(typeof n!="string")throw Error(a(284));if(!o._owner)throw Error(a(290,n))}return n}function Ao(n,r){throw n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function pp(n){var r=n._init;return r(n._payload)}function fp(n){function r(se,Z){if(n){var ne=se.deletions;ne===null?(se.deletions=[Z],se.flags|=16):ne.push(Z)}}function o(se,Z){if(!n)return null;for(;Z!==null;)r(se,Z),Z=Z.sibling;return null}function c(se,Z){for(se=new Map;Z!==null;)Z.key!==null?se.set(Z.key,Z):se.set(Z.index,Z),Z=Z.sibling;return se}function p(se,Z){return se=rr(se,Z),se.index=0,se.sibling=null,se}function x(se,Z,ne){return se.index=ne,n?(ne=se.alternate,ne!==null?(ne=ne.index,ne<Z?(se.flags|=2,Z):ne):(se.flags|=2,Z)):(se.flags|=1048576,Z)}function k(se){return n&&se.alternate===null&&(se.flags|=2),se}function U(se,Z,ne,ke){return Z===null||Z.tag!==6?(Z=bd(ne,se.mode,ke),Z.return=se,Z):(Z=p(Z,ne),Z.return=se,Z)}function H(se,Z,ne,ke){var Be=ne.type;return Be===Q?ye(se,Z,ne.props.children,ke,ne.key):Z!==null&&(Z.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===O&&pp(Be)===Z.type)?(ke=p(Z,ne.props),ke.ref=oi(se,Z,ne),ke.return=se,ke):(ke=Jo(ne.type,ne.key,ne.props,null,se.mode,ke),ke.ref=oi(se,Z,ne),ke.return=se,ke)}function ie(se,Z,ne,ke){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ne.containerInfo||Z.stateNode.implementation!==ne.implementation?(Z=Nd(ne,se.mode,ke),Z.return=se,Z):(Z=p(Z,ne.children||[]),Z.return=se,Z)}function ye(se,Z,ne,ke,Be){return Z===null||Z.tag!==7?(Z=Dr(ne,se.mode,ke,Be),Z.return=se,Z):(Z=p(Z,ne),Z.return=se,Z)}function we(se,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=bd(""+Z,se.mode,ne),Z.return=se,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case W:return ne=Jo(Z.type,Z.key,Z.props,null,se.mode,ne),ne.ref=oi(se,null,Z),ne.return=se,ne;case B:return Z=Nd(Z,se.mode,ne),Z.return=se,Z;case O:var ke=Z._init;return we(se,ke(Z._payload),ne)}if(Ke(Z)||T(Z))return Z=Dr(Z,se.mode,ne,null),Z.return=se,Z;Ao(se,Z)}return null}function xe(se,Z,ne,ke){var Be=Z!==null?Z.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Be!==null?null:U(se,Z,""+ne,ke);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case W:return ne.key===Be?H(se,Z,ne,ke):null;case B:return ne.key===Be?ie(se,Z,ne,ke):null;case O:return Be=ne._init,xe(se,Z,Be(ne._payload),ke)}if(Ke(ne)||T(ne))return Be!==null?null:ye(se,Z,ne,ke,null);Ao(se,ne)}return null}function Le(se,Z,ne,ke,Be){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return se=se.get(ne)||null,U(Z,se,""+ke,Be);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case W:return se=se.get(ke.key===null?ne:ke.key)||null,H(Z,se,ke,Be);case B:return se=se.get(ke.key===null?ne:ke.key)||null,ie(Z,se,ke,Be);case O:var _e=ke._init;return Le(se,Z,ne,_e(ke._payload),Be)}if(Ke(ke)||T(ke))return se=se.get(ne)||null,ye(Z,se,ke,Be,null);Ao(Z,ke)}return null}function Fe(se,Z,ne,ke){for(var Be=null,_e=null,$e=Z,Ye=Z=0,Kt=null;$e!==null&&Ye<ne.length;Ye++){$e.index>Ye?(Kt=$e,$e=null):Kt=$e.sibling;var ot=xe(se,$e,ne[Ye],ke);if(ot===null){$e===null&&($e=Kt);break}n&&$e&&ot.alternate===null&&r(se,$e),Z=x(ot,Z,Ye),_e===null?Be=ot:_e.sibling=ot,_e=ot,$e=Kt}if(Ye===ne.length)return o(se,$e),jt&&Nr(se,Ye),Be;if($e===null){for(;Ye<ne.length;Ye++)$e=we(se,ne[Ye],ke),$e!==null&&(Z=x($e,Z,Ye),_e===null?Be=$e:_e.sibling=$e,_e=$e);return jt&&Nr(se,Ye),Be}for($e=c(se,$e);Ye<ne.length;Ye++)Kt=Le($e,se,Ye,ne[Ye],ke),Kt!==null&&(n&&Kt.alternate!==null&&$e.delete(Kt.key===null?Ye:Kt.key),Z=x(Kt,Z,Ye),_e===null?Be=Kt:_e.sibling=Kt,_e=Kt);return n&&$e.forEach(function(ar){return r(se,ar)}),jt&&Nr(se,Ye),Be}function Ue(se,Z,ne,ke){var Be=T(ne);if(typeof Be!="function")throw Error(a(150));if(ne=Be.call(ne),ne==null)throw Error(a(151));for(var _e=Be=null,$e=Z,Ye=Z=0,Kt=null,ot=ne.next();$e!==null&&!ot.done;Ye++,ot=ne.next()){$e.index>Ye?(Kt=$e,$e=null):Kt=$e.sibling;var ar=xe(se,$e,ot.value,ke);if(ar===null){$e===null&&($e=Kt);break}n&&$e&&ar.alternate===null&&r(se,$e),Z=x(ar,Z,Ye),_e===null?Be=ar:_e.sibling=ar,_e=ar,$e=Kt}if(ot.done)return o(se,$e),jt&&Nr(se,Ye),Be;if($e===null){for(;!ot.done;Ye++,ot=ne.next())ot=we(se,ot.value,ke),ot!==null&&(Z=x(ot,Z,Ye),_e===null?Be=ot:_e.sibling=ot,_e=ot);return jt&&Nr(se,Ye),Be}for($e=c(se,$e);!ot.done;Ye++,ot=ne.next())ot=Le($e,se,Ye,ot.value,ke),ot!==null&&(n&&ot.alternate!==null&&$e.delete(ot.key===null?Ye:ot.key),Z=x(ot,Z,Ye),_e===null?Be=ot:_e.sibling=ot,_e=ot);return n&&$e.forEach(function(S0){return r(se,S0)}),jt&&Nr(se,Ye),Be}function Rt(se,Z,ne,ke){if(typeof ne=="object"&&ne!==null&&ne.type===Q&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case W:e:{for(var Be=ne.key,_e=Z;_e!==null;){if(_e.key===Be){if(Be=ne.type,Be===Q){if(_e.tag===7){o(se,_e.sibling),Z=p(_e,ne.props.children),Z.return=se,se=Z;break e}}else if(_e.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===O&&pp(Be)===_e.type){o(se,_e.sibling),Z=p(_e,ne.props),Z.ref=oi(se,_e,ne),Z.return=se,se=Z;break e}o(se,_e);break}else r(se,_e);_e=_e.sibling}ne.type===Q?(Z=Dr(ne.props.children,se.mode,ke,ne.key),Z.return=se,se=Z):(ke=Jo(ne.type,ne.key,ne.props,null,se.mode,ke),ke.ref=oi(se,Z,ne),ke.return=se,se=ke)}return k(se);case B:e:{for(_e=ne.key;Z!==null;){if(Z.key===_e)if(Z.tag===4&&Z.stateNode.containerInfo===ne.containerInfo&&Z.stateNode.implementation===ne.implementation){o(se,Z.sibling),Z=p(Z,ne.children||[]),Z.return=se,se=Z;break e}else{o(se,Z);break}else r(se,Z);Z=Z.sibling}Z=Nd(ne,se.mode,ke),Z.return=se,se=Z}return k(se);case O:return _e=ne._init,Rt(se,Z,_e(ne._payload),ke)}if(Ke(ne))return Fe(se,Z,ne,ke);if(T(ne))return Ue(se,Z,ne,ke);Ao(se,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,Z!==null&&Z.tag===6?(o(se,Z.sibling),Z=p(Z,ne),Z.return=se,se=Z):(o(se,Z),Z=bd(ne,se.mode,ke),Z.return=se,se=Z),k(se)):o(se,Z)}return Rt}var oa=fp(!0),gp=fp(!1),To=Gn(null),Eo=null,la=null,Lc=null;function Rc(){Lc=la=Eo=null}function Mc(n){var r=To.current;gt(To),n._currentValue=r}function Ic(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function ca(n,r){Eo=n,Lc=la=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(ks=!0),n.firstContext=null)}function _s(n){var r=n._currentValue;if(Lc!==n)if(n={context:n,memoizedValue:r,next:null},la===null){if(Eo===null)throw Error(a(308));la=n,Eo.dependencies={lanes:0,firstContext:n}}else la=la.next=n;return r}var kr=null;function Oc(n){kr===null?kr=[n]:kr.push(n)}function vp(n,r,o,c){var p=r.interleaved;return p===null?(o.next=o,Oc(r)):(o.next=p.next,p.next=o),r.interleaved=o,Pn(n,c)}function Pn(n,r){n.lanes|=r;var o=n.alternate;for(o!==null&&(o.lanes|=r),o=n,n=n.return;n!==null;)n.childLanes|=r,o=n.alternate,o!==null&&(o.childLanes|=r),o=n,n=n.return;return o.tag===3?o.stateNode:null}var Jn=!1;function Fc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Dn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Zn(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var p=c.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),c.pending=r,Pn(n,o)}return p=c.interleaved,p===null?(r.next=r,Oc(c)):(r.next=p.next,p.next=r),c.interleaved=r,Pn(n,o)}function Po(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Jl(n,o)}}function yp(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var k={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};x===null?p=x=k:x=x.next=k,o=o.next}while(o!==null);x===null?p=x=r:x=x.next=r}else p=x=r;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:c.shared,effects:c.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}function Do(n,r,o,c){var p=n.updateQueue;Jn=!1;var x=p.firstBaseUpdate,k=p.lastBaseUpdate,U=p.shared.pending;if(U!==null){p.shared.pending=null;var H=U,ie=H.next;H.next=null,k===null?x=ie:k.next=ie,k=H;var ye=n.alternate;ye!==null&&(ye=ye.updateQueue,U=ye.lastBaseUpdate,U!==k&&(U===null?ye.firstBaseUpdate=ie:U.next=ie,ye.lastBaseUpdate=H))}if(x!==null){var we=p.baseState;k=0,ye=ie=H=null,U=x;do{var xe=U.lane,Le=U.eventTime;if((c&xe)===xe){ye!==null&&(ye=ye.next={eventTime:Le,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Fe=n,Ue=U;switch(xe=r,Le=o,Ue.tag){case 1:if(Fe=Ue.payload,typeof Fe=="function"){we=Fe.call(Le,we,xe);break e}we=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ue.payload,xe=typeof Fe=="function"?Fe.call(Le,we,xe):Fe,xe==null)break e;we=R({},we,xe);break e;case 2:Jn=!0}}U.callback!==null&&U.lane!==0&&(n.flags|=64,xe=p.effects,xe===null?p.effects=[U]:xe.push(U))}else Le={eventTime:Le,lane:xe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ye===null?(ie=ye=Le,H=we):ye=ye.next=Le,k|=xe;if(U=U.next,U===null){if(U=p.shared.pending,U===null)break;xe=U,U=xe.next,xe.next=null,p.lastBaseUpdate=xe,p.shared.pending=null}}while(!0);if(ye===null&&(H=we),p.baseState=H,p.firstBaseUpdate=ie,p.lastBaseUpdate=ye,r=p.shared.interleaved,r!==null){p=r;do k|=p.lane,p=p.next;while(p!==r)}else x===null&&(p.shared.lanes=0);Ar|=k,n.lanes=k,n.memoizedState=we}}function jp(n,r,o){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],p=c.callback;if(p!==null){if(c.callback=null,c=o,typeof p!="function")throw Error(a(191,p));p.call(c)}}}var li={},hn=Gn(li),ci=Gn(li),di=Gn(li);function Sr(n){if(n===li)throw Error(a(174));return n}function Uc(n,r){switch(mt(di,r),mt(ci,n),mt(hn,li),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Us(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Us(r,n)}gt(hn),mt(hn,r)}function da(){gt(hn),gt(ci),gt(di)}function wp(n){Sr(di.current);var r=Sr(hn.current),o=Us(r,n.type);r!==o&&(mt(ci,n),mt(hn,o))}function Bc(n){ci.current===n&&(gt(hn),gt(ci))}var St=Gn(0);function Lo(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wc=[];function Vc(){for(var n=0;n<Wc.length;n++)Wc[n]._workInProgressVersionPrimary=null;Wc.length=0}var Ro=I.ReactCurrentDispatcher,_c=I.ReactCurrentBatchConfig,Cr=0,Ct=null,$t=null,Gt=null,Mo=!1,ui=!1,hi=0,Yw=0;function ls(){throw Error(a(321))}function $c(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!en(n[o],r[o]))return!1;return!0}function zc(n,r,o,c,p,x){if(Cr=x,Ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ro.current=n===null||n.memoizedState===null?Jw:Zw,n=o(c,p),ui){x=0;do{if(ui=!1,hi=0,25<=x)throw Error(a(301));x+=1,Gt=$t=null,r.updateQueue=null,Ro.current=Xw,n=o(c,p)}while(ui)}if(Ro.current=Fo,r=$t!==null&&$t.next!==null,Cr=0,Gt=$t=Ct=null,Mo=!1,r)throw Error(a(300));return n}function Hc(){var n=hi!==0;return hi=0,n}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ct.memoizedState=Gt=n:Gt=Gt.next=n,Gt}function $s(){if($t===null){var n=Ct.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var r=Gt===null?Ct.memoizedState:Gt.next;if(r!==null)Gt=r,$t=n;else{if(n===null)throw Error(a(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Gt===null?Ct.memoizedState=Gt=n:Gt=Gt.next=n}return Gt}function mi(n,r){return typeof r=="function"?r(n):r}function qc(n){var r=$s(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var c=$t,p=c.baseQueue,x=o.pending;if(x!==null){if(p!==null){var k=p.next;p.next=x.next,x.next=k}c.baseQueue=p=x,o.pending=null}if(p!==null){x=p.next,c=c.baseState;var U=k=null,H=null,ie=x;do{var ye=ie.lane;if((Cr&ye)===ye)H!==null&&(H=H.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),c=ie.hasEagerState?ie.eagerState:n(c,ie.action);else{var we={lane:ye,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};H===null?(U=H=we,k=c):H=H.next=we,Ct.lanes|=ye,Ar|=ye}ie=ie.next}while(ie!==null&&ie!==x);H===null?k=c:H.next=U,en(c,r.memoizedState)||(ks=!0),r.memoizedState=c,r.baseState=k,r.baseQueue=H,o.lastRenderedState=c}if(n=o.interleaved,n!==null){p=n;do x=p.lane,Ct.lanes|=x,Ar|=x,p=p.next;while(p!==n)}else p===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Yc(n){var r=$s(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var c=o.dispatch,p=o.pending,x=r.memoizedState;if(p!==null){o.pending=null;var k=p=p.next;do x=n(x,k.action),k=k.next;while(k!==p);en(x,r.memoizedState)||(ks=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),o.lastRenderedState=x}return[x,c]}function bp(){}function Np(n,r){var o=Ct,c=$s(),p=r(),x=!en(c.memoizedState,p);if(x&&(c.memoizedState=p,ks=!0),c=c.queue,Gc(Cp.bind(null,o,c,n),[n]),c.getSnapshot!==r||x||Gt!==null&&Gt.memoizedState.tag&1){if(o.flags|=2048,pi(9,Sp.bind(null,o,c,p,r),void 0,null),Qt===null)throw Error(a(349));(Cr&30)!==0||kp(o,r,p)}return p}function kp(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ct.updateQueue,r===null?(r={lastEffect:null,stores:null},Ct.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Sp(n,r,o,c){r.value=o,r.getSnapshot=c,Ap(r)&&Tp(n)}function Cp(n,r,o){return o(function(){Ap(r)&&Tp(n)})}function Ap(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!en(n,o)}catch{return!0}}function Tp(n){var r=Pn(n,1);r!==null&&an(r,n,1,-1)}function Ep(n){var r=mn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:n},r.queue=n,n=n.dispatch=Kw.bind(null,Ct,n),[r.memoizedState,n]}function pi(n,r,o,c){return n={tag:n,create:r,destroy:o,deps:c,next:null},r=Ct.updateQueue,r===null?(r={lastEffect:null,stores:null},Ct.updateQueue=r,r.lastEffect=n.next=n):(o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n)),n}function Pp(){return $s().memoizedState}function Io(n,r,o,c){var p=mn();Ct.flags|=n,p.memoizedState=pi(1|r,o,void 0,c===void 0?null:c)}function Oo(n,r,o,c){var p=$s();c=c===void 0?null:c;var x=void 0;if($t!==null){var k=$t.memoizedState;if(x=k.destroy,c!==null&&$c(c,k.deps)){p.memoizedState=pi(r,o,x,c);return}}Ct.flags|=n,p.memoizedState=pi(1|r,o,x,c)}function Dp(n,r){return Io(8390656,8,n,r)}function Gc(n,r){return Oo(2048,8,n,r)}function Lp(n,r){return Oo(4,2,n,r)}function Rp(n,r){return Oo(4,4,n,r)}function Mp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ip(n,r,o){return o=o!=null?o.concat([n]):null,Oo(4,4,Mp.bind(null,r,n),o)}function Qc(){}function Op(n,r){var o=$s();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&$c(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function Fp(n,r){var o=$s();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&$c(r,c[1])?c[0]:(n=n(),o.memoizedState=[n,r],n)}function Up(n,r,o){return(Cr&21)===0?(n.baseState&&(n.baseState=!1,ks=!0),n.memoizedState=o):(en(o,r)||(o=Yr(),Ct.lanes|=o,Ar|=o,n.baseState=!0),r)}function Gw(n,r){var o=ut;ut=o!==0&&4>o?o:4,n(!0);var c=_c.transition;_c.transition={};try{n(!1),r()}finally{ut=o,_c.transition=c}}function Bp(){return $s().memoizedState}function Qw(n,r,o){var c=sr(n);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Wp(n))Vp(r,o);else if(o=vp(n,r,o,c),o!==null){var p=gs();an(o,n,c,p),_p(o,r,c)}}function Kw(n,r,o){var c=sr(n),p={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Wp(n))Vp(r,p);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var k=r.lastRenderedState,U=x(k,o);if(p.hasEagerState=!0,p.eagerState=U,en(U,k)){var H=r.interleaved;H===null?(p.next=p,Oc(r)):(p.next=H.next,H.next=p),r.interleaved=p;return}}catch{}finally{}o=vp(n,r,p,c),o!==null&&(p=gs(),an(o,n,c,p),_p(o,r,c))}}function Wp(n){var r=n.alternate;return n===Ct||r!==null&&r===Ct}function Vp(n,r){ui=Mo=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function _p(n,r,o){if((o&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Jl(n,o)}}var Fo={readContext:_s,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useInsertionEffect:ls,useLayoutEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useMutableSource:ls,useSyncExternalStore:ls,useId:ls,unstable_isNewReconciler:!1},Jw={readContext:_s,useCallback:function(n,r){return mn().memoizedState=[n,r===void 0?null:r],n},useContext:_s,useEffect:Dp,useImperativeHandle:function(n,r,o){return o=o!=null?o.concat([n]):null,Io(4194308,4,Mp.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Io(4194308,4,n,r)},useInsertionEffect:function(n,r){return Io(4,2,n,r)},useMemo:function(n,r){var o=mn();return r=r===void 0?null:r,n=n(),o.memoizedState=[n,r],n},useReducer:function(n,r,o){var c=mn();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Qw.bind(null,Ct,n),[c.memoizedState,n]},useRef:function(n){var r=mn();return n={current:n},r.memoizedState=n},useState:Ep,useDebugValue:Qc,useDeferredValue:function(n){return mn().memoizedState=n},useTransition:function(){var n=Ep(!1),r=n[0];return n=Gw.bind(null,n[1]),mn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,o){var c=Ct,p=mn();if(jt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),Qt===null)throw Error(a(349));(Cr&30)!==0||kp(c,r,o)}p.memoizedState=o;var x={value:o,getSnapshot:r};return p.queue=x,Dp(Cp.bind(null,c,x,n),[n]),c.flags|=2048,pi(9,Sp.bind(null,c,x,o,r),void 0,null),o},useId:function(){var n=mn(),r=Qt.identifierPrefix;if(jt){var o=En,c=Tn;o=(c&~(1<<32-Se(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=hi++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Yw++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Zw={readContext:_s,useCallback:Op,useContext:_s,useEffect:Gc,useImperativeHandle:Ip,useInsertionEffect:Lp,useLayoutEffect:Rp,useMemo:Fp,useReducer:qc,useRef:Pp,useState:function(){return qc(mi)},useDebugValue:Qc,useDeferredValue:function(n){var r=$s();return Up(r,$t.memoizedState,n)},useTransition:function(){var n=qc(mi)[0],r=$s().memoizedState;return[n,r]},useMutableSource:bp,useSyncExternalStore:Np,useId:Bp,unstable_isNewReconciler:!1},Xw={readContext:_s,useCallback:Op,useContext:_s,useEffect:Gc,useImperativeHandle:Ip,useInsertionEffect:Lp,useLayoutEffect:Rp,useMemo:Fp,useReducer:Yc,useRef:Pp,useState:function(){return Yc(mi)},useDebugValue:Qc,useDeferredValue:function(n){var r=$s();return $t===null?r.memoizedState=n:Up(r,$t.memoizedState,n)},useTransition:function(){var n=Yc(mi)[0],r=$s().memoizedState;return[n,r]},useMutableSource:bp,useSyncExternalStore:Np,useId:Bp,unstable_isNewReconciler:!1};function sn(n,r){if(n&&n.defaultProps){r=R({},r),n=n.defaultProps;for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}return r}function Kc(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:R({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Uo={isMounted:function(n){return(n=n._reactInternals)?Bs(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var c=gs(),p=sr(n),x=Dn(c,p);x.payload=r,o!=null&&(x.callback=o),r=Zn(n,x,p),r!==null&&(an(r,n,p,c),Po(r,n,p))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=gs(),p=sr(n),x=Dn(c,p);x.tag=1,x.payload=r,o!=null&&(x.callback=o),r=Zn(n,x,p),r!==null&&(an(r,n,p,c),Po(r,n,p))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=gs(),c=sr(n),p=Dn(o,c);p.tag=2,r!=null&&(p.callback=r),r=Zn(n,p,c),r!==null&&(an(r,n,c,o),Po(r,n,c))}};function $p(n,r,o,c,p,x,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,x,k):r.prototype&&r.prototype.isPureReactComponent?!ei(o,c)||!ei(p,x):!0}function zp(n,r,o){var c=!1,p=Qn,x=r.contextType;return typeof x=="object"&&x!==null?x=_s(x):(p=Ns(r)?wr:os.current,c=r.contextTypes,x=(c=c!=null)?na(n,p):Qn),r=new r(o,x),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Uo,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=x),r}function Hp(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Uo.enqueueReplaceState(r,r.state,null)}function Jc(n,r,o,c){var p=n.stateNode;p.props=o,p.state=n.memoizedState,p.refs={},Fc(n);var x=r.contextType;typeof x=="object"&&x!==null?p.context=_s(x):(x=Ns(r)?wr:os.current,p.context=na(n,x)),p.state=n.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Kc(n,r,x,o),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(r=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),r!==p.state&&Uo.enqueueReplaceState(p,p.state,null),Do(n,o,p,c),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function ua(n,r){try{var o="",c=r;do o+=K(c),c=c.return;while(c);var p=o}catch(x){p=`
Error generating stack: `+x.message+`
`+x.stack}return{value:n,source:r,stack:p,digest:null}}function Zc(n,r,o){return{value:n,source:null,stack:o??null,digest:r??null}}function Xc(n,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var e0=typeof WeakMap=="function"?WeakMap:Map;function qp(n,r,o){o=Dn(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){Ho||(Ho=!0,pd=c),Xc(n,r)},o}function Yp(n,r,o){o=Dn(-1,o),o.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var p=r.value;o.payload=function(){return c(p)},o.callback=function(){Xc(n,r)}}var x=n.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(o.callback=function(){Xc(n,r),typeof c!="function"&&(er===null?er=new Set([this]):er.add(this));var k=r.stack;this.componentDidCatch(r.value,{componentStack:k!==null?k:""})}),o}function Gp(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new e0;var p=new Set;c.set(r,p)}else p=c.get(r),p===void 0&&(p=new Set,c.set(r,p));p.has(o)||(p.add(o),n=p0.bind(null,n,r,o),r.then(n,n))}function Qp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Kp(n,r,o,c,p){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=Dn(-1,1),r.tag=2,Zn(o,r,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var t0=I.ReactCurrentOwner,ks=!1;function fs(n,r,o,c){r.child=n===null?gp(r,null,o,c):oa(r,n.child,o,c)}function Jp(n,r,o,c,p){o=o.render;var x=r.ref;return ca(r,p),c=zc(n,r,o,c,x,p),o=Hc(),n!==null&&!ks?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Ln(n,r,p)):(jt&&o&&Ac(r),r.flags|=1,fs(n,r,c,p),r.child)}function Zp(n,r,o,c,p){if(n===null){var x=o.type;return typeof x=="function"&&!wd(x)&&x.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=x,Xp(n,r,x,c,p)):(n=Jo(o.type,null,c,r,r.mode,p),n.ref=r.ref,n.return=r,r.child=n)}if(x=n.child,(n.lanes&p)===0){var k=x.memoizedProps;if(o=o.compare,o=o!==null?o:ei,o(k,c)&&n.ref===r.ref)return Ln(n,r,p)}return r.flags|=1,n=rr(x,c),n.ref=r.ref,n.return=r,r.child=n}function Xp(n,r,o,c,p){if(n!==null){var x=n.memoizedProps;if(ei(x,c)&&n.ref===r.ref)if(ks=!1,r.pendingProps=c=x,(n.lanes&p)!==0)(n.flags&131072)!==0&&(ks=!0);else return r.lanes=n.lanes,Ln(n,r,p)}return ed(n,r,o,c,p)}function ef(n,r,o){var c=r.pendingProps,p=c.children,x=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(ma,Is),Is|=o;else{if((o&1073741824)===0)return n=x!==null?x.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,mt(ma,Is),Is|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=x!==null?x.baseLanes:o,mt(ma,Is),Is|=c}else x!==null?(c=x.baseLanes|o,r.memoizedState=null):c=o,mt(ma,Is),Is|=c;return fs(n,r,p,o),r.child}function tf(n,r){var o=r.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function ed(n,r,o,c,p){var x=Ns(o)?wr:os.current;return x=na(r,x),ca(r,p),o=zc(n,r,o,c,x,p),c=Hc(),n!==null&&!ks?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Ln(n,r,p)):(jt&&c&&Ac(r),r.flags|=1,fs(n,r,o,p),r.child)}function sf(n,r,o,c,p){if(Ns(o)){var x=!0;bo(r)}else x=!1;if(ca(r,p),r.stateNode===null)Wo(n,r),zp(r,o,c),Jc(r,o,c,p),c=!0;else if(n===null){var k=r.stateNode,U=r.memoizedProps;k.props=U;var H=k.context,ie=o.contextType;typeof ie=="object"&&ie!==null?ie=_s(ie):(ie=Ns(o)?wr:os.current,ie=na(r,ie));var ye=o.getDerivedStateFromProps,we=typeof ye=="function"||typeof k.getSnapshotBeforeUpdate=="function";we||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(U!==c||H!==ie)&&Hp(r,k,c,ie),Jn=!1;var xe=r.memoizedState;k.state=xe,Do(r,c,k,p),H=r.memoizedState,U!==c||xe!==H||bs.current||Jn?(typeof ye=="function"&&(Kc(r,o,ye,c),H=r.memoizedState),(U=Jn||$p(r,o,U,c,xe,H,ie))?(we||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(r.flags|=4194308)):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=H),k.props=c,k.state=H,k.context=ie,c=U):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{k=r.stateNode,xp(n,r),U=r.memoizedProps,ie=r.type===r.elementType?U:sn(r.type,U),k.props=ie,we=r.pendingProps,xe=k.context,H=o.contextType,typeof H=="object"&&H!==null?H=_s(H):(H=Ns(o)?wr:os.current,H=na(r,H));var Le=o.getDerivedStateFromProps;(ye=typeof Le=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(U!==we||xe!==H)&&Hp(r,k,c,H),Jn=!1,xe=r.memoizedState,k.state=xe,Do(r,c,k,p);var Fe=r.memoizedState;U!==we||xe!==Fe||bs.current||Jn?(typeof Le=="function"&&(Kc(r,o,Le,c),Fe=r.memoizedState),(ie=Jn||$p(r,o,ie,c,xe,Fe,H)||!1)?(ye||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(c,Fe,H),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(c,Fe,H)),typeof k.componentDidUpdate=="function"&&(r.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof k.componentDidUpdate!="function"||U===n.memoizedProps&&xe===n.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||U===n.memoizedProps&&xe===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Fe),k.props=c,k.state=Fe,k.context=H,c=ie):(typeof k.componentDidUpdate!="function"||U===n.memoizedProps&&xe===n.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||U===n.memoizedProps&&xe===n.memoizedState||(r.flags|=1024),c=!1)}return td(n,r,o,c,x,p)}function td(n,r,o,c,p,x){tf(n,r);var k=(r.flags&128)!==0;if(!c&&!k)return p&&op(r,o,!1),Ln(n,r,x);c=r.stateNode,t0.current=r;var U=k&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&k?(r.child=oa(r,n.child,null,x),r.child=oa(r,null,U,x)):fs(n,r,U,x),r.memoizedState=c.state,p&&op(r,o,!0),r.child}function nf(n){var r=n.stateNode;r.pendingContext?ap(n,r.pendingContext,r.pendingContext!==r.context):r.context&&ap(n,r.context,!1),Uc(n,r.containerInfo)}function rf(n,r,o,c,p){return ia(),Dc(p),r.flags|=256,fs(n,r,o,c),r.child}var sd={dehydrated:null,treeContext:null,retryLane:0};function nd(n){return{baseLanes:n,cachePool:null,transitions:null}}function af(n,r,o){var c=r.pendingProps,p=St.current,x=!1,k=(r.flags&128)!==0,U;if((U=k)||(U=n!==null&&n.memoizedState===null?!1:(p&2)!==0),U?(x=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),mt(St,p&1),n===null)return Pc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(k=c.children,n=c.fallback,x?(c=r.mode,x=r.child,k={mode:"hidden",children:k},(c&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=k):x=Zo(k,c,0,null),n=Dr(n,c,o,null),x.return=r,n.return=r,x.sibling=n,r.child=x,r.child.memoizedState=nd(o),r.memoizedState=sd,n):rd(r,k));if(p=n.memoizedState,p!==null&&(U=p.dehydrated,U!==null))return s0(n,r,k,c,U,p,o);if(x){x=c.fallback,k=r.mode,p=n.child,U=p.sibling;var H={mode:"hidden",children:c.children};return(k&1)===0&&r.child!==p?(c=r.child,c.childLanes=0,c.pendingProps=H,r.deletions=null):(c=rr(p,H),c.subtreeFlags=p.subtreeFlags&14680064),U!==null?x=rr(U,x):(x=Dr(x,k,o,null),x.flags|=2),x.return=r,c.return=r,c.sibling=x,r.child=c,c=x,x=r.child,k=n.child.memoizedState,k=k===null?nd(o):{baseLanes:k.baseLanes|o,cachePool:null,transitions:k.transitions},x.memoizedState=k,x.childLanes=n.childLanes&~o,r.memoizedState=sd,c}return x=n.child,n=x.sibling,c=rr(x,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=o),c.return=r,c.sibling=null,n!==null&&(o=r.deletions,o===null?(r.deletions=[n],r.flags|=16):o.push(n)),r.child=c,r.memoizedState=null,c}function rd(n,r){return r=Zo({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Bo(n,r,o,c){return c!==null&&Dc(c),oa(r,n.child,null,o),n=rd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function s0(n,r,o,c,p,x,k){if(o)return r.flags&256?(r.flags&=-257,c=Zc(Error(a(422))),Bo(n,r,k,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(x=c.fallback,p=r.mode,c=Zo({mode:"visible",children:c.children},p,0,null),x=Dr(x,p,k,null),x.flags|=2,c.return=r,x.return=r,c.sibling=x,r.child=c,(r.mode&1)!==0&&oa(r,n.child,null,k),r.child.memoizedState=nd(k),r.memoizedState=sd,x);if((r.mode&1)===0)return Bo(n,r,k,null);if(p.data==="$!"){if(c=p.nextSibling&&p.nextSibling.dataset,c)var U=c.dgst;return c=U,x=Error(a(419)),c=Zc(x,c,void 0),Bo(n,r,k,c)}if(U=(k&n.childLanes)!==0,ks||U){if(c=Qt,c!==null){switch(k&-k){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(c.suspendedLanes|k))!==0?0:p,p!==0&&p!==x.retryLane&&(x.retryLane=p,Pn(n,p),an(c,n,p,-1))}return jd(),c=Zc(Error(a(421))),Bo(n,r,k,c)}return p.data==="$?"?(r.flags|=128,r.child=n.child,r=f0.bind(null,n),p._reactRetry=r,null):(n=x.treeContext,Ms=Yn(p.nextSibling),Rs=r,jt=!0,tn=null,n!==null&&(Ws[Vs++]=Tn,Ws[Vs++]=En,Ws[Vs++]=br,Tn=n.id,En=n.overflow,br=r),r=rd(r,c.children),r.flags|=4096,r)}function of(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Ic(n.return,r,o)}function ad(n,r,o,c,p){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=p)}function lf(n,r,o){var c=r.pendingProps,p=c.revealOrder,x=c.tail;if(fs(n,r,c.children,o),c=St.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&of(n,o,r);else if(n.tag===19)of(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(mt(St,c),(r.mode&1)===0)r.memoizedState=null;else switch(p){case"forwards":for(o=r.child,p=null;o!==null;)n=o.alternate,n!==null&&Lo(n)===null&&(p=o),o=o.sibling;o=p,o===null?(p=r.child,r.child=null):(p=o.sibling,o.sibling=null),ad(r,!1,p,o,x);break;case"backwards":for(o=null,p=r.child,r.child=null;p!==null;){if(n=p.alternate,n!==null&&Lo(n)===null){r.child=p;break}n=p.sibling,p.sibling=o,o=p,p=n}ad(r,!0,o,null,x);break;case"together":ad(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Wo(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Ln(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ar|=r.lanes,(o&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,o=rr(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=rr(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function n0(n,r,o){switch(r.tag){case 3:nf(r),ia();break;case 5:wp(r);break;case 1:Ns(r.type)&&bo(r);break;case 4:Uc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,p=r.memoizedProps.value;mt(To,c._currentValue),c._currentValue=p;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(mt(St,St.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?af(n,r,o):(mt(St,St.current&1),n=Ln(n,r,o),n!==null?n.sibling:null);mt(St,St.current&1);break;case 19:if(c=(o&r.childLanes)!==0,(n.flags&128)!==0){if(c)return lf(n,r,o);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),mt(St,St.current),c)break;return null;case 22:case 23:return r.lanes=0,ef(n,r,o)}return Ln(n,r,o)}var cf,id,df,uf;cf=function(n,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},id=function(){},df=function(n,r,o,c){var p=n.memoizedProps;if(p!==c){n=r.stateNode,Sr(hn.current);var x=null;switch(o){case"input":p=ge(n,p),c=ge(n,c),x=[];break;case"select":p=R({},p,{value:void 0}),c=R({},c,{value:void 0}),x=[];break;case"textarea":p=rs(n,p),c=rs(n,c),x=[];break;default:typeof p.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=yo)}ve(o,c);var k;o=null;for(ie in p)if(!c.hasOwnProperty(ie)&&p.hasOwnProperty(ie)&&p[ie]!=null)if(ie==="style"){var U=p[ie];for(k in U)U.hasOwnProperty(k)&&(o||(o={}),o[k]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(l.hasOwnProperty(ie)?x||(x=[]):(x=x||[]).push(ie,null));for(ie in c){var H=c[ie];if(U=p?.[ie],c.hasOwnProperty(ie)&&H!==U&&(H!=null||U!=null))if(ie==="style")if(U){for(k in U)!U.hasOwnProperty(k)||H&&H.hasOwnProperty(k)||(o||(o={}),o[k]="");for(k in H)H.hasOwnProperty(k)&&U[k]!==H[k]&&(o||(o={}),o[k]=H[k])}else o||(x||(x=[]),x.push(ie,o)),o=H;else ie==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,U=U?U.__html:void 0,H!=null&&U!==H&&(x=x||[]).push(ie,H)):ie==="children"?typeof H!="string"&&typeof H!="number"||(x=x||[]).push(ie,""+H):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(l.hasOwnProperty(ie)?(H!=null&&ie==="onScroll"&&ft("scroll",n),x||U===H||(x=[])):(x=x||[]).push(ie,H))}o&&(x=x||[]).push("style",o);var ie=x;(r.updateQueue=ie)&&(r.flags|=4)}},uf=function(n,r,o,c){o!==c&&(r.flags|=4)};function fi(n,r){if(!jt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function cs(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var p=n.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&14680064,c|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function r0(n,r,o){var c=r.pendingProps;switch(Tc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(r),null;case 1:return Ns(r.type)&&wo(),cs(r),null;case 3:return c=r.stateNode,da(),gt(bs),gt(os),Vc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Co(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,tn!==null&&(vd(tn),tn=null))),id(n,r),cs(r),null;case 5:Bc(r);var p=Sr(di.current);if(o=r.type,n!==null&&r.stateNode!=null)df(n,r,o,c,p),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(a(166));return cs(r),null}if(n=Sr(hn.current),Co(r)){c=r.stateNode,o=r.type;var x=r.memoizedProps;switch(c[un]=r,c[ai]=x,n=(r.mode&1)!==0,o){case"dialog":ft("cancel",c),ft("close",c);break;case"iframe":case"object":case"embed":ft("load",c);break;case"video":case"audio":for(p=0;p<si.length;p++)ft(si[p],c);break;case"source":ft("error",c);break;case"img":case"image":case"link":ft("error",c),ft("load",c);break;case"details":ft("toggle",c);break;case"input":We(c,x),ft("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!x.multiple},ft("invalid",c);break;case"textarea":He(c,x),ft("invalid",c)}ve(o,x),p=null;for(var k in x)if(x.hasOwnProperty(k)){var U=x[k];k==="children"?typeof U=="string"?c.textContent!==U&&(x.suppressHydrationWarning!==!0&&xo(c.textContent,U,n),p=["children",U]):typeof U=="number"&&c.textContent!==""+U&&(x.suppressHydrationWarning!==!0&&xo(c.textContent,U,n),p=["children",""+U]):l.hasOwnProperty(k)&&U!=null&&k==="onScroll"&&ft("scroll",c)}switch(o){case"input":V(c),vt(c,x,!0);break;case"textarea":V(c),Jt(c);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(c.onclick=yo)}c=p,r.updateQueue=c,c!==null&&(r.flags|=4)}else{k=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ps(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=k.createElement(o,{is:c.is}):(n=k.createElement(o),o==="select"&&(k=n,c.multiple?k.multiple=!0:c.size&&(k.size=c.size))):n=k.createElementNS(n,o),n[un]=r,n[ai]=c,cf(n,r,!1,!1),r.stateNode=n;e:{switch(k=Me(o,c),o){case"dialog":ft("cancel",n),ft("close",n),p=c;break;case"iframe":case"object":case"embed":ft("load",n),p=c;break;case"video":case"audio":for(p=0;p<si.length;p++)ft(si[p],n);p=c;break;case"source":ft("error",n),p=c;break;case"img":case"image":case"link":ft("error",n),ft("load",n),p=c;break;case"details":ft("toggle",n),p=c;break;case"input":We(n,c),p=ge(n,c),ft("invalid",n);break;case"option":p=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},p=R({},c,{value:void 0}),ft("invalid",n);break;case"textarea":He(n,c),p=rs(n,c),ft("invalid",n);break;default:p=c}ve(o,p),U=p;for(x in U)if(U.hasOwnProperty(x)){var H=U[x];x==="style"?Ks(n,H):x==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Lt(n,H)):x==="children"?typeof H=="string"?(o!=="textarea"||H!=="")&&Vt(n,H):typeof H=="number"&&Vt(n,""+H):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(l.hasOwnProperty(x)?H!=null&&x==="onScroll"&&ft("scroll",n):H!=null&&N(n,x,H,k))}switch(o){case"input":V(n),vt(n,c,!1);break;case"textarea":V(n),Jt(n);break;case"option":c.value!=null&&n.setAttribute("value",""+pe(c.value));break;case"select":n.multiple=!!c.multiple,x=c.value,x!=null?et(n,!!c.multiple,x,!1):c.defaultValue!=null&&et(n,!!c.multiple,c.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=yo)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return cs(r),null;case 6:if(n&&r.stateNode!=null)uf(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(o=Sr(di.current),Sr(hn.current),Co(r)){if(c=r.stateNode,o=r.memoizedProps,c[un]=r,(x=c.nodeValue!==o)&&(n=Rs,n!==null))switch(n.tag){case 3:xo(c.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xo(c.nodeValue,o,(n.mode&1)!==0)}x&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[un]=r,r.stateNode=c}return cs(r),null;case 13:if(gt(St),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(jt&&Ms!==null&&(r.mode&1)!==0&&(r.flags&128)===0)mp(),ia(),r.flags|=98560,x=!1;else if(x=Co(r),c!==null&&c.dehydrated!==null){if(n===null){if(!x)throw Error(a(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(a(317));x[un]=r}else ia(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;cs(r),x=!1}else tn!==null&&(vd(tn),tn=null),x=!0;if(!x)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(St.current&1)!==0?zt===0&&(zt=3):jd())),r.updateQueue!==null&&(r.flags|=4),cs(r),null);case 4:return da(),id(n,r),n===null&&ni(r.stateNode.containerInfo),cs(r),null;case 10:return Mc(r.type._context),cs(r),null;case 17:return Ns(r.type)&&wo(),cs(r),null;case 19:if(gt(St),x=r.memoizedState,x===null)return cs(r),null;if(c=(r.flags&128)!==0,k=x.rendering,k===null)if(c)fi(x,!1);else{if(zt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(k=Lo(n),k!==null){for(r.flags|=128,fi(x,!1),c=k.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)x=o,n=c,x.flags&=14680066,k=x.alternate,k===null?(x.childLanes=0,x.lanes=n,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=k.childLanes,x.lanes=k.lanes,x.child=k.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=k.memoizedProps,x.memoizedState=k.memoizedState,x.updateQueue=k.updateQueue,x.type=k.type,n=k.dependencies,x.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return mt(St,St.current&1|2),r.child}n=n.sibling}x.tail!==null&&kt()>pa&&(r.flags|=128,c=!0,fi(x,!1),r.lanes=4194304)}else{if(!c)if(n=Lo(k),n!==null){if(r.flags|=128,c=!0,o=n.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),fi(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!jt)return cs(r),null}else 2*kt()-x.renderingStartTime>pa&&o!==1073741824&&(r.flags|=128,c=!0,fi(x,!1),r.lanes=4194304);x.isBackwards?(k.sibling=r.child,r.child=k):(o=x.last,o!==null?o.sibling=k:r.child=k,x.last=k)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=kt(),r.sibling=null,o=St.current,mt(St,c?o&1|2:o&1),r):(cs(r),null);case 22:case 23:return yd(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Is&1073741824)!==0&&(cs(r),r.subtreeFlags&6&&(r.flags|=8192)):cs(r),null;case 24:return null;case 25:return null}throw Error(a(156,r.tag))}function a0(n,r){switch(Tc(r),r.tag){case 1:return Ns(r.type)&&wo(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return da(),gt(bs),gt(os),Vc(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Bc(r),null;case 13:if(gt(St),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));ia()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return gt(St),null;case 4:return da(),null;case 10:return Mc(r.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var Vo=!1,ds=!1,i0=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function ha(n,r){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){Et(n,r,c)}else o.current=null}function od(n,r,o){try{o()}catch(c){Et(n,r,c)}}var hf=!1;function o0(n,r){if(yc=io,n=$m(),uc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,x=c.focusNode;c=c.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var k=0,U=-1,H=-1,ie=0,ye=0,we=n,xe=null;t:for(;;){for(var Le;we!==o||p!==0&&we.nodeType!==3||(U=k+p),we!==x||c!==0&&we.nodeType!==3||(H=k+c),we.nodeType===3&&(k+=we.nodeValue.length),(Le=we.firstChild)!==null;)xe=we,we=Le;for(;;){if(we===n)break t;if(xe===o&&++ie===p&&(U=k),xe===x&&++ye===c&&(H=k),(Le=we.nextSibling)!==null)break;we=xe,xe=we.parentNode}we=Le}o=U===-1||H===-1?null:{start:U,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(jc={focusedElem:n,selectionRange:o},io=!1,Oe=r;Oe!==null;)if(r=Oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Oe=n;else for(;Oe!==null;){r=Oe;try{var Fe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var Ue=Fe.memoizedProps,Rt=Fe.memoizedState,se=r.stateNode,Z=se.getSnapshotBeforeUpdate(r.elementType===r.type?Ue:sn(r.type,Ue),Rt);se.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ne=r.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ke){Et(r,r.return,ke)}if(n=r.sibling,n!==null){n.return=r.return,Oe=n;break}Oe=r.return}return Fe=hf,hf=!1,Fe}function gi(n,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&n)===n){var x=p.destroy;p.destroy=void 0,x!==void 0&&od(r,o,x)}p=p.next}while(p!==c)}}function _o(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function ld(n){var r=n.ref;if(r!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof r=="function"?r(n):r.current=n}}function mf(n){var r=n.alternate;r!==null&&(n.alternate=null,mf(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[un],delete r[ai],delete r[kc],delete r[$w],delete r[zw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pf(n){return n.tag===5||n.tag===3||n.tag===4}function ff(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cd(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=yo));else if(c!==4&&(n=n.child,n!==null))for(cd(n,r,o),n=n.sibling;n!==null;)cd(n,r,o),n=n.sibling}function dd(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(dd(n,r,o),n=n.sibling;n!==null;)dd(n,r,o),n=n.sibling}var Xt=null,nn=!1;function Xn(n,r,o){for(o=o.child;o!==null;)gf(n,r,o),o=o.sibling}function gf(n,r,o){if(G&&typeof G.onCommitFiberUnmount=="function")try{G.onCommitFiberUnmount($,o)}catch{}switch(o.tag){case 5:ds||ha(o,r);case 6:var c=Xt,p=nn;Xt=null,Xn(n,r,o),Xt=c,nn=p,Xt!==null&&(nn?(n=Xt,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):Xt.removeChild(o.stateNode));break;case 18:Xt!==null&&(nn?(n=Xt,o=o.stateNode,n.nodeType===8?Nc(n.parentNode,o):n.nodeType===1&&Nc(n,o),Ga(n)):Nc(Xt,o.stateNode));break;case 4:c=Xt,p=nn,Xt=o.stateNode.containerInfo,nn=!0,Xn(n,r,o),Xt=c,nn=p;break;case 0:case 11:case 14:case 15:if(!ds&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){p=c=c.next;do{var x=p,k=x.destroy;x=x.tag,k!==void 0&&((x&2)!==0||(x&4)!==0)&&od(o,r,k),p=p.next}while(p!==c)}Xn(n,r,o);break;case 1:if(!ds&&(ha(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(U){Et(o,r,U)}Xn(n,r,o);break;case 21:Xn(n,r,o);break;case 22:o.mode&1?(ds=(c=ds)||o.memoizedState!==null,Xn(n,r,o),ds=c):Xn(n,r,o);break;default:Xn(n,r,o)}}function vf(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new i0),r.forEach(function(c){var p=g0.bind(null,n,c);o.has(c)||(o.add(c),c.then(p,p))})}}function rn(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c];try{var x=n,k=r,U=k;e:for(;U!==null;){switch(U.tag){case 5:Xt=U.stateNode,nn=!1;break e;case 3:Xt=U.stateNode.containerInfo,nn=!0;break e;case 4:Xt=U.stateNode.containerInfo,nn=!0;break e}U=U.return}if(Xt===null)throw Error(a(160));gf(x,k,p),Xt=null,nn=!1;var H=p.alternate;H!==null&&(H.return=null),p.return=null}catch(ie){Et(p,r,ie)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xf(r,n),r=r.sibling}function xf(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(rn(r,n),pn(n),c&4){try{gi(3,n,n.return),_o(3,n)}catch(Ue){Et(n,n.return,Ue)}try{gi(5,n,n.return)}catch(Ue){Et(n,n.return,Ue)}}break;case 1:rn(r,n),pn(n),c&512&&o!==null&&ha(o,o.return);break;case 5:if(rn(r,n),pn(n),c&512&&o!==null&&ha(o,o.return),n.flags&32){var p=n.stateNode;try{Vt(p,"")}catch(Ue){Et(n,n.return,Ue)}}if(c&4&&(p=n.stateNode,p!=null)){var x=n.memoizedProps,k=o!==null?o.memoizedProps:x,U=n.type,H=n.updateQueue;if(n.updateQueue=null,H!==null)try{U==="input"&&x.type==="radio"&&x.name!=null&&ze(p,x),Me(U,k);var ie=Me(U,x);for(k=0;k<H.length;k+=2){var ye=H[k],we=H[k+1];ye==="style"?Ks(p,we):ye==="dangerouslySetInnerHTML"?Lt(p,we):ye==="children"?Vt(p,we):N(p,ye,we,ie)}switch(U){case"input":Ge(p,x);break;case"textarea":xt(p,x);break;case"select":var xe=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!x.multiple;var Le=x.value;Le!=null?et(p,!!x.multiple,Le,!1):xe!==!!x.multiple&&(x.defaultValue!=null?et(p,!!x.multiple,x.defaultValue,!0):et(p,!!x.multiple,x.multiple?[]:"",!1))}p[ai]=x}catch(Ue){Et(n,n.return,Ue)}}break;case 6:if(rn(r,n),pn(n),c&4){if(n.stateNode===null)throw Error(a(162));p=n.stateNode,x=n.memoizedProps;try{p.nodeValue=x}catch(Ue){Et(n,n.return,Ue)}}break;case 3:if(rn(r,n),pn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Ga(r.containerInfo)}catch(Ue){Et(n,n.return,Ue)}break;case 4:rn(r,n),pn(n);break;case 13:rn(r,n),pn(n),p=n.child,p.flags&8192&&(x=p.memoizedState!==null,p.stateNode.isHidden=x,!x||p.alternate!==null&&p.alternate.memoizedState!==null||(md=kt())),c&4&&vf(n);break;case 22:if(ye=o!==null&&o.memoizedState!==null,n.mode&1?(ds=(ie=ds)||ye,rn(r,n),ds=ie):rn(r,n),pn(n),c&8192){if(ie=n.memoizedState!==null,(n.stateNode.isHidden=ie)&&!ye&&(n.mode&1)!==0)for(Oe=n,ye=n.child;ye!==null;){for(we=Oe=ye;Oe!==null;){switch(xe=Oe,Le=xe.child,xe.tag){case 0:case 11:case 14:case 15:gi(4,xe,xe.return);break;case 1:ha(xe,xe.return);var Fe=xe.stateNode;if(typeof Fe.componentWillUnmount=="function"){c=xe,o=xe.return;try{r=c,Fe.props=r.memoizedProps,Fe.state=r.memoizedState,Fe.componentWillUnmount()}catch(Ue){Et(c,o,Ue)}}break;case 5:ha(xe,xe.return);break;case 22:if(xe.memoizedState!==null){wf(we);continue}}Le!==null?(Le.return=xe,Oe=Le):wf(we)}ye=ye.sibling}e:for(ye=null,we=n;;){if(we.tag===5){if(ye===null){ye=we;try{p=we.stateNode,ie?(x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(U=we.stateNode,H=we.memoizedProps.style,k=H!=null&&H.hasOwnProperty("display")?H.display:null,U.style.display=Ds("display",k))}catch(Ue){Et(n,n.return,Ue)}}}else if(we.tag===6){if(ye===null)try{we.stateNode.nodeValue=ie?"":we.memoizedProps}catch(Ue){Et(n,n.return,Ue)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===n)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===n)break e;for(;we.sibling===null;){if(we.return===null||we.return===n)break e;ye===we&&(ye=null),we=we.return}ye===we&&(ye=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:rn(r,n),pn(n),c&4&&vf(n);break;case 21:break;default:rn(r,n),pn(n)}}function pn(n){var r=n.flags;if(r&2){try{e:{for(var o=n.return;o!==null;){if(pf(o)){var c=o;break e}o=o.return}throw Error(a(160))}switch(c.tag){case 5:var p=c.stateNode;c.flags&32&&(Vt(p,""),c.flags&=-33);var x=ff(n);dd(n,x,p);break;case 3:case 4:var k=c.stateNode.containerInfo,U=ff(n);cd(n,U,k);break;default:throw Error(a(161))}}catch(H){Et(n,n.return,H)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function l0(n,r,o){Oe=n,yf(n)}function yf(n,r,o){for(var c=(n.mode&1)!==0;Oe!==null;){var p=Oe,x=p.child;if(p.tag===22&&c){var k=p.memoizedState!==null||Vo;if(!k){var U=p.alternate,H=U!==null&&U.memoizedState!==null||ds;U=Vo;var ie=ds;if(Vo=k,(ds=H)&&!ie)for(Oe=p;Oe!==null;)k=Oe,H=k.child,k.tag===22&&k.memoizedState!==null?bf(p):H!==null?(H.return=k,Oe=H):bf(p);for(;x!==null;)Oe=x,yf(x),x=x.sibling;Oe=p,Vo=U,ds=ie}jf(n)}else(p.subtreeFlags&8772)!==0&&x!==null?(x.return=p,Oe=x):jf(n)}}function jf(n){for(;Oe!==null;){var r=Oe;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:ds||_o(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!ds)if(o===null)c.componentDidMount();else{var p=r.elementType===r.type?o.memoizedProps:sn(r.type,o.memoizedProps);c.componentDidUpdate(p,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var x=r.updateQueue;x!==null&&jp(r,x,c);break;case 3:var k=r.updateQueue;if(k!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}jp(r,k,o)}break;case 5:var U=r.stateNode;if(o===null&&r.flags&4){o=U;var H=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&o.focus();break;case"img":H.src&&(o.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var ie=r.alternate;if(ie!==null){var ye=ie.memoizedState;if(ye!==null){var we=ye.dehydrated;we!==null&&Ga(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}ds||r.flags&512&&ld(r)}catch(xe){Et(r,r.return,xe)}}if(r===n){Oe=null;break}if(o=r.sibling,o!==null){o.return=r.return,Oe=o;break}Oe=r.return}}function wf(n){for(;Oe!==null;){var r=Oe;if(r===n){Oe=null;break}var o=r.sibling;if(o!==null){o.return=r.return,Oe=o;break}Oe=r.return}}function bf(n){for(;Oe!==null;){var r=Oe;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{_o(4,r)}catch(H){Et(r,o,H)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var p=r.return;try{c.componentDidMount()}catch(H){Et(r,p,H)}}var x=r.return;try{ld(r)}catch(H){Et(r,x,H)}break;case 5:var k=r.return;try{ld(r)}catch(H){Et(r,k,H)}}}catch(H){Et(r,r.return,H)}if(r===n){Oe=null;break}var U=r.sibling;if(U!==null){U.return=r.return,Oe=U;break}Oe=r.return}}var c0=Math.ceil,$o=I.ReactCurrentDispatcher,ud=I.ReactCurrentOwner,zs=I.ReactCurrentBatchConfig,at=0,Qt=null,Ut=null,es=0,Is=0,ma=Gn(0),zt=0,vi=null,Ar=0,zo=0,hd=0,xi=null,Ss=null,md=0,pa=1/0,Rn=null,Ho=!1,pd=null,er=null,qo=!1,tr=null,Yo=0,yi=0,fd=null,Go=-1,Qo=0;function gs(){return(at&6)!==0?kt():Go!==-1?Go:Go=kt()}function sr(n){return(n.mode&1)===0?1:(at&2)!==0&&es!==0?es&-es:qw.transition!==null?(Qo===0&&(Qo=Yr()),Qo):(n=ut,n!==0||(n=window.event,n=n===void 0?16:Nm(n.type)),n)}function an(n,r,o,c){if(50<yi)throw yi=0,fd=null,Error(a(185));$a(n,o,c),((at&2)===0||n!==Qt)&&(n===Qt&&((at&2)===0&&(zo|=o),zt===4&&nr(n,es)),Cs(n,c),o===1&&at===0&&(r.mode&1)===0&&(pa=kt()+500,No&&Kn()))}function Cs(n,r){var o=n.callbackNode;Xs(n,r);var c=_t(n,n===Qt?es:0);if(c===0)o!==null&&zr(o),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(o!=null&&zr(o),r===1)n.tag===0?Hw(kf.bind(null,n)):lp(kf.bind(null,n)),Vw(function(){(at&6)===0&&Kn()}),o=null;else{switch(fm(c)){case 1:o=Sn;break;case 4:o=Hr;break;case 16:o=yr;break;case 536870912:o=qr;break;default:o=yr}o=Lf(o,Nf.bind(null,n))}n.callbackPriority=r,n.callbackNode=o}}function Nf(n,r){if(Go=-1,Qo=0,(at&6)!==0)throw Error(a(327));var o=n.callbackNode;if(fa()&&n.callbackNode!==o)return null;var c=_t(n,n===Qt?es:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=Ko(n,c);else{r=c;var p=at;at|=2;var x=Cf();(Qt!==n||es!==r)&&(Rn=null,pa=kt()+500,Er(n,r));do try{h0();break}catch(U){Sf(n,U)}while(!0);Rc(),$o.current=x,at=p,Ut!==null?r=0:(Qt=null,es=0,r=zt)}if(r!==0){if(r===2&&(p=Wn(n),p!==0&&(c=p,r=gd(n,p))),r===1)throw o=vi,Er(n,0),nr(n,c),Cs(n,kt()),o;if(r===6)nr(n,c);else{if(p=n.current.alternate,(c&30)===0&&!d0(p)&&(r=Ko(n,c),r===2&&(x=Wn(n),x!==0&&(c=x,r=gd(n,x))),r===1))throw o=vi,Er(n,0),nr(n,c),Cs(n,kt()),o;switch(n.finishedWork=p,n.finishedLanes=c,r){case 0:case 1:throw Error(a(345));case 2:Pr(n,Ss,Rn);break;case 3:if(nr(n,c),(c&130023424)===c&&(r=md+500-kt(),10<r)){if(_t(n,0)!==0)break;if(p=n.suspendedLanes,(p&c)!==c){gs(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=bc(Pr.bind(null,n,Ss,Rn),r);break}Pr(n,Ss,Rn);break;case 4:if(nr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,p=-1;0<c;){var k=31-Se(c);x=1<<k,k=r[k],k>p&&(p=k),c&=~x}if(c=p,c=kt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*c0(c/1960))-c,10<c){n.timeoutHandle=bc(Pr.bind(null,n,Ss,Rn),c);break}Pr(n,Ss,Rn);break;case 5:Pr(n,Ss,Rn);break;default:throw Error(a(329))}}}return Cs(n,kt()),n.callbackNode===o?Nf.bind(null,n):null}function gd(n,r){var o=xi;return n.current.memoizedState.isDehydrated&&(Er(n,r).flags|=256),n=Ko(n,r),n!==2&&(r=Ss,Ss=o,r!==null&&vd(r)),n}function vd(n){Ss===null?Ss=n:Ss.push.apply(Ss,n)}function d0(n){for(var r=n;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var p=o[c],x=p.getSnapshot;p=p.value;try{if(!en(x(),p))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function nr(n,r){for(r&=~hd,r&=~zo,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var o=31-Se(r),c=1<<o;n[o]=-1,r&=~c}}function kf(n){if((at&6)!==0)throw Error(a(327));fa();var r=_t(n,0);if((r&1)===0)return Cs(n,kt()),null;var o=Ko(n,r);if(n.tag!==0&&o===2){var c=Wn(n);c!==0&&(r=c,o=gd(n,c))}if(o===1)throw o=vi,Er(n,0),nr(n,r),Cs(n,kt()),o;if(o===6)throw Error(a(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Pr(n,Ss,Rn),Cs(n,kt()),null}function xd(n,r){var o=at;at|=1;try{return n(r)}finally{at=o,at===0&&(pa=kt()+500,No&&Kn())}}function Tr(n){tr!==null&&tr.tag===0&&(at&6)===0&&fa();var r=at;at|=1;var o=zs.transition,c=ut;try{if(zs.transition=null,ut=1,n)return n()}finally{ut=c,zs.transition=o,at=r,(at&6)===0&&Kn()}}function yd(){Is=ma.current,gt(ma)}function Er(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,Ww(o)),Ut!==null)for(o=Ut.return;o!==null;){var c=o;switch(Tc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&wo();break;case 3:da(),gt(bs),gt(os),Vc();break;case 5:Bc(c);break;case 4:da();break;case 13:gt(St);break;case 19:gt(St);break;case 10:Mc(c.type._context);break;case 22:case 23:yd()}o=o.return}if(Qt=n,Ut=n=rr(n.current,null),es=Is=r,zt=0,vi=null,hd=zo=Ar=0,Ss=xi=null,kr!==null){for(r=0;r<kr.length;r++)if(o=kr[r],c=o.interleaved,c!==null){o.interleaved=null;var p=c.next,x=o.pending;if(x!==null){var k=x.next;x.next=p,c.next=k}o.pending=c}kr=null}return n}function Sf(n,r){do{var o=Ut;try{if(Rc(),Ro.current=Fo,Mo){for(var c=Ct.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}Mo=!1}if(Cr=0,Gt=$t=Ct=null,ui=!1,hi=0,ud.current=null,o===null||o.return===null){zt=1,vi=r,Ut=null;break}e:{var x=n,k=o.return,U=o,H=r;if(r=es,U.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ie=H,ye=U,we=ye.tag;if((ye.mode&1)===0&&(we===0||we===11||we===15)){var xe=ye.alternate;xe?(ye.updateQueue=xe.updateQueue,ye.memoizedState=xe.memoizedState,ye.lanes=xe.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Le=Qp(k);if(Le!==null){Le.flags&=-257,Kp(Le,k,U,x,r),Le.mode&1&&Gp(x,ie,r),r=Le,H=ie;var Fe=r.updateQueue;if(Fe===null){var Ue=new Set;Ue.add(H),r.updateQueue=Ue}else Fe.add(H);break e}else{if((r&1)===0){Gp(x,ie,r),jd();break e}H=Error(a(426))}}else if(jt&&U.mode&1){var Rt=Qp(k);if(Rt!==null){(Rt.flags&65536)===0&&(Rt.flags|=256),Kp(Rt,k,U,x,r),Dc(ua(H,U));break e}}x=H=ua(H,U),zt!==4&&(zt=2),xi===null?xi=[x]:xi.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,r&=-r,x.lanes|=r;var se=qp(x,H,r);yp(x,se);break e;case 1:U=H;var Z=x.type,ne=x.stateNode;if((x.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(er===null||!er.has(ne)))){x.flags|=65536,r&=-r,x.lanes|=r;var ke=Yp(x,U,r);yp(x,ke);break e}}x=x.return}while(x!==null)}Tf(o)}catch(Be){r=Be,Ut===o&&o!==null&&(Ut=o=o.return);continue}break}while(!0)}function Cf(){var n=$o.current;return $o.current=Fo,n===null?Fo:n}function jd(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||(Ar&268435455)===0&&(zo&268435455)===0||nr(Qt,es)}function Ko(n,r){var o=at;at|=2;var c=Cf();(Qt!==n||es!==r)&&(Rn=null,Er(n,r));do try{u0();break}catch(p){Sf(n,p)}while(!0);if(Rc(),at=o,$o.current=c,Ut!==null)throw Error(a(261));return Qt=null,es=0,zt}function u0(){for(;Ut!==null;)Af(Ut)}function h0(){for(;Ut!==null&&!Va();)Af(Ut)}function Af(n){var r=Df(n.alternate,n,Is);n.memoizedProps=n.pendingProps,r===null?Tf(n):Ut=r,ud.current=null}function Tf(n){var r=n;do{var o=r.alternate;if(n=r.return,(r.flags&32768)===0){if(o=r0(o,r,Is),o!==null){Ut=o;return}}else{if(o=a0(o,r),o!==null){o.flags&=32767,Ut=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{zt=6,Ut=null;return}}if(r=r.sibling,r!==null){Ut=r;return}Ut=r=n}while(r!==null);zt===0&&(zt=5)}function Pr(n,r,o){var c=ut,p=zs.transition;try{zs.transition=null,ut=1,m0(n,r,o,c)}finally{zs.transition=p,ut=c}return null}function m0(n,r,o,c){do fa();while(tr!==null);if((at&6)!==0)throw Error(a(327));o=n.finishedWork;var p=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0;var x=o.lanes|o.childLanes;if(Yj(n,x),n===Qt&&(Ut=Qt=null,es=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||qo||(qo=!0,Lf(yr,function(){return fa(),null})),x=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||x){x=zs.transition,zs.transition=null;var k=ut;ut=1;var U=at;at|=4,ud.current=null,o0(n,o),xf(o,n),Rw(jc),io=!!yc,jc=yc=null,n.current=o,l0(o),Gl(),at=U,ut=k,zs.transition=x}else n.current=o;if(qo&&(qo=!1,tr=n,Yo=p),x=n.pendingLanes,x===0&&(er=null),he(o.stateNode),Cs(n,kt()),r!==null)for(c=n.onRecoverableError,o=0;o<r.length;o++)p=r[o],c(p.value,{componentStack:p.stack,digest:p.digest});if(Ho)throw Ho=!1,n=pd,pd=null,n;return(Yo&1)!==0&&n.tag!==0&&fa(),x=n.pendingLanes,(x&1)!==0?n===fd?yi++:(yi=0,fd=n):yi=0,Kn(),null}function fa(){if(tr!==null){var n=fm(Yo),r=zs.transition,o=ut;try{if(zs.transition=null,ut=16>n?16:n,tr===null)var c=!1;else{if(n=tr,tr=null,Yo=0,(at&6)!==0)throw Error(a(331));var p=at;for(at|=4,Oe=n.current;Oe!==null;){var x=Oe,k=x.child;if((Oe.flags&16)!==0){var U=x.deletions;if(U!==null){for(var H=0;H<U.length;H++){var ie=U[H];for(Oe=ie;Oe!==null;){var ye=Oe;switch(ye.tag){case 0:case 11:case 15:gi(8,ye,x)}var we=ye.child;if(we!==null)we.return=ye,Oe=we;else for(;Oe!==null;){ye=Oe;var xe=ye.sibling,Le=ye.return;if(mf(ye),ye===ie){Oe=null;break}if(xe!==null){xe.return=Le,Oe=xe;break}Oe=Le}}}var Fe=x.alternate;if(Fe!==null){var Ue=Fe.child;if(Ue!==null){Fe.child=null;do{var Rt=Ue.sibling;Ue.sibling=null,Ue=Rt}while(Ue!==null)}}Oe=x}}if((x.subtreeFlags&2064)!==0&&k!==null)k.return=x,Oe=k;else e:for(;Oe!==null;){if(x=Oe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:gi(9,x,x.return)}var se=x.sibling;if(se!==null){se.return=x.return,Oe=se;break e}Oe=x.return}}var Z=n.current;for(Oe=Z;Oe!==null;){k=Oe;var ne=k.child;if((k.subtreeFlags&2064)!==0&&ne!==null)ne.return=k,Oe=ne;else e:for(k=Z;Oe!==null;){if(U=Oe,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:_o(9,U)}}catch(Be){Et(U,U.return,Be)}if(U===k){Oe=null;break e}var ke=U.sibling;if(ke!==null){ke.return=U.return,Oe=ke;break e}Oe=U.return}}if(at=p,Kn(),G&&typeof G.onPostCommitFiberRoot=="function")try{G.onPostCommitFiberRoot($,n)}catch{}c=!0}return c}finally{ut=o,zs.transition=r}}return!1}function Ef(n,r,o){r=ua(o,r),r=qp(n,r,1),n=Zn(n,r,1),r=gs(),n!==null&&($a(n,1,r),Cs(n,r))}function Et(n,r,o){if(n.tag===3)Ef(n,n,o);else for(;r!==null;){if(r.tag===3){Ef(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(er===null||!er.has(c))){n=ua(o,n),n=Yp(r,n,1),r=Zn(r,n,1),n=gs(),r!==null&&($a(r,1,n),Cs(r,n));break}}r=r.return}}function p0(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),r=gs(),n.pingedLanes|=n.suspendedLanes&o,Qt===n&&(es&o)===o&&(zt===4||zt===3&&(es&130023424)===es&&500>kt()-md?Er(n,0):hd|=o),Cs(n,r)}function Pf(n,r){r===0&&((n.mode&1)===0?r=1:(r=lt,lt<<=1,(lt&130023424)===0&&(lt=4194304)));var o=gs();n=Pn(n,r),n!==null&&($a(n,r,o),Cs(n,o))}function f0(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Pf(n,o)}function g0(n,r){var o=0;switch(n.tag){case 13:var c=n.stateNode,p=n.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(a(314))}c!==null&&c.delete(r),Pf(n,o)}var Df;Df=function(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps||bs.current)ks=!0;else{if((n.lanes&o)===0&&(r.flags&128)===0)return ks=!1,n0(n,r,o);ks=(n.flags&131072)!==0}else ks=!1,jt&&(r.flags&1048576)!==0&&cp(r,So,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Wo(n,r),n=r.pendingProps;var p=na(r,os.current);ca(r,o),p=zc(null,r,c,n,p,o);var x=Hc();return r.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ns(c)?(x=!0,bo(r)):x=!1,r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Fc(r),p.updater=Uo,r.stateNode=p,p._reactInternals=r,Jc(r,c,n,o),r=td(null,r,c,!0,x,o)):(r.tag=0,jt&&x&&Ac(r),fs(null,r,p,o),r=r.child),r;case 16:c=r.elementType;e:{switch(Wo(n,r),n=r.pendingProps,p=c._init,c=p(c._payload),r.type=c,p=r.tag=x0(c),n=sn(c,n),p){case 0:r=ed(null,r,c,n,o);break e;case 1:r=sf(null,r,c,n,o);break e;case 11:r=Jp(null,r,c,n,o);break e;case 14:r=Zp(null,r,c,sn(c.type,n),o);break e}throw Error(a(306,c,""))}return r;case 0:return c=r.type,p=r.pendingProps,p=r.elementType===c?p:sn(c,p),ed(n,r,c,p,o);case 1:return c=r.type,p=r.pendingProps,p=r.elementType===c?p:sn(c,p),sf(n,r,c,p,o);case 3:e:{if(nf(r),n===null)throw Error(a(387));c=r.pendingProps,x=r.memoizedState,p=x.element,xp(n,r),Do(r,c,null,o);var k=r.memoizedState;if(c=k.element,x.isDehydrated)if(x={element:c,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){p=ua(Error(a(423)),r),r=rf(n,r,c,o,p);break e}else if(c!==p){p=ua(Error(a(424)),r),r=rf(n,r,c,o,p);break e}else for(Ms=Yn(r.stateNode.containerInfo.firstChild),Rs=r,jt=!0,tn=null,o=gp(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ia(),c===p){r=Ln(n,r,o);break e}fs(n,r,c,o)}r=r.child}return r;case 5:return wp(r),n===null&&Pc(r),c=r.type,p=r.pendingProps,x=n!==null?n.memoizedProps:null,k=p.children,wc(c,p)?k=null:x!==null&&wc(c,x)&&(r.flags|=32),tf(n,r),fs(n,r,k,o),r.child;case 6:return n===null&&Pc(r),null;case 13:return af(n,r,o);case 4:return Uc(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=oa(r,null,c,o):fs(n,r,c,o),r.child;case 11:return c=r.type,p=r.pendingProps,p=r.elementType===c?p:sn(c,p),Jp(n,r,c,p,o);case 7:return fs(n,r,r.pendingProps,o),r.child;case 8:return fs(n,r,r.pendingProps.children,o),r.child;case 12:return fs(n,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,p=r.pendingProps,x=r.memoizedProps,k=p.value,mt(To,c._currentValue),c._currentValue=k,x!==null)if(en(x.value,k)){if(x.children===p.children&&!bs.current){r=Ln(n,r,o);break e}}else for(x=r.child,x!==null&&(x.return=r);x!==null;){var U=x.dependencies;if(U!==null){k=x.child;for(var H=U.firstContext;H!==null;){if(H.context===c){if(x.tag===1){H=Dn(-1,o&-o),H.tag=2;var ie=x.updateQueue;if(ie!==null){ie=ie.shared;var ye=ie.pending;ye===null?H.next=H:(H.next=ye.next,ye.next=H),ie.pending=H}}x.lanes|=o,H=x.alternate,H!==null&&(H.lanes|=o),Ic(x.return,o,r),U.lanes|=o;break}H=H.next}}else if(x.tag===10)k=x.type===r.type?null:x.child;else if(x.tag===18){if(k=x.return,k===null)throw Error(a(341));k.lanes|=o,U=k.alternate,U!==null&&(U.lanes|=o),Ic(k,o,r),k=x.sibling}else k=x.child;if(k!==null)k.return=x;else for(k=x;k!==null;){if(k===r){k=null;break}if(x=k.sibling,x!==null){x.return=k.return,k=x;break}k=k.return}x=k}fs(n,r,p.children,o),r=r.child}return r;case 9:return p=r.type,c=r.pendingProps.children,ca(r,o),p=_s(p),c=c(p),r.flags|=1,fs(n,r,c,o),r.child;case 14:return c=r.type,p=sn(c,r.pendingProps),p=sn(c.type,p),Zp(n,r,c,p,o);case 15:return Xp(n,r,r.type,r.pendingProps,o);case 17:return c=r.type,p=r.pendingProps,p=r.elementType===c?p:sn(c,p),Wo(n,r),r.tag=1,Ns(c)?(n=!0,bo(r)):n=!1,ca(r,o),zp(r,c,p),Jc(r,c,p,o),td(null,r,c,!0,n,o);case 19:return lf(n,r,o);case 22:return ef(n,r,o)}throw Error(a(156,r.tag))};function Lf(n,r){return kn(n,r)}function v0(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(n,r,o,c){return new v0(n,r,o,c)}function wd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function x0(n){if(typeof n=="function")return wd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ee)return 11;if(n===le)return 14}return 2}function rr(n,r){var o=n.alternate;return o===null?(o=Hs(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function Jo(n,r,o,c,p,x){var k=2;if(c=n,typeof n=="function")wd(n)&&(k=1);else if(typeof n=="string")k=5;else e:switch(n){case Q:return Dr(o.children,p,x,r);case F:k=8,p|=8;break;case te:return n=Hs(12,o,r,p|2),n.elementType=te,n.lanes=x,n;case oe:return n=Hs(13,o,r,p),n.elementType=oe,n.lanes=x,n;case re:return n=Hs(19,o,r,p),n.elementType=re,n.lanes=x,n;case q:return Zo(o,p,x,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:k=10;break e;case z:k=9;break e;case ee:k=11;break e;case le:k=14;break e;case O:k=16,c=null;break e}throw Error(a(130,n==null?n:typeof n,""))}return r=Hs(k,o,r,p),r.elementType=n,r.type=c,r.lanes=x,r}function Dr(n,r,o,c){return n=Hs(7,n,c,r),n.lanes=o,n}function Zo(n,r,o,c){return n=Hs(22,n,c,r),n.elementType=q,n.lanes=o,n.stateNode={isHidden:!1},n}function bd(n,r,o){return n=Hs(6,n,null,r),n.lanes=o,n}function Nd(n,r,o){return r=Hs(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function y0(n,r,o,c,p){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=c,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function kd(n,r,o,c,p,x,k,U,H){return n=new y0(n,r,o,U,H),r===1?(r=1,x===!0&&(r|=8)):r=0,x=Hs(3,null,null,r),n.current=x,x.stateNode=n,x.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fc(x),n}function j0(n,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:c==null?null:""+c,children:n,containerInfo:r,implementation:o}}function Rf(n){if(!n)return Qn;n=n._reactInternals;e:{if(Bs(n)!==n||n.tag!==1)throw Error(a(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Ns(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(a(171))}if(n.tag===1){var o=n.type;if(Ns(o))return ip(n,o,r)}return r}function Mf(n,r,o,c,p,x,k,U,H){return n=kd(o,c,!0,n,p,x,k,U,H),n.context=Rf(null),o=n.current,c=gs(),p=sr(o),x=Dn(c,p),x.callback=r??null,Zn(o,x,p),n.current.lanes=p,$a(n,p,c),Cs(n,c),n}function Xo(n,r,o,c){var p=r.current,x=gs(),k=sr(p);return o=Rf(o),r.context===null?r.context=o:r.pendingContext=o,r=Dn(x,k),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Zn(p,r,k),n!==null&&(an(n,p,k,x),Po(n,p,k)),k}function el(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function If(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Sd(n,r){If(n,r),(n=n.alternate)&&If(n,r)}function w0(){return null}var Of=typeof reportError=="function"?reportError:function(n){console.error(n)};function Cd(n){this._internalRoot=n}tl.prototype.render=Cd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));Xo(n,r,null,null)},tl.prototype.unmount=Cd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Tr(function(){Xo(null,n,null,null)}),r[Cn]=null}};function tl(n){this._internalRoot=n}tl.prototype.unstable_scheduleHydration=function(n){if(n){var r=xm();n={blockedOn:null,target:n,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,n),o===0&&wm(n)}};function Ad(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ff(){}function b0(n,r,o,c,p){if(p){if(typeof c=="function"){var x=c;c=function(){var ie=el(k);x.call(ie)}}var k=Mf(r,c,n,0,null,!1,!1,"",Ff);return n._reactRootContainer=k,n[Cn]=k.current,ni(n.nodeType===8?n.parentNode:n),Tr(),k}for(;p=n.lastChild;)n.removeChild(p);if(typeof c=="function"){var U=c;c=function(){var ie=el(H);U.call(ie)}}var H=kd(n,0,!1,null,null,!1,!1,"",Ff);return n._reactRootContainer=H,n[Cn]=H.current,ni(n.nodeType===8?n.parentNode:n),Tr(function(){Xo(r,H,o,c)}),H}function nl(n,r,o,c,p){var x=o._reactRootContainer;if(x){var k=x;if(typeof p=="function"){var U=p;p=function(){var H=el(k);U.call(H)}}Xo(r,k,n,p)}else k=b0(o,r,n,p,c);return el(k)}gm=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var o=dt(r.pendingLanes);o!==0&&(Jl(r,o|1),Cs(r,kt()),(at&6)===0&&(pa=kt()+500,Kn()))}break;case 13:Tr(function(){var c=Pn(n,1);if(c!==null){var p=gs();an(c,n,1,p)}}),Sd(n,1)}},Zl=function(n){if(n.tag===13){var r=Pn(n,134217728);if(r!==null){var o=gs();an(r,n,134217728,o)}Sd(n,134217728)}},vm=function(n){if(n.tag===13){var r=sr(n),o=Pn(n,r);if(o!==null){var c=gs();an(o,n,r,c)}Sd(n,r)}},xm=function(){return ut},ym=function(n,r){var o=ut;try{return ut=n,r()}finally{ut=o}},it=function(n,r,o){switch(r){case"input":if(Ge(n,o),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var p=jo(c);if(!p)throw Error(a(90));J(c),Ge(c,p)}}}break;case"textarea":xt(n,o);break;case"select":r=o.value,r!=null&&et(n,!!o.multiple,r,!1)}},Re=xd,ct=Tr;var N0={usingClientEntryPoint:!1,Events:[ii,ta,jo,Xe,nt,xd]},ji={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k0={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=as(n),n===null?null:n.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||w0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{$=rl.inject(k0),G=rl}catch{}}return As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N0,As.createPortal=function(n,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ad(r))throw Error(a(200));return j0(n,r,null,o)},As.createRoot=function(n,r){if(!Ad(n))throw Error(a(299));var o=!1,c="",p=Of;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),r=kd(n,1,!1,null,null,o,!1,c,p),n[Cn]=r.current,ni(n.nodeType===8?n.parentNode:n),new Cd(r)},As.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=as(r),n=n===null?null:n.stateNode,n},As.flushSync=function(n){return Tr(n)},As.hydrate=function(n,r,o){if(!sl(r))throw Error(a(200));return nl(null,n,r,!0,o)},As.hydrateRoot=function(n,r,o){if(!Ad(n))throw Error(a(405));var c=o!=null&&o.hydratedSources||null,p=!1,x="",k=Of;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(x=o.identifierPrefix),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),r=Mf(r,null,n,1,o??null,p,!1,x,k),n[Cn]=r.current,ni(n),c)for(n=0;n<c.length;n++)o=c[n],p=o._getVersion,p=p(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,p]:r.mutableSourceEagerHydrationData.push(o,p);return new tl(r)},As.render=function(n,r,o){if(!sl(r))throw Error(a(200));return nl(null,n,r,!1,o)},As.unmountComponentAtNode=function(n){if(!sl(n))throw Error(a(40));return n._reactRootContainer?(Tr(function(){nl(null,null,n,!1,function(){n._reactRootContainer=null,n[Cn]=null})}),!0):!1},As.unstable_batchedUpdates=xd,As.unstable_renderSubtreeIntoContainer=function(n,r,o,c){if(!sl(o))throw Error(a(200));if(n==null||n._reactInternals===void 0)throw Error(a(38));return nl(n,r,o,!1,c)},As.version="18.3.1-next-f1338f8080-20240426",As}var qf;function fx(){if(qf)return Pd.exports;qf=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Pd.exports=F0(),Pd.exports}var Yf;function U0(){if(Yf)return al;Yf=1;var t=fx();return al.createRoot=t.createRoot,al.hydrateRoot=t.hydrateRoot,al}var B0=U0();const W0=ph(B0);fx();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oi(){return Oi=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},Oi.apply(this,arguments)}var or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(or||(or={}));const Gf="popstate";function V0(t){t===void 0&&(t={});function s(i,l){let{pathname:d,search:u,hash:m}=i.location;return Su("",{pathname:d,search:u,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(i,l){return typeof l=="string"?l:Nl(l)}return $0(s,a,null,t)}function Ot(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function gx(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function _0(){return Math.random().toString(36).substr(2,8)}function Qf(t,s){return{usr:t.state,key:t.key,idx:s}}function Su(t,s,a,i){return a===void 0&&(a=null),Oi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Ra(s):s,{state:a,key:s&&s.key||i||_0()})}function Nl(t){let{pathname:s="/",search:a="",hash:i=""}=t;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Ra(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substr(a),t=t.substr(0,a));let i=t.indexOf("?");i>=0&&(s.search=t.substr(i),t=t.substr(0,i)),t&&(s.pathname=t)}return s}function $0(t,s,a,i){i===void 0&&(i={});let{window:l=document.defaultView,v5Compat:d=!1}=i,u=l.history,m=or.Pop,g=null,v=h();v==null&&(v=0,u.replaceState(Oi({},u.state,{idx:v}),""));function h(){return(u.state||{idx:null}).idx}function j(){m=or.Pop;let C=h(),A=C==null?null:C-v;v=C,g&&g({action:m,location:b.location,delta:A})}function w(C,A){m=or.Push;let L=Su(b.location,C,A);v=h()+1;let N=Qf(L,v),I=b.createHref(L);try{u.pushState(N,"",I)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;l.location.assign(I)}d&&g&&g({action:m,location:b.location,delta:1})}function D(C,A){m=or.Replace;let L=Su(b.location,C,A);v=h();let N=Qf(L,v),I=b.createHref(L);u.replaceState(N,"",I),d&&g&&g({action:m,location:b.location,delta:0})}function S(C){let A=l.location.origin!=="null"?l.location.origin:l.location.href,L=typeof C=="string"?C:Nl(C);return L=L.replace(/ $/,"%20"),Ot(A,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,A)}let b={get action(){return m},get location(){return t(l,u)},listen(C){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Gf,j),g=C,()=>{l.removeEventListener(Gf,j),g=null}},createHref(C){return s(l,C)},createURL:S,encodeLocation(C){let A=S(C);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:w,replace:D,go(C){return u.go(C)}};return b}var Kf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kf||(Kf={}));function z0(t,s,a){return a===void 0&&(a="/"),H0(t,s,a)}function H0(t,s,a,i){let l=typeof s=="string"?Ra(s):s,d=gh(l.pathname||"/",a);if(d==null)return null;let u=vx(t);q0(u);let m=null;for(let g=0;m==null&&g<u.length;++g){let v=rb(d);m=tb(u[g],v)}return m}function vx(t,s,a,i){s===void 0&&(s=[]),a===void 0&&(a=[]),i===void 0&&(i="");let l=(d,u,m)=>{let g={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};g.relativePath.startsWith("/")&&(Ot(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let v=dr([i,g.relativePath]),h=a.concat(g);d.children&&d.children.length>0&&(Ot(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),vx(d.children,s,h,v)),!(d.path==null&&!d.index)&&s.push({path:v,score:X0(v,d.index),routesMeta:h})};return t.forEach((d,u)=>{var m;if(d.path===""||!((m=d.path)!=null&&m.includes("?")))l(d,u);else for(let g of xx(d.path))l(d,u,g)}),s}function xx(t){let s=t.split("/");if(s.length===0)return[];let[a,...i]=s,l=a.endsWith("?"),d=a.replace(/\?$/,"");if(i.length===0)return l?[d,""]:[d];let u=xx(i.join("/")),m=[];return m.push(...u.map(g=>g===""?d:[d,g].join("/"))),l&&m.push(...u),m.map(g=>t.startsWith("/")&&g===""?"/":g)}function q0(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:eb(s.routesMeta.map(i=>i.childrenIndex),a.routesMeta.map(i=>i.childrenIndex)))}const Y0=/^:[\w-]+$/,G0=3,Q0=2,K0=1,J0=10,Z0=-2,Jf=t=>t==="*";function X0(t,s){let a=t.split("/"),i=a.length;return a.some(Jf)&&(i+=Z0),s&&(i+=Q0),a.filter(l=>!Jf(l)).reduce((l,d)=>l+(Y0.test(d)?G0:d===""?K0:J0),i)}function eb(t,s){return t.length===s.length&&t.slice(0,-1).every((i,l)=>i===s[l])?t[t.length-1]-s[s.length-1]:0}function tb(t,s,a){let{routesMeta:i}=t,l={},d="/",u=[];for(let m=0;m<i.length;++m){let g=i[m],v=m===i.length-1,h=d==="/"?s:s.slice(d.length)||"/",j=sb({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},h),w=g.route;if(!j)return null;Object.assign(l,j.params),u.push({params:l,pathname:dr([d,j.pathname]),pathnameBase:lb(dr([d,j.pathnameBase])),route:w}),j.pathnameBase!=="/"&&(d=dr([d,j.pathnameBase]))}return u}function sb(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,i]=nb(t.path,t.caseSensitive,t.end),l=s.match(a);if(!l)return null;let d=l[0],u=d.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:i.reduce((v,h,j)=>{let{paramName:w,isOptional:D}=h;if(w==="*"){let b=m[j]||"";u=d.slice(0,d.length-b.length).replace(/(.)\/+$/,"$1")}const S=m[j];return D&&!S?v[w]=void 0:v[w]=(S||"").replace(/%2F/g,"/"),v},{}),pathname:d,pathnameBase:u,pattern:t}}function nb(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),gx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,g)=>(i.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,s?void 0:"i"),i]}function rb(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return gx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function gh(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,i=t.charAt(a);return i&&i!=="/"?null:t.slice(a)||"/"}function ab(t,s){s===void 0&&(s="/");let{pathname:a,search:i="",hash:l=""}=typeof t=="string"?Ra(t):t;return{pathname:a?a.startsWith("/")?a:ib(a,s):s,search:cb(i),hash:db(l)}}function ib(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function Rd(t,s,a,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ob(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function vh(t,s){let a=ob(t);return s?a.map((i,l)=>l===a.length-1?i.pathname:i.pathnameBase):a.map(i=>i.pathnameBase)}function xh(t,s,a,i){i===void 0&&(i=!1);let l;typeof t=="string"?l=Ra(t):(l=Oi({},t),Ot(!l.pathname||!l.pathname.includes("?"),Rd("?","pathname","search",l)),Ot(!l.pathname||!l.pathname.includes("#"),Rd("#","pathname","hash",l)),Ot(!l.search||!l.search.includes("#"),Rd("#","search","hash",l)));let d=t===""||l.pathname==="",u=d?"/":l.pathname,m;if(u==null)m=a;else{let j=s.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),j-=1;l.pathname=w.join("/")}m=j>=0?s[j]:"/"}let g=ab(l,m),v=u&&u!=="/"&&u.endsWith("/"),h=(d||u===".")&&a.endsWith("/");return!g.pathname.endsWith("/")&&(v||h)&&(g.pathname+="/"),g}const dr=t=>t.join("/").replace(/\/\/+/g,"/"),lb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,db=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ub(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yx=["post","put","patch","delete"];new Set(yx);const hb=["get",...yx];new Set(hb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fi(){return Fi=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},Fi.apply(this,arguments)}const yh=y.createContext(null),mb=y.createContext(null),pr=y.createContext(null),Rl=y.createContext(null),Fn=y.createContext({outlet:null,matches:[],isDataRoute:!1}),jx=y.createContext(null);function pb(t,s){let{relative:a}=s===void 0?{}:s;Ma()||Ot(!1);let{basename:i,navigator:l}=y.useContext(pr),{hash:d,pathname:u,search:m}=Nx(t,{relative:a}),g=u;return i!=="/"&&(g=u==="/"?i:dr([i,u])),l.createHref({pathname:g,search:m,hash:d})}function Ma(){return y.useContext(Rl)!=null}function jn(){return Ma()||Ot(!1),y.useContext(Rl).location}function wx(t){y.useContext(pr).static||y.useLayoutEffect(t)}function ms(){let{isDataRoute:t}=y.useContext(Fn);return t?Ab():fb()}function fb(){Ma()||Ot(!1);let t=y.useContext(yh),{basename:s,future:a,navigator:i}=y.useContext(pr),{matches:l}=y.useContext(Fn),{pathname:d}=jn(),u=JSON.stringify(vh(l,a.v7_relativeSplatPath)),m=y.useRef(!1);return wx(()=>{m.current=!0}),y.useCallback(function(v,h){if(h===void 0&&(h={}),!m.current)return;if(typeof v=="number"){i.go(v);return}let j=xh(v,JSON.parse(u),d,h.relative==="path");t==null&&s!=="/"&&(j.pathname=j.pathname==="/"?s:dr([s,j.pathname])),(h.replace?i.replace:i.push)(j,h.state,h)},[s,i,u,d,t])}function bx(){let{matches:t}=y.useContext(Fn),s=t[t.length-1];return s?s.params:{}}function Nx(t,s){let{relative:a}=s===void 0?{}:s,{future:i}=y.useContext(pr),{matches:l}=y.useContext(Fn),{pathname:d}=jn(),u=JSON.stringify(vh(l,i.v7_relativeSplatPath));return y.useMemo(()=>xh(t,JSON.parse(u),d,a==="path"),[t,u,d,a])}function gb(t,s){return vb(t,s)}function vb(t,s,a,i){Ma()||Ot(!1);let{navigator:l}=y.useContext(pr),{matches:d}=y.useContext(Fn),u=d[d.length-1],m=u?u.params:{};u&&u.pathname;let g=u?u.pathnameBase:"/";u&&u.route;let v=jn(),h;if(s){var j;let C=typeof s=="string"?Ra(s):s;g==="/"||(j=C.pathname)!=null&&j.startsWith(g)||Ot(!1),h=C}else h=v;let w=h.pathname||"/",D=w;if(g!=="/"){let C=g.replace(/^\//,"").split("/");D="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=z0(t,{pathname:D}),b=bb(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},m,C.params),pathname:dr([g,l.encodeLocation?l.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?g:dr([g,l.encodeLocation?l.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),d,a,i);return s&&b?y.createElement(Rl.Provider,{value:{location:Fi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:or.Pop}},b):b}function xb(){let t=Cb(),s=ub(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},s),a?y.createElement("pre",{style:l},a):null,null)}const yb=y.createElement(xb,null);class jb extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?y.createElement(Fn.Provider,{value:this.props.routeContext},y.createElement(jx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wb(t){let{routeContext:s,match:a,children:i}=t,l=y.useContext(yh);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),y.createElement(Fn.Provider,{value:s},i)}function bb(t,s,a,i){var l;if(s===void 0&&(s=[]),a===void 0&&(a=null),i===void 0&&(i=null),t==null){var d;if(!a)return null;if(a.errors)t=a.matches;else if((d=i)!=null&&d.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let u=t,m=(l=a)==null?void 0:l.errors;if(m!=null){let h=u.findIndex(j=>j.route.id&&m?.[j.route.id]!==void 0);h>=0||Ot(!1),u=u.slice(0,Math.min(u.length,h+1))}let g=!1,v=-1;if(a&&i&&i.v7_partialHydration)for(let h=0;h<u.length;h++){let j=u[h];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(v=h),j.route.id){let{loaderData:w,errors:D}=a,S=j.route.loader&&w[j.route.id]===void 0&&(!D||D[j.route.id]===void 0);if(j.route.lazy||S){g=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}return u.reduceRight((h,j,w)=>{let D,S=!1,b=null,C=null;a&&(D=m&&j.route.id?m[j.route.id]:void 0,b=j.route.errorElement||yb,g&&(v<0&&w===0?(Tb("route-fallback"),S=!0,C=null):v===w&&(S=!0,C=j.route.hydrateFallbackElement||null)));let A=s.concat(u.slice(0,w+1)),L=()=>{let N;return D?N=b:S?N=C:j.route.Component?N=y.createElement(j.route.Component,null):j.route.element?N=j.route.element:N=h,y.createElement(wb,{match:j,routeContext:{outlet:h,matches:A,isDataRoute:a!=null},children:N})};return a&&(j.route.ErrorBoundary||j.route.errorElement||w===0)?y.createElement(jb,{location:a.location,revalidation:a.revalidation,component:b,error:D,children:L(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):L()},null)}var kx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kx||{}),Sx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sx||{});function Nb(t){let s=y.useContext(yh);return s||Ot(!1),s}function kb(t){let s=y.useContext(mb);return s||Ot(!1),s}function Sb(t){let s=y.useContext(Fn);return s||Ot(!1),s}function Cx(t){let s=Sb(),a=s.matches[s.matches.length-1];return a.route.id||Ot(!1),a.route.id}function Cb(){var t;let s=y.useContext(jx),a=kb(),i=Cx();return s!==void 0?s:(t=a.errors)==null?void 0:t[i]}function Ab(){let{router:t}=Nb(kx.UseNavigateStable),s=Cx(Sx.UseNavigateStable),a=y.useRef(!1);return wx(()=>{a.current=!0}),y.useCallback(function(l,d){d===void 0&&(d={}),a.current&&(typeof l=="number"?t.navigate(l):t.navigate(l,Fi({fromRouteId:s},d)))},[t,s])}const Zf={};function Tb(t,s,a){Zf[t]||(Zf[t]=!0)}function Eb(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function Pi(t){let{to:s,replace:a,state:i,relative:l}=t;Ma()||Ot(!1);let{future:d,static:u}=y.useContext(pr),{matches:m}=y.useContext(Fn),{pathname:g}=jn(),v=ms(),h=xh(s,vh(m,d.v7_relativeSplatPath),g,l==="path"),j=JSON.stringify(h);return y.useEffect(()=>v(JSON.parse(j),{replace:a,state:i,relative:l}),[v,j,l,a,i]),null}function At(t){Ot(!1)}function Pb(t){let{basename:s="/",children:a=null,location:i,navigationType:l=or.Pop,navigator:d,static:u=!1,future:m}=t;Ma()&&Ot(!1);let g=s.replace(/^\/*/,"/"),v=y.useMemo(()=>({basename:g,navigator:d,static:u,future:Fi({v7_relativeSplatPath:!1},m)}),[g,m,d,u]);typeof i=="string"&&(i=Ra(i));let{pathname:h="/",search:j="",hash:w="",state:D=null,key:S="default"}=i,b=y.useMemo(()=>{let C=gh(h,g);return C==null?null:{location:{pathname:C,search:j,hash:w,state:D,key:S},navigationType:l}},[g,h,j,w,D,S,l]);return b==null?null:y.createElement(pr.Provider,{value:v},y.createElement(Rl.Provider,{children:a,value:b}))}function Db(t){let{children:s,location:a}=t;return gb(Cu(s),a)}new Promise(()=>{});function Cu(t,s){s===void 0&&(s=[]);let a=[];return y.Children.forEach(t,(i,l)=>{if(!y.isValidElement(i))return;let d=[...s,l];if(i.type===y.Fragment){a.push.apply(a,Cu(i.props.children,d));return}i.type!==At&&Ot(!1),!i.props.index||!i.props.children||Ot(!1);let u={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Cu(i.props.children,d)),a.push(u)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},Au.apply(this,arguments)}function Lb(t,s){if(t==null)return{};var a={},i=Object.keys(t),l,d;for(d=0;d<i.length;d++)l=i[d],!(s.indexOf(l)>=0)&&(a[l]=t[l]);return a}function Rb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Mb(t,s){return t.button===0&&(!s||s==="_self")&&!Rb(t)}const Ib=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ob="6";try{window.__reactRouterVersion=Ob}catch{}const Fb="startTransition",Xf=M0[Fb];function Ub(t){let{basename:s,children:a,future:i,window:l}=t,d=y.useRef();d.current==null&&(d.current=V0({window:l,v5Compat:!0}));let u=d.current,[m,g]=y.useState({action:u.action,location:u.location}),{v7_startTransition:v}=i||{},h=y.useCallback(j=>{v&&Xf?Xf(()=>g(j)):g(j)},[g,v]);return y.useLayoutEffect(()=>u.listen(h),[u,h]),y.useEffect(()=>Eb(i),[i]),y.createElement(Pb,{basename:s,children:a,location:m.location,navigationType:m.action,navigator:u,future:i})}const Bb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,il=y.forwardRef(function(s,a){let{onClick:i,relative:l,reloadDocument:d,replace:u,state:m,target:g,to:v,preventScrollReset:h,viewTransition:j}=s,w=Lb(s,Ib),{basename:D}=y.useContext(pr),S,b=!1;if(typeof v=="string"&&Wb.test(v)&&(S=v,Bb))try{let N=new URL(window.location.href),I=v.startsWith("//")?new URL(N.protocol+v):new URL(v),W=gh(I.pathname,D);I.origin===N.origin&&W!=null?v=W+I.search+I.hash:b=!0}catch{}let C=pb(v,{relative:l}),A=Vb(v,{replace:u,state:m,target:g,preventScrollReset:h,relative:l,viewTransition:j});function L(N){i&&i(N),N.defaultPrevented||A(N)}return y.createElement("a",Au({},w,{href:S||C,onClick:b||d?i:L,ref:a,target:g}))});var eg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eg||(eg={}));var tg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tg||(tg={}));function Vb(t,s){let{target:a,replace:i,state:l,preventScrollReset:d,relative:u,viewTransition:m}=s===void 0?{}:s,g=ms(),v=jn(),h=Nx(t,{relative:u});return y.useCallback(j=>{if(Mb(j,a)){j.preventDefault();let w=i!==void 0?i:Nl(v)===Nl(h);g(t,{replace:w,state:l,preventScrollReset:d,relative:u,viewTransition:m})}},[v,g,h,i,l,a,t,d,u,m])}const Ax=y.createContext();function wn(){return y.useContext(Ax)}function _b({children:t}){const[s,a]=y.useState(null),[i,l]=y.useState(!0),[d,u]=y.useState(null);y.useEffect(()=>{const D=async()=>{try{console.log("🔍 AuthContext: Starting Firebase initialization..."),await mh(),console.log("🔍 AuthContext: Firebase initialized, setting up auth listener...");const b=localStorage.getItem("adminUser");return console.log("🔍 AuthContext: Stored admin user:",b?JSON.parse(b):"None"),C0(rt,async A=>{if(console.log("🔍 AuthContext: Auth state changed:",A?`User logged in (${A.email})`:"No user"),console.log("🔍 AuthContext: User details:",A?{uid:A.uid,email:A.email,emailVerified:A.emailVerified,displayName:A.displayName}:"No user"),A)console.log("🔍 AuthContext: User authenticated via Firebase Auth"),a(A),l(!1);else{if(b){console.log("🔍 AuthContext: No Firebase Auth user, but found stored admin user"),console.log("🔍 AuthContext: Attempting to restore session from localStorage");try{const L=JSON.parse(b);console.log("🔍 AuthContext: Restoring user from localStorage:",L.email),a({uid:L.uid,email:L.email,displayName:L.displayName,emailVerified:L.emailVerified||!1,fromLocalStorage:!0})}catch(L){console.error("🔍 AuthContext: Error parsing stored user:",L),localStorage.removeItem("adminUser"),a(null)}}else console.log("🔍 AuthContext: No user found in Firebase Auth or localStorage - this is normal for new users"),a(null);l(!1)}},A=>{console.error("🔍 AuthContext: Auth state change error:",A),u(A),l(!1)})}catch(b){console.error("🔍 AuthContext: Firebase initialization error:",b),console.log("🔍 AuthContext: Continuing without Firebase authentication"),a(null),l(!1)}},S=setTimeout(()=>{i&&(console.log("🔍 AuthContext: Initialization timeout, continuing without Firebase"),l(!1))},1e4);return D(),()=>clearTimeout(S)},[]);const w={currentUser:s,loading:i,error:d,logout:()=>{a(null),localStorage.removeItem("adminUser"),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug")},clearAllAuthData:()=>{console.log("🧹 Clearing all authentication data..."),localStorage.removeItem("adminUser"),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug"),a(null),console.log("🧹 All authentication data cleared")},attemptSessionRestoration:async D=>{try{return console.log("🔍 AuthContext: Attempting to restore Firebase Auth session..."),console.log("🔍 AuthContext: Using localStorage for session persistence"),!0}catch(S){return console.error("🔍 AuthContext: Session restoration failed:",S),!1}},hasPersistentSession:()=>{const D=localStorage.getItem("adminUser"),S=localStorage.getItem("companyUser");return!!(D||S)},getUserType:()=>{const D=localStorage.getItem("adminUser"),S=localStorage.getItem("companyUser");if(D)try{const b=JSON.parse(D);return console.log("🔍 AuthContext: Found admin user:",b),S&&(console.log("🔍 AuthContext: Clearing conflicting company user data"),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug")),{type:"admin",role:b.role,email:b.email}}catch(b){return console.error("🔍 AuthContext: Error parsing admin user:",b),null}if(S)try{const b=JSON.parse(S);return console.log("🔍 AuthContext: Found company user:",b),{type:"company-user",companyId:b.companyId,email:b.email}}catch(b){return console.error("🔍 AuthContext: Error parsing company user:",b),null}return console.log("🔍 AuthContext: No user found in localStorage"),null}};return i?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{children:"Loading application..."}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"Please wait while we initialize the application"})]}):e.jsx(Ax.Provider,{value:w,children:t})}const $b=()=>{const t=jn();y.useEffect(()=>{setTimeout(Ea,0),setTimeout(Ea,200)},[t.pathname])},Ea=()=>{window.scrollTo(0,0),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0);const t=document.querySelector(".main-content");t&&(t.scrollTop=0),document.querySelectorAll('[data-scrollable], [style*="overflow"]').forEach(s=>{s.scrollTop!==void 0&&(s.scrollTop=0)})},zb=async()=>{if("serviceWorker"in navigator)try{console.log("Registering service worker...");const t=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1";console.log("Environment:",t?"Production":"Development"),console.log("Current URL:",window.location.href),t||console.log("Development mode detected - service worker registration may be limited");const s=await navigator.serviceWorker.getRegistration();if(s)return console.log("Service worker already registered:",s),s;try{const i=await fetch("/sw.js",{method:"HEAD"});if(!i.ok)throw new Error(`Service worker file not found: ${i.status} ${i.statusText}`)}catch(i){console.warn("Could not check service worker file:",i.message)}const a=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});return console.log("SW registered successfully:",a),a.addEventListener("updatefound",()=>{console.log("Service worker update found");const i=a.installing;i.addEventListener("statechange",()=>{console.log("Service worker state changed:",i.state),i.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New service worker installed, showing update notification"),Hb(a))})}),a.addEventListener("error",i=>{console.error("Service worker registration error:",i)}),a}catch(t){throw console.error("SW registration failed:",t),t.name==="SecurityError"?console.error("Security error - service worker must be served over HTTPS in production"):t.name==="NetworkError"?console.error("Network error - service worker file not found"):t.name==="TypeError"?(console.error("Type error - service worker script has syntax errors"),console.error("Error details:",t.message)):t.name==="InvalidStateError"&&console.error("Invalid state error - service worker already registered"),t.message&&console.error("Error message:",t.message),t.stack&&console.error("Error stack:",t.stack),t}else console.log("Service Worker not supported in this browser or not in production")},Hb=t=>{confirm("New version available! Reload to update?")?(console.log("User accepted update, skipping waiting and reloading"),t.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()):console.log("User dismissed update notification")},qb=()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("New service worker activated")}),navigator.serviceWorker.addEventListener("message",t=>{console.log("Message from service worker:",t.data),t.data&&t.data.type==="SKIP_WAITING"&&(console.log("Skipping waiting and reloading"),window.location.reload())}),navigator.serviceWorker.addEventListener("error",t=>{console.error("Service worker error:",t)}))},sg=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistration();return t?(console.log("Service worker registration found:",t),console.log("Service worker state:",t.active?"active":"inactive"),{registered:!0,active:!!t.active,waiting:!!t.waiting,installing:!!t.installing}):(console.log("No service worker registration found"),{registered:!1})}catch(t){return console.error("Error checking service worker status:",t),{registered:!1,error:t.message}}return{registered:!1,supported:!1}},Yb="categories",Gb="rebuttals",Qb="archived_rebuttals",Kb=[{name:"Not Interested",icon:"❌",color:"#FF6B6B"},{name:"Spouse Consultation",icon:"💑",color:"#4ECDC4"},{name:"One Legger",icon:"👤",color:"#45B7D1"},{name:"Not Ready",icon:"⏳",color:"#96CEB4"},{name:"Curious",icon:"🤔",color:"#FFEEAD"},{name:"Time Concern",icon:"⏰",color:"#D4A5A5"},{name:"Can't Afford",icon:"💰",color:"#9B59B6"},{name:"Spouse",icon:"👫",color:"#3498DB"},{name:"Price Phone",icon:"📞",color:"#E67E22"},{name:"Repair",icon:"🔧",color:"#2ECC71"},{name:"Government Grants",icon:"🏛️",color:"#34495E"},{name:"Reset Appointment",icon:"🔄",color:"#F1C40F"},{name:"No Request",icon:"🚫",color:"#E74C3C"},{name:"Bad Reviews",icon:"⭐",color:"#F39C12"}],Jb=[{title:"Can't Afford",category:"Can't Afford",objection:"I can't afford this right now",response:{pt1:"I completely understand your concern about the cost. Many of our customers felt the same way initially, but they found that our solution actually saves them money in the long run. Let me explain how...",pt2:"If cost is still a concern, we have several flexible payment options and financing solutions that might work better for your budget. Would you like to hear about those?"},icon:"💰",color:"#9B59B6",tags:["cost","budget","payment"]},{title:"Reset Appointment",category:"Reset Appointment",objection:"I need to reschedule my appointment",response:{pt1:"I understand that things come up and schedules need to change. I'd be happy to help you find a new time that works better for you.",pt2:"What days and times would work better for your schedule? I'll make sure to find a slot that's convenient for you."},icon:"🔄",color:"#F1C40F",tags:["schedule","reschedule","appointment"]}];class Zb{constructor(){this.categoriesCollection=Ce(fe(),Yb),this.rebuttalsCollection=Ce(fe(),Gb),this.archivedRebuttalsCollection=Ce(fe(),Qb)}async initializeDefaultCategories(){try{const s=Ze(this.categoriesCollection);if(!(await De(s)).empty){console.log("Categories already exist, skipping initialization");return}console.log("Creating default categories...");for(const i of Kb)await this.addCategory(i);console.log("Default categories created successfully")}catch(s){throw console.error("Error initializing default categories:",s),s}}async getAllCategories(){try{await this.initializeDefaultCategories();const s=Ze(this.categoriesCollection,It("name","asc"));return(await De(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(s){throw console.error("Error fetching categories:",s),s}}async addCategory(s){try{return(await Yt(this.categoriesCollection,{name:s.name,icon:s.icon||"📋",color:s.color||"#808080",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}catch(a){throw console.error("Error adding category:",a),a}}async updateCategory(s,a){try{const i=Ae(this.categoriesCollection,s);return await Wt(i,{...a,updatedAt:new Date().toISOString()}),s}catch(i){throw console.error("Error updating category:",i),i}}async deleteCategory(s){try{const a=qt(fe()),i=Ae(this.categoriesCollection,s),l=await pt(i);if(!l.exists())throw new Error("Category not found");const d=l.data(),u=Ze(this.rebuttalsCollection,ss("category","==",d.name)),m=await De(u);return m.forEach(g=>{const v=g.data(),h=Ae(this.archivedRebuttalsCollection);a.set(h,{...v,originalCategory:d.name,archivedAt:new Date().toISOString(),archivedReason:"Category deleted",originalId:g.id}),a.delete(Ae(this.rebuttalsCollection,g.id))}),a.delete(i),await a.commit(),{categoryId:s,archivedRebuttalsCount:m.size}}catch(a){throw console.error("Error deleting category:",a),a}}async restoreArchivedRebuttals(s){try{const a=qt(fe()),i=Ze(this.archivedRebuttalsCollection,ss("archivedReason","==","Category deleted")),l=await De(i);return l.forEach(d=>{const u=d.data(),m=Ae(this.rebuttalsCollection);a.set(m,{...u,category:s,archivedAt:null,archivedReason:null,originalCategory:null,updatedAt:new Date().toISOString()}),a.delete(Ae(this.archivedRebuttalsCollection,d.id))}),await a.commit(),{restoredCount:l.size}}catch(a){throw console.error("Error restoring archived rebuttals:",a),a}}async getArchivedRebuttals(){try{return(await De(this.archivedRebuttalsCollection)).docs.map(a=>({id:a.id,...a.data()}))}catch(s){throw console.error("Error fetching archived rebuttals:",s),s}}async updateRebuttalCategory(s,a){try{const i=Ae(this.rebuttalsCollection,s);return await Wt(i,{category:a,updatedAt:new Date().toISOString()}),s}catch(i){throw console.error("Error updating rebuttal category:",i),i}}async resetAllRebuttals(){try{const s=Ze(this.rebuttalsCollection),a=await De(s),i=qt(fe());a.docs.forEach(l=>{i.delete(l.ref)}),await i.commit(),console.log("Creating default rebuttals...");for(const l of Jb)await Yt(this.rebuttalsCollection,{...l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0});console.log("Default rebuttals created successfully")}catch(s){throw console.error("Error resetting rebuttals:",s),s}}}const lr=new Zb,Xb="rebuttals",ol=()=>{if(!fe())throw new Error("Firebase is not properly initialized. Please check your Firebase configuration.")};class eN{constructor(){this.db=fe()||Gs(),this.rebuttalsCollection=Ce(this.db,Xb),this.archivedCollection=Ce(this.db,"archived_rebuttals"),this.categoriesCollection=Ce(this.db,"categories"),this.isOnline=navigator.onLine,this.pendingOperations=[],this.setupConnectionListeners()}setupConnectionListeners(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),A0(this.db,()=>{this.processPendingOperations()})}handleOnline(){this.isOnline=!0,this.processPendingOperations()}handleOffline(){this.isOnline=!1}async processPendingOperations(){if(!this.isOnline)return;const s=[...this.pendingOperations];this.pendingOperations=[];for(const a of s)try{switch(a.type){case"add":await this.addRebuttal(a.data);break;case"update":await this.updateRebuttal(a.id,a.data);break;case"delete":await this.deleteRebuttal(a.id);break;case"archive":await this.archiveRebuttal(a.id);break;case"unarchive":await this.unarchiveRebuttal(a.id,a.category);break;case"addCategory":await this.addCategory(a.data);break;case"updateCategory":await this.updateCategory(a.id,a.data);break;case"deleteCategory":await this.deleteCategory(a.id);break}}catch(i){console.error("Error processing pending operation:",i),this.pendingOperations.push(a)}}async checkAndFixDocumentMismatches(){try{console.log("Checking for document ID mismatches...");const s=Ze(this.rebuttalsCollection,It("createdAt","desc")),i=(await De(s)).docs.map(d=>({id:d.id,...d.data()}));console.log(`Found ${i.length} rebuttals in Firestore`);const l=i.map(d=>d.id);return console.log("Available document IDs:",l),{totalRebuttals:i.length,documentIds:l,rebuttals:i}}catch(s){throw console.error("Error checking document mismatches:",s),s}}async getAllRebuttals(){try{ol(),console.log("Fetching all rebuttals...");const s=Ze(this.rebuttalsCollection,It("createdAt","desc")),i=(await De(s)).docs.map(d=>({id:d.id,...d.data()})),l=i.reduce((d,u)=>{const m=u.category||"uncategorized";return d[m]=(d[m]||0)+1,d},{});return console.log("Rebuttals by category:",l),console.log(`Successfully fetched ${i.length} rebuttals`),i}catch(s){throw console.error("Error fetching rebuttals:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch rebuttals: ${s.message}`)}}async getActiveRebuttals(){try{ol(),console.log("Fetching active rebuttals...");const s=Ze(this.rebuttalsCollection,ss("archived","==",!1),It("createdAt","desc")),i=(await De(s)).docs.map(l=>({id:l.id,...l.data()}));return console.log(`Successfully fetched ${i.length} active rebuttals`),i}catch(s){throw console.error("Error fetching active rebuttals:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch active rebuttals: ${s.message}`)}}async getArchivedRebuttals(){try{ol(),console.log("Fetching archived rebuttals...");const s=Ze(this.archivedCollection,It("archivedAt","desc")),i=(await De(s)).docs.map(l=>({id:l.id,...l.data()}));return console.log(`Successfully fetched ${i.length} archived rebuttals`),i}catch(s){throw console.error("Error fetching archived rebuttals:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch archived rebuttals: ${s.message}`)}}async getRebuttalsByCategory(s){try{const a=Ze(this.rebuttalsCollection,ss("category","==",s),ss("archived","==",!1),It("createdAt","desc"));return(await De(a)).docs.map(l=>({id:l.id,...l.data()}))}catch(a){throw console.error("Error fetching rebuttals by category:",a),a}}async searchRebuttals(s){try{const a=Ze(this.rebuttalsCollection,ss("archived","==",!1),It("createdAt","desc"));return(await De(a)).docs.map(d=>({id:d.id,...d.data()})).filter(d=>{const u=s.toLowerCase();return d.title?.toLowerCase().includes(u)||d.objection?.toLowerCase().includes(u)||d.response?.toLowerCase().includes(u)||d.tags?.some(m=>m.toLowerCase().includes(u))})}catch(a){throw console.error("Error searching rebuttals:",a),a}}async getCategories(){try{ol(),console.log("Fetching categories...");const s=Ze(this.categoriesCollection,It("name","asc")),i=(await De(s)).docs.map(h=>({id:h.id,name:h.data().name,icon:h.data().icon||"📋",slug:h.data().name.toLowerCase().replace(/\s+/g,"-")})),l=Ze(this.rebuttalsCollection),d=await De(l),u=i.reduce((h,j)=>(h[j.slug]=j.id,h),{}),m=i.reduce((h,j)=>(h[j.id]=j.name,h),{}),g=i.reduce((h,j)=>(h[j.id]={rebuttalCount:0,lastUpdated:null,tags:new Set,rebuttals:[]},h),{});d.docs.forEach(h=>{const j=h.data();let w=j.category;if(w&&!w.match(/^[a-zA-Z0-9_-]{20}$/)&&(w=u[w.toLowerCase().replace(/\s+/g,"-")]),w&&g[w]&&(g[w].rebuttalCount++,g[w].rebuttals.push({id:h.id,title:j.title}),j.tags&&Array.isArray(j.tags)&&j.tags.forEach(D=>g[w].tags.add(D)),j.updatedAt)){const D=new Date(j.updatedAt);(!g[w].lastUpdated||D>new Date(g[w].lastUpdated))&&(g[w].lastUpdated=j.updatedAt)}});const v=i.map(h=>({...h,rebuttalCount:g[h.id].rebuttalCount,lastUpdated:g[h.id].lastUpdated,tags:Array.from(g[h.id].tags),rebuttals:g[h.id].rebuttals}));return console.log("Categories with stats:",{categories:v.map(h=>({id:h.id,name:h.name,rebuttalCount:h.rebuttalCount,rebuttals:h.rebuttals.map(j=>j.title)}))}),v}catch(s){throw console.error("Error fetching categories:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch categories: ${s.message}`)}}async addRebuttal(s){try{const a=rt.currentUser;if(!a)throw new Error("User must be authenticated to add rebuttals");const i=Ae(fe(),"admins",a.uid);if(!(await pt(i)).exists())throw new Error("Only admins can add rebuttals");if(!this.isOnline)return this.pendingOperations.push({type:"add",data:s}),"pending";const d=Ze(this.categoriesCollection),m=(await De(d)).docs.map(h=>({id:h.id,name:h.data().name,slug:h.data().name.toLowerCase().replace(/\s+/g,"-")})),g=m.reduce((h,j)=>(h[j.slug]=j.id,h),{});if(s.category){let h=s.category;if(!h.match(/^[a-zA-Z0-9_-]{20}$/)&&(h=g[h.toLowerCase().replace(/\s+/g,"-")],!h))throw new Error(`Category ${s.category} does not exist`);if(!m.some(w=>w.id===h))throw new Error(`Category ID ${h} does not exist`);s.category=h}if(!s.title||!s.category)throw new Error("Title and category are required fields");return(await Yt(this.rebuttalsCollection,{...s,archived:!1,createdBy:a.uid,createdAt:serverTimestamp(),updatedAt:serverTimestamp()})).id}catch(a){throw console.error("Error adding rebuttal:",a),a.code==="permission-denied"?new Error("You do not have permission to add rebuttals. Please make sure you are logged in as an admin."):a}}async updateRebuttal(s,a){try{if(!this.isOnline)return this.pendingOperations.push({type:"update",id:s,data:a}),"pending";const i=Ae(this.rebuttalsCollection,s);if(!(await pt(i)).exists()){const d=Ae(this.archivedCollection,s);throw(await pt(d)).exists()?new Error(`Rebuttal with ID ${s} has been archived and cannot be updated. Please unarchive it first.`):new Error(`Rebuttal with ID ${s} does not exist. It may have been deleted or the ID is incorrect.`)}if(a.category){const d=Ae(this.categoriesCollection,a.category);if(!(await pt(d)).exists())throw new Error(`Category ${a.category} does not exist`)}return await Wt(i,{...a,updatedAt:new Date().toISOString()}),s}catch(i){throw console.error("Error updating rebuttal:",i),i}}async archiveRebuttal(s){try{if(!this.isOnline)return this.pendingOperations.push({type:"archive",id:s}),"pending";const a=Ae(this.rebuttalsCollection,s),i=await De(Ze(this.rebuttalsCollection,ss("__name__","==",s)));if(!i.empty){const l=i.docs[0].data();await Yt(this.archivedCollection,{...l,archivedAt:new Date().toISOString()}),await us(a)}return s}catch(a){throw console.error("Error archiving rebuttal:",a),a}}async unarchiveRebuttal(s,a){try{const i=rt.currentUser;if(!i)throw new Error("User must be authenticated to unarchive rebuttals");const l=Ae(fe(),"admins",i.uid);if(!(await pt(l)).exists())throw new Error("Only admins can unarchive rebuttals");if(!this.isOnline)return this.pendingOperations.push({type:"unarchive",id:s,category:a}),"pending";const u=Ae(this.archivedCollection,s),m=await pt(u);if(!m.exists())throw new Error("Archived rebuttal not found");const g=m.data(),{archivedAt:v,archivedReason:h,originalCategory:j,...w}=g,D=await Yt(this.rebuttalsCollection,{...w,category:a||w.category,updatedAt:serverTimestamp(),createdAt:serverTimestamp()});return await us(u),D.id}catch(i){throw console.error("Error unarchiving rebuttal:",i),i}}async deleteRebuttal(s){try{if(!this.isOnline)return this.pendingOperations.push({type:"delete",id:s}),"pending";const a=Ae(this.rebuttalsCollection,s);return await us(a),s}catch(a){throw console.error("Error deleting rebuttal:",a),a}}async retryConnection(){try{return await T0(this.db),!0}catch(s){return console.error("Error retrying connection:",s),!1}}cleanup(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline)}async addCategory(s){try{return this.isOnline?{id:(await Yt(this.categoriesCollection,{...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...s}:(this.pendingOperations.push({type:"addCategory",data:s}),"pending")}catch(a){throw console.error("Error adding category:",a),a}}async updateCategory(s,a){try{if(!this.isOnline)return this.pendingOperations.push({type:"updateCategory",id:s,data:a}),"pending";const i=Ae(this.categoriesCollection,s);return await Wt(i,{...a,updatedAt:new Date().toISOString()}),{id:s,...a}}catch(i){throw console.error("Error updating category:",i),i}}async deleteCategory(s){try{if(!this.isOnline)return this.pendingOperations.push({type:"deleteCategory",id:s}),"pending";const a=Ze(this.rebuttalsCollection,ss("category","==",s));if(!(await De(a)).empty)throw new Error("Cannot delete category that is in use by rebuttals");const l=Ae(this.categoriesCollection,s);return await us(l),s}catch(a){throw console.error("Error deleting category:",a),a}}async resetAllRebuttals(){try{console.log("Starting to reset all rebuttals...");const s=[{name:"Can't Afford",icon:"💰",slug:"cant-afford"},{name:"Reset Appointment",icon:"🔄",slug:"reset-appt"},{name:"Not Interested",icon:"❌",slug:"not-interested"},{name:"Spouse Consultation",icon:"💑",slug:"spouse-consultation"},{name:"One Decision Maker",icon:"👤",slug:"one-legger"},{name:"Not Ready",icon:"⏳",slug:"not-ready"},{name:"Just Curious",icon:"🤔",slug:"curious"},{name:"Time Concern",icon:"⏰",slug:"time-concern"},{name:"Spouse Issues",icon:"👫",slug:"spouse"},{name:"Price Over Phone",icon:"📞",slug:"price-phone"},{name:"Repair Only",icon:"🔧",slug:"repair"},{name:"Government Grants",icon:"🏛️",slug:"government-grants"},{name:"No Request",icon:"🚫",slug:"no-request"},{name:"Bad Reviews",icon:"⭐",slug:"bad-reviews"}],a=Ze(this.categoriesCollection),l=(await De(a)).docs.map(h=>({id:h.id,...h.data()})),d=l.reduce((h,j)=>{const w=j.slug||j.name.toLowerCase().replace(/\s+/g,"-");return h[w]=j.id,h},{}),u=qt(this.db);for(const h of s)if(!l.find(w=>w.slug===h.slug||w.name.toLowerCase()===h.name.toLowerCase())){const w=Ae(Ce(this.db,"categories"));u.set(w,{...h,createdAt:serverTimestamp(),updatedAt:serverTimestamp()}),d[h.slug]=w.id}await u.commit(),console.log("Categories updated successfully");const m=await this.getAllRebuttals();console.log(`Found ${m.length} existing rebuttals to delete`);const g=qt(this.db);m.forEach(h=>{const j=Ae(this.db,"rebuttals",h.id);g.delete(j)});for(const h of tN){const j=d[h.category];if(!j){console.warn(`Category ${h.category} not found in mapping, skipping rebuttal`);continue}const w=Ae(Ce(this.db,"rebuttals"));g.set(w,{...h,category:j,createdAt:serverTimestamp(),updatedAt:serverTimestamp(),archived:!1})}await g.commit(),console.log("Successfully reset all rebuttals");const v=await this.getAllRebuttals();return console.log(`Verified ${v.length} rebuttals after reset`),!0}catch(s){throw console.error("Error resetting rebuttals:",s),s}}}const cr=new eN,tN=[{title:"Can't Afford Right Now",category:"cant-afford",objection:"I can't afford this right now",response:{pt1:"I understand that cost is an important consideration. We actually have a special 12-month promotion that makes this more affordable than you might think. Would you like to hear about our current offer?",pt2:"Our current promotion includes flexible payment options and no obligation. Would you be available for a quick consultation to discuss how we can make this work for your budget?"},icon:"💰",color:"#9B59B6",tags:["price","budget","payment","affordability"],steps:["Acknowledge concern","Present value","Mention promotion","Ask for availability"],tips:["Focus on value","Emphasize flexibility","Highlight current promotion"]},{title:"Need to Reset Appointment",category:"reset-appt",objection:"I need to reschedule my appointment",response:{pt1:"I understand that schedules can change. I'd be happy to help you find a new time that works better for you. What's a good time for you?",pt2:"We have several convenient time slots available. Would you prefer morning, afternoon, or evening? I can help you find the perfect time."},icon:"🔄",color:"#F1C40F",tags:["schedule","reschedule","appointment","timing"],steps:["Acknowledge request","Offer assistance","Suggest alternatives","Confirm new time"],tips:["Be flexible","Offer multiple options","Confirm availability"]},{title:"Not Interested",category:"not-interested",objection:"I'm not interested",response:{pt1:"I understand. Before you go, I'd like to share a quick overview of what makes our service unique. Many of our customers were initially hesitant but found great value in our approach.",pt2:"Would you be open to hearing about our current promotion? It's a limited-time offer that many of our customers have found compelling."},icon:"❌",color:"#FF6B6B",tags:["disinterest","value","promotion","benefits"],steps:["Acknowledge position","Present value","Mention promotion","Ask for consideration"],tips:["Stay positive","Focus on benefits","Respect decision"]},{title:"Need to Consult Spouse",category:"spouse-consultation",objection:"I need to talk to my spouse first",response:{pt1:"That's completely understandable. Making decisions together is important. Would it be helpful if I provided some information you could share with your spouse?",pt2:"I can also schedule a time when you're both available to discuss this together. What would work better for you?"},icon:"💑",color:"#4ECDC4",tags:["spouse","decision","consultation","family"],steps:["Acknowledge concern","Offer information","Suggest joint meeting","Find convenient time"],tips:["Be supportive","Provide materials","Offer flexibility"]},{title:"One Decision Maker",category:"one-legger",objection:"I'm the only one making this decision",response:{pt1:"I understand you're the decision maker. That actually makes this process more straightforward. Would you like to hear about our current promotion?",pt2:"Since you're making the decision, I can focus on addressing your specific needs and concerns. What aspects are most important to you?"},icon:"👤",color:"#45B7D1",tags:["decision","authority","promotion","needs"],steps:["Acknowledge authority","Present value","Focus on needs","Ask for input"],tips:["Respect authority","Be direct","Focus on benefits"]},{title:"Not Ready to Start",category:"not-ready",objection:"I'm not ready to start yet",response:{pt1:"I understand you want to take your time with this decision. That's completely reasonable. Would you like to learn more about our current promotion?",pt2:"Our promotion is time-sensitive, but I can help you understand what's involved so you can make an informed decision when you're ready."},icon:"⏳",color:"#96CEB4",tags:["timing","decision","promotion","information"],steps:["Acknowledge position","Present value","Mention timing","Offer information"],tips:["Be patient","Provide information","Respect timeline"]},{title:"Just Curious",category:"curious",objection:"I was just curious",response:{pt1:"That's great! Curiosity often leads to great opportunities. Would you like to learn more about what makes our service unique?",pt2:"Many of our best customers started out just like you - curious about what we offer. I'd be happy to share more details about our current promotion."},icon:"🤔",color:"#FFEEAD",tags:["interest","information","promotion","opportunity"],steps:["Acknowledge interest","Present value","Share information","Suggest next steps"],tips:["Be informative","Highlight benefits","Create interest"]},{title:"Time Concern",category:"time-concern",objection:"I don't have time for this",response:{pt1:"I understand time is valuable. Our process is actually quite efficient, and I can give you a quick overview of what's involved.",pt2:"Would you be open to a brief 15-minute consultation? I can help you understand if this is worth your time."},icon:"⏰",color:"#D4A5A5",tags:["time","efficiency","consultation","value"],steps:["Acknowledge concern","Present efficiency","Offer quick overview","Suggest brief meeting"],tips:["Be concise","Respect time","Focus on value"]},{title:"Spouse Issues",category:"spouse",objection:"My spouse won't agree to this",response:{pt1:"I understand that getting your spouse's agreement is important. Would it help if I provided some information you could share with them?",pt2:"Many couples find our approach appealing because of its flexibility and benefits. I can explain how it might work for your specific situation."},icon:"👫",color:"#3498DB",tags:["spouse","agreement","information","benefits"],steps:["Acknowledge concern","Offer information","Present benefits","Suggest discussion"],tips:["Be supportive","Provide materials","Focus on benefits"]},{title:"Price Over Phone",category:"price-phone",objection:"I need the price over the phone",response:{pt1:"I understand you want to know the price. To provide you with the most accurate quote, I need to understand your specific needs.",pt2:"Would you be open to a quick 15-minute consultation? This will help me give you the most accurate price for your situation."},icon:"📞",color:"#E67E22",tags:["price","quote","consultation","needs"],steps:["Acknowledge request","Explain process","Offer consultation","Emphasize accuracy"],tips:["Be transparent","Focus on value","Request consultation"]},{title:"Repair Only",category:"repair",objection:"I only need repairs",response:{pt1:"I understand you're focused on repairs. We actually offer comprehensive solutions that can prevent future issues and save you money in the long run.",pt2:"Would you like to hear about how our approach can address both your immediate repair needs and prevent future problems?"},icon:"🔧",color:"#2ECC71",tags:["repair","prevention","savings","solution"],steps:["Acknowledge need","Present value","Explain benefits","Offer information"],tips:["Focus on prevention","Highlight savings","Present value"]},{title:"Government Grants",category:"government-grants",objection:"I'm waiting for government grants",response:{pt1:"I understand you're interested in government grants. We can help you understand what's available and how our service can complement any grants you receive.",pt2:"Would you like to learn more about how our current promotion can work alongside government assistance programs?"},icon:"🏛️",color:"#34495E",tags:["grants","government","assistance","promotion"],steps:["Acknowledge interest","Present options","Explain benefits","Offer information"],tips:["Be informative","Focus on compatibility","Highlight benefits"]},{title:"No Request",category:"no-request",objection:"I didn't request this information",response:{pt1:"I apologize if this contact was unexpected. I'm reaching out because we have a special promotion that might interest you.",pt2:"Would you like to hear about our current offer? If not, I'll be happy to remove you from our contact list."},icon:"🚫",color:"#E74C3C",tags:["unexpected","promotion","respect","choice"],steps:["Apologize","Present value","Offer choice","Respect decision"],tips:["Be respectful","Offer value","Provide choice"]},{title:"Bad Reviews",category:"bad-reviews",objection:"I've heard bad reviews about your service",response:{pt1:"I appreciate you sharing that concern. We take feedback seriously and have made significant improvements based on customer input.",pt2:"Would you be open to hearing about our current standards and how we've addressed past concerns? Many of our recent customers have been very satisfied."},icon:"⭐",color:"#1ABC9C",tags:["reviews","improvement","satisfaction","standards"],steps:["Acknowledge concern","Present improvements","Share recent feedback","Offer information"],tips:["Be honest","Focus on improvements","Share success stories"]},{title:"Competitor Comparison",category:"not-interested",objection:"I'm going with a competitor",response:{pt1:"I understand you're considering other options. Before you make your final decision, I'd like to share what makes our service unique and how we might better meet your needs.",pt2:"Would you be open to a quick comparison of our services? I can highlight the key differences that might make us a better choice for you."},icon:"🔄",color:"#FF6B6B",tags:["competition","comparison","value","benefits"],steps:["Acknowledge choice","Present value","Offer comparison","Highlight differences"],tips:["Stay professional","Focus on strengths","Respect competition"]},{title:"Bad Experience",category:"bad-reviews",objection:"I had a bad experience before",response:{pt1:"I'm sorry to hear about your previous experience. We've made significant improvements to our service based on customer feedback.",pt2:"Would you be open to hearing about how we've addressed those issues? Many customers who had concerns in the past have been pleasantly surprised by our current service."},icon:"⭐",color:"#1ABC9C",tags:["experience","improvement","service","feedback"],steps:["Acknowledge experience","Present improvements","Share success stories","Offer information"],tips:["Be empathetic","Focus on improvements","Share positive outcomes"]},{title:"Price Negotiation",category:"cant-afford",objection:"Can you lower the price?",response:{pt1:"I understand you're looking for the best value. While our prices are set to reflect the quality of our service, we do have a current promotion that offers significant savings.",pt2:"Would you like to hear about our current offer? It includes additional benefits that make it an even better value."},icon:"💰",color:"#9B59B6",tags:["price","negotiation","value","promotion"],steps:["Acknowledge request","Present value","Mention promotion","Highlight benefits"],tips:["Stay firm on value","Focus on benefits","Present promotion"]},{title:"Need to Research",category:"not-ready",objection:"I need to do more research",response:{pt1:"That's a wise approach. I'd be happy to provide you with more information to help with your research. What specific aspects would you like to know more about?",pt2:"We also have customer testimonials and case studies that might be helpful. Would you like me to share those with you?"},icon:"📚",color:"#96CEB4",tags:["research","information","education","decision"],steps:["Support decision","Offer information","Provide resources","Suggest next steps"],tips:["Be helpful","Provide value","Respect process"]},{title:"Too Busy",category:"time-concern",objection:"I'm too busy right now",response:{pt1:"I understand you're busy. Our process is designed to be efficient and convenient. I can give you a quick overview of what's involved.",pt2:"Would you be open to a brief 15-minute consultation? I can help you determine if this is worth your time."},icon:"⏰",color:"#D4A5A5",tags:["time","efficiency","convenience","value"],steps:["Acknowledge concern","Present efficiency","Offer quick overview","Suggest brief meeting"],tips:["Be concise","Respect time","Focus on value"]},{title:"Need to Compare",category:"not-ready",objection:"I need to compare options",response:{pt1:"That's a smart approach. I'd be happy to provide you with a detailed comparison of our services versus other options.",pt2:"Would you like me to share our comparison guide? It highlights the key differences and benefits of our approach."},icon:"📊",color:"#96CEB4",tags:["comparison","information","education","decision"],steps:["Support decision","Offer comparison","Provide information","Suggest next steps"],tips:["Be informative","Focus on strengths","Provide value"]},{title:"Not Priority",category:"not-ready",objection:"This isn't a priority right now",response:{pt1:"I understand this might not be your top priority. However, addressing this now could prevent more urgent issues in the future.",pt2:"Would you like to hear about how our service can help you avoid potential problems down the line?"},icon:"⏳",color:"#96CEB4",tags:["priority","prevention","value","timing"],steps:["Acknowledge position","Present value","Explain benefits","Offer information"],tips:["Focus on prevention","Highlight urgency","Present value"]},{title:"Need to Budget",category:"cant-afford",objection:"I need to budget for this",response:{pt1:"I understand the importance of budgeting. We offer flexible payment options that can help you plan your expenses.",pt2:"Would you like to hear about our current promotion and payment plans? They're designed to make this more manageable for your budget."},icon:"💰",color:"#9B59B6",tags:["budget","payment","planning","options"],steps:["Acknowledge concern","Present options","Explain benefits","Offer information"],tips:["Be flexible","Focus on planning","Present options"]},{title:"Need to Save",category:"cant-afford",objection:"I need to save up for this",response:{pt1:"I understand you want to save up. We actually have a special promotion that can help you get started sooner while still being budget-friendly.",pt2:"Would you like to hear about our current offer? It includes flexible payment options that might work better for your savings plan."},icon:"💰",color:"#9B59B6",tags:["savings","budget","payment","promotion"],steps:["Acknowledge concern","Present value","Mention promotion","Offer options"],tips:["Be flexible","Focus on savings","Present options"]},{title:"Need More Information",category:"curious",objection:"I need more information before deciding",response:{pt1:"I'd be happy to provide you with more detailed information. What specific aspects would you like to know more about?",pt2:"We have comprehensive guides and case studies that might help you make an informed decision. Would you like me to share those with you?"},icon:"📚",color:"#FFEEAD",tags:["information","education","decision","details"],steps:["Acknowledge need","Offer information","Ask for specifics","Provide resources"],tips:["Be informative","Focus on details","Provide value"]},{title:"Want to Learn More",category:"curious",objection:"I want to learn more about your service",response:{pt1:"I'd be happy to walk you through our service in detail. What aspects are you most interested in learning about?",pt2:"We have a special presentation that highlights our unique approach and benefits. Would you like me to share that with you?"},icon:"🎓",color:"#FFEEAD",tags:["education","information","benefits","details"],steps:["Acknowledge interest","Offer details","Present value","Suggest next steps"],tips:["Be thorough","Focus on benefits","Create interest"]},{title:"Need to Check Schedule",category:"reset-appt",objection:"I need to check my schedule first",response:{pt1:"I understand you need to check your availability. I can hold a few time slots for you while you check your schedule.",pt2:"What time of day typically works best for you? I can help you find a convenient time that fits your schedule."},icon:"📅",color:"#F1C40F",tags:["schedule","availability","timing","convenience"],steps:["Acknowledge need","Offer flexibility","Suggest times","Confirm availability"],tips:["Be flexible","Offer options","Respect schedule"]},{title:"Need to Check Calendar",category:"reset-appt",objection:"I need to check my calendar",response:{pt1:"I understand you need to check your calendar. I can help you find a time that works with your schedule.",pt2:"Would you prefer morning, afternoon, or evening appointments? I can hold some slots for you while you check."},icon:"📆",color:"#F1C40F",tags:["calendar","scheduling","availability","convenience"],steps:["Acknowledge need","Offer options","Suggest times","Confirm preference"],tips:["Be flexible","Offer choices","Respect schedule"]},{title:"Need to Check with Team",category:"one-legger",objection:"I need to check with my team first",response:{pt1:"I understand you need to consult with your team. Would it be helpful if I provided some information you could share with them?",pt2:"I can also schedule a time when your team can be present to discuss this together. What would work better for you?"},icon:"👥",color:"#45B7D1",tags:["team","consultation","decision","meeting"],steps:["Acknowledge need","Offer information","Suggest meeting","Find convenient time"],tips:["Be supportive","Provide materials","Offer flexibility"]},{title:"Need Team Approval",category:"one-legger",objection:"I need team approval for this",response:{pt1:"I understand you need team approval. I can provide you with a comprehensive proposal that addresses all the key points your team will need to consider.",pt2:"Would you like me to prepare a presentation that you can share with your team? It includes all the benefits and ROI calculations they'll need."},icon:"✅",color:"#45B7D1",tags:["approval","team","proposal","benefits"],steps:["Acknowledge need","Offer proposal","Present benefits","Suggest next steps"],tips:["Be thorough","Focus on ROI","Provide materials"]},{title:"Need to Check Budget",category:"cant-afford",objection:"I need to check my budget first",response:{pt1:"I understand you need to review your budget. We offer flexible payment options that can work with various budget constraints.",pt2:"Would you like to hear about our current promotion? It includes payment plans designed to fit different budget situations."},icon:"💰",color:"#9B59B6",tags:["budget","payment","options","promotion"],steps:["Acknowledge need","Present options","Mention promotion","Offer flexibility"],tips:["Be flexible","Focus on options","Present value"]},{title:"Need to Check Finances",category:"cant-afford",objection:"I need to check my finances",response:{pt1:"I understand you need to review your finances. We have several payment options that can accommodate different financial situations.",pt2:"Would you like to hear about our current promotion? It includes flexible payment terms that might work better for your financial situation."},icon:"💳",color:"#9B59B6",tags:["finances","payment","options","promotion"],steps:["Acknowledge need","Present options","Mention promotion","Offer flexibility"],tips:["Be flexible","Focus on options","Present value"]},{title:"Need to Check Reviews",category:"bad-reviews",objection:"I need to check your reviews first",response:{pt1:"I understand you want to check our reviews. We're proud of our recent customer feedback and would be happy to share some recent testimonials.",pt2:"Would you like to hear about some recent success stories? Many of our customers have shared their positive experiences."},icon:"⭐",color:"#1ABC9C",tags:["reviews","testimonials","feedback","success"],steps:["Acknowledge need","Share testimonials","Present success stories","Offer information"],tips:["Be honest","Share recent feedback","Focus on improvements"]},{title:"Need to Check References",category:"bad-reviews",objection:"I need to check your references",response:{pt1:"I understand you want to check our references. We have several satisfied customers who would be happy to share their experiences.",pt2:"Would you like me to connect you with some of our recent customers? They can provide firsthand feedback about our service."},icon:"📞",color:"#1ABC9C",tags:["references","testimonials","feedback","success"],steps:["Acknowledge need","Offer references","Share success stories","Connect with customers"],tips:["Be transparent","Share references","Focus on satisfaction"]}],sN=({company:t,onLogin:s,onStartTraining:a})=>e.jsxs("div",{className:"company-landing",children:[e.jsx("header",{className:"company-header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"company-logo",children:[e.jsx("div",{className:"logo-icon",children:"🏢"}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h1",{children:t.name}),e.jsx("span",{className:"tagline",children:"Training Platform"})]})]}),e.jsxs("nav",{className:"header-nav",children:[e.jsx("button",{className:"nav-btn",onClick:s,children:"Login"}),e.jsx("button",{className:"nav-btn primary",onClick:a,children:"Start Training"})]})]})}),e.jsx("section",{className:"hero-section",children:e.jsxs("div",{className:"hero-container",children:[e.jsxs("div",{className:"hero-content",children:[e.jsxs("h2",{className:"hero-title",children:["Welcome to ",t.name,"'s",e.jsx("span",{className:"gradient-text",children:" Training Platform"})]}),e.jsxs("p",{className:"hero-description",children:["Access your personalized training materials, rebuttals, and resources designed specifically for ",t.name," team members."]}),e.jsxs("div",{className:"hero-actions",children:[e.jsx("button",{className:"cta-primary",onClick:a,children:"Start Training Now"}),e.jsx("button",{className:"cta-secondary",onClick:s,children:"Login to Continue"})]})]}),e.jsx("div",{className:"hero-visual",children:e.jsxs("div",{className:"training-preview",children:[e.jsxs("div",{className:"preview-header",children:[e.jsxs("div",{className:"preview-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("div",{className:"preview-title",children:[t.name," Training"]})]}),e.jsxs("div",{className:"preview-content",children:[e.jsxs("div",{className:"preview-sidebar",children:[e.jsx("div",{className:"sidebar-item active",children:"📚 Training"}),e.jsx("div",{className:"sidebar-item",children:"🎯 Rebuttals"}),e.jsx("div",{className:"sidebar-item",children:"📊 Progress"}),e.jsx("div",{className:"sidebar-item",children:"❓ FAQ"})]}),e.jsxs("div",{className:"preview-main",children:[e.jsxs("div",{className:"preview-cards",children:[e.jsxs("div",{className:"preview-card",children:[e.jsx("div",{className:"card-icon",children:"📈"}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-title",children:"Your Progress"}),e.jsx("div",{className:"card-value",children:"85%"})]})]}),e.jsxs("div",{className:"preview-card",children:[e.jsx("div",{className:"card-icon",children:"🎯"}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-title",children:"Rebuttals"}),e.jsx("div",{className:"card-value",children:"24"})]})]})]}),e.jsx("div",{className:"preview-chart",children:e.jsxs("div",{className:"chart-bars",children:[e.jsx("div",{className:"bar",style:{height:"60%"}}),e.jsx("div",{className:"bar",style:{height:"80%"}}),e.jsx("div",{className:"bar",style:{height:"45%"}}),e.jsx("div",{className:"bar",style:{height:"90%"}})]})})]})]})]})})]})}),e.jsx("section",{className:"features-section",children:e.jsxs("div",{className:"features-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"What You'll Learn"}),e.jsxs("p",{className:"section-description",children:["Comprehensive training designed for ",t.name," team members"]})]}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"🎯"}),e.jsx("h3",{className:"feature-title",children:"Smart Rebuttals"}),e.jsx("p",{className:"feature-description",children:"Learn effective responses to common objections and customer concerns."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"📊"}),e.jsx("h3",{className:"feature-title",children:"Lead Management"}),e.jsx("p",{className:"feature-description",children:"Master lead disposition tracking and follow-up strategies."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"💬"}),e.jsx("h3",{className:"feature-title",children:"Customer Service"}),e.jsx("p",{className:"feature-description",children:"Develop excellent customer service skills and problem-solving techniques."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"❓"}),e.jsx("h3",{className:"feature-title",children:"FAQ Knowledge"}),e.jsx("p",{className:"feature-description",children:"Access comprehensive answers to frequently asked questions."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"📅"}),e.jsx("h3",{className:"feature-title",children:"Scheduling"}),e.jsx("p",{className:"feature-description",children:"Learn efficient scheduling and appointment management techniques."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"📈"}),e.jsx("h3",{className:"feature-title",children:"Analytics"}),e.jsx("p",{className:"feature-description",children:"Track your progress and performance with detailed analytics."})]})]})]})}),e.jsx("section",{className:"cta-section",children:e.jsxs("div",{className:"cta-container",children:[e.jsx("h2",{className:"cta-title",children:"Ready to Start Your Training?"}),e.jsxs("p",{className:"cta-description",children:["Join your ",t.name," teammates and start improving your skills today."]}),e.jsxs("div",{className:"cta-buttons",children:[e.jsx("button",{className:"cta-primary",onClick:a,children:"Start Training Now"}),e.jsx("button",{className:"cta-secondary",onClick:s,children:"Login to Continue"})]})]})}),e.jsx("footer",{className:"company-footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section",children:[e.jsxs("div",{className:"footer-logo",children:[e.jsx("span",{className:"logo-icon",children:"🏢"}),e.jsx("span",{className:"logo-text",children:t.name})]}),e.jsxs("p",{className:"footer-description",children:["Professional training platform for ",t.name," team members"]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Training"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#training",children:"Training Modules"})}),e.jsx("li",{children:e.jsx("a",{href:"#progress",children:"Track Progress"})}),e.jsx("li",{children:e.jsx("a",{href:"#support",children:"Support"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Resources"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#rebuttals",children:"Rebuttals"})}),e.jsx("li",{children:e.jsx("a",{href:"#faq",children:"FAQ"})}),e.jsx("li",{children:e.jsx("a",{href:"#scheduling",children:"Scheduling"})}),e.jsx("li",{children:e.jsx("a",{href:"#analytics",children:"Analytics"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Support"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#help",children:"Help Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",children:"Contact Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#privacy",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"#terms",children:"Terms of Service"})})]})]})]}),e.jsx("div",{className:"footer-bottom",children:e.jsxs("p",{className:"footer-copyright",children:["© 2024 ",t.name,". All rights reserved."]})})]})})]}),nN=({company:t,onLogout:s})=>{const a=ms(),[i,l]=y.useState("dashboard"),[d,u]=y.useState([]),[m,g]=y.useState([]),[v,h]=y.useState([]),[j,w]=y.useState(!0),[D,S]=y.useState(null);y.useEffect(()=>{const A=()=>{const N=localStorage.getItem("companyUser");N&&S(JSON.parse(N))},L=async()=>{try{const N=fe(),I=Ze(Ce(N,"rebuttals"),ss("companyId","==",t.id),It("createdAt","desc")),B=(await De(I)).docs.map(oe=>({id:oe.id,...oe.data()}));u(B);const Q=Ze(Ce(N,"categories"),ss("companyId","==",t.id),It("createdAt","desc")),te=(await De(Q)).docs.map(oe=>({id:oe.id,...oe.data()}));g(te);const ce=Ze(Ce(N,"faqs"),ss("companyId","==",t.id),It("createdAt","desc")),ee=(await De(ce)).docs.map(oe=>({id:oe.id,...oe.data()}));h(ee)}catch(N){console.error("Error loading company data:",N)}finally{w(!1)}};A(),L()},[t.id]);const b=()=>{s(),a(`/company/${t.slug||t.id}`)},C=()=>{switch(i){case"rebuttals":return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Rebuttals"}),e.jsx("p",{children:"Learn effective responses to common objections"})]}),e.jsx("div",{className:"rebuttals-grid",children:d.map(A=>e.jsxs("div",{className:"rebuttal-card",children:[e.jsxs("div",{className:"rebuttal-header",children:[e.jsx("h3",{children:A.summary}),e.jsx("span",{className:"category-badge",children:A.category})]}),e.jsx("div",{className:"rebuttal-content",children:e.jsx("p",{children:A.content})})]},A.id))})]});case"faq":return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Frequently Asked Questions"}),e.jsx("p",{children:"Find answers to common questions"})]}),e.jsx("div",{className:"faq-list",children:v.map(A=>e.jsxs("div",{className:"faq-item",children:[e.jsx("h3",{className:"faq-question",children:A.question}),e.jsx("p",{className:"faq-answer",children:A.answer})]},A.id))})]});case"progress":return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Your Progress"}),e.jsx("p",{children:"Track your training progress and achievements"})]}),e.jsxs("div",{className:"progress-cards",children:[e.jsxs("div",{className:"progress-card",children:[e.jsx("div",{className:"progress-icon",children:"📚"}),e.jsxs("div",{className:"progress-content",children:[e.jsx("h3",{children:"Training Modules"}),e.jsx("div",{className:"progress-value",children:"8/10"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"80%"}})})]})]}),e.jsxs("div",{className:"progress-card",children:[e.jsx("div",{className:"progress-icon",children:"🎯"}),e.jsxs("div",{className:"progress-content",children:[e.jsx("h3",{children:"Rebuttals Mastered"}),e.jsx("div",{className:"progress-value",children:"24/30"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"80%"}})})]})]}),e.jsxs("div",{className:"progress-card",children:[e.jsx("div",{className:"progress-icon",children:"⭐"}),e.jsxs("div",{className:"progress-content",children:[e.jsx("h3",{children:"Overall Score"}),e.jsx("div",{className:"progress-value",children:"85%"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"85%"}})})]})]})]})]});default:return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsxs("h2",{children:["Welcome to ",t.name," Training"]}),e.jsx("p",{children:"Your personalized learning dashboard"})]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"dashboard-card",children:[e.jsx("div",{className:"card-icon",children:"🎯"}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Rebuttals"}),e.jsxs("p",{children:[d.length," available"]}),e.jsx("button",{onClick:()=>l("rebuttals"),children:"View Rebuttals"})]})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("div",{className:"card-icon",children:"❓"}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"FAQ"}),e.jsxs("p",{children:[v.length," questions"]}),e.jsx("button",{onClick:()=>l("faq"),children:"View FAQ"})]})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("div",{className:"card-icon",children:"📊"}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Progress"}),e.jsx("p",{children:"Track your learning"}),e.jsx("button",{onClick:()=>l("progress"),children:"View Progress"})]})]})]})]})}};return j?e.jsx("div",{className:"company-training loading",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})}):e.jsxs("div",{className:"company-training",children:[e.jsx("header",{className:"training-header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"company-info",children:[e.jsxs("div",{className:"company-logo",children:[e.jsx("span",{className:"logo-icon",children:"🏢"}),e.jsx("span",{className:"company-name",children:t.name})]}),e.jsx("span",{className:"training-badge",children:"Training Platform"})]}),e.jsxs("div",{className:"user-info",children:[e.jsxs("span",{className:"welcome-text",children:["Welcome, ",D?.name||D?.email]}),e.jsx("button",{className:"logout-btn",onClick:b,children:"Logout"})]})]})}),e.jsxs("div",{className:"training-layout",children:[e.jsx("nav",{className:"training-sidebar",children:e.jsxs("div",{className:"sidebar-nav",children:[e.jsxs("button",{className:`nav-item ${i==="dashboard"?"active":""}`,onClick:()=>l("dashboard"),children:[e.jsx("span",{className:"nav-icon",children:"📊"}),e.jsx("span",{className:"nav-text",children:"Dashboard"})]}),e.jsxs("button",{className:`nav-item ${i==="rebuttals"?"active":""}`,onClick:()=>l("rebuttals"),children:[e.jsx("span",{className:"nav-icon",children:"🎯"}),e.jsx("span",{className:"nav-text",children:"Rebuttals"})]}),e.jsxs("button",{className:`nav-item ${i==="faq"?"active":""}`,onClick:()=>l("faq"),children:[e.jsx("span",{className:"nav-icon",children:"❓"}),e.jsx("span",{className:"nav-text",children:"FAQ"})]}),e.jsxs("button",{className:`nav-item ${i==="progress"?"active":""}`,onClick:()=>l("progress"),children:[e.jsx("span",{className:"nav-icon",children:"📈"}),e.jsx("span",{className:"nav-text",children:"Progress"})]})]})}),e.jsx("main",{className:"training-main",children:C()})]})]})},rN=({company:t,onLogin:s,onBack:a})=>{const[i,l]=y.useState(""),[d,u]=y.useState(""),[m,g]=y.useState(!1),[v,h]=y.useState(""),j=async w=>{w.preventDefault(),g(!0),h("");try{const S=(await bl(rt,i,d)).user,b=Ae(fe(),"users",S.uid),C=await pt(b);if(C.exists()){const A=C.data();A.companyId===t.id?s({uid:S.uid,email:S.email,name:A.name||S.displayName,role:A.role||"user",companyId:t.id}):h("You are not authorized to access this company's training platform.")}else h("User account not found. Please contact your administrator.")}catch(D){switch(console.error("Login error:",D),D.code){case"auth/user-not-found":h("No account found with this email address.");break;case"auth/wrong-password":h("Incorrect password.");break;case"auth/invalid-email":h("Invalid email address.");break;case"auth/too-many-requests":h("Too many failed attempts. Please try again later.");break;default:h("Login failed. Please try again.")}}finally{g(!1)}};return e.jsx("div",{className:"company-login",children:e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("button",{className:"back-btn",onClick:a,children:"← Back"}),e.jsxs("div",{className:"company-info",children:[e.jsxs("div",{className:"company-logo",children:[e.jsx("span",{className:"logo-icon",children:"🏢"}),e.jsx("span",{className:"company-name",children:t.name})]}),e.jsx("h1",{className:"login-title",children:"Welcome Back"}),e.jsx("p",{className:"login-subtitle",children:"Sign in to access your training platform"})]})]}),e.jsxs("div",{className:"login-form-container",children:[e.jsxs("form",{className:"login-form",onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:i,onChange:w=>l(w.target.value),placeholder:"Enter your email",required:!0,disabled:m})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:d,onChange:w=>u(w.target.value),placeholder:"Enter your password",required:!0,disabled:m})]}),v&&e.jsx("div",{className:"error-message",children:v}),e.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"login-footer",children:[e.jsxs("p",{className:"help-text",children:["Need help? Contact your ",t.name," administrator."]}),e.jsxs("div",{className:"login-links",children:[e.jsx("a",{href:"#forgot-password",children:"Forgot Password?"}),e.jsx("a",{href:"#contact-support",children:"Contact Support"})]})]})]})]})})},aN=({company:t,children:s})=>{if(!t||t.status==="active")return s;const i=(l=>{switch(l){case"inactive":return{icon:"⏸️",title:"Service Temporarily Unavailable",message:t.maintenanceMessage||"This service is currently inactive. Please check back later.",color:"yellow"};case"suspended":return{icon:"🚫",title:"Access Suspended",message:t.maintenanceMessage||"Access to this service has been suspended. Please contact support for assistance.",color:"red"};default:return{icon:"⚠️",title:"Service Unavailable",message:"This service is currently unavailable. Please check back later.",color:"gray"}}})(t.status);return e.jsx("div",{className:"company-status-check",children:e.jsxs("div",{className:"status-container",children:[e.jsxs("div",{className:"status-content",children:[e.jsx("div",{className:`status-icon ${i.color}`,children:i.icon}),e.jsx("h1",{className:"status-title",children:i.title}),e.jsx("p",{className:"status-message",children:i.message}),e.jsx("div",{className:"status-details",children:e.jsxs("div",{className:"status-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Company:"}),e.jsx("span",{className:"info-value",children:t.name})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Status:"}),e.jsx("span",{className:`info-value status-${t.status}`,children:t.status?.charAt(0).toUpperCase()+t.status?.slice(1)})]})]})}),e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{className:"refresh-button",onClick:()=>window.location.reload(),children:"🔄 Refresh Page"}),e.jsx("button",{className:"contact-button",onClick:()=>window.open("mailto:support@example.com","_blank"),children:"📧 Contact Support"})]}),e.jsxs("div",{className:"status-footer",children:[e.jsx("p",{children:"We apologize for any inconvenience."}),t.status==="suspended"&&e.jsx("p",{className:"suspended-note",children:"If you believe this is an error, please contact our support team."})]})]}),e.jsxs("div",{className:"status-background",children:[e.jsx("div",{className:"bg-shape shape-1"}),e.jsx("div",{className:"bg-shape shape-2"}),e.jsx("div",{className:"bg-shape shape-3"})]})]})})},iN=()=>{const{companySlug:t}=bx(),s=ms(),[a,i]=y.useState(null),[l,d]=y.useState(!0),[u,m]=y.useState(null),[g,v]=y.useState("landing"),[h,j]=y.useState(!1);y.useEffect(()=>{(async()=>{try{console.log("🔍 Loading company for slug:",t);const C=fe();t&&localStorage.setItem("currentCompanySlug",t);const A=Ze(Ce(C,"companies"),ss("slug","==",t)),L=await De(A);if(L.empty){const N=Ae(C,"companies",t),I=await pt(N);if(I.exists()){const W={id:I.id,...I.data()};i(W),console.log("✅ Company found by ID:",W)}else{const W={id:t,name:t.replace(/[-_]/g," ").replace(/\b\w/g,B=>B.toUpperCase())};console.warn("⚠️ Company not found in Firestore. Using fallback:",W),i(W)}}else{const N=L.docs[0],I={id:N.id,...N.data()};i(I),console.log("✅ Company found:",I)}}catch(C){console.error("❌ Error loading company:",C);const A={id:t,name:t.replace(/[-_]/g," ").replace(/\b\w/g,L=>L.toUpperCase())};i(A)}finally{d(!1)}})()},[t]),y.useEffect(()=>{a&&(()=>{const C=localStorage.getItem("companyUser");C&&JSON.parse(C).companyId===a?.id&&j(!0)})()},[a]);const w=b=>{localStorage.setItem("companyUser",JSON.stringify({...b,companyId:a.id})),localStorage.setItem("currentCompanySlug",t),j(!0),v("training")},D=()=>{localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug"),j(!1),v("landing")},S=()=>l?e.jsx("div",{className:"company-platform loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsxs("p",{children:["Loading ",t,"..."]})]})}):u||!a?e.jsx("div",{className:"company-platform error",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{children:"Company Not Found"}),e.jsxs("p",{children:['The company "',t,'" could not be found.']}),e.jsx("button",{onClick:()=>s("/rebuttals"),children:"Go to Rebuttals"})]})}):e.jsx(aN,{company:a,children:(()=>{switch(g){case"login":return e.jsx(rN,{company:a,onLogin:w,onBack:()=>v("landing")});case"training":return e.jsx(nN,{company:a,onLogout:D});default:return e.jsx(sN,{company:a,onLogin:()=>v("login"),onStartTraining:()=>{v(h?"training":"login")}})}})()});return e.jsx("div",{className:"company-platform",children:S()})},jh=({title:t,subtitle:s})=>{const a=jn(),i=m=>a.pathname===m,l=a.pathname.match(/^\/company\/([^/]+)/),d=l?l[1]:null,u=d?d==="long-home"?"/app":`/company/${d}`:"/";return e.jsx("header",{className:"page-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{className:"header-main",children:[e.jsxs("div",{className:"header-text",children:[e.jsx("h1",{className:"header-title",children:t}),s&&e.jsx("p",{className:"header-subtitle",children:s})]}),e.jsxs("nav",{className:"header-nav",children:[e.jsxs(il,{to:u,className:`nav-link ${i(u)?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs(il,{to:"/rebuttals",className:`nav-link ${i("/rebuttals")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs(il,{to:"/disposition",className:`nav-link ${i("/disposition")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 6V12L16 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs(il,{to:"/customerService",className:`nav-link ${i("/customerService")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]})]})]})})})},Vr=({value:t,onChange:s,onClear:a,placeholder:i="Search...",onKeyDown:l,className:d="",autoFocus:u=!1,ariaLabel:m="Search",...g})=>e.jsxs("div",{className:`searchbar-container ${d}`,children:[e.jsx("span",{className:"searchbar-icon","aria-hidden":"true",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("input",{type:"text",className:"searchbar-input",value:t,onChange:s,onKeyDown:l,placeholder:i,autoFocus:u,"aria-label":m,...g}),t&&e.jsx("button",{type:"button",className:"searchbar-clear",onClick:a,"aria-label":"Clear search",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),oN=["Listen actively and acknowledge the customer's concerns","Stay calm and professional throughout the conversation","Use positive language and focus on solutions","Be prepared with relevant information and examples","Follow up appropriately if needed"],lN=({onNavigate:t,searchQuery:s})=>{const[a,i]=y.useState("all"),[l,d]=y.useState(null),[u,m]=y.useState(s||""),[g,v]=y.useState(!1),[h,j]=y.useState(!1),[w,D]=y.useState(null),[S,b]=y.useState([]),[C,A]=y.useState(!1),[L,N]=y.useState(-1),[I,W]=y.useState([]),[B,Q]=y.useState(!0),[F,te]=y.useState([]),[ce,z]=y.useState({}),[ee,oe]=y.useState(null),[re,le]=y.useState({});y.useEffect(()=>(document.body.classList.add("dark"),()=>{document.body.classList.remove("dark")}),[]),y.useEffect(()=>{if(g)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[g]);const O=y.useCallback(V=>{const J=(Ge,vt)=>{for(const Ve of vt)if(Ge&&Ge[Ve])return Ge[Ve];return""},ae=V?.content&&typeof V.content=="object"?V.content:{},ge=V?.response&&typeof V.response=="object"?V.response:{},We=typeof V?.content=="string"?V.content:J(ae,["pt1","initial","part1","content1","first","opening"])||J(ge,["pt1","initial","part1","content1","first","opening"])||V?.summary||V?.objection||"",ze=J(ae,["pt2","followup","followUp","part2","content2","second","closing"])||J(ge,["pt2","followup","followUp","part2","content2","second","closing"])||"";return{...V,content:{pt1:We,pt2:ze}}},[]);y.useEffect(()=>{const V=Ze(Ce(fe(),"rebuttals"),It("createdAt","desc")),J=Yi(V,ae=>{const ge=ae.docs.map(We=>O({id:We.id,...We.data()}));console.log("Firestore rebuttals (normalized):",ge),W(ge),Q(!1)},ae=>{console.error("Error listening to rebuttals:",ae),Q(!1)});return()=>J()},[O]),y.useEffect(()=>{(async()=>{try{Q(!0);const J=await cr.getAllRebuttals();console.log("Raw rebuttals data:",J);const ae=J.map(O);W(ae);const ge=await cr.getCategories();console.log("Raw categories data:",ge);const We=ge.reduce((Ve,Ke)=>{const et=Ke.name.toLowerCase().replace(/\s+/g,"-");return Ve[et]=Ke.id,Ve[Ke.name.toLowerCase()]=Ke.id,console.log(`Mapping category: ${Ke.name} -> ${Ke.id}`),Ve},{}),ze=ge.reduce((Ve,Ke)=>(Ve[Ke.id]=Ke.name,console.log(`Reverse mapping: ${Ke.id} -> ${Ke.name}`),Ve),{}),Ge=ae.map(Ve=>{if(Ve.category){let Ke=Ve.category;if(ze[Ke])return console.log(`Rebuttal "${Ve.title}" already has valid category ID: ${Ke}`),Ve;const et=Ve.category.toLowerCase().replace(/\s+/g,"-");if(Ke=We[et],Ke||(Ke=We[Ve.category.toLowerCase()]),Ke)return console.log(`Mapped rebuttal "${Ve.title}" from category "${Ve.category}" to ID: ${Ke}`),{...Ve,category:Ke};console.log(`No matching category ID found for rebuttal "${Ve.title}" with category "${Ve.category}"`)}return Ve});console.log("Updated rebuttals with category mappings:",Ge.map(Ve=>({title:Ve.title,originalCategory:Ve.category,mappedCategory:ze[Ve.category]}))),W(Ge);const vt=[{id:"all",name:"All Categories",icon:"📋",color:"gray"},...ge.map(Ve=>({id:Ve.id,name:Ve.name,icon:Ve.icon||"📋",color:q(Ve.id)}))];te(vt),console.log("Category Mapping:",{nameToId:We,idToName:ze,rebuttals:Ge.map(Ve=>({title:Ve.title,category:Ve.category,categoryName:ze[Ve.category]}))}),Q(!1)}catch(J){console.error("Error fetching data:",J),oe("Failed to load rebuttals and categories"),Q(!1)}})()},[]);const q=V=>{const J=["red","blue","green","yellow","purple","pink","orange","teal","indigo","cyan"],ae=V.split("").reduce((ge,We)=>ge+We.charCodeAt(0),0);return J[ae%J.length]};F.filter(V=>V.id!=="all").map(V=>V.id),I.filter(V=>V.isUrgent).map(V=>({id:V.id,topic:"rebuttals",title:V.title,description:V.summary,steps:V.steps||[],tips:V.tips||[],keywords:V.tags||[],isUrgent:!0}));const Y=(V,J)=>{let ae;return function(...We){const ze=()=>{clearTimeout(ae),V(...We)};clearTimeout(ae),ae=setTimeout(ze,J)}},T=(V,J)=>{const ae=V.toLowerCase().split(" "),ge=J.toLowerCase().split(" ");let We=0;return ae.forEach(ze=>{ge.forEach(Ge=>{(Ge.includes(ze)||ze.includes(Ge))&&(We+=1)})}),We/ae.length},R=V=>{if(!V.trim()){b([]);return}const J=[];V.toLowerCase().split(" "),I.forEach(ae=>{const ge=T(V,ae.title),We=T(V,ae.summary),ze=ae.tags.reduce((Ke,et)=>Ke+T(V,et),0)/ae.tags.length,Ge=ae.content&&ae.content.pt1?T(V,ae.content.pt1):0,vt=ae.content&&ae.content.pt2?T(V,ae.content.pt2):0,Ve=Math.max(ge*2,We,ze,Ge,vt);Ve>.3&&J.push({...ae,relevanceScore:Ve})}),J.sort((ae,ge)=>ge.relevanceScore-ae.relevanceScore),b(J)},E=y.useCallback(Y(V=>{R(V)},300),[]),f=V=>{const J=V.target.value;m(J),A(!0),N(-1),E(J)},P=V=>{if(C)switch(V.key){case"ArrowDown":V.preventDefault(),N(J=>J<S.length-1?J+1:J);break;case"ArrowUp":V.preventDefault(),N(J=>J>0?J-1:J);break;case"Enter":V.preventDefault(),L>=0&&L<S.length&&M(S[L]);break;case"Escape":A(!1);break}},M=V=>{m(V.title),A(!1),d(V),v(!0)},K=y.useMemo(()=>a==="all"?I:I.filter(V=>V.category===a),[a,I]);y.useEffect(()=>{const V=I.reduce((J,ae)=>{const ge=ae.category||"uncategorized";return J[ge]||(J[ge]={count:0,rebuttals:[]}),J[ge].count++,J[ge].rebuttals.push(ae.title),J},{});console.log("Category Update:",{selectedCategory:a,totalRebuttals:I.length,filteredCount:K.length,categoryCount:V[a]?.count||0})},[a,I,K]);const ue=V=>{d(V),v(!0)},be=()=>{v(!1),d(null)},pe=V=>{if(!V)return null;let J="",ae="";typeof V=="string"?J=V:V&&typeof V=="object"&&(J=V.pt1||"",ae=V.pt2||"");const ge=()=>J.toLowerCase().includes("price")||J.toLowerCase().includes("cost")?"💰 Value-Focused Response":J.toLowerCase().includes("time")||J.toLowerCase().includes("schedule")?"⏰ Time Management Solution":J.toLowerCase().includes("spouse")||J.toLowerCase().includes("partner")?"👥 Spouse/Partner Engagement":J.toLowerCase().includes("not ready")||J.toLowerCase().includes("later")?"🎯 Immediate Value Proposition":J.toLowerCase().includes("not interested")?"💡 Interest Building Approach":"🎯 Primary Response Strategy",We=()=>ae.toLowerCase().includes("price")||ae.toLowerCase().includes("cost")?"💎 Enhanced Value Offer":ae.toLowerCase().includes("time")||ae.toLowerCase().includes("schedule")?"⚡ Flexible Scheduling Options":ae.toLowerCase().includes("spouse")||ae.toLowerCase().includes("partner")?"🤝 Joint Decision Support":ae.toLowerCase().includes("not ready")||ae.toLowerCase().includes("later")?"✨ Urgency Creation":ae.toLowerCase().includes("not interested")?"🌟 Interest Reinforcement":"🔄 Advanced Response Strategy";return e.jsxs("div",{className:"rebuttal-content-sections",children:[J&&e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:ge()}),e.jsx("p",{className:"modal-content-text",children:J})]}),e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:We()}),e.jsx("p",{className:"modal-content-text",children:ae||"No follow-up response available."})]})]})},X=y.useCallback(V=>{const J={};return F.forEach(ae=>{ae.id!=="all"&&(J[ae.id]={count:0,totalViews:0,lastUpdated:null,tags:new Set,commonKeywords:new Map})}),V.forEach(ae=>{const ge=ae.category;if(ge&&J[ge]){if(J[ge].count++,ae.tags&&Array.isArray(ae.tags)&&ae.tags.forEach(Ge=>J[ge].tags.add(Ge)),ae.updatedAt){const Ge=new Date(ae.updatedAt);(!J[ge].lastUpdated||Ge>new Date(J[ge].lastUpdated))&&(J[ge].lastUpdated=ae.updatedAt)}`${ae.title} ${ae.summary||""} ${ae.content?.pt1||""} ${ae.content?.pt2||""}`.toLowerCase().split(/\W+/).forEach(Ge=>{Ge.length>3&&J[ge].commonKeywords.set(Ge,(J[ge].commonKeywords.get(Ge)||0)+1)})}}),Object.keys(J).forEach(ae=>{J[ae].tags=Array.from(J[ae].tags),J[ae].commonKeywords=Array.from(J[ae].commonKeywords.entries()).sort((ge,We)=>We[1]-ge[1]).slice(0,5).map(([ge,We])=>({word:ge,count:We}))}),J},[F]);y.useEffect(()=>{if(I.length>0&&F.length>0){const V=X(I);z(V)}},[I,F,X]);const _=({category:V})=>{if(V==="all"||!ce[V])return null;const J=ce[V],ae=F.find(ge=>ge.id===V);return e.jsxs("div",{className:"category-insights",children:[e.jsxs("div",{className:"insights-header",children:[e.jsx("span",{className:"category-icon",children:ae?.icon||"📊"}),e.jsxs("h3",{children:[ae?.name||V," Insights"]})]}),e.jsxs("div",{className:"insights-grid",children:[e.jsxs("div",{className:"insight-card",children:[e.jsx("div",{className:"insight-icon",children:"📚"}),e.jsx("div",{className:"insight-value",children:J.count}),e.jsx("div",{className:"insight-label",children:"Total Rebuttals"})]}),e.jsxs("div",{className:"insight-card",children:[e.jsx("div",{className:"insight-icon",children:"🏷️"}),e.jsx("div",{className:"insight-value",children:J.tags.length}),e.jsx("div",{className:"insight-label",children:"Unique Tags"})]}),e.jsxs("div",{className:"insight-card",children:[e.jsx("div",{className:"insight-icon",children:"🔄"}),e.jsx("div",{className:"insight-value",children:J.lastUpdated?new Date(J.lastUpdated.seconds*1e3).toLocaleDateString():"N/A"}),e.jsx("div",{className:"insight-label",children:"Last Updated"})]})]}),J.tags.length>0&&e.jsxs("div",{className:"insights-tags",children:[e.jsx("h4",{children:"Common Tags"}),e.jsx("div",{className:"tag-cloud",children:J.tags.map(ge=>e.jsx("span",{className:"tag",children:ge},ge))})]}),J.commonKeywords.length>0&&e.jsxs("div",{className:"insights-keywords",children:[e.jsx("h4",{children:"Common Keywords"}),e.jsx("div",{className:"keyword-list",children:J.commonKeywords.map(({word:ge,count:We})=>e.jsxs("div",{className:"keyword-item",children:[e.jsx("span",{className:"keyword",children:ge}),e.jsx("span",{className:"count",children:We})]},ge))})]})]})};return e.jsxs("div",{className:"library-container",children:[e.jsx(jh,{title:"Rebuttal Library",subtitle:"Access and manage your collection of rebuttals"}),e.jsx("div",{className:"library-content",children:B?e.jsxs("div",{className:"library-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading rebuttals..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"library-header",children:[e.jsx("h1",{className:"library-title",children:"Call Center Rebuttals"}),e.jsx("div",{className:"header-navigation",children:e.jsxs("div",{className:"quick-nav",children:[e.jsxs("button",{onClick:()=>{const V=localStorage.getItem("currentCompanySlug");V?window.location.href=`/company/${V}`:t("home")},className:"nav-button home-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs("button",{onClick:()=>t("rebuttals"),className:`nav-button ${window.location.pathname.includes("rebuttals")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs("button",{onClick:()=>t("disposition"),className:`nav-button ${window.location.pathname.includes("disposition")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 3H15V5H9V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs("button",{onClick:()=>t("customerService"),className:`nav-button ${window.location.pathname.includes("customerService")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs("button",{onClick:()=>t("faq"),className:`nav-button ${window.location.pathname.includes("faq")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.30197 14.92 10.02C14.92 12 11.92 13 11.92 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 17H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"FAQ"]}),e.jsxs("button",{onClick:()=>t("scheduleScript"),className:`nav-button ${window.location.pathname.includes("scheduleScript")?"active":""}`,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Schedule Script"]})]})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx(Vr,{value:u,onChange:f,onClear:()=>{m(""),A(!1),b([])},placeholder:"Search rebuttals...",onKeyDown:P}),C&&S.length>0&&e.jsx("div",{className:"search-suggestions-dropdown",children:S.map((V,J)=>e.jsxs("div",{className:`suggestion-item ${J===L?"selected":""}`,onClick:()=>M(V),children:[e.jsx("span",{className:"suggestion-icon",children:V.icon||"💬"}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h4",{children:V.title}),e.jsx("p",{children:V.description})]})]},V.id))}),u&&e.jsxs("div",{className:"search-results-count",children:[K.length," result",K.length!==1?"s":""," found"]})]}),e.jsxs("div",{className:"library-layout",children:[e.jsxs("div",{className:"library-sidebar",children:[e.jsx("h2",{className:"library-sidebar-title",children:"Categories"}),e.jsx("div",{className:"library-categories",children:F.map(V=>e.jsxs("button",{onClick:()=>{i(V.id)},className:`library-category-button ${a===V.id?"active":""} ${V.color}`,children:[e.jsx("span",{className:"category-icon",children:V.icon}),e.jsx("span",{className:"category-name",children:V.name})]},V.id))})]}),e.jsxs("div",{className:"library-main",children:[a!=="all"&&e.jsx(_,{category:a}),u.toLowerCase()==="common objections"&&e.jsxs("div",{className:"common-objections-header",children:[e.jsx("h2",{className:"common-objections-title",children:"Most Common Objections & Smart Tips"}),e.jsxs("div",{className:"smart-tips-container",children:[e.jsxs("div",{className:"smart-tip",children:[e.jsx("span",{className:"tip-icon",children:"💡"}),e.jsx("strong",{children:"Pro Tip:"})," Always acknowledge the customer's concern before presenting your rebuttal"]}),e.jsxs("div",{className:"smart-tip",children:[e.jsx("span",{className:"tip-icon",children:"🎯"}),e.jsx("strong",{children:"Script Strategy:"})," Use Part 1 first, then escalate to Part 2 if needed"]}),e.jsxs("div",{className:"smart-tip",children:[e.jsx("span",{className:"tip-icon",children:"⚡"}),e.jsx("strong",{children:"Quick Response:"})," These 5 objections cover 80% of customer concerns"]})]})]}),K.length===0?e.jsxs("div",{className:"no-rebuttals-message",children:[e.jsx("p",{children:"No rebuttals found in this category."}),e.jsxs("p",{className:"debug-info",children:["Selected Category: ",a]}),e.jsxs("p",{className:"debug-info",children:["Total Rebuttals: ",I.length]}),e.jsxs("p",{className:"debug-info",children:["Available Categories: ",I.map(V=>V.category).filter((V,J,ae)=>ae.indexOf(V)===J).join(", ")]})]}):K.map(V=>e.jsx("div",{className:"library-rebuttal-card",onClick:()=>ue(V),children:e.jsx("div",{className:"library-rebuttal-content",children:e.jsxs("div",{className:"library-rebuttal-info",children:[e.jsx("h3",{className:"library-rebuttal-title",children:V.title}),e.jsx("p",{className:"library-rebuttal-summary",children:V.summary}),e.jsx("div",{className:"library-rebuttal-tags",children:V.tags.map(J=>e.jsx("span",{className:"library-rebuttal-tag",children:J},J))})]})})},V.id))]})]})]})}),g&&l&&e.jsx("div",{className:"modal-overlay",onClick:be,children:e.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{className:"modal-title",children:l.title})}),e.jsx("button",{onClick:be,className:"modal-close-button",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"modal-tags",children:l.tags&&l.tags.map(V=>e.jsxs("span",{className:"modal-tag",children:["#",V]},V))}),e.jsx("div",{className:"modal-summary",children:e.jsx("p",{className:"modal-summary-text",children:l.situationOverview||l.summary||l.objection||"No situation overview available."})}),e.jsx("div",{className:"modal-rebuttal-content",children:pe(l.content||l.response)}),e.jsxs("div",{className:"modal-tips",children:[e.jsx("div",{className:"modal-section-header",children:e.jsx("h3",{children:"Pro Tips & Best Practices"})}),e.jsx("div",{className:"tips-grid",children:(l.tips&&l.tips.length>0?l.tips:oN).map((V,J)=>e.jsxs("div",{className:"tip-card",children:[e.jsxs("div",{className:"tip-card-header",children:[e.jsx("span",{className:"tip-icon",children:["🎯","💡","⚡","✨","🌟"][J]||"💡"}),e.jsxs("span",{className:"tip-number",children:["Tip ",J+1]})]}),e.jsx("div",{className:"tip-content",children:e.jsx("p",{className:"tip-text",children:V})})]},J))}),(!l.tips||l.tips.length===0)&&e.jsxs("div",{className:"default-tips-note",children:[e.jsx("span",{className:"default-tips-icon",children:"ℹ️"}),e.jsxs("div",{className:"default-tips-content",children:[e.jsx("p",{className:"default-tips-title",children:"General Best Practices"}),e.jsx("p",{className:"default-tips-text",children:"These are general best practice tips. Consider adding specific tips for this rebuttal."})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("div",{className:"modal-footer-note",children:"💡 Pro Tip: Start with the Initial Response. If customer still objects, use the Follow-up Response"}),e.jsx("button",{onClick:be,className:"modal-close-footer-button",children:"Close"})]})]})})]})},cN=`
.category-insights {
  background: #0f172a; /* dark slate */
  color: #e5e7eb;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.4);
  border: 1px solid rgba(148,163,184,0.15);
}

.insights-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.insights-header h3 {
  margin: 0;
  font-size: 1.2rem;
  color: #e5e7eb;
}

.insights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
  margin-bottom: 20px;
}

.insight-card {
  background: rgba(30,41,59,0.6);
  border-radius: 8px;
  padding: 16px;
  text-align: center;
  border: 1px solid rgba(148,163,184,0.12);
}

.insight-icon {
  font-size: 1.5rem;
  margin-bottom: 8px;
}

.insight-value {
  font-size: 1.5rem;
  font-weight: bold;
  color: #93c5fd;
  margin-bottom: 4px;
}

.insight-label {
  font-size: 0.9rem;
  color: #a1a1aa;
}

.insights-tags, .insights-keywords {
  margin-top: 24px;
  background: rgba(30,41,59,0.5);
  border-radius: 12px;
  padding: 20px;
  border: 1px solid rgba(148,163,184,0.12);
}

.insights-tags h4, .insights-keywords h4 {
  margin: 0 0 16px 0;
  font-size: 1.1rem;
  color: #e5e7eb;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.insights-tags h4::before {
  content: '🏷️';
}

.insights-keywords h4::before {
  content: '🔍';
}

.tag-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.tag {
  background: rgba(59,130,246,0.15);
  color: #93c5fd;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s ease;
  border: 1px solid rgba(59,130,246,0.3);
}

.tag:hover {
  background: rgba(59,130,246,0.25);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}

.keyword-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}

.keyword-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 16px;
  background: rgba(2,6,23,0.8);
  border-radius: 8px;
  border: 1px solid rgba(148,163,184,0.15);
  transition: all 0.2s ease;
}

.keyword-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
}

.keyword {
  font-weight: 500;
  color: #e5e7eb;
  font-size: 0.95rem;
}

.count {
  background: rgba(59,130,246,0.15);
  color: #93c5fd;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 600;
  min-width: 32px;
  text-align: center;
}

.modal-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 20px;
  padding: 12px;
  background: rgba(2,6,23,0.6);
  border-radius: 8px;
  border: 1px solid rgba(148,163,184,0.15);
}

.modal-tag {
  background: rgba(59,130,246,0.15);
  color: #93c5fd;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 500;
  border: 1px solid rgba(59,130,246,0.3);
  transition: all 0.2s ease;
}

.modal-tag:hover {
  background: rgba(59,130,246,0.25);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}

.modal-summary {
  background: #0b1324;
  color: #e5e7eb;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  border: 1px solid rgba(148,163,184,0.15);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
}

.modal-section-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e3f2fd;
}

.modal-section-header svg {
  color: #1976d2;
}

.modal-section-header h3 {
  margin: 0;
  font-size: 1.2rem;
  color: #e5e7eb;
  font-weight: 600;
}

.modal-summary-text {
  font-size: 1rem;
  line-height: 1.6;
  color: #e5e7eb;
  margin: 0;
  padding: 0 4px;
}

.modal-rebuttal-content {
  background: #0b1324;
  color: #e5e7eb;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  border: 1px solid rgba(148,163,184,0.15);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
}

.rebuttal-content-sections {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.rebuttal-section {
  background: rgba(2,6,23,0.6);
  border-radius: 8px;
  padding: 16px;
  border: 1px solid rgba(148,163,184,0.15);
}

.rebuttal-section-title {
  color: #93c5fd;
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0 0 12px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.modal-content-text {
  font-size: 1rem;
  line-height: 1.6;
  color: #333;
  margin: 0;
}

.modal-tips {
  background: #0b1324;
  color: #e5e7eb;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
  border: 1px solid rgba(148,163,184,0.15);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
}

.tips-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
  margin-top: 16px;
}

.tip-card {
  background: rgba(2,6,23,0.6);
  border-radius: 8px;
  padding: 16px;
  border: 1px solid rgba(148,163,184,0.15);
  transition: all 0.2s ease;
  color: #e5e7eb;
}

.tip-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.tip-card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  color: #e5e7eb;
}

.tip-icon { color: #93c5fd; }

.tip-icon-wrapper {
  background: rgba(59,130,246,0.15);
  color: #93c5fd;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  border: 1px solid rgba(59,130,246,0.3);
}

.tip-number {
  font-weight: 600;
  color: #e5e7eb;
}

.tip-text {
  margin: 0;
  color: #e5e7eb;
  line-height: 1.5;
}

.modal-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 0;
  border-top: 1px solid rgba(148,163,184,0.15);
  margin-top: 24px;
}

.modal-footer-note {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #a1a1aa;
  font-size: 0.9rem;
}

.modal-close-footer-button {
  background: #1f3b73;
  color: #e5e7eb;
  border: none;
  padding: 8px 20px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.modal-close-footer-button:hover {
  background: #2450a4;
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
}

/* Dark mode for situations section */
.modal-situations {
  background: #0b1324;
  color: #e5e7eb;
  border-radius: 12px;
  padding: 16px;
  border: 1px solid rgba(148,163,184,0.15);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
}

.situation-item {
  background: rgba(2,6,23,0.6);
  border: 1px solid rgba(148,163,184,0.15);
  border-radius: 8px;
  padding: 12px;
}

.situation-title { color: #93c5fd; }
.situation-description { color: #e5e7eb; }
`,Tx=document.createElement("style");Tx.innerText=cN;document.head.appendChild(Tx);const dN=["Listen actively and acknowledge the customer's concerns","Stay calm and professional throughout the conversation","Use positive language and focus on solutions","Be prepared with relevant information and examples","Follow up appropriately if needed"],Ex=({collapsed:t,onCollapseChange:s})=>{const[a,i]=y.useState([]),[l,d]=y.useState(null),[u,m]=y.useState(!1),[g,v]=y.useState(null),[h,j]=y.useState(!1),[w,D]=y.useState(!0),[S,b]=y.useState(t||!1),[C,A]=y.useState(!0);y.useEffect(()=>{typeof t=="boolean"&&b(t)},[t]),y.useEffect(()=>{(u||h)&&S&&(b(!1),s&&s(!1))},[u,h,S,s]),y.useEffect(()=>{(async()=>{D(!0);const B=await lr.getAllCategories(),Q=await cr.getAllRebuttals(),F=B.map(te=>{const ce=Q.filter(z=>{const ee=z.category||"",oe=te.name||"",re=te.id||"";return ee===oe||ee===re||ee.toLowerCase()===oe.toLowerCase()});return{id:te.id,name:te.name,description:te.description||"",icon:te.icon||"📋",color:te.color||"#808080",items:ce.map(z=>{let ee={pt1:"",pt2:""};return typeof z.content=="string"?ee.pt1=z.content:z.content&&typeof z.content=="object"?ee={pt1:z.content.pt1||z.content.initial||z.content.part1||"",pt2:z.content.pt2||z.content.followup||z.content.part2||""}:typeof z.response=="string"?ee.pt1=z.response:z.response&&typeof z.response=="object"&&(ee={pt1:z.response.pt1||z.response.initial||z.response.part1||"",pt2:z.response.pt2||z.response.followup||z.response.part2||""}),ee.pt1||(ee.pt1=z.objection||""),{id:z.id,title:z.title,description:z.description||z.objection||z.summary||"",category:te.id,content:ee,steps:z.steps||["Listen to customer concerns","Address specific needs","Present solution","Follow up as needed"],tips:z.tips||["Be professional and courteous","Focus on customer needs","Provide clear information"],tags:z.tags||[],situationOverview:z.situationOverview||"",summary:z.summary||"",objection:z.objection||"",situations:z.situations||[]}})}});i(F),D(!1)})()},[]);const L=W=>{v(W),j(!0),m(!1),S&&(b(!1),s&&s(!1))},N=()=>{m(!1),d(null)},I=()=>{j(!1),v(null)};return e.jsxs(e.Fragment,{children:[u&&l&&e.jsx("div",{className:"modal-overlay",onClick:N,children:e.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),style:{maxWidth:400,width:"95%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsxs("h2",{className:"modal-title",children:[l.name," Rebuttals"]})}),e.jsx("button",{onClick:N,className:"modal-close-button",children:"×"})]}),e.jsx("div",{className:"modal-body",children:l.items.length===0?e.jsx("div",{style:{color:"#888",fontSize:14},children:"No rebuttals in this category."}):l.items.map(W=>e.jsx("div",{className:"library-rebuttal-card",style:{cursor:"pointer",marginBottom:8,background:"#fff",borderRadius:6,boxShadow:"0 1px 3px rgba(0,0,0,0.04)",padding:8},onClick:()=>L(W),children:e.jsx("div",{className:"library-rebuttal-content",children:e.jsxs("div",{className:"library-rebuttal-info",children:[e.jsx("h4",{className:"library-rebuttal-title",style:{fontSize:15,margin:0},children:W.title}),e.jsx("p",{className:"library-rebuttal-summary",style:{fontSize:13,color:"#666",margin:0},children:W.summary})]})})},W.id))})]})}),h&&g&&e.jsx("div",{className:"modal-overlay",onClick:I,children:e.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),style:{maxWidth:480,width:"95%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{className:"modal-title",children:g.title})}),e.jsx("button",{onClick:I,className:"modal-close-button",children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"modal-tags",children:g.tags&&g.tags.map(W=>e.jsxs("span",{className:"modal-tag",children:["#",W]},W))}),e.jsx("div",{className:"modal-summary",children:e.jsx("p",{className:"modal-summary-text",children:g.situationOverview||g.summary||g.objection||"No situation overview available."})}),e.jsx("div",{className:"modal-rebuttal-content",children:g.content&&e.jsxs(e.Fragment,{children:[g.content.pt1&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("b",{children:"Initial Response:"})," ",g.content.pt1]}),g.content.pt2&&e.jsxs("div",{children:[e.jsx("b",{children:"Follow-up Response:"})," ",g.content.pt2]})]})}),e.jsxs("div",{className:"modal-tips",children:[e.jsx("div",{className:"modal-section-header",children:e.jsx("h3",{children:"Pro Tips & Best Practices"})}),e.jsx("div",{className:"tips-grid",children:(g.tips&&g.tips.length>0?g.tips:dN).map((W,B)=>e.jsxs("div",{className:"tip-card",children:[e.jsxs("div",{className:"tip-card-header",children:[e.jsx("span",{className:"tip-icon",children:["🎯","💡","⚡","✨","🌟"][B]||"💡"}),e.jsxs("span",{className:"tip-number",children:["Tip ",B+1]})]}),e.jsx("div",{className:"tip-content",children:e.jsx("p",{className:"tip-text",children:W})})]},B))}),(!g.tips||g.tips.length===0)&&e.jsxs("div",{className:"default-tips-note",children:[e.jsx("span",{className:"default-tips-icon",children:"ℹ️"}),e.jsxs("div",{className:"default-tips-content",children:[e.jsx("p",{className:"default-tips-title",children:"General Best Practices"}),e.jsx("p",{className:"default-tips-text",children:"These are general best practice tips. Consider adding specific tips for this rebuttal."})]})]})]})]}),g.situations&&g.situations.length>0&&e.jsxs("div",{className:"modal-situations",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsx("span",{style:{fontSize:18,marginRight:8},children:"🎯"}),e.jsx("h3",{children:"Situations Used"})]}),e.jsx("div",{className:"situations-list",children:g.situations.map((W,B)=>e.jsx("div",{className:"situation-item",children:e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:W.title}),e.jsx("p",{className:"situation-description",children:W.description})]})},B))})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("div",{className:"modal-footer-note",children:"💡 Pro Tip: Start with the Initial Response. If customer still objects, use the Follow-up Response"}),e.jsx("button",{onClick:I,className:"modal-close-footer-button",children:"Close"})]})]})})]})},ga=[{id:1,name:"Set Lead",category:"scheduled",description:"Lead has been set and scheduled for an appointment. This is a confirmed appointment where the customer has agreed to meet with a sales representative.",icon:"✅",color:"green",nextSteps:"Confirm appointment details and prepare for visit",tips:["Verify appointment time and date","Confirm customer contact information","Prepare necessary materials","Review customer history","Check for any special requirements"],examples:["Customer agreed to meet on Tuesday at 2 PM","Appointment confirmed for Saturday morning","Customer scheduled for evening consultation"],subcategories:["New Appointment","Rescheduled Appointment","Follow-up Appointment"]},{id:2,name:"Busy",category:"scheduled",description:"Customer is currently too busy to meet but has expressed interest in scheduling for a later time. This indicates potential interest but requires follow-up.",icon:"⏰",color:"yellow",nextSteps:"Schedule follow-up call in 1-2 weeks",tips:["Ask for specific timeframe when they might be available","Note their preferred contact times","Document their current busy period","Suggest alternative meeting times","Offer flexible scheduling options"],examples:["Customer in middle of home renovation","Customer traveling for next two weeks","Customer has family visiting"],subcategories:["Temporarily Busy","Seasonal Busy","Work Schedule Conflict"]},{id:3,name:"Call Back",category:"scheduled",description:"Customer has requested a callback at a specific time. This is a direct request for follow-up communication.",icon:"📞",color:"blue",nextSteps:"Schedule callback within 24-48 hours",tips:["Get specific time preference","Confirm phone number","Note reason for callback","Set reminder for callback time","Prepare relevant information for callback"],examples:["Customer will be home after 6 PM","Customer needs to check schedule first","Customer requested weekend callback"],subcategories:["Time-Specific Callback","Information Gathering Callback","Decision Maker Callback"]},{id:4,name:"Closing Home Soon",category:"scheduled",description:"Customer is in the process of closing on their new home and wants to schedule after the closing is complete. This indicates high potential as they are actively in the home buying process.",icon:"🏡",color:"orange",nextSteps:"Follow up after closing date",tips:["Get expected closing date","Set reminder for post-closing contact","Document new home details","Prepare post-closing follow-up plan","Note any specific requirements for new home"],examples:["Closing scheduled for next month","Waiting for final loan approval","Home inspection pending"],subcategories:["Pending Closing","Post-Closing Follow-up","New Home Owner"]},{id:5,name:"Speak to Spouse",category:"scheduled",description:"Customer needs to consult with their spouse or partner before making a decision. This is common for major home improvement decisions.",icon:"💑",color:"pink",nextSteps:"Follow up in 24-48 hours",tips:["Encourage scheduling when both can attend","Offer evening/weekend times","Prepare information for both decision makers","Document spouse's availability","Note any specific concerns to address"],examples:["Spouse out of town until weekend","Need to discuss budget together","Waiting for partner's input on style"],subcategories:["Joint Decision Required","Spouse Consultation","Family Decision"]},{id:6,name:"Not Set",category:"scheduled",description:"Initial contact made but no appointment set. This requires follow-up with a different approach or timing.",icon:"🔄",color:"gray",nextSteps:"Standard follow-up protocol",tips:["Note reason for no appointment","Try different approach next call","Document best contact times","Identify potential objections","Plan alternative presentation"],examples:["Customer needs to think about it","Timing not right","Need more information"],subcategories:["Initial Contact","Pending Decision","Information Gathering"]},{id:7,name:"Cancelled",category:"cancelled",description:"Appointment was cancelled",icon:"🚫",color:"red",nextSteps:"Document cancellation reason and reschedule if possible",tips:["Record cancellation reason","Offer alternative dates","Update scheduling system"]},{id:8,name:"Rescheduled",category:"rescheduled",description:"Appointment has been rescheduled",icon:"🔄",color:"orange",nextSteps:"Confirm new appointment details",tips:["Verify new date and time","Update all systems","Send confirmation to customer"]},{id:9,name:"Gov/Free",category:"not-qualified",description:"Only interested in free products/government aid",icon:"🏛️",color:"cyan",nextSteps:"Mark as not qualified",tips:["Explain our services are not government funded","Offer information about financing options"]},{id:10,name:"No Interest/Time",category:"not-qualified",description:"Not interested or too busy",icon:"❌",color:"red",nextSteps:"Mark as not interested, possible future contact",tips:["Try to understand their specific concerns","Leave door open for future needs"]},{id:11,name:"One Leg",category:"not-qualified",description:"Refuses to involve spouse or decision-maker",icon:"👤",color:"indigo",nextSteps:"Attempt spouse inclusion or mark not qualified",tips:["Explain importance of joint decisions","Offer to speak with both parties"]},{id:12,name:"Price Over Phone",category:"not-qualified",description:"Wants a ballpark price only",icon:"💰",color:"green",nextSteps:"Explain need for in-home estimate",tips:["Emphasize accuracy of in-person quote","Mention free consultation value"]},{id:13,name:"Repair Only",category:"not-qualified",description:"Customer is only interested in repair services or tub liner installation, not a full replacement. This may indicate a need for education about full replacement benefits.",icon:"🔧",color:"brown",nextSteps:"Explain full replacement benefits or refer to repair services",tips:["Compare repair vs replacement costs","Highlight long-term value","Address common misconceptions","Provide repair service information","Document repair requirements"],examples:["Only wants to fix current issues","Budget constraints","Temporary solution needed"],subcategories:["Repair Service","Tub Liner","Partial Solution"]},{id:14,name:"Unqualified",category:"not-qualified",description:"Lead does not meet basic qualification criteria for our services. This could be due to various factors such as location, property type, or budget constraints.",icon:"🚫",color:"red",nextSteps:"Mark as unqualified, no further contact",tips:["Document reason for disqualification","Ensure proper categorization","Note any potential future qualification","Update CRM records","Remove from active leads"],examples:["Outside service area","Property type not suitable","Budget below minimum threshold"],subcategories:["Location Unqualified","Property Unqualified","Budget Unqualified"]},{id:15,name:"Already Completed",category:"not-qualified",description:"Customer has already completed the project with another provider or has no need for our services.",icon:"✅",color:"green",nextSteps:"Remove from active leads",tips:["Confirm completion details","Ask about other potential projects","Document competitor information","Note any future needs","Update customer status"],examples:["Project completed last month","Using different solution","No longer interested"],subcategories:["Project Completed","Alternative Solution","No Longer Interested"]},{id:16,name:"Commercial",category:"not-qualified",description:"Lead is for a commercial property or church, which may require different services or pricing structures.",icon:"🏢",color:"blue",nextSteps:"Refer to commercial division if available",tips:["Confirm property type","Get decision maker contact info","Document commercial requirements","Note any special considerations","Prepare commercial service information"],examples:["Church property","Office building","Retail location"],subcategories:["Religious Property","Business Property","Institutional Property"]},{id:17,name:"DNC",category:"not-qualified",description:"Customer has requested to be placed on the Do Not Call list. This must be respected immediately and documented properly.",icon:"🔇",color:"red",nextSteps:"Add to do not call list immediately",tips:["Respect request immediately","Update all systems accordingly","Document DNC request","Remove from all marketing lists","Note reason if provided"],examples:["Explicit DNC request","Legal requirement","Customer preference"],subcategories:["Explicit DNC","Legal DNC","Temporary DNC"]},{id:18,name:"Insurance",category:"external",description:"Customer has an open insurance claim that needs to be resolved before proceeding with our services.",icon:"🛡️",color:"blue",nextSteps:"Follow up after claim resolution",tips:["Get claim timeline","Offer to work with insurance if applicable","Document claim details","Note insurance company information","Prepare insurance-related materials"],examples:["Water damage claim","Property damage claim","Insurance inspection pending"],subcategories:["Active Claim","Pending Approval","Claim Resolution"]},{id:19,name:"Job Inquiry",category:"not-qualified",description:"Looking for work, not a lead",icon:"💼",color:"purple",nextSteps:"Refer to HR or mark as not qualified",tips:["Direct to appropriate department","Be polite but clear about purpose"]},{id:20,name:"Language Barrier",category:"technical",description:"Unable to communicate",icon:"🗣️",color:"orange",nextSteps:"Attempt translator or bilingual rep",tips:["Try scheduling bilingual representative","Use translation services if available"]},{id:21,name:"Did Not Submit",category:"not-qualified",description:"Claims they didn't request info",icon:"❓",color:"yellow",nextSteps:"Verify lead source and remove if confirmed",tips:["Explain where info came from","Apologize and remove if legitimate"]},{id:22,name:"Out of Area",category:"not-qualified",description:"Outside our market",icon:"📍",color:"red",nextSteps:"Confirm location and mark not serviceable",tips:["Verify exact address","Apologize and explain service area"]},{id:23,name:"Out of Scope",category:"not-qualified",description:"Mobile home or similar we can't service",icon:"🏕️",color:"brown",nextSteps:"Explain service limitations",tips:["Clarify property type","Refer to specialists if possible"]},{id:24,name:"Renter",category:"not-qualified",description:"Can't give landlord info",icon:"🏠",color:"gray",nextSteps:"Attempt to get landlord contact or mark not qualified",tips:["Explain need for owner permission","Offer to contact landlord directly"]},{id:25,name:"Wrong Number",category:"technical",description:"Lead confirmed number is incorrect",icon:"📞",color:"red",nextSteps:"Update contact info or mark as bad lead",tips:["Try to get correct number","Verify lead source accuracy"]}],Os="dispositions",Mn=()=>{if(!fe())throw new Error("Firebase is not properly initialized. Please check your Firebase configuration.")},Md=()=>{if(!rt.currentUser)throw new Error("User must be authenticated to perform this action");return rt.currentUser},ya={getAllDispositions:async()=>{try{Mn();const t=Ze(Ce(fe(),Os),It("createdAt","desc")),s=await De(t);return s.empty?(console.log("No dispositions found, initializing defaults..."),await ya.initializeDefaultDispositions(),(await De(t)).docs.map(i=>({id:i.id,...i.data()}))):s.docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error fetching dispositions:",t),t}},getDispositionsByCategory:async t=>{try{Mn(),console.log(`Fetching dispositions for category: ${t}`);const s=Ze(Ce(fe(),Os),ss("category","==",t),It("createdAt","desc")),i=(await De(s)).docs.map(l=>({id:l.id,...l.data()}));return console.log(`Successfully fetched ${i.length} dispositions for category ${t}`),i}catch(s){throw console.error("Error fetching dispositions by category:",s),s}},searchDispositions:async t=>{try{Mn(),console.log("Searching dispositions...");const s=Ze(Ce(fe(),Os),It("createdAt","desc"));return(await De(s)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>{const d=t.toLowerCase();return l.name?.toLowerCase().includes(d)||l.description?.toLowerCase().includes(d)||l.category?.toLowerCase().includes(d)||l.nextSteps?.toLowerCase().includes(d)||l.tips?.some(u=>u.toLowerCase().includes(d))})}catch(s){throw console.error("Error searching dispositions:",s),s}},addDisposition:async t=>{try{Mn();const s=Md();return(await Yt(Ce(fe(),Os),{...t,createdBy:s.uid,createdAt:Ts(),updatedAt:Ts()})).id}catch(s){throw console.error("Error adding disposition:",s),s}},updateDisposition:async(t,s)=>{try{Mn();const a=Md(),i=Ae(fe(),Os,t);await Wt(i,{...s,updatedBy:a.uid,updatedAt:Ts()})}catch(a){throw console.error("Error updating disposition:",a),a}},deleteDisposition:async t=>{try{Mn(),Md();const s=Ae(fe(),Os,t);await us(s)}catch(s){throw console.error("Error deleting disposition:",s),s}},debugListDispositions:async()=>{try{console.log("Debug: Listing all dispositions...");const t=Ze(Ce(fe(),Os)),s=await De(t);return console.log(`Debug: Found ${s.size} dispositions in database:`),s.docs.forEach(a=>{console.log(`- ${a.data().name} (${a.data().category})`)}),s.docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Debug: Error listing dispositions:",t),t}},initializeDefaultDispositions:async()=>{try{if(console.log("Starting to initialize default dispositions..."),Mn(),!rt.currentUser)throw new Error("User must be authenticated to initialize dispositions");const s=await De(Ce(fe(),Os));if(console.log(`Found ${s.size} existing dispositions`),s.size>0){console.log("Deleting existing dispositions...");const i=qt(fe());s.docs.forEach(l=>{i.delete(l.ref)}),await i.commit(),console.log("Successfully deleted existing dispositions")}console.log("Adding all default dispositions...");const a=qt(fe());return ga.forEach(i=>{const l=Ae(Ce(fe(),Os));a.set(l,{...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await a.commit(),console.log(`Successfully added ${ga.length} default dispositions`),ga.length}catch(t){throw console.error("Error initializing default dispositions:",t),t}},forceReinitializeDispositions:async()=>{try{if(console.log("Force reinitializing all dispositions..."),Mn(),!rt.currentUser)throw new Error("User must be authenticated to initialize dispositions");const s=Ze(Ce(fe(),Os)),a=await De(s);if(console.log(`Found ${a.size} existing dispositions to delete`),a.size>0){const u=qt(fe());a.docs.forEach(m=>{u.delete(m.ref)}),await u.commit(),console.log("Successfully deleted all existing dispositions")}console.log("Adding all dispositions from dispositions.js...");const i=qt(fe());ga.forEach(u=>{const m=Ae(Ce(fe(),Os));i.set(m,{...u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await i.commit(),console.log(`Successfully added ${ga.length} dispositions`);const l=Ze(Ce(fe(),Os)),d=await De(l);return console.log(`Verification: Found ${d.size} dispositions in database`),d.size}catch(t){throw console.error("Error force reinitializing dispositions:",t),t}},getDispositionCategories:async()=>{try{Mn();const t=Ze(Ce(fe(),Os)),s=await De(t),a=new Set;s.docs.forEach(l=>{const d=l.data().category;d&&a.add(d)});const i=Array.from(a).map(l=>{const d=ga.find(u=>u.category===l);return{id:l,name:l.split("-").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "),icon:d?.icon||"📋",color:d?.color||"gray"}});return[{id:"all",name:"All Categories",icon:"📋",color:"gray"},...i]}catch(t){throw console.error("Error fetching disposition categories:",t),t}}},uN=({disposition:t,onClose:s})=>t?e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title",children:[e.jsx("span",{className:"modal-icon",children:t.icon}),e.jsx("h2",{children:t.name}),e.jsx("span",{className:"modal-category",children:t.category})]}),e.jsx("button",{className:"modal-close",onClick:s,children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"modal-section description-section",children:[e.jsx("h3",{children:"Description"}),e.jsx("p",{className:"expanded-description",children:t.description})]}),t.examples&&t.examples.length>0&&e.jsxs("div",{className:"modal-section examples-section",children:[e.jsx("h3",{children:"Common Examples"}),e.jsx("div",{className:"examples-grid",children:t.examples.map((a,i)=>e.jsxs("div",{className:"example-card",children:[e.jsxs("div",{className:"example-header",children:[e.jsx("span",{className:"example-icon",children:"📋"}),e.jsxs("span",{className:"example-number",children:["Example ",i+1]})]}),e.jsx("p",{className:"example-text",children:a})]},i))})]}),e.jsxs("div",{className:"modal-section next-steps-section",children:[e.jsx("h3",{children:"Next Steps"}),e.jsx("p",{children:t.nextSteps})]}),t.tips&&t.tips.length>0&&e.jsxs("div",{className:"modal-section tips-section",children:[e.jsx("h3",{children:"Tips & Best Practices"}),e.jsx("ul",{className:"enhanced-tips",children:t.tips.map((a,i)=>e.jsxs("li",{children:[e.jsx("span",{className:"tip-icon",children:"💡"}),e.jsx("span",{className:"tip-text",children:a})]},i))})]}),t.subcategories&&t.subcategories.length>0&&e.jsxs("div",{className:"modal-section subcategories-section",children:[e.jsx("h3",{children:"Subcategories"}),e.jsx("div",{className:"subcategories-grid",children:t.subcategories.map((a,i)=>e.jsxs("div",{className:"subcategory-card",children:[e.jsx("span",{className:"subcategory-icon",children:"🔹"}),e.jsx("span",{className:"subcategory-name",children:a})]},i))})]})]})]})}):null,hN=({onNavigate:t,searchQuery:s})=>{const[a,i]=y.useState("all"),[l,d]=y.useState(null),[u,m]=y.useState(s||""),[g,v]=y.useState(!1),[h,j]=y.useState(!1),[w,D]=y.useState([]),[S,b]=y.useState(!1),[C,A]=y.useState(-1),[L,N]=y.useState([]),[I,W]=y.useState([]),[B,Q]=y.useState(!0),[F,te]=y.useState(null),[ce,z]=y.useState([]),[ee,oe]=y.useState(!1),re=(f,P)=>{let M;return function(...ue){const be=()=>{clearTimeout(M),f(...ue)};clearTimeout(M),M=setTimeout(be,P)}},le=async f=>{if(!f.trim()){D([]);return}try{const P=await ya.searchDispositions(f);D(P)}catch(P){console.error("Error searching dispositions:",P),te("Failed to search dispositions. Please try again.")}},O=y.useCallback(re(f=>{le(f)},300),[]),q=f=>{const P=f.target.value;m(P),b(!0),A(-1),O(P)},Y=f=>{if(S)switch(f.key){case"ArrowDown":f.preventDefault(),A(P=>P<w.length-1?P+1:P);break;case"ArrowUp":f.preventDefault(),A(P=>P>0?P-1:P);break;case"Enter":f.preventDefault(),C>=0&&C<w.length&&T(w[C]);break;case"Escape":b(!1);break}},T=f=>{m(f.name),b(!1),d(f),v(!0)},R=async()=>{try{Q(!0),te(null),await ya.forceReinitializeDispositions();const f=await ya.getAllDispositions();N(f),W(f)}catch(f){console.error("Error reinitializing dispositions:",f),te("Failed to reinitialize dispositions. Please try again later.")}finally{Q(!1)}};y.useEffect(()=>{(async()=>{try{Q(!0),te(null);const[P,M]=await Promise.all([ya.getAllDispositions(),ya.getDispositionCategories()]);N(P),W(P),z(M)}catch(P){console.error("Error fetching data:",P),te("Failed to load data. Please try again later.")}finally{Q(!1)}})()},[]),y.useEffect(()=>{if(!L)return;let f=L;if(a!=="all"&&(f=f.filter(P=>P.category===a)),u){const P=u.toLowerCase();f=f.filter(M=>M.name.toLowerCase().includes(P)||M.description.toLowerCase().includes(P)||M.nextSteps.toLowerCase().includes(P)||Array.isArray(M.tips)&&M.tips.some(K=>K.toLowerCase().includes(P)))}W(f)},[L,u,a]),y.useEffect(()=>{i("all"),m("")},[]);const E=f=>{d(f),v(!0)};return B?e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading dispositions..."})]}):F?e.jsxs("div",{className:"error",children:[e.jsx("p",{children:F}),e.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Retry"})]}):e.jsxs("div",{children:[e.jsx(jh,{title:"Lead Disposition",subtitle:"Track and manage your lead dispositions"}),e.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[e.jsx(Ex,{collapsed:ee,onCollapseChange:oe}),e.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",padding:"2rem",marginLeft:"2rem"},children:e.jsxs("div",{style:{maxWidth:"1200px",width:"100%"},children:[e.jsxs("div",{className:"disposition-header",children:[e.jsx("h1",{className:"disposition-title",children:"Lead Disposition Library"}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{onClick:R,className:"reinitialize-button",disabled:B,children:B?"Reinitializing...":"Reinitialize Dispositions"})}),e.jsx("div",{className:"header-navigation",children:e.jsxs("div",{className:"quick-nav",children:[e.jsxs("button",{onClick:()=>t("home"),className:"nav-button home-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs("button",{onClick:()=>t("rebuttals"),className:`nav-button ${window.location.pathname.includes("rebuttals")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs("button",{onClick:()=>t("disposition"),className:`nav-button ${window.location.pathname.includes("disposition")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 6V12L16 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Disposition"]}),e.jsxs("button",{onClick:()=>t("customerService"),className:`nav-button ${window.location.pathname.includes("customerService")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs("button",{onClick:()=>t("faq"),className:`nav-button ${window.location.pathname.includes("faq")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.30197 14.92 10.02C14.92 12 11.92 13 11.92 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 17H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"FAQ"]}),e.jsxs("button",{onClick:()=>t("scheduleScript"),className:`nav-button ${window.location.pathname.includes("scheduleScript")?"active":""}`,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Schedule Script"]})]})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx(Vr,{value:u,onChange:q,onClear:()=>{m(""),b(!1),D([])},placeholder:"Search lead dispositions...",onKeyDown:Y}),S&&w.length>0&&e.jsx("div",{className:"search-suggestions-dropdown",children:w.map((f,P)=>e.jsxs("div",{className:`suggestion-item ${P===C?"selected":""}`,onClick:()=>T(f),children:[e.jsx("span",{className:"suggestion-icon",children:f.icon||"📋"}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h4",{children:f.name}),e.jsx("p",{children:f.description})]})]},f.id))}),u&&e.jsxs("div",{className:"search-results-count",children:[I.length," result",I.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"dispositions-grid",children:I.map(f=>e.jsxs("div",{className:`disposition-card ${f.color}`,onClick:()=>E(f),children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"card-icon",children:f.icon}),e.jsxs("div",{className:"card-title-container",children:[e.jsx("h2",{className:"card-title",children:f.name}),e.jsx("span",{className:"card-category",children:f.category})]})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{className:"card-description",children:f.description}),e.jsxs("div",{className:"card-preview",children:[e.jsxs("div",{className:"preview-section",children:[e.jsx("h4",{children:"Next Steps"}),e.jsx("p",{children:f.nextSteps})]}),f.tips&&f.tips.length>0&&e.jsxs("div",{className:"preview-section",children:[e.jsx("h4",{children:"Key Tips"}),e.jsxs("ul",{children:[f.tips.slice(0,2).map((P,M)=>e.jsx("li",{children:P},M)),f.tips.length>2&&e.jsxs("li",{className:"more-tips",children:["+",f.tips.length-2," more tips"]})]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("span",{className:"click-hint",children:"Click to view full details"})})]})]},f.id))}),I.length===0&&e.jsx("div",{className:"no-results",children:"No dispositions found matching your search criteria."})]})})]}),g&&l&&e.jsx(uN,{disposition:l,onClose:()=>{d(null),v(!1)}})]})};var Id={exports:{}},ng;function mN(){return ng||(ng=1,function(t){var s=function(a){var i=Object.prototype,l=i.hasOwnProperty,d=Object.defineProperty||function(T,R,E){T[R]=E.value},u,m=typeof Symbol=="function"?Symbol:{},g=m.iterator||"@@iterator",v=m.asyncIterator||"@@asyncIterator",h=m.toStringTag||"@@toStringTag";function j(T,R,E){return Object.defineProperty(T,R,{value:E,enumerable:!0,configurable:!0,writable:!0}),T[R]}try{j({},"")}catch{j=function(R,E,f){return R[E]=f}}function w(T,R,E,f){var P=R&&R.prototype instanceof N?R:N,M=Object.create(P.prototype),K=new O(f||[]);return d(M,"_invoke",{value:ee(T,E,K)}),M}a.wrap=w;function D(T,R,E){try{return{type:"normal",arg:T.call(R,E)}}catch(f){return{type:"throw",arg:f}}}var S="suspendedStart",b="suspendedYield",C="executing",A="completed",L={};function N(){}function I(){}function W(){}var B={};j(B,g,function(){return this});var Q=Object.getPrototypeOf,F=Q&&Q(Q(q([])));F&&F!==i&&l.call(F,g)&&(B=F);var te=W.prototype=N.prototype=Object.create(B);I.prototype=W,d(te,"constructor",{value:W,configurable:!0}),d(W,"constructor",{value:I,configurable:!0}),I.displayName=j(W,h,"GeneratorFunction");function ce(T){["next","throw","return"].forEach(function(R){j(T,R,function(E){return this._invoke(R,E)})})}a.isGeneratorFunction=function(T){var R=typeof T=="function"&&T.constructor;return R?R===I||(R.displayName||R.name)==="GeneratorFunction":!1},a.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,W):(T.__proto__=W,j(T,h,"GeneratorFunction")),T.prototype=Object.create(te),T},a.awrap=function(T){return{__await:T}};function z(T,R){function E(M,K,ue,be){var pe=D(T[M],T,K);if(pe.type==="throw")be(pe.arg);else{var X=pe.arg,_=X.value;return _&&typeof _=="object"&&l.call(_,"__await")?R.resolve(_.__await).then(function(V){E("next",V,ue,be)},function(V){E("throw",V,ue,be)}):R.resolve(_).then(function(V){X.value=V,ue(X)},function(V){return E("throw",V,ue,be)})}}var f;function P(M,K){function ue(){return new R(function(be,pe){E(M,K,be,pe)})}return f=f?f.then(ue,ue):ue()}d(this,"_invoke",{value:P})}ce(z.prototype),j(z.prototype,v,function(){return this}),a.AsyncIterator=z,a.async=function(T,R,E,f,P){P===void 0&&(P=Promise);var M=new z(w(T,R,E,f),P);return a.isGeneratorFunction(R)?M:M.next().then(function(K){return K.done?K.value:M.next()})};function ee(T,R,E){var f=S;return function(M,K){if(f===C)throw new Error("Generator is already running");if(f===A){if(M==="throw")throw K;return Y()}for(E.method=M,E.arg=K;;){var ue=E.delegate;if(ue){var be=oe(ue,E);if(be){if(be===L)continue;return be}}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(f===S)throw f=A,E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);f=C;var pe=D(T,R,E);if(pe.type==="normal"){if(f=E.done?A:b,pe.arg===L)continue;return{value:pe.arg,done:E.done}}else pe.type==="throw"&&(f=A,E.method="throw",E.arg=pe.arg)}}}function oe(T,R){var E=R.method,f=T.iterator[E];if(f===u)return R.delegate=null,E==="throw"&&T.iterator.return&&(R.method="return",R.arg=u,oe(T,R),R.method==="throw")||E!=="return"&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+E+"' method")),L;var P=D(f,T.iterator,R.arg);if(P.type==="throw")return R.method="throw",R.arg=P.arg,R.delegate=null,L;var M=P.arg;if(!M)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,L;if(M.done)R[T.resultName]=M.value,R.next=T.nextLoc,R.method!=="return"&&(R.method="next",R.arg=u);else return M;return R.delegate=null,L}ce(te),j(te,h,"Generator"),j(te,g,function(){return this}),j(te,"toString",function(){return"[object Generator]"});function re(T){var R={tryLoc:T[0]};1 in T&&(R.catchLoc=T[1]),2 in T&&(R.finallyLoc=T[2],R.afterLoc=T[3]),this.tryEntries.push(R)}function le(T){var R=T.completion||{};R.type="normal",delete R.arg,T.completion=R}function O(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(re,this),this.reset(!0)}a.keys=function(T){var R=Object(T),E=[];for(var f in R)E.push(f);return E.reverse(),function P(){for(;E.length;){var M=E.pop();if(M in R)return P.value=M,P.done=!1,P}return P.done=!0,P}};function q(T){if(T){var R=T[g];if(R)return R.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var E=-1,f=function P(){for(;++E<T.length;)if(l.call(T,E))return P.value=T[E],P.done=!1,P;return P.value=u,P.done=!0,P};return f.next=f}}return{next:Y}}a.values=q;function Y(){return{value:u,done:!0}}return O.prototype={constructor:O,reset:function(T){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(le),!T)for(var R in this)R.charAt(0)==="t"&&l.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=u)},stop:function(){this.done=!0;var T=this.tryEntries[0],R=T.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(T){if(this.done)throw T;var R=this;function E(be,pe){return M.type="throw",M.arg=T,R.next=be,pe&&(R.method="next",R.arg=u),!!pe}for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f],M=P.completion;if(P.tryLoc==="root")return E("end");if(P.tryLoc<=this.prev){var K=l.call(P,"catchLoc"),ue=l.call(P,"finallyLoc");if(K&&ue){if(this.prev<P.catchLoc)return E(P.catchLoc,!0);if(this.prev<P.finallyLoc)return E(P.finallyLoc)}else if(K){if(this.prev<P.catchLoc)return E(P.catchLoc,!0)}else if(ue){if(this.prev<P.finallyLoc)return E(P.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(T,R){for(var E=this.tryEntries.length-1;E>=0;--E){var f=this.tryEntries[E];if(f.tryLoc<=this.prev&&l.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var P=f;break}}P&&(T==="break"||T==="continue")&&P.tryLoc<=R&&R<=P.finallyLoc&&(P=null);var M=P?P.completion:{};return M.type=T,M.arg=R,P?(this.method="next",this.next=P.finallyLoc,L):this.complete(M)},complete:function(T,R){if(T.type==="throw")throw T.arg;return T.type==="break"||T.type==="continue"?this.next=T.arg:T.type==="return"?(this.rval=this.arg=T.arg,this.method="return",this.next="end"):T.type==="normal"&&R&&(this.next=R),L},finish:function(T){for(var R=this.tryEntries.length-1;R>=0;--R){var E=this.tryEntries[R];if(E.finallyLoc===T)return this.complete(E.completion,E.afterLoc),le(E),L}},catch:function(T){for(var R=this.tryEntries.length-1;R>=0;--R){var E=this.tryEntries[R];if(E.tryLoc===T){var f=E.completion;if(f.type==="throw"){var P=f.arg;le(E)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(T,R,E){return this.delegate={iterator:q(T),resultName:R,nextLoc:E},this.method==="next"&&(this.arg=u),L}},a}(t.exports);try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}}(Id)),Id.exports}var Od,rg;function wh(){return rg||(rg=1,Od=(t,s)=>`${t}-${s}-${Math.random().toString(16).slice(3,8)}`),Od}var Fd,ag;function Px(){if(ag)return Fd;ag=1;const t=wh();let s=0;return Fd=({id:a,action:i,payload:l={}})=>{let d=a;return typeof d>"u"&&(d=t("Job",s),s+=1),{id:d,action:i,payload:l}},Fd}var bi={},ig;function bh(){if(ig)return bi;ig=1;let t=!1;return bi.logging=t,bi.setLogging=s=>{t=s},bi.log=(...s)=>t?console.log.apply(this,s):null,bi}var Ud,og;function pN(){if(og)return Ud;og=1;const t=Px(),{log:s}=bh(),a=wh();let i=0;return Ud=()=>{const l=a("Scheduler",i),d={},u={};let m=[];i+=1;const g=()=>m.length,v=()=>Object.keys(d).length,h=()=>{if(m.length!==0){const b=Object.keys(d);for(let C=0;C<b.length;C+=1)if(typeof u[b[C]]>"u"){m[0](d[b[C]]);break}}},j=(b,C)=>new Promise((A,L)=>{const N=t({action:b,payload:C});m.push(async I=>{m.shift(),u[I.id]=N;try{A(await I[b].apply(this,[...C,N.id]))}catch(W){L(W)}finally{delete u[I.id],h()}}),s(`[${l}]: Add ${N.id} to JobQueue`),s(`[${l}]: JobQueue length=${m.length}`),h()});return{addWorker:b=>(d[b.id]=b,s(`[${l}]: Add ${b.id}`),s(`[${l}]: Number of workers=${v()}`),h(),b.id),addJob:async(b,...C)=>{if(v()===0)throw Error(`[${l}]: You need to have at least one worker before adding jobs`);return j(b,C)},terminate:async()=>{Object.keys(d).forEach(async b=>{await d[b].terminate()}),m=[]},getQueueLen:g,getNumWorkers:v}},Ud}function fN(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bd,lg;function gN(){return lg||(lg=1,Bd=t=>{const s={};return typeof WorkerGlobalScope<"u"?s.type="webworker":typeof document=="object"?s.type="browser":typeof process=="object"&&typeof fN=="function"&&(s.type="node"),typeof t>"u"?s:s[t]}),Bd}var Wd,cg;function vN(){if(cg)return Wd;cg=1;const s=gN()("type")==="browser"?a=>new URL(a,window.location.href).href:a=>a;return Wd=a=>{const i={...a};return["corePath","workerPath","langPath"].forEach(l=>{a[l]&&(i[l]=s(i[l]))}),i},Wd}var Vd,dg;function Dx(){return dg||(dg=1,Vd={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Vd}const xN="6.0.1",yN={version:xN};var _d,ug;function jN(){return ug||(ug=1,_d={workerBlobURL:!0,logger:()=>{}}),_d}var $d,hg;function wN(){if(hg)return $d;hg=1;const t=yN.version;return $d={...jN(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},$d}var zd,mg;function bN(){return mg||(mg=1,zd=({workerPath:t,workerBlobURL:s})=>{let a;if(Blob&&URL&&s){const i=new Blob([`importScripts("${t}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(i))}else a=new Worker(t);return a}),zd}var Hd,pg;function NN(){return pg||(pg=1,Hd=t=>{t.terminate()}),Hd}var qd,fg;function kN(){return fg||(fg=1,qd=(t,s)=>{t.onmessage=({data:a})=>{s(a)}}),qd}var Yd,gg;function SN(){return gg||(gg=1,Yd=async(t,s)=>{t.postMessage(s)}),Yd}var Gd,vg;function CN(){if(vg)return Gd;vg=1;const t=a=>new Promise((i,l)=>{const d=new FileReader;d.onload=()=>{i(d.result)},d.onerror=({target:{error:{code:u}}})=>{l(Error(`File could not be read! Code=${u}`))},d.readAsArrayBuffer(a)}),s=async a=>{let i=a;if(typeof a>"u")return"undefined";if(typeof a=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(a)?i=atob(a.split(",")[1]).split("").map(l=>l.charCodeAt(0)):i=await(await fetch(a)).arrayBuffer();else if(typeof HTMLElement<"u"&&a instanceof HTMLElement)a.tagName==="IMG"&&(i=await s(a.src)),a.tagName==="VIDEO"&&(i=await s(a.poster)),a.tagName==="CANVAS"&&await new Promise(l=>{a.toBlob(async d=>{i=await t(d),l()})});else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){const l=await a.convertToBlob();i=await t(l)}else(a instanceof File||a instanceof Blob)&&(i=await t(a));return new Uint8Array(i)};return Gd=s,Gd}var Qd,xg;function AN(){if(xg)return Qd;xg=1;const t=wN(),s=bN(),a=NN(),i=kN(),l=SN(),d=CN();return Qd={defaultOptions:t,spawnWorker:s,terminateWorker:a,onMessage:i,send:l,loadImage:d},Qd}var Kd,yg;function Lx(){if(yg)return Kd;yg=1;const t=vN(),s=Px(),{log:a}=bh(),i=wh(),l=Dx(),{defaultOptions:d,spawnWorker:u,terminateWorker:m,onMessage:g,loadImage:v,send:h}=AN();let j=0;return Kd=async(w="eng",D=l.LSTM_ONLY,S={},b={})=>{const C=i("Worker",j),{logger:A,errorHandler:L,...N}=t({...d,...S}),I={},W=typeof w=="string"?w.split("+"):w;let B=D,Q=b;const F=[l.DEFAULT,l.LSTM_ONLY].includes(D)&&!N.legacyCore;let te,ce;const z=new Promise((X,_)=>{ce=X,te=_}),ee=X=>{te(X.message)};let oe=u(N);oe.onerror=ee,j+=1;const re=({id:X,action:_,payload:V})=>new Promise((J,ae)=>{a(`[${C}]: Start ${X}, action=${_}`);const ge=`${_}-${X}`;I[ge]={resolve:J,reject:ae},h(oe,{workerId:C,jobId:X,action:_,payload:V})}),le=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),O=X=>re(s({id:X,action:"load",payload:{options:{lstmOnly:F,corePath:N.corePath,logging:N.logging}}})),q=(X,_,V)=>re(s({id:V,action:"FS",payload:{method:"writeFile",args:[X,_]}})),Y=(X,_)=>re(s({id:_,action:"FS",payload:{method:"readFile",args:[X,{encoding:"utf8"}]}})),T=(X,_)=>re(s({id:_,action:"FS",payload:{method:"unlink",args:[X]}})),R=(X,_,V)=>re(s({id:V,action:"FS",payload:{method:X,args:_}})),E=(X,_)=>re(s({id:_,action:"loadLanguage",payload:{langs:X,options:{langPath:N.langPath,dataPath:N.dataPath,cachePath:N.cachePath,cacheMethod:N.cacheMethod,gzip:N.gzip,lstmOnly:[l.DEFAULT,l.LSTM_ONLY].includes(B)&&!N.legacyLang}}})),f=(X,_,V,J)=>re(s({id:J,action:"initialize",payload:{langs:X,oem:_,config:V}})),P=(X="eng",_,V,J)=>{if(F&&[l.TESSERACT_ONLY,l.TESSERACT_LSTM_COMBINED].includes(_))throw Error("Legacy model requested but code missing.");const ae=_||B;B=ae;const ge=V||Q;Q=ge;const ze=(typeof X=="string"?X.split("+"):X).filter(Ge=>!W.includes(Ge));return W.push(...ze),ze.length>0?E(ze,J).then(()=>f(X,ae,ge,J)):f(X,ae,ge,J)},M=(X={},_)=>re(s({id:_,action:"setParameters",payload:{params:X}})),K=async(X,_={},V={text:!0},J)=>re(s({id:J,action:"recognize",payload:{image:await v(X),options:_,output:V}})),ue=async(X,_)=>{if(F)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return re(s({id:_,action:"detect",payload:{image:await v(X)}}))},be=async()=>(oe!==null&&(m(oe),oe=null),Promise.resolve());g(oe,({workerId:X,jobId:_,status:V,action:J,data:ae})=>{const ge=`${J}-${_}`;if(V==="resolve")a(`[${X}]: Complete ${_}`),I[ge].resolve({jobId:_,data:ae}),delete I[ge];else if(V==="reject")if(I[ge].reject(ae),delete I[ge],J==="load"&&te(ae),L)L(ae);else throw Error(ae);else V==="progress"&&A({...ae,userJobId:_})});const pe={id:C,worker:oe,load:le,writeText:q,readText:Y,removeFile:T,FS:R,reinitialize:P,setParameters:M,recognize:K,detect:ue,terminate:be};return O().then(()=>E(w)).then(()=>f(w,D,b)).then(()=>ce(pe)).catch(()=>{}),z},Kd}var Jd,jg;function TN(){if(jg)return Jd;jg=1;const t=Lx();return Jd={recognize:async(i,l,d)=>{const u=await t(l,1,d);return u.recognize(i).finally(async()=>{await u.terminate()})},detect:async(i,l)=>{const d=await t("osd",0,l);return d.detect(i).finally(async()=>{await d.terminate()})}},Jd}var Zd,wg;function EN(){return wg||(wg=1,Zd={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Zd}var Xd,bg;function PN(){return bg||(bg=1,Xd={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Xd}var eu,Ng;function DN(){if(Ng)return eu;Ng=1,mN();const t=pN(),s=Lx(),a=TN(),i=EN(),l=Dx(),d=PN(),{setLogging:u}=bh();return eu={languages:i,OEM:l,PSM:d,createScheduler:t,createWorker:s,setLogging:u,...a},eu}var LN=DN();const RN=ph(LN),Nh=y.createContext({});function kh(t){const s=y.useRef(null);return s.current===null&&(s.current=t()),s.current}const Sh=typeof window<"u",Rx=Sh?y.useLayoutEffect:y.useEffect,Ml=y.createContext(null);function Ch(t,s){t.indexOf(s)===-1&&t.push(s)}function Ah(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}const In=(t,s,a)=>a>s?s:a<t?t:a;let Th=()=>{};const On={},Mx=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ix(t){return typeof t=="object"&&t!==null}const Ox=t=>/^0[^.\s]+$/u.test(t);function Eh(t){let s;return()=>(s===void 0&&(s=t()),s)}const Qs=t=>t,MN=(t,s)=>a=>s(t(a)),Gi=(...t)=>t.reduce(MN),Ui=(t,s,a)=>{const i=s-t;return i===0?1:(a-t)/i};class Ph{constructor(){this.subscriptions=[]}add(s){return Ch(this.subscriptions,s),()=>Ah(this.subscriptions,s)}notify(s,a,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](s,a,i);else for(let d=0;d<l;d++){const u=this.subscriptions[d];u&&u(s,a,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vn=t=>t*1e3,xn=t=>t/1e3;function Fx(t,s){return s?t*(1e3/s):0}const Ux=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,IN=1e-7,ON=12;function FN(t,s,a,i,l){let d,u,m=0;do u=s+(a-s)/2,d=Ux(u,i,l)-t,d>0?a=u:s=u;while(Math.abs(d)>IN&&++m<ON);return u}function Qi(t,s,a,i){if(t===s&&a===i)return Qs;const l=d=>FN(d,0,1,t,a);return d=>d===0||d===1?d:Ux(l(d),s,i)}const Bx=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,Wx=t=>s=>1-t(1-s),Vx=Qi(.33,1.53,.69,.99),Dh=Wx(Vx),_x=Bx(Dh),$x=t=>(t*=2)<1?.5*Dh(t):.5*(2-Math.pow(2,-10*(t-1))),Lh=t=>1-Math.sin(Math.acos(t)),zx=Wx(Lh),Hx=Bx(Lh),UN=Qi(.42,0,1,1),BN=Qi(0,0,.58,1),qx=Qi(.42,0,.58,1),WN=t=>Array.isArray(t)&&typeof t[0]!="number",Yx=t=>Array.isArray(t)&&typeof t[0]=="number",VN={linear:Qs,easeIn:UN,easeInOut:qx,easeOut:BN,circIn:Lh,circInOut:Hx,circOut:zx,backIn:Dh,backInOut:_x,backOut:Vx,anticipate:$x},_N=t=>typeof t=="string",kg=t=>{if(Yx(t)){Th(t.length===4);const[s,a,i,l]=t;return Qi(s,a,i,l)}else if(_N(t))return VN[t];return t},ll=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Sg={value:null};function $N(t,s){let a=new Set,i=new Set,l=!1,d=!1;const u=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1},g=0;function v(j){u.has(j)&&(h.schedule(j),t()),g++,j(m)}const h={schedule:(j,w=!1,D=!1)=>{const b=D&&l?a:i;return w&&u.add(j),b.has(j)||b.add(j),j},cancel:j=>{i.delete(j),u.delete(j)},process:j=>{if(m=j,l){d=!0;return}l=!0,[a,i]=[i,a],a.forEach(v),s&&Sg.value&&Sg.value.frameloop[s].push(g),g=0,a.clear(),l=!1,d&&(d=!1,h.process(j))}};return h}const zN=40;function Gx(t,s){let a=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},d=()=>a=!0,u=ll.reduce((N,I)=>(N[I]=$N(d,s?I:void 0),N),{}),{setup:m,read:g,resolveKeyframes:v,preUpdate:h,update:j,preRender:w,render:D,postRender:S}=u,b=()=>{const N=On.useManualTiming?l.timestamp:performance.now();a=!1,On.useManualTiming||(l.delta=i?1e3/60:Math.max(Math.min(N-l.timestamp,zN),1)),l.timestamp=N,l.isProcessing=!0,m.process(l),g.process(l),v.process(l),h.process(l),j.process(l),w.process(l),D.process(l),S.process(l),l.isProcessing=!1,a&&s&&(i=!1,t(b))},C=()=>{a=!0,i=!0,l.isProcessing||t(b)};return{schedule:ll.reduce((N,I)=>{const W=u[I];return N[I]=(B,Q=!1,F=!1)=>(a||C(),W.schedule(B,Q,F)),N},{}),cancel:N=>{for(let I=0;I<ll.length;I++)u[ll[I]].cancel(N)},state:l,steps:u}}const{schedule:wt,cancel:ur,state:ts,steps:tu}=Gx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qs,!0);let gl;function HN(){gl=void 0}const Es={now:()=>(gl===void 0&&Es.set(ts.isProcessing||On.useManualTiming?ts.timestamp:performance.now()),gl),set:t=>{gl=t,queueMicrotask(HN)}},Qx=t=>s=>typeof s=="string"&&s.startsWith(t),Rh=Qx("--"),qN=Qx("var(--"),Mh=t=>qN(t)?YN.test(t.split("/*")[0].trim()):!1,YN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ia={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bi={...Ia,transform:t=>In(0,1,t)},cl={...Ia,default:1},Di=t=>Math.round(t*1e5)/1e5,Ih=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function GN(t){return t==null}const QN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Oh=(t,s)=>a=>!!(typeof a=="string"&&QN.test(a)&&a.startsWith(t)||s&&!GN(a)&&Object.prototype.hasOwnProperty.call(a,s)),Kx=(t,s,a)=>i=>{if(typeof i!="string")return i;const[l,d,u,m]=i.match(Ih);return{[t]:parseFloat(l),[s]:parseFloat(d),[a]:parseFloat(u),alpha:m!==void 0?parseFloat(m):1}},KN=t=>In(0,255,t),su={...Ia,transform:t=>Math.round(KN(t))},Mr={test:Oh("rgb","red"),parse:Kx("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:i=1})=>"rgba("+su.transform(t)+", "+su.transform(s)+", "+su.transform(a)+", "+Di(Bi.transform(i))+")"};function JN(t){let s="",a="",i="",l="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),i=t.substring(5,7),l=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),i=t.substring(3,4),l=t.substring(4,5),s+=s,a+=a,i+=i,l+=l),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const Tu={test:Oh("#"),parse:JN,transform:Mr.transform},Ki=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),ir=Ki("deg"),yn=Ki("%"),qe=Ki("px"),ZN=Ki("vh"),XN=Ki("vw"),Cg={...yn,parse:t=>yn.parse(t)/100,transform:t=>yn.transform(t*100)},ba={test:Oh("hsl","hue"),parse:Kx("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:i=1})=>"hsla("+Math.round(t)+", "+yn.transform(Di(s))+", "+yn.transform(Di(a))+", "+Di(Bi.transform(i))+")"},Bt={test:t=>Mr.test(t)||Tu.test(t)||ba.test(t),parse:t=>Mr.test(t)?Mr.parse(t):ba.test(t)?ba.parse(t):Tu.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mr.transform(t):ba.transform(t),getAnimatableNone:t=>{const s=Bt.parse(t);return s.alpha=0,Bt.transform(s)}},e1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function t1(t){return isNaN(t)&&typeof t=="string"&&(t.match(Ih)?.length||0)+(t.match(e1)?.length||0)>0}const Jx="number",Zx="color",s1="var",n1="var(",Ag="${}",r1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wi(t){const s=t.toString(),a=[],i={color:[],number:[],var:[]},l=[];let d=0;const m=s.replace(r1,g=>(Bt.test(g)?(i.color.push(d),l.push(Zx),a.push(Bt.parse(g))):g.startsWith(n1)?(i.var.push(d),l.push(s1),a.push(g)):(i.number.push(d),l.push(Jx),a.push(parseFloat(g))),++d,Ag)).split(Ag);return{values:a,split:m,indexes:i,types:l}}function Xx(t){return Wi(t).values}function ey(t){const{split:s,types:a}=Wi(t),i=s.length;return l=>{let d="";for(let u=0;u<i;u++)if(d+=s[u],l[u]!==void 0){const m=a[u];m===Jx?d+=Di(l[u]):m===Zx?d+=Bt.transform(l[u]):d+=l[u]}return d}}const a1=t=>typeof t=="number"?0:Bt.test(t)?Bt.getAnimatableNone(t):t;function i1(t){const s=Xx(t);return ey(t)(s.map(a1))}const hr={test:t1,parse:Xx,createTransformer:ey,getAnimatableNone:i1};function nu(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function o1({hue:t,saturation:s,lightness:a,alpha:i}){t/=360,s/=100,a/=100;let l=0,d=0,u=0;if(!s)l=d=u=a;else{const m=a<.5?a*(1+s):a+s-a*s,g=2*a-m;l=nu(g,m,t+1/3),d=nu(g,m,t),u=nu(g,m,t-1/3)}return{red:Math.round(l*255),green:Math.round(d*255),blue:Math.round(u*255),alpha:i}}function kl(t,s){return a=>a>0?s:t}const Tt=(t,s,a)=>t+(s-t)*a,ru=(t,s,a)=>{const i=t*t,l=a*(s*s-i)+i;return l<0?0:Math.sqrt(l)},l1=[Tu,Mr,ba],c1=t=>l1.find(s=>s.test(t));function Tg(t){const s=c1(t);if(!s)return!1;let a=s.parse(t);return s===ba&&(a=o1(a)),a}const Eg=(t,s)=>{const a=Tg(t),i=Tg(s);if(!a||!i)return kl(t,s);const l={...a};return d=>(l.red=ru(a.red,i.red,d),l.green=ru(a.green,i.green,d),l.blue=ru(a.blue,i.blue,d),l.alpha=Tt(a.alpha,i.alpha,d),Mr.transform(l))},Eu=new Set(["none","hidden"]);function d1(t,s){return Eu.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function u1(t,s){return a=>Tt(t,s,a)}function Fh(t){return typeof t=="number"?u1:typeof t=="string"?Mh(t)?kl:Bt.test(t)?Eg:p1:Array.isArray(t)?ty:typeof t=="object"?Bt.test(t)?Eg:h1:kl}function ty(t,s){const a=[...t],i=a.length,l=t.map((d,u)=>Fh(d)(d,s[u]));return d=>{for(let u=0;u<i;u++)a[u]=l[u](d);return a}}function h1(t,s){const a={...t,...s},i={};for(const l in a)t[l]!==void 0&&s[l]!==void 0&&(i[l]=Fh(t[l])(t[l],s[l]));return l=>{for(const d in i)a[d]=i[d](l);return a}}function m1(t,s){const a=[],i={color:0,var:0,number:0};for(let l=0;l<s.values.length;l++){const d=s.types[l],u=t.indexes[d][i[d]],m=t.values[u]??0;a[l]=m,i[d]++}return a}const p1=(t,s)=>{const a=hr.createTransformer(s),i=Wi(t),l=Wi(s);return i.indexes.var.length===l.indexes.var.length&&i.indexes.color.length===l.indexes.color.length&&i.indexes.number.length>=l.indexes.number.length?Eu.has(t)&&!l.values.length||Eu.has(s)&&!i.values.length?d1(t,s):Gi(ty(m1(i,l),l.values),a):kl(t,s)};function sy(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?Tt(t,s,a):Fh(t)(t,s)}const f1=t=>{const s=({timestamp:a})=>t(a);return{start:(a=!0)=>wt.update(s,a),stop:()=>ur(s),now:()=>ts.isProcessing?ts.timestamp:Es.now()}},ny=(t,s,a=10)=>{let i="";const l=Math.max(Math.round(s/a),2);for(let d=0;d<l;d++)i+=Math.round(t(d/(l-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Sl=2e4;function Uh(t){let s=0;const a=50;let i=t.next(s);for(;!i.done&&s<Sl;)s+=a,i=t.next(s);return s>=Sl?1/0:s}function g1(t,s=100,a){const i=a({...t,keyframes:[0,s]}),l=Math.min(Uh(i),Sl);return{type:"keyframes",ease:d=>i.next(l*d).value/s,duration:xn(l)}}const v1=5;function ry(t,s,a){const i=Math.max(s-v1,0);return Fx(a-t(i),s-i)}const Pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},au=.001;function x1({duration:t=Pt.duration,bounce:s=Pt.bounce,velocity:a=Pt.velocity,mass:i=Pt.mass}){let l,d,u=1-s;u=In(Pt.minDamping,Pt.maxDamping,u),t=In(Pt.minDuration,Pt.maxDuration,xn(t)),u<1?(l=v=>{const h=v*u,j=h*t,w=h-a,D=Pu(v,u),S=Math.exp(-j);return au-w/D*S},d=v=>{const j=v*u*t,w=j*a+a,D=Math.pow(u,2)*Math.pow(v,2)*t,S=Math.exp(-j),b=Pu(Math.pow(v,2),u);return(-l(v)+au>0?-1:1)*((w-D)*S)/b}):(l=v=>{const h=Math.exp(-v*t),j=(v-a)*t+1;return-au+h*j},d=v=>{const h=Math.exp(-v*t),j=(a-v)*(t*t);return h*j});const m=5/t,g=j1(l,d,m);if(t=vn(t),isNaN(g))return{stiffness:Pt.stiffness,damping:Pt.damping,duration:t};{const v=Math.pow(g,2)*i;return{stiffness:v,damping:u*2*Math.sqrt(i*v),duration:t}}}const y1=12;function j1(t,s,a){let i=a;for(let l=1;l<y1;l++)i=i-t(i)/s(i);return i}function Pu(t,s){return t*Math.sqrt(1-s*s)}const w1=["duration","bounce"],b1=["stiffness","damping","mass"];function Pg(t,s){return s.some(a=>t[a]!==void 0)}function N1(t){let s={velocity:Pt.velocity,stiffness:Pt.stiffness,damping:Pt.damping,mass:Pt.mass,isResolvedFromDuration:!1,...t};if(!Pg(t,b1)&&Pg(t,w1))if(t.visualDuration){const a=t.visualDuration,i=2*Math.PI/(a*1.2),l=i*i,d=2*In(.05,1,1-(t.bounce||0))*Math.sqrt(l);s={...s,mass:Pt.mass,stiffness:l,damping:d}}else{const a=x1(t);s={...s,...a,mass:Pt.mass},s.isResolvedFromDuration=!0}return s}function Cl(t=Pt.visualDuration,s=Pt.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:i,restDelta:l}=a;const d=a.keyframes[0],u=a.keyframes[a.keyframes.length-1],m={done:!1,value:d},{stiffness:g,damping:v,mass:h,duration:j,velocity:w,isResolvedFromDuration:D}=N1({...a,velocity:-xn(a.velocity||0)}),S=w||0,b=v/(2*Math.sqrt(g*h)),C=u-d,A=xn(Math.sqrt(g/h)),L=Math.abs(C)<5;i||(i=L?Pt.restSpeed.granular:Pt.restSpeed.default),l||(l=L?Pt.restDelta.granular:Pt.restDelta.default);let N;if(b<1){const W=Pu(A,b);N=B=>{const Q=Math.exp(-b*A*B);return u-Q*((S+b*A*C)/W*Math.sin(W*B)+C*Math.cos(W*B))}}else if(b===1)N=W=>u-Math.exp(-A*W)*(C+(S+A*C)*W);else{const W=A*Math.sqrt(b*b-1);N=B=>{const Q=Math.exp(-b*A*B),F=Math.min(W*B,300);return u-Q*((S+b*A*C)*Math.sinh(F)+W*C*Math.cosh(F))/W}}const I={calculatedDuration:D&&j||null,next:W=>{const B=N(W);if(D)m.done=W>=j;else{let Q=W===0?S:0;b<1&&(Q=W===0?vn(S):ry(N,W,B));const F=Math.abs(Q)<=i,te=Math.abs(u-B)<=l;m.done=F&&te}return m.value=m.done?u:B,m},toString:()=>{const W=Math.min(Uh(I),Sl),B=ny(Q=>I.next(W*Q).value,W,30);return W+"ms "+B},toTransition:()=>{}};return I}Cl.applyToOptions=t=>{const s=g1(t,100,Cl);return t.ease=s.ease,t.duration=vn(s.duration),t.type="keyframes",t};function Du({keyframes:t,velocity:s=0,power:a=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:d=500,modifyTarget:u,min:m,max:g,restDelta:v=.5,restSpeed:h}){const j=t[0],w={done:!1,value:j},D=F=>m!==void 0&&F<m||g!==void 0&&F>g,S=F=>m===void 0?g:g===void 0||Math.abs(m-F)<Math.abs(g-F)?m:g;let b=a*s;const C=j+b,A=u===void 0?C:u(C);A!==C&&(b=A-j);const L=F=>-b*Math.exp(-F/i),N=F=>A+L(F),I=F=>{const te=L(F),ce=N(F);w.done=Math.abs(te)<=v,w.value=w.done?A:ce};let W,B;const Q=F=>{D(w.value)&&(W=F,B=Cl({keyframes:[w.value,S(w.value)],velocity:ry(N,F,w.value),damping:l,stiffness:d,restDelta:v,restSpeed:h}))};return Q(0),{calculatedDuration:null,next:F=>{let te=!1;return!B&&W===void 0&&(te=!0,I(F),Q(F)),W!==void 0&&F>=W?B.next(F-W):(!te&&I(F),w)}}}function k1(t,s,a){const i=[],l=a||On.mix||sy,d=t.length-1;for(let u=0;u<d;u++){let m=l(t[u],t[u+1]);if(s){const g=Array.isArray(s)?s[u]||Qs:s;m=Gi(g,m)}i.push(m)}return i}function S1(t,s,{clamp:a=!0,ease:i,mixer:l}={}){const d=t.length;if(Th(d===s.length),d===1)return()=>s[0];if(d===2&&s[0]===s[1])return()=>s[1];const u=t[0]===t[1];t[0]>t[d-1]&&(t=[...t].reverse(),s=[...s].reverse());const m=k1(s,i,l),g=m.length,v=h=>{if(u&&h<t[0])return s[0];let j=0;if(g>1)for(;j<t.length-2&&!(h<t[j+1]);j++);const w=Ui(t[j],t[j+1],h);return m[j](w)};return a?h=>v(In(t[0],t[d-1],h)):v}function C1(t,s){const a=t[t.length-1];for(let i=1;i<=s;i++){const l=Ui(0,s,i);t.push(Tt(a,1,l))}}function A1(t){const s=[0];return C1(s,t.length-1),s}function T1(t,s){return t.map(a=>a*s)}function E1(t,s){return t.map(()=>s||qx).splice(0,t.length-1)}function Li({duration:t=300,keyframes:s,times:a,ease:i="easeInOut"}){const l=WN(i)?i.map(kg):kg(i),d={done:!1,value:s[0]},u=T1(a&&a.length===s.length?a:A1(s),t),m=S1(u,s,{ease:Array.isArray(l)?l:E1(s,l)});return{calculatedDuration:t,next:g=>(d.value=m(g),d.done=g>=t,d)}}const P1=t=>t!==null;function Bh(t,{repeat:s,repeatType:a="loop"},i,l=1){const d=t.filter(P1),m=l<0||s&&a!=="loop"&&s%2===1?0:d.length-1;return!m||i===void 0?d[m]:i}const D1={decay:Du,inertia:Du,tween:Li,keyframes:Li,spring:Cl};function ay(t){typeof t.type=="string"&&(t.type=D1[t.type])}class Wh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,a){return this.finished.then(s,a)}}const L1=t=>t/100;class Vh extends Wh{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:a}=this.options;a&&a.updatedAt!==Es.now()&&this.tick(Es.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;ay(s);const{type:a=Li,repeat:i=0,repeatDelay:l=0,repeatType:d,velocity:u=0}=s;let{keyframes:m}=s;const g=a||Li;g!==Li&&typeof m[0]!="number"&&(this.mixKeyframes=Gi(L1,sy(m[0],m[1])),m=[0,100]);const v=g({...s,keyframes:m});d==="mirror"&&(this.mirroredGenerator=g({...s,keyframes:[...m].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=Uh(v));const{calculatedDuration:h}=v;this.calculatedDuration=h,this.resolvedDuration=h+l,this.totalDuration=this.resolvedDuration*(i+1)-l,this.generator=v}updateTime(s){const a=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(s,a=!1){const{generator:i,totalDuration:l,mixKeyframes:d,mirroredGenerator:u,resolvedDuration:m,calculatedDuration:g}=this;if(this.startTime===null)return i.next(0);const{delay:v=0,keyframes:h,repeat:j,repeatType:w,repeatDelay:D,type:S,onUpdate:b,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-l/this.speed,this.startTime)),a?this.currentTime=s:this.updateTime(s);const A=this.currentTime-v*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?A<0:A>l;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let N=this.currentTime,I=i;if(j){const F=Math.min(this.currentTime,l)/m;let te=Math.floor(F),ce=F%1;!ce&&F>=1&&(ce=1),ce===1&&te--,te=Math.min(te,j+1),!!(te%2)&&(w==="reverse"?(ce=1-ce,D&&(ce-=D/m)):w==="mirror"&&(I=u)),N=In(0,1,ce)*m}const W=L?{done:!1,value:h[0]}:I.next(N);d&&(W.value=d(W.value));let{done:B}=W;!L&&g!==null&&(B=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const Q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return Q&&S!==Du&&(W.value=Bh(h,this.options,C,this.speed)),b&&b(W.value),Q&&this.finish(),W}then(s,a){return this.finished.then(s,a)}get duration(){return xn(this.calculatedDuration)}get time(){return xn(this.currentTime)}set time(s){s=vn(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Es.now());const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=xn(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=f1,startTime:a}=this.options;this.driver||(this.driver=s(l=>this.tick(l))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=a??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Es.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function R1(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const Ir=t=>t*180/Math.PI,Lu=t=>{const s=Ir(Math.atan2(t[1],t[0]));return Ru(s)},M1={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Lu,rotateZ:Lu,skewX:t=>Ir(Math.atan(t[1])),skewY:t=>Ir(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ru=t=>(t=t%360,t<0&&(t+=360),t),Dg=Lu,Lg=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Rg=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),I1={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Lg,scaleY:Rg,scale:t=>(Lg(t)+Rg(t))/2,rotateX:t=>Ru(Ir(Math.atan2(t[6],t[5]))),rotateY:t=>Ru(Ir(Math.atan2(-t[2],t[0]))),rotateZ:Dg,rotate:Dg,skewX:t=>Ir(Math.atan(t[4])),skewY:t=>Ir(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Mu(t){return t.includes("scale")?1:0}function Iu(t,s){if(!t||t==="none")return Mu(s);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,l;if(a)i=I1,l=a;else{const m=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=M1,l=m}if(!l)return Mu(s);const d=i[s],u=l[1].split(",").map(F1);return typeof d=="function"?d(u):u[d]}const O1=(t,s)=>{const{transform:a="none"}=getComputedStyle(t);return Iu(a,s)};function F1(t){return parseFloat(t.trim())}const Oa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fa=new Set(Oa),Mg=t=>t===Ia||t===qe,U1=new Set(["x","y","z"]),B1=Oa.filter(t=>!U1.has(t));function W1(t){const s=[];return B1.forEach(a=>{const i=t.getValue(a);i!==void 0&&(s.push([a,i.get()]),i.set(a.startsWith("scale")?1:0))}),s}const Fr={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Iu(s,"x"),y:(t,{transform:s})=>Iu(s,"y")};Fr.translateX=Fr.x;Fr.translateY=Fr.y;const Ur=new Set;let Ou=!1,Fu=!1,Uu=!1;function iy(){if(Fu){const t=Array.from(Ur).filter(i=>i.needsMeasurement),s=new Set(t.map(i=>i.element)),a=new Map;s.forEach(i=>{const l=W1(i);l.length&&(a.set(i,l),i.render())}),t.forEach(i=>i.measureInitialState()),s.forEach(i=>{i.render();const l=a.get(i);l&&l.forEach(([d,u])=>{i.getValue(d)?.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Fu=!1,Ou=!1,Ur.forEach(t=>t.complete(Uu)),Ur.clear()}function oy(){Ur.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fu=!0)})}function V1(){Uu=!0,oy(),iy(),Uu=!1}class _h{constructor(s,a,i,l,d,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=i,this.motionValue=l,this.element=d,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Ur.add(this),Ou||(Ou=!0,wt.read(oy),wt.resolveKeyframes(iy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:i,motionValue:l}=this;if(s[0]===null){const d=l?.get(),u=s[s.length-1];if(d!==void 0)s[0]=d;else if(i&&a){const m=i.readValue(a,u);m!=null&&(s[0]=m)}s[0]===void 0&&(s[0]=u),l&&d===void 0&&l.set(s[0])}R1(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),Ur.delete(this)}cancel(){this.state==="scheduled"&&(Ur.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _1=t=>t.startsWith("--");function $1(t,s,a){_1(s)?t.style.setProperty(s,a):t.style[s]=a}const z1=Eh(()=>window.ScrollTimeline!==void 0),H1={};function q1(t,s){const a=Eh(t);return()=>H1[s]??a()}const ly=q1(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ai=([t,s,a,i])=>`cubic-bezier(${t}, ${s}, ${a}, ${i})`,Ig={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ai([0,.65,.55,1]),circOut:Ai([.55,0,1,.45]),backIn:Ai([.31,.01,.66,-.59]),backOut:Ai([.33,1.53,.69,.99])};function cy(t,s){if(t)return typeof t=="function"?ly()?ny(t,s):"ease-out":Yx(t)?Ai(t):Array.isArray(t)?t.map(a=>cy(a,s)||Ig.easeOut):Ig[t]}function Y1(t,s,a,{delay:i=0,duration:l=300,repeat:d=0,repeatType:u="loop",ease:m="easeOut",times:g}={},v=void 0){const h={[s]:a};g&&(h.offset=g);const j=cy(m,l);Array.isArray(j)&&(h.easing=j);const w={delay:i,duration:l,easing:Array.isArray(j)?"linear":j,fill:"both",iterations:d+1,direction:u==="reverse"?"alternate":"normal"};return v&&(w.pseudoElement=v),t.animate(h,w)}function dy(t){return typeof t=="function"&&"applyToOptions"in t}function G1({type:t,...s}){return dy(t)&&ly()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class Q1 extends Wh{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:a,name:i,keyframes:l,pseudoElement:d,allowFlatten:u=!1,finalKeyframe:m,onComplete:g}=s;this.isPseudoElement=!!d,this.allowFlatten=u,this.options=s,Th(typeof s.type!="string");const v=G1(s);this.animation=Y1(a,i,l,v,d),v.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const h=Bh(l,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(h):$1(a,i,h),this.animation.cancel()}g?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return xn(Number(s))}get time(){return xn(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=vn(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&z1()?(this.animation.timeline=s,Qs):a(this)}}const uy={anticipate:$x,backInOut:_x,circInOut:Hx};function K1(t){return t in uy}function J1(t){typeof t.ease=="string"&&K1(t.ease)&&(t.ease=uy[t.ease])}const Og=10;class Z1 extends Q1{constructor(s){J1(s),ay(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:a,onUpdate:i,onComplete:l,element:d,...u}=this.options;if(!a)return;if(s!==void 0){a.set(s);return}const m=new Vh({...u,autoplay:!1}),g=vn(this.finishedTime??this.time);a.setWithVelocity(m.sample(g-Og).value,m.sample(g).value,Og),m.stop()}}const Fg=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hr.test(t)||t==="0")&&!t.startsWith("url("));function X1(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function ek(t,s,a,i){const l=t[0];if(l===null)return!1;if(s==="display"||s==="visibility")return!0;const d=t[t.length-1],u=Fg(l,s),m=Fg(d,s);return!u||!m?!1:X1(t)||(a==="spring"||dy(a))&&i}const tk=new Set(["opacity","clipPath","filter","transform"]),sk=Eh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nk(t){const{motionValue:s,name:a,repeatDelay:i,repeatType:l,damping:d,type:u}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:v}=s.owner.getProps();return sk()&&a&&tk.has(a)&&(a!=="transform"||!v)&&!g&&!i&&l!=="mirror"&&d!==0&&u!=="inertia"}const rk=40;class ak extends Wh{constructor({autoplay:s=!0,delay:a=0,type:i="keyframes",repeat:l=0,repeatDelay:d=0,repeatType:u="loop",keyframes:m,name:g,motionValue:v,element:h,...j}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Es.now();const w={autoplay:s,delay:a,type:i,repeat:l,repeatDelay:d,repeatType:u,name:g,motionValue:v,element:h,...j},D=h?.KeyframeResolver||_h;this.keyframeResolver=new D(m,(S,b,C)=>this.onKeyframesResolved(S,b,w,!C),g,v,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,a,i,l){this.keyframeResolver=void 0;const{name:d,type:u,velocity:m,delay:g,isHandoff:v,onUpdate:h}=i;this.resolvedAt=Es.now(),ek(s,d,u,m)||((On.instantAnimations||!g)&&h?.(Bh(s,i,a)),s[0]=s[s.length-1],i.duration=0,i.repeat=0);const w={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>rk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...i,keyframes:s},D=!v&&nk(w)?new Z1({...w,element:w.motionValue.owner.current}):new Vh(w);D.finished.then(()=>this.notifyFinished()).catch(Qs),this.pendingTimeline&&(this.stopTimeline=D.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=D}get finished(){return this._animation?this.animation.finished:this._finished}then(s,a){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),V1()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ik=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ok(t){const s=ik.exec(t);if(!s)return[,];const[,a,i,l]=s;return[`--${a??i}`,l]}function hy(t,s,a=1){const[i,l]=ok(t);if(!i)return;const d=window.getComputedStyle(s).getPropertyValue(i);if(d){const u=d.trim();return Mx(u)?parseFloat(u):u}return Mh(l)?hy(l,s,a+1):l}function $h(t,s){return t?.[s]??t?.default??t}const my=new Set(["width","height","top","left","right","bottom",...Oa]),lk={test:t=>t==="auto",parse:t=>t},py=t=>s=>s.test(t),fy=[Ia,qe,yn,ir,XN,ZN,lk],Ug=t=>fy.find(py(t));function ck(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ox(t):!0}const dk=new Set(["brightness","contrast","saturate","opacity"]);function uk(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[i]=a.match(Ih)||[];if(!i)return t;const l=a.replace(i,"");let d=dk.has(s)?1:0;return i!==a&&(d*=100),s+"("+d+l+")"}const hk=/\b([a-z-]*)\(.*?\)/gu,Bu={...hr,getAnimatableNone:t=>{const s=t.match(hk);return s?s.map(uk).join(" "):t}},Bg={...Ia,transform:Math.round},mk={rotate:ir,rotateX:ir,rotateY:ir,rotateZ:ir,scale:cl,scaleX:cl,scaleY:cl,scaleZ:cl,skew:ir,skewX:ir,skewY:ir,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:Bi,originX:Cg,originY:Cg,originZ:qe},zh={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...mk,zIndex:Bg,fillOpacity:Bi,strokeOpacity:Bi,numOctaves:Bg},pk={...zh,color:Bt,backgroundColor:Bt,outlineColor:Bt,fill:Bt,stroke:Bt,borderColor:Bt,borderTopColor:Bt,borderRightColor:Bt,borderBottomColor:Bt,borderLeftColor:Bt,filter:Bu,WebkitFilter:Bu},gy=t=>pk[t];function vy(t,s){let a=gy(t);return a!==Bu&&(a=hr),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const fk=new Set(["auto","none","0"]);function gk(t,s,a){let i=0,l;for(;i<t.length&&!l;){const d=t[i];typeof d=="string"&&!fk.has(d)&&Wi(d).values.length&&(l=t[i]),i++}if(l&&a)for(const d of s)t[d]=vy(a,l)}class vk extends _h{constructor(s,a,i,l,d){super(s,a,i,l,d,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:i}=this;if(!a||!a.current)return;super.readKeyframes();for(let g=0;g<s.length;g++){let v=s[g];if(typeof v=="string"&&(v=v.trim(),Mh(v))){const h=hy(v,a.current);h!==void 0&&(s[g]=h),g===s.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!my.has(i)||s.length!==2)return;const[l,d]=s,u=Ug(l),m=Ug(d);if(u!==m)if(Mg(u)&&Mg(m))for(let g=0;g<s.length;g++){const v=s[g];typeof v=="string"&&(s[g]=parseFloat(v))}else Fr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,i=[];for(let l=0;l<s.length;l++)(s[l]===null||ck(s[l]))&&i.push(l);i.length&&gk(s,i,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:i}=this;if(!s||!s.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fr[i](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const l=a[a.length-1];l!==void 0&&s.getValue(i,l).jump(l,!1)}measureEndState(){const{element:s,name:a,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const l=s.getValue(a);l&&l.jump(this.measuredOrigin,!1);const d=i.length-1,u=i[d];i[d]=Fr[a](s.measureViewportBox(),window.getComputedStyle(s.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([m,g])=>{s.getValue(m).set(g)}),this.resolveNoneKeyframes()}}function xk(t,s,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const l=a?.[t]??i.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const xy=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function yy(t){return Ix(t)&&"offsetHeight"in t}const Wg=30,yk=t=>!isNaN(parseFloat(t));class jk{constructor(s,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,l=!0)=>{const d=Es.now();if(this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();l&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=Es.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=yk(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new Ph);const i=this.events[s].add(a);return s==="change"?()=>{i(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s,a=!0){!a||!this.passiveEffect?this.updateAndNotify(s,a):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,a,i){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-i}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Es.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>Wg)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,Wg);return Fx(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pa(t,s){return new jk(t,s)}const{schedule:Hh}=Gx(queueMicrotask,!1),on={x:!1,y:!1};function jy(){return on.x||on.y}function wk(t){return t==="x"||t==="y"?on[t]?null:(on[t]=!0,()=>{on[t]=!1}):on.x||on.y?null:(on.x=on.y=!0,()=>{on.x=on.y=!1})}function wy(t,s){const a=xk(t),i=new AbortController,l={passive:!0,...s,signal:i.signal};return[a,l,()=>i.abort()]}function Vg(t){return!(t.pointerType==="touch"||jy())}function bk(t,s,a={}){const[i,l,d]=wy(t,a),u=m=>{if(!Vg(m))return;const{target:g}=m,v=s(g,m);if(typeof v!="function"||!g)return;const h=j=>{Vg(j)&&(v(j),g.removeEventListener("pointerleave",h))};g.addEventListener("pointerleave",h,l)};return i.forEach(m=>{m.addEventListener("pointerenter",u,l)}),d}const by=(t,s)=>s?t===s?!0:by(t,s.parentElement):!1,qh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Nk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kk(t){return Nk.has(t.tagName)||t.tabIndex!==-1}const vl=new WeakSet;function _g(t){return s=>{s.key==="Enter"&&t(s)}}function iu(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const Sk=(t,s)=>{const a=t.currentTarget;if(!a)return;const i=_g(()=>{if(vl.has(a))return;iu(a,"down");const l=_g(()=>{iu(a,"up")}),d=()=>iu(a,"cancel");a.addEventListener("keyup",l,s),a.addEventListener("blur",d,s)});a.addEventListener("keydown",i,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",i),s)};function $g(t){return qh(t)&&!jy()}function Ck(t,s,a={}){const[i,l,d]=wy(t,a),u=m=>{const g=m.currentTarget;if(!$g(m))return;vl.add(g);const v=s(g,m),h=(D,S)=>{window.removeEventListener("pointerup",j),window.removeEventListener("pointercancel",w),vl.has(g)&&vl.delete(g),$g(D)&&typeof v=="function"&&v(D,{success:S})},j=D=>{h(D,g===window||g===document||a.useGlobalTarget||by(g,D.target))},w=D=>{h(D,!1)};window.addEventListener("pointerup",j,l),window.addEventListener("pointercancel",w,l)};return i.forEach(m=>{(a.useGlobalTarget?window:m).addEventListener("pointerdown",u,l),yy(m)&&(m.addEventListener("focus",v=>Sk(v,l)),!kk(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),d}function Ny(t){return Ix(t)&&"ownerSVGElement"in t}function Ak(t){return Ny(t)&&t.tagName==="svg"}const hs=t=>!!(t&&t.getVelocity),Tk=[...fy,Bt,hr],Ek=t=>Tk.find(py(t)),Yh=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Pk extends y.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const i=a.offsetParent,l=yy(i)&&i.offsetWidth||0,d=this.props.sizeRef.current;d.height=a.offsetHeight||0,d.width=a.offsetWidth||0,d.top=a.offsetTop,d.left=a.offsetLeft,d.right=l-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Dk({children:t,isPresent:s,anchorX:a,root:i}){const l=y.useId(),d=y.useRef(null),u=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=y.useContext(Yh);return y.useInsertionEffect(()=>{const{width:g,height:v,top:h,left:j,right:w}=u.current;if(s||!d.current||!g||!v)return;const D=a==="left"?`left: ${j}`:`right: ${w}`;d.current.dataset.motionPopId=l;const S=document.createElement("style");m&&(S.nonce=m);const b=i??document.head;return b.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${D}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.removeChild(S),b.contains(S)&&b.removeChild(S)}},[s]),e.jsx(Pk,{isPresent:s,childRef:d,sizeRef:u,children:y.cloneElement(t,{ref:d})})}const Lk=({children:t,initial:s,isPresent:a,onExitComplete:i,custom:l,presenceAffectsLayout:d,mode:u,anchorX:m,root:g})=>{const v=kh(Rk),h=y.useId();let j=!0,w=y.useMemo(()=>(j=!1,{id:h,initial:s,isPresent:a,custom:l,onExitComplete:D=>{v.set(D,!0);for(const S of v.values())if(!S)return;i&&i()},register:D=>(v.set(D,!1),()=>v.delete(D))}),[a,v,i]);return d&&j&&(w={...w}),y.useMemo(()=>{v.forEach((D,S)=>v.set(S,!1))},[a]),y.useEffect(()=>{!a&&!v.size&&i&&i()},[a]),u==="popLayout"&&(t=e.jsx(Dk,{isPresent:a,anchorX:m,root:g,children:t})),e.jsx(Ml.Provider,{value:w,children:t})};function Rk(){return new Map}function ky(t=!0){const s=y.useContext(Ml);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:i,register:l}=s,d=y.useId();y.useEffect(()=>{if(t)return l(d)},[t]);const u=y.useCallback(()=>t&&i&&i(d),[d,i,t]);return!a&&i?[!1,u]:[!0]}const dl=t=>t.key||"";function zg(t){const s=[];return y.Children.forEach(t,a=>{y.isValidElement(a)&&s.push(a)}),s}const Mk=({children:t,custom:s,initial:a=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",root:g})=>{const[v,h]=ky(u),j=y.useMemo(()=>zg(t),[t]),w=u&&!v?[]:j.map(dl),D=y.useRef(!0),S=y.useRef(j),b=kh(()=>new Map),[C,A]=y.useState(j),[L,N]=y.useState(j);Rx(()=>{D.current=!1,S.current=j;for(let B=0;B<L.length;B++){const Q=dl(L[B]);w.includes(Q)?b.delete(Q):b.get(Q)!==!0&&b.set(Q,!1)}},[L,w.length,w.join("-")]);const I=[];if(j!==C){let B=[...j];for(let Q=0;Q<L.length;Q++){const F=L[Q],te=dl(F);w.includes(te)||(B.splice(Q,0,F),I.push(F))}return d==="wait"&&I.length&&(B=I),N(zg(B)),A(j),null}const{forceRender:W}=y.useContext(Nh);return e.jsx(e.Fragment,{children:L.map(B=>{const Q=dl(B),F=u&&!v?!1:j===L||w.includes(Q),te=()=>{if(b.has(Q))b.set(Q,!0);else return;let ce=!0;b.forEach(z=>{z||(ce=!1)}),ce&&(W?.(),N(S.current),u&&h?.(),i&&i())};return e.jsx(Lk,{isPresent:F,initial:!D.current||a?void 0:!1,custom:s,presenceAffectsLayout:l,mode:d,root:g,onExitComplete:F?void 0:te,anchorX:m,children:B},Q)})})},Sy=y.createContext({strict:!1}),Hg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const t in Hg)Da[t]={isEnabled:s=>Hg[t].some(a=>!!s[a])};function Ik(t){for(const s in t)Da[s]={...Da[s],...t[s]}}const Ok=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Al(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ok.has(t)}let Cy=t=>!Al(t);function Fk(t){typeof t=="function"&&(Cy=s=>s.startsWith("on")?!Al(s):t(s))}try{Fk(require("@emotion/is-prop-valid").default)}catch{}function Uk(t,s,a){const i={};for(const l in t)l==="values"&&typeof t.values=="object"||(Cy(l)||a===!0&&Al(l)||!s&&!Al(l)||t.draggable&&l.startsWith("onDrag"))&&(i[l]=t[l]);return i}function Bk(t){if(typeof Proxy>"u")return t;const s=new Map,a=(...i)=>t(...i);return new Proxy(a,{get:(i,l)=>l==="create"?t:(s.has(l)||s.set(l,t(l)),s.get(l))})}const Il=y.createContext({});function Ol(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Vi(t){return typeof t=="string"||Array.isArray(t)}const Gh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qh=["initial",...Gh];function Fl(t){return Ol(t.animate)||Qh.some(s=>Vi(t[s]))}function Ay(t){return!!(Fl(t)||t.variants)}function Wk(t,s){if(Fl(t)){const{initial:a,animate:i}=t;return{initial:a===!1||Vi(a)?a:void 0,animate:Vi(i)?i:void 0}}return t.inherit!==!1?s:{}}function Vk(t){const{initial:s,animate:a}=Wk(t,y.useContext(Il));return y.useMemo(()=>({initial:s,animate:a}),[qg(s),qg(a)])}function qg(t){return Array.isArray(t)?t.join(" "):t}const _k=Symbol.for("motionComponentSymbol");function Na(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $k(t,s,a){return y.useCallback(i=>{i&&t.onMount&&t.onMount(i),s&&(i?s.mount(i):s.unmount()),a&&(typeof a=="function"?a(i):Na(a)&&(a.current=i))},[s])}const Kh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zk="framerAppearId",Ty="data-"+Kh(zk),Ey=y.createContext({});function Hk(t,s,a,i,l){const{visualElement:d}=y.useContext(Il),u=y.useContext(Sy),m=y.useContext(Ml),g=y.useContext(Yh).reducedMotion,v=y.useRef(null);i=i||u.renderer,!v.current&&i&&(v.current=i(t,{visualState:s,parent:d,props:a,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:g}));const h=v.current,j=y.useContext(Ey);h&&!h.projection&&l&&(h.type==="html"||h.type==="svg")&&qk(v.current,a,l,j);const w=y.useRef(!1);y.useInsertionEffect(()=>{h&&w.current&&h.update(a,m)});const D=a[Ty],S=y.useRef(!!D&&!window.MotionHandoffIsComplete?.(D)&&window.MotionHasOptimisedAnimation?.(D));return Rx(()=>{h&&(w.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Hh.render(h.render),S.current&&h.animationState&&h.animationState.animateChanges())}),y.useEffect(()=>{h&&(!S.current&&h.animationState&&h.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(D)}),S.current=!1))}),h}function qk(t,s,a,i){const{layoutId:l,layout:d,drag:u,dragConstraints:m,layoutScroll:g,layoutRoot:v,layoutCrossfade:h}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:Py(t.parent)),t.projection.setOptions({layoutId:l,layout:d,alwaysMeasureLayout:!!u||m&&Na(m),visualElement:t,animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:g,layoutRoot:v})}function Py(t){if(t)return t.options.allowProjection!==!1?t.projection:Py(t.parent)}function Yk({preloadedFeatures:t,createVisualElement:s,useRender:a,useVisualState:i,Component:l}){t&&Ik(t);function d(m,g){let v;const h={...y.useContext(Yh),...m,layoutId:Gk(m)},{isStatic:j}=h,w=Vk(m),D=i(m,j);if(!j&&Sh){Qk();const S=Kk(h);v=S.MeasureLayout,w.visualElement=Hk(l,D,h,s,S.ProjectionNode)}return e.jsxs(Il.Provider,{value:w,children:[v&&w.visualElement?e.jsx(v,{visualElement:w.visualElement,...h}):null,a(l,m,$k(D,w.visualElement,g),D,j,w.visualElement)]})}d.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const u=y.forwardRef(d);return u[_k]=l,u}function Gk({layoutId:t}){const s=y.useContext(Nh).id;return s&&t!==void 0?s+"-"+t:t}function Qk(t,s){y.useContext(Sy).strict}function Kk(t){const{drag:s,layout:a}=Da;if(!s&&!a)return{};const i={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const _i={};function Jk(t){for(const s in t)_i[s]=t[s],Rh(s)&&(_i[s].isCSSVariable=!0)}function Dy(t,{layout:s,layoutId:a}){return Fa.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!_i[t]||t==="opacity")}const Zk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xk=Oa.length;function eS(t,s,a){let i="",l=!0;for(let d=0;d<Xk;d++){const u=Oa[d],m=t[u];if(m===void 0)continue;let g=!0;if(typeof m=="number"?g=m===(u.startsWith("scale")?1:0):g=parseFloat(m)===0,!g||a){const v=xy(m,zh[u]);if(!g){l=!1;const h=Zk[u]||u;i+=`${h}(${v}) `}a&&(s[u]=v)}}return i=i.trim(),a?i=a(s,l?"":i):l&&(i="none"),i}function Jh(t,s,a){const{style:i,vars:l,transformOrigin:d}=t;let u=!1,m=!1;for(const g in s){const v=s[g];if(Fa.has(g)){u=!0;continue}else if(Rh(g)){l[g]=v;continue}else{const h=xy(v,zh[g]);g.startsWith("origin")?(m=!0,d[g]=h):i[g]=h}}if(s.transform||(u||a?i.transform=eS(s,t.transform,a):i.transform&&(i.transform="none")),m){const{originX:g="50%",originY:v="50%",originZ:h=0}=d;i.transformOrigin=`${g} ${v} ${h}`}}const Zh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ly(t,s,a){for(const i in s)!hs(s[i])&&!Dy(i,a)&&(t[i]=s[i])}function tS({transformTemplate:t},s){return y.useMemo(()=>{const a=Zh();return Jh(a,s,t),Object.assign({},a.vars,a.style)},[s])}function sS(t,s){const a=t.style||{},i={};return Ly(i,a,t),Object.assign(i,tS(t,s)),i}function nS(t,s){const a={},i=sS(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=i,a}const rS={offset:"stroke-dashoffset",array:"stroke-dasharray"},aS={offset:"strokeDashoffset",array:"strokeDasharray"};function iS(t,s,a=1,i=0,l=!0){t.pathLength=1;const d=l?rS:aS;t[d.offset]=qe.transform(-i);const u=qe.transform(s),m=qe.transform(a);t[d.array]=`${u} ${m}`}function Ry(t,{attrX:s,attrY:a,attrScale:i,pathLength:l,pathSpacing:d=1,pathOffset:u=0,...m},g,v,h){if(Jh(t,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:j,style:w}=t;j.transform&&(w.transform=j.transform,delete j.transform),(w.transform||j.transformOrigin)&&(w.transformOrigin=j.transformOrigin??"50% 50%",delete j.transformOrigin),w.transform&&(w.transformBox=h?.transformBox??"fill-box",delete j.transformBox),s!==void 0&&(j.x=s),a!==void 0&&(j.y=a),i!==void 0&&(j.scale=i),l!==void 0&&iS(j,l,d,u,!1)}const My=()=>({...Zh(),attrs:{}}),Iy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function oS(t,s,a,i){const l=y.useMemo(()=>{const d=My();return Ry(d,s,Iy(i),t.transformTemplate,t.style),{...d.attrs,style:{...d.style}}},[s]);if(t.style){const d={};Ly(d,t.style,t),l.style={...d,...l.style}}return l}const lS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xh(t){return typeof t!="string"||t.includes("-")?!1:!!(lS.indexOf(t)>-1||/[A-Z]/u.test(t))}function cS(t=!1){return(a,i,l,{latestValues:d},u)=>{const g=(Xh(a)?oS:nS)(i,d,u,a),v=Uk(i,typeof a=="string",t),h=a!==y.Fragment?{...v,...g,ref:l}:{},{children:j}=i,w=y.useMemo(()=>hs(j)?j.get():j,[j]);return y.createElement(a,{...h,children:w})}}function Yg(t){const s=[{},{}];return t?.values.forEach((a,i)=>{s[0][i]=a.get(),s[1][i]=a.getVelocity()}),s}function em(t,s,a,i){if(typeof s=="function"){const[l,d]=Yg(i);s=s(a!==void 0?a:t.custom,l,d)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[l,d]=Yg(i);s=s(a!==void 0?a:t.custom,l,d)}return s}function xl(t){return hs(t)?t.get():t}function dS({scrapeMotionValuesFromProps:t,createRenderState:s},a,i,l){return{latestValues:uS(a,i,l,t),renderState:s()}}const Oy=t=>(s,a)=>{const i=y.useContext(Il),l=y.useContext(Ml),d=()=>dS(t,s,i,l);return a?d():kh(d)};function uS(t,s,a,i){const l={},d=i(t,{});for(const w in d)l[w]=xl(d[w]);let{initial:u,animate:m}=t;const g=Fl(t),v=Ay(t);s&&v&&!g&&t.inherit!==!1&&(u===void 0&&(u=s.initial),m===void 0&&(m=s.animate));let h=a?a.initial===!1:!1;h=h||u===!1;const j=h?m:u;if(j&&typeof j!="boolean"&&!Ol(j)){const w=Array.isArray(j)?j:[j];for(let D=0;D<w.length;D++){const S=em(t,w[D]);if(S){const{transitionEnd:b,transition:C,...A}=S;for(const L in A){let N=A[L];if(Array.isArray(N)){const I=h?N.length-1:0;N=N[I]}N!==null&&(l[L]=N)}for(const L in b)l[L]=b[L]}}}return l}function tm(t,s,a){const{style:i}=t,l={};for(const d in i)(hs(i[d])||s.style&&hs(s.style[d])||Dy(d,t)||a?.getValue(d)?.liveStyle!==void 0)&&(l[d]=i[d]);return l}const hS={useVisualState:Oy({scrapeMotionValuesFromProps:tm,createRenderState:Zh})};function Fy(t,s,a){const i=tm(t,s,a);for(const l in t)if(hs(t[l])||hs(s[l])){const d=Oa.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;i[d]=t[l]}return i}const mS={useVisualState:Oy({scrapeMotionValuesFromProps:Fy,createRenderState:My})};function pS(t,s){return function(i,{forwardMotionProps:l}={forwardMotionProps:!1}){const u={...Xh(i)?mS:hS,preloadedFeatures:t,useRender:cS(l),createVisualElement:s,Component:i};return Yk(u)}}function $i(t,s,a){const i=t.getProps();return em(i,s,a!==void 0?a:i.custom,t)}const Wu=t=>Array.isArray(t);function fS(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,Pa(a))}function gS(t){return Wu(t)?t[t.length-1]||0:t}function vS(t,s){const a=$i(t,s);let{transitionEnd:i={},transition:l={},...d}=a||{};d={...d,...i};for(const u in d){const m=gS(d[u]);fS(t,u,m)}}function xS(t){return!!(hs(t)&&t.add)}function Vu(t,s){const a=t.getValue("willChange");if(xS(a))return a.add(s);if(!a&&On.WillChange){const i=new On.WillChange("auto");t.addValue("willChange",i),i.add(s)}}function Uy(t){return t.props[Ty]}const yS=t=>t!==null;function jS(t,{repeat:s,repeatType:a="loop"},i){const l=t.filter(yS),d=s&&a!=="loop"&&s%2===1?0:l.length-1;return l[d]}const wS={type:"spring",stiffness:500,damping:25,restSpeed:10},bS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),NS={type:"keyframes",duration:.8},kS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SS=(t,{keyframes:s})=>s.length>2?NS:Fa.has(t)?t.startsWith("scale")?bS(s[1]):wS:kS;function CS({when:t,delay:s,delayChildren:a,staggerChildren:i,staggerDirection:l,repeat:d,repeatType:u,repeatDelay:m,from:g,elapsed:v,...h}){return!!Object.keys(h).length}const sm=(t,s,a,i={},l,d)=>u=>{const m=$h(i,t)||{},g=m.delay||i.delay||0;let{elapsed:v=0}=i;v=v-vn(g);const h={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...m,delay:-v,onUpdate:w=>{s.set(w),m.onUpdate&&m.onUpdate(w)},onComplete:()=>{u(),m.onComplete&&m.onComplete()},name:t,motionValue:s,element:d?void 0:l};CS(m)||Object.assign(h,SS(t,h)),h.duration&&(h.duration=vn(h.duration)),h.repeatDelay&&(h.repeatDelay=vn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let j=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(j=!0)),(On.instantAnimations||On.skipAnimations)&&(j=!0,h.duration=0,h.delay=0),h.allowFlatten=!m.type&&!m.ease,j&&!d&&s.get()!==void 0){const w=jS(h.keyframes,m);if(w!==void 0){wt.update(()=>{h.onUpdate(w),h.onComplete()});return}}return m.isSync?new Vh(h):new ak(h)};function AS({protectedKeys:t,needsAnimating:s},a){const i=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,i}function By(t,s,{delay:a=0,transitionOverride:i,type:l}={}){let{transition:d=t.getDefaultTransition(),transitionEnd:u,...m}=s;i&&(d=i);const g=[],v=l&&t.animationState&&t.animationState.getState()[l];for(const h in m){const j=t.getValue(h,t.latestValues[h]??null),w=m[h];if(w===void 0||v&&AS(v,h))continue;const D={delay:a,...$h(d||{},h)},S=j.get();if(S!==void 0&&!j.isAnimating&&!Array.isArray(w)&&w===S&&!D.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const A=Uy(t);if(A){const L=window.MotionHandoffAnimation(A,h,wt);L!==null&&(D.startTime=L,b=!0)}}Vu(t,h),j.start(sm(h,j,w,t.shouldReduceMotion&&my.has(h)?{type:!1}:D,t,b));const C=j.animation;C&&g.push(C)}return u&&Promise.all(g).then(()=>{wt.update(()=>{u&&vS(t,u)})}),g}function _u(t,s,a={}){const i=$i(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=i||{};a.transitionOverride&&(l=a.transitionOverride);const d=i?()=>Promise.all(By(t,i,a)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:v=0,staggerChildren:h,staggerDirection:j}=l;return TS(t,s,g,v,h,j,a)}:()=>Promise.resolve(),{when:m}=l;if(m){const[g,v]=m==="beforeChildren"?[d,u]:[u,d];return g().then(()=>v())}else return Promise.all([d(),u(a.delay)])}function TS(t,s,a=0,i=0,l=0,d=1,u){const m=[],g=t.variantChildren.size,v=(g-1)*l,h=typeof i=="function",j=h?w=>i(w,g):d===1?(w=0)=>w*l:(w=0)=>v-w*l;return Array.from(t.variantChildren).sort(ES).forEach((w,D)=>{w.notify("AnimationStart",s),m.push(_u(w,s,{...u,delay:a+(h?0:i)+j(D)}).then(()=>w.notify("AnimationComplete",s)))}),Promise.all(m)}function ES(t,s){return t.sortNodePosition(s)}function PS(t,s,a={}){t.notify("AnimationStart",s);let i;if(Array.isArray(s)){const l=s.map(d=>_u(t,d,a));i=Promise.all(l)}else if(typeof s=="string")i=_u(t,s,a);else{const l=typeof s=="function"?$i(t,s,a.custom):s;i=Promise.all(By(t,l,a))}return i.then(()=>{t.notify("AnimationComplete",s)})}function Wy(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let i=0;i<a;i++)if(s[i]!==t[i])return!1;return!0}const DS=Qh.length;function Vy(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Vy(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<DS;a++){const i=Qh[a],l=t.props[i];(Vi(l)||l===!1)&&(s[i]=l)}return s}const LS=[...Gh].reverse(),RS=Gh.length;function MS(t){return s=>Promise.all(s.map(({animation:a,options:i})=>PS(t,a,i)))}function IS(t){let s=MS(t),a=Gg(),i=!0;const l=g=>(v,h)=>{const j=$i(t,h,g==="exit"?t.presenceContext?.custom:void 0);if(j){const{transition:w,transitionEnd:D,...S}=j;v={...v,...S,...D}}return v};function d(g){s=g(t)}function u(g){const{props:v}=t,h=Vy(t.parent)||{},j=[],w=new Set;let D={},S=1/0;for(let C=0;C<RS;C++){const A=LS[C],L=a[A],N=v[A]!==void 0?v[A]:h[A],I=Vi(N),W=A===g?L.isActive:null;W===!1&&(S=C);let B=N===h[A]&&N!==v[A]&&I;if(B&&i&&t.manuallyAnimateOnMount&&(B=!1),L.protectedKeys={...D},!L.isActive&&W===null||!N&&!L.prevProp||Ol(N)||typeof N=="boolean")continue;const Q=OS(L.prevProp,N);let F=Q||A===g&&L.isActive&&!B&&I||C>S&&I,te=!1;const ce=Array.isArray(N)?N:[N];let z=ce.reduce(l(A),{});W===!1&&(z={});const{prevResolvedValues:ee={}}=L,oe={...ee,...z},re=q=>{F=!0,w.has(q)&&(te=!0,w.delete(q)),L.needsAnimating[q]=!0;const Y=t.getValue(q);Y&&(Y.liveStyle=!1)};for(const q in oe){const Y=z[q],T=ee[q];if(D.hasOwnProperty(q))continue;let R=!1;Wu(Y)&&Wu(T)?R=!Wy(Y,T):R=Y!==T,R?Y!=null?re(q):w.add(q):Y!==void 0&&w.has(q)?re(q):L.protectedKeys[q]=!0}L.prevProp=N,L.prevResolvedValues=z,L.isActive&&(D={...D,...z}),i&&t.blockInitialAnimation&&(F=!1),F&&(!(B&&Q)||te)&&j.push(...ce.map(q=>({animation:q,options:{type:A}})))}if(w.size){const C={};if(typeof v.initial!="boolean"){const A=$i(t,Array.isArray(v.initial)?v.initial[0]:v.initial);A&&A.transition&&(C.transition=A.transition)}w.forEach(A=>{const L=t.getBaseTarget(A),N=t.getValue(A);N&&(N.liveStyle=!0),C[A]=L??null}),j.push({animation:C})}let b=!!j.length;return i&&(v.initial===!1||v.initial===v.animate)&&!t.manuallyAnimateOnMount&&(b=!1),i=!1,b?s(j):Promise.resolve()}function m(g,v){if(a[g].isActive===v)return Promise.resolve();t.variantChildren?.forEach(j=>j.animationState?.setActive(g,v)),a[g].isActive=v;const h=u(g);for(const j in a)a[j].protectedKeys={};return h}return{animateChanges:u,setActive:m,setAnimateFunction:d,getState:()=>a,reset:()=>{a=Gg(),i=!0}}}function OS(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!Wy(s,t):!1}function Lr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Gg(){return{animate:Lr(!0),whileInView:Lr(),whileHover:Lr(),whileTap:Lr(),whileDrag:Lr(),whileFocus:Lr(),exit:Lr()}}class fr{constructor(s){this.isMounted=!1,this.node=s}update(){}}class FS extends fr{constructor(s){super(s),s.animationState||(s.animationState=IS(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Ol(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let US=0;class BS extends fr{constructor(){super(...arguments),this.id=US++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===i)return;const l=this.node.animationState.setActive("exit",!s);a&&!s&&l.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const WS={animation:{Feature:FS},exit:{Feature:BS}};function zi(t,s,a,i={passive:!0}){return t.addEventListener(s,a,i),()=>t.removeEventListener(s,a)}function Ji(t){return{point:{x:t.pageX,y:t.pageY}}}const VS=t=>s=>qh(s)&&t(s,Ji(s));function Ri(t,s,a,i){return zi(t,s,VS(a),i)}function _y({top:t,left:s,right:a,bottom:i}){return{x:{min:s,max:a},y:{min:t,max:i}}}function _S({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function $S(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),i=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:i.y,right:i.x}}const $y=1e-4,zS=1-$y,HS=1+$y,zy=.01,qS=0-zy,YS=0+zy;function vs(t){return t.max-t.min}function GS(t,s,a){return Math.abs(t-s)<=a}function Qg(t,s,a,i=.5){t.origin=i,t.originPoint=Tt(s.min,s.max,t.origin),t.scale=vs(a)/vs(s),t.translate=Tt(a.min,a.max,t.origin)-t.originPoint,(t.scale>=zS&&t.scale<=HS||isNaN(t.scale))&&(t.scale=1),(t.translate>=qS&&t.translate<=YS||isNaN(t.translate))&&(t.translate=0)}function Mi(t,s,a,i){Qg(t.x,s.x,a.x,i?i.originX:void 0),Qg(t.y,s.y,a.y,i?i.originY:void 0)}function Kg(t,s,a){t.min=a.min+s.min,t.max=t.min+vs(s)}function QS(t,s,a){Kg(t.x,s.x,a.x),Kg(t.y,s.y,a.y)}function Jg(t,s,a){t.min=s.min-a.min,t.max=t.min+vs(s)}function Ii(t,s,a){Jg(t.x,s.x,a.x),Jg(t.y,s.y,a.y)}const Zg=()=>({translate:0,scale:1,origin:0,originPoint:0}),ka=()=>({x:Zg(),y:Zg()}),Xg=()=>({min:0,max:0}),Mt=()=>({x:Xg(),y:Xg()});function Ys(t){return[t("x"),t("y")]}function ou(t){return t===void 0||t===1}function $u({scale:t,scaleX:s,scaleY:a}){return!ou(t)||!ou(s)||!ou(a)}function Rr(t){return $u(t)||Hy(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Hy(t){return ev(t.x)||ev(t.y)}function ev(t){return t&&t!=="0%"}function Tl(t,s,a){const i=t-a,l=s*i;return a+l}function tv(t,s,a,i,l){return l!==void 0&&(t=Tl(t,l,i)),Tl(t,a,i)+s}function zu(t,s=0,a=1,i,l){t.min=tv(t.min,s,a,i,l),t.max=tv(t.max,s,a,i,l)}function qy(t,{x:s,y:a}){zu(t.x,s.translate,s.scale,s.originPoint),zu(t.y,a.translate,a.scale,a.originPoint)}const sv=.999999999999,nv=1.0000000000001;function KS(t,s,a,i=!1){const l=a.length;if(!l)return;s.x=s.y=1;let d,u;for(let m=0;m<l;m++){d=a[m],u=d.projectionDelta;const{visualElement:g}=d.options;g&&g.props.style&&g.props.style.display==="contents"||(i&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ca(t,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),u&&(s.x*=u.x.scale,s.y*=u.y.scale,qy(t,u)),i&&Rr(d.latestValues)&&Ca(t,d.latestValues))}s.x<nv&&s.x>sv&&(s.x=1),s.y<nv&&s.y>sv&&(s.y=1)}function Sa(t,s){t.min=t.min+s,t.max=t.max+s}function rv(t,s,a,i,l=.5){const d=Tt(t.min,t.max,l);zu(t,s,a,d,i)}function Ca(t,s){rv(t.x,s.x,s.scaleX,s.scale,s.originX),rv(t.y,s.y,s.scaleY,s.scale,s.originY)}function Yy(t,s){return _y($S(t.getBoundingClientRect(),s))}function JS(t,s,a){const i=Yy(t,a),{scroll:l}=s;return l&&(Sa(i.x,l.offset.x),Sa(i.y,l.offset.y)),i}const Gy=({current:t})=>t?t.ownerDocument.defaultView:null,av=(t,s)=>Math.abs(t-s);function ZS(t,s){const a=av(t.x,s.x),i=av(t.y,s.y);return Math.sqrt(a**2+i**2)}class Qy{constructor(s,a,{transformPagePoint:i,contextWindow:l=window,dragSnapToOrigin:d=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=cu(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,S=ZS(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!D&&!S)return;const{point:b}=w,{timestamp:C}=ts;this.history.push({...b,timestamp:C});const{onStart:A,onMove:L}=this.handlers;D||(A&&A(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,w)},this.handlePointerMove=(w,D)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=lu(D,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(w,D)=>{this.end();const{onEnd:S,onSessionEnd:b,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=cu(w.type==="pointercancel"?this.lastMoveEventInfo:lu(D,this.transformPagePoint),this.history);this.startEvent&&S&&S(w,A),b&&b(w,A)},!qh(s))return;this.dragSnapToOrigin=d,this.handlers=a,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=l||window;const m=Ji(s),g=lu(m,this.transformPagePoint),{point:v}=g,{timestamp:h}=ts;this.history=[{...v,timestamp:h}];const{onSessionStart:j}=a;j&&j(s,cu(g,this.history)),this.removeListeners=Gi(Ri(this.contextWindow,"pointermove",this.handlePointerMove),Ri(this.contextWindow,"pointerup",this.handlePointerUp),Ri(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),ur(this.updatePoint)}}function lu(t,s){return s?{point:s(t.point)}:t}function iv(t,s){return{x:t.x-s.x,y:t.y-s.y}}function cu({point:t},s){return{point:t,delta:iv(t,Ky(s)),offset:iv(t,XS(s)),velocity:eC(s,.1)}}function XS(t){return t[0]}function Ky(t){return t[t.length-1]}function eC(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,i=null;const l=Ky(t);for(;a>=0&&(i=t[a],!(l.timestamp-i.timestamp>vn(s)));)a--;if(!i)return{x:0,y:0};const d=xn(l.timestamp-i.timestamp);if(d===0)return{x:0,y:0};const u={x:(l.x-i.x)/d,y:(l.y-i.y)/d};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function tC(t,{min:s,max:a},i){return s!==void 0&&t<s?t=i?Tt(s,t,i.min):Math.max(t,s):a!==void 0&&t>a&&(t=i?Tt(a,t,i.max):Math.min(t,a)),t}function ov(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function sC(t,{top:s,left:a,bottom:i,right:l}){return{x:ov(t.x,a,l),y:ov(t.y,s,i)}}function lv(t,s){let a=s.min-t.min,i=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,i]=[i,a]),{min:a,max:i}}function nC(t,s){return{x:lv(t.x,s.x),y:lv(t.y,s.y)}}function rC(t,s){let a=.5;const i=vs(t),l=vs(s);return l>i?a=Ui(s.min,s.max-i,t.min):i>l&&(a=Ui(t.min,t.max-l,s.min)),In(0,1,a)}function aC(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const Hu=.35;function iC(t=Hu){return t===!1?t=0:t===!0&&(t=Hu),{x:cv(t,"left","right"),y:cv(t,"top","bottom")}}function cv(t,s,a){return{min:dv(t,s),max:dv(t,a)}}function dv(t,s){return typeof t=="number"?t:t[s]||0}const oC=new WeakMap;class lC{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:i}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const d=j=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Ji(j).point)},u=(j,w)=>{const{drag:D,dragPropagation:S,onDragStart:b}=this.getProps();if(D&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wk(D),!this.openDragLock))return;this.latestPointerEvent=j,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ys(A=>{let L=this.getAxisMotionValue(A).get()||0;if(yn.test(L)){const{projection:N}=this.visualElement;if(N&&N.layout){const I=N.layout.layoutBox[A];I&&(L=vs(I)*(parseFloat(L)/100))}}this.originPoint[A]=L}),b&&wt.postRender(()=>b(j,w)),Vu(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},m=(j,w)=>{this.latestPointerEvent=j,this.latestPanInfo=w;const{dragPropagation:D,dragDirectionLock:S,onDirectionLock:b,onDrag:C}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:A}=w;if(S&&this.currentDirection===null){this.currentDirection=cC(A),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",w.point,A),this.updateAxis("y",w.point,A),this.visualElement.render(),C&&C(j,w)},g=(j,w)=>{this.latestPointerEvent=j,this.latestPanInfo=w,this.stop(j,w),this.latestPointerEvent=null,this.latestPanInfo=null},v=()=>Ys(j=>this.getAnimationState(j)==="paused"&&this.getAxisMotionValue(j).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Qy(s,{onSessionStart:d,onStart:u,onMove:m,onSessionEnd:g,resumeAnimation:v},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:Gy(this.visualElement)})}stop(s,a){const i=s||this.latestPointerEvent,l=a||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!l||!i)return;const{velocity:u}=l;this.startAnimation(u);const{onDragEnd:m}=this.getProps();m&&wt.postRender(()=>m(i,l))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,i){const{drag:l}=this.getProps();if(!i||!ul(s,l,this.currentDirection))return;const d=this.getAxisMotionValue(s);let u=this.originPoint[s]+i[s];this.constraints&&this.constraints[s]&&(u=tC(u,this.constraints[s],this.elastic[s])),d.set(u)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;s&&Na(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=sC(i.layoutBox,s):this.constraints=!1,this.elastic=iC(a),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ys(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=aC(i.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!Na(s))return!1;const i=s.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const d=JS(i,l.root,this.visualElement.getTransformPagePoint());let u=nC(l.layout.layoutBox,d);if(a){const m=a(_S(u));this.hasMutatedConstraints=!!m,m&&(u=_y(m))}return u}startAnimation(s){const{drag:a,dragMomentum:i,dragElastic:l,dragTransition:d,dragSnapToOrigin:u,onDragTransitionEnd:m}=this.getProps(),g=this.constraints||{},v=Ys(h=>{if(!ul(h,a,this.currentDirection))return;let j=g&&g[h]||{};u&&(j={min:0,max:0});const w=l?200:1e6,D=l?40:1e7,S={type:"inertia",velocity:i?s[h]:0,bounceStiffness:w,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...d,...j};return this.startAxisValueAnimation(h,S)});return Promise.all(v).then(m)}startAxisValueAnimation(s,a){const i=this.getAxisMotionValue(s);return Vu(this.visualElement,s),i.start(sm(s,i,0,a,this.visualElement,!1))}stopAnimation(){Ys(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Ys(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,i=this.visualElement.getProps(),l=i[a];return l||this.visualElement.getValue(s,(i.initial?i.initial[s]:void 0)||0)}snapToCursor(s){Ys(a=>{const{drag:i}=this.getProps();if(!ul(a,i,this.currentDirection))return;const{projection:l}=this.visualElement,d=this.getAxisMotionValue(a);if(l&&l.layout){const{min:u,max:m}=l.layout.layoutBox[a];d.set(s[a]-Tt(u,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:i}=this.visualElement;if(!Na(a)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Ys(u=>{const m=this.getAxisMotionValue(u);if(m&&this.constraints!==!1){const g=m.get();l[u]=rC({min:g,max:g},this.constraints[u])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ys(u=>{if(!ul(u,s,null))return;const m=this.getAxisMotionValue(u),{min:g,max:v}=this.constraints[u];m.set(Tt(g,v,l[u]))})}addListeners(){if(!this.visualElement.current)return;oC.set(this.visualElement,this);const s=this.visualElement.current,a=Ri(s,"pointerdown",g=>{const{drag:v,dragListener:h=!0}=this.getProps();v&&h&&this.start(g)}),i=()=>{const{dragConstraints:g}=this.getProps();Na(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,d=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),wt.read(i);const u=zi(window,"resize",()=>this.scalePositionWithinConstraints()),m=l.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v})=>{this.isDragging&&v&&(Ys(h=>{const j=this.getAxisMotionValue(h);j&&(this.originPoint[h]+=g[h].translate,j.set(j.get()+g[h].translate))}),this.visualElement.render())});return()=>{u(),a(),d(),m&&m()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:d=!1,dragElastic:u=Hu,dragMomentum:m=!0}=s;return{...s,drag:a,dragDirectionLock:i,dragPropagation:l,dragConstraints:d,dragElastic:u,dragMomentum:m}}}function ul(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function cC(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class dC extends fr{constructor(s){super(s),this.removeGroupControls=Qs,this.removeListeners=Qs,this.controls=new lC(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qs}unmount(){this.removeGroupControls(),this.removeListeners()}}const uv=t=>(s,a)=>{t&&wt.postRender(()=>t(s,a))};class uC extends fr{constructor(){super(...arguments),this.removePointerDownListener=Qs}onPointerDown(s){this.session=new Qy(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Gy(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:uv(s),onStart:uv(a),onMove:i,onEnd:(d,u)=>{delete this.session,l&&wt.postRender(()=>l(d,u))}}}mount(){this.removePointerDownListener=Ri(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hv(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Ni={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const a=hv(t,s.target.x),i=hv(t,s.target.y);return`${a}% ${i}%`}},hC={correct:(t,{treeScale:s,projectionDelta:a})=>{const i=t,l=hr.parse(t);if(l.length>5)return i;const d=hr.createTransformer(t),u=typeof l[0]!="number"?1:0,m=a.x.scale*s.x,g=a.y.scale*s.y;l[0+u]/=m,l[1+u]/=g;const v=Tt(m,g,.5);return typeof l[2+u]=="number"&&(l[2+u]/=v),typeof l[3+u]=="number"&&(l[3+u]/=v),d(l)}};let mv=!1;class mC extends y.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:i,layoutId:l}=this.props,{projection:d}=s;Jk(pC),d&&(a.group&&a.group.add(d),i&&i.register&&l&&i.register(d),mv&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:i,drag:l,isPresent:d}=this.props,{projection:u}=i;return u&&(u.isPresent=d,mv=!0,l||s.layoutDependency!==a||a===void 0||s.isPresent!==d?u.willUpdate():this.safeToRemove(),s.isPresent!==d&&(d?u.promote():u.relegate()||wt.postRender(()=>{const m=u.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Hh.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:i}=this.props,{projection:l}=s;l&&(l.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Jy(t){const[s,a]=ky(),i=y.useContext(Nh);return e.jsx(mC,{...t,layoutGroup:i,switchLayoutGroup:y.useContext(Ey),isPresent:s,safeToRemove:a})}const pC={borderRadius:{...Ni,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ni,borderTopRightRadius:Ni,borderBottomLeftRadius:Ni,borderBottomRightRadius:Ni,boxShadow:hC};function fC(t,s,a){const i=hs(t)?t:Pa(t);return i.start(sm("",i,s,a)),i.animation}const gC=(t,s)=>t.depth-s.depth;class vC{constructor(){this.children=[],this.isDirty=!1}add(s){Ch(this.children,s),this.isDirty=!0}remove(s){Ah(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(gC),this.isDirty=!1,this.children.forEach(s)}}function xC(t,s){const a=Es.now(),i=({timestamp:l})=>{const d=l-a;d>=s&&(ur(i),t(d-s))};return wt.setup(i,!0),()=>ur(i)}const Zy=["TopLeft","TopRight","BottomLeft","BottomRight"],yC=Zy.length,pv=t=>typeof t=="string"?parseFloat(t):t,fv=t=>typeof t=="number"||qe.test(t);function jC(t,s,a,i,l,d){l?(t.opacity=Tt(0,a.opacity??1,wC(i)),t.opacityExit=Tt(s.opacity??1,0,bC(i))):d&&(t.opacity=Tt(s.opacity??1,a.opacity??1,i));for(let u=0;u<yC;u++){const m=`border${Zy[u]}Radius`;let g=gv(s,m),v=gv(a,m);if(g===void 0&&v===void 0)continue;g||(g=0),v||(v=0),g===0||v===0||fv(g)===fv(v)?(t[m]=Math.max(Tt(pv(g),pv(v),i),0),(yn.test(v)||yn.test(g))&&(t[m]+="%")):t[m]=v}(s.rotate||a.rotate)&&(t.rotate=Tt(s.rotate||0,a.rotate||0,i))}function gv(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const wC=Xy(0,.5,zx),bC=Xy(.5,.95,Qs);function Xy(t,s,a){return i=>i<t?0:i>s?1:a(Ui(t,s,i))}function vv(t,s){t.min=s.min,t.max=s.max}function qs(t,s){vv(t.x,s.x),vv(t.y,s.y)}function xv(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function yv(t,s,a,i,l){return t-=s,t=Tl(t,1/a,i),l!==void 0&&(t=Tl(t,1/l,i)),t}function NC(t,s=0,a=1,i=.5,l,d=t,u=t){if(yn.test(s)&&(s=parseFloat(s),s=Tt(u.min,u.max,s/100)-u.min),typeof s!="number")return;let m=Tt(d.min,d.max,i);t===d&&(m-=s),t.min=yv(t.min,s,a,m,l),t.max=yv(t.max,s,a,m,l)}function jv(t,s,[a,i,l],d,u){NC(t,s[a],s[i],s[l],s.scale,d,u)}const kC=["x","scaleX","originX"],SC=["y","scaleY","originY"];function wv(t,s,a,i){jv(t.x,s,kC,a?a.x:void 0,i?i.x:void 0),jv(t.y,s,SC,a?a.y:void 0,i?i.y:void 0)}function bv(t){return t.translate===0&&t.scale===1}function ej(t){return bv(t.x)&&bv(t.y)}function Nv(t,s){return t.min===s.min&&t.max===s.max}function CC(t,s){return Nv(t.x,s.x)&&Nv(t.y,s.y)}function kv(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function tj(t,s){return kv(t.x,s.x)&&kv(t.y,s.y)}function Sv(t){return vs(t.x)/vs(t.y)}function Cv(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class AC{constructor(){this.members=[]}add(s){Ch(this.members,s),s.scheduleRender()}remove(s){if(Ah(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(l=>s===l);if(a===0)return!1;let i;for(let l=a;l>=0;l--){const d=this.members[l];if(d.isPresent!==!1){i=d;break}}return i?(this.promote(i),!0):!1}promote(s,a){const i=this.lead;if(s!==i&&(this.prevLead=i,this.lead=s,s.show(),i)){i.instance&&i.scheduleRender(),s.scheduleRender(),s.resumeFrom=i,a&&(s.resumeFrom.preserveOpacity=!0),i.snapshot&&(s.snapshot=i.snapshot,s.snapshot.latestValues=i.animationValues||i.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:l}=s.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:i}=s;a.onExitComplete&&a.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function TC(t,s,a){let i="";const l=t.x.translate/s.x,d=t.y.translate/s.y,u=a?.z||0;if((l||d||u)&&(i=`translate3d(${l}px, ${d}px, ${u}px) `),(s.x!==1||s.y!==1)&&(i+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:v,rotate:h,rotateX:j,rotateY:w,skewX:D,skewY:S}=a;v&&(i=`perspective(${v}px) ${i}`),h&&(i+=`rotate(${h}deg) `),j&&(i+=`rotateX(${j}deg) `),w&&(i+=`rotateY(${w}deg) `),D&&(i+=`skewX(${D}deg) `),S&&(i+=`skewY(${S}deg) `)}const m=t.x.scale*s.x,g=t.y.scale*s.y;return(m!==1||g!==1)&&(i+=`scale(${m}, ${g})`),i||"none"}const du=["","X","Y","Z"],EC=1e3;let PC=0;function uu(t,s,a,i){const{latestValues:l}=s;l[t]&&(a[t]=l[t],s.setStaticValue(t,0),i&&(i[t]=0))}function sj(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=Uy(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:l,layoutId:d}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",wt,!(l||d))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&sj(i)}function nj({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(u={},m=s?.()){this.id=PC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RC),this.nodes.forEach(FC),this.nodes.forEach(UC),this.nodes.forEach(MC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new vC)}addEventListener(u,m){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Ph),this.eventHandlers.get(u).add(m)}notifyListeners(u,...m){const g=this.eventHandlers.get(u);g&&g.notify(...m)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=Ny(u)&&!Ak(u),this.instance=u;const{layoutId:m,layout:g,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||m)&&(this.isLayoutDirty=!0),t){let h,j=0;const w=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{j=window.innerWidth}),t(u,()=>{const D=window.innerWidth;D!==j&&(j=D,this.root.updateBlockedByResize=!0,h&&h(),h=xC(w,250),yl.hasAnimatedSinceResize&&(yl.hasAnimatedSinceResize=!1,this.nodes.forEach(Ev)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&v&&(m||g)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:j,hasRelativeLayoutChanged:w,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||v.getDefaultTransition()||$C,{onLayoutAnimationStart:b,onLayoutAnimationComplete:C}=v.getProps(),A=!this.targetLayout||!tj(this.targetLayout,D),L=!j&&w;if(this.options.layoutRoot||this.resumeFrom||L||j&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...$h(S,"layout"),onPlay:b,onComplete:C};(v.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,L)}else j||Ev(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ur(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BC),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const j=this.path[h];j.shouldResetTransform=!0,j.updateScroll("snapshot"),j.options.layoutRoot&&j.willUpdate(!1)}const{layoutId:m,layout:g}=this.options;if(m===void 0&&!g)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Av);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Tv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OC),this.nodes.forEach(DC),this.nodes.forEach(LC)):this.nodes.forEach(Tv),this.clearAllSnapshots();const m=Es.now();ts.delta=In(0,1e3/60,m-ts.timestamp),ts.timestamp=m,ts.isProcessing=!0,tu.update.process(ts),tu.preRender.process(ts),tu.render.process(ts),ts.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IC),this.sharedNodes.forEach(WC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vs(this.snapshot.measuredBox.x)&&!vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(m=!1),m&&this.instance){const g=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:g,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!l)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!ej(this.projectionDelta),g=this.getTransformTemplate(),v=g?g(this.latestValues,""):void 0,h=v!==this.prevTransformTemplateValue;u&&this.instance&&(m||Rr(this.latestValues)||h)&&(l(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const m=this.measurePageBox();let g=this.removeElementScroll(m);return u&&(g=this.removeTransform(g)),zC(g),{animationId:this.root.animationId,measuredBox:m,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Mt();const m=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HC))){const{scroll:v}=this.root;v&&(Sa(m.x,v.offset.x),Sa(m.y,v.offset.y))}return m}removeElementScroll(u){const m=Mt();if(qs(m,u),this.scroll?.wasRoot)return m;for(let g=0;g<this.path.length;g++){const v=this.path[g],{scroll:h,options:j}=v;v!==this.root&&h&&j.layoutScroll&&(h.wasRoot&&qs(m,u),Sa(m.x,h.offset.x),Sa(m.y,h.offset.y))}return m}applyTransform(u,m=!1){const g=Mt();qs(g,u);for(let v=0;v<this.path.length;v++){const h=this.path[v];!m&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ca(g,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rr(h.latestValues)&&Ca(g,h.latestValues)}return Rr(this.latestValues)&&Ca(g,this.latestValues),g}removeTransform(u){const m=Mt();qs(m,u);for(let g=0;g<this.path.length;g++){const v=this.path[g];if(!v.instance||!Rr(v.latestValues))continue;$u(v.latestValues)&&v.updateSnapshot();const h=Mt(),j=v.measurePageBox();qs(h,j),wv(m,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,h)}return Rr(this.latestValues)&&wv(m,this.latestValues),m}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ts.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==m;if(!(u||g&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:j}=this.options;if(!(!this.layout||!(h||j))){if(this.resolvedRelativeTargetAt=ts.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Ii(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),QS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qs(this.target,this.layout.layoutBox),qy(this.target,this.targetDelta)):qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Ii(this.relativeTargetOrigin,this.target,w.target),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$u(this.parent.latestValues)||Hy(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),m=!!this.resumingFrom||this!==u;let g=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(g=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===ts.timestamp&&(g=!1),g)return;const{layout:v,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||h))return;qs(this.layoutCorrected,this.layout.layoutBox);const j=this.treeScale.x,w=this.treeScale.y;KS(this.layoutCorrected,this.treeScale,this.path,m),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Mt());const{target:D}=u;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xv(this.prevProjectionDelta.x,this.projectionDelta.x),xv(this.prevProjectionDelta.y,this.projectionDelta.y)),Mi(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==j||this.treeScale.y!==w||!Cv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ka(),this.projectionDelta=ka(),this.projectionDeltaWithTransform=ka()}setAnimationOrigin(u,m=!1){const g=this.snapshot,v=g?g.latestValues:{},h={...this.latestValues},j=ka();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const w=Mt(),D=g?g.source:void 0,S=this.layout?this.layout.source:void 0,b=D!==S,C=this.getStack(),A=!C||C.members.length<=1,L=!!(b&&!A&&this.options.crossfade===!0&&!this.path.some(_C));this.animationProgress=0;let N;this.mixTargetDelta=I=>{const W=I/1e3;Pv(j.x,u.x,W),Pv(j.y,u.y,W),this.setTargetDelta(j),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ii(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VC(this.relativeTarget,this.relativeTargetOrigin,w,W),N&&CC(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Mt()),qs(N,this.relativeTarget)),b&&(this.animationValues=h,jC(h,v,this.latestValues,W,L,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ur(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{yl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pa(0)),this.currentAnimation=fC(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),u.onUpdate&&u.onUpdate(m)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(EC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:m,target:g,layout:v,latestValues:h}=u;if(!(!m||!g||!v)){if(this!==u&&this.layout&&v&&rj(this.options.animationType,this.layout.layoutBox,v.layoutBox)){g=this.target||Mt();const j=vs(this.layout.layoutBox.x);g.x.min=u.target.x.min,g.x.max=g.x.min+j;const w=vs(this.layout.layoutBox.y);g.y.min=u.target.y.min,g.y.max=g.y.min+w}qs(m,g),Ca(m,h),Mi(this.projectionDeltaWithTransform,this.layoutCorrected,m,h)}}registerSharedNode(u,m){this.sharedNodes.has(u)||this.sharedNodes.set(u,new AC),this.sharedNodes.get(u).add(m);const v=m.options.initialPromotionConfig;m.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(m):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:m,preserveFollowOpacity:g}={}){const v=this.getStack();v&&v.promote(this,g),u&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let m=!1;const{latestValues:g}=u;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(m=!0),!m)return;const v={};g.z&&uu("z",u,v,this.animationValues);for(let h=0;h<du.length;h++)uu(`rotate${du[h]}`,u,v,this.animationValues),uu(`skew${du[h]}`,u,v,this.animationValues);u.render();for(const h in v)u.setStaticValue(h,v[h]),this.animationValues&&(this.animationValues[h]=v[h]);u.scheduleRender()}applyProjectionStyles(u,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=xl(m?.pointerEvents)||"",u.transform=g?g(this.latestValues,""):"none";return}const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=xl(m?.pointerEvents)||""),this.hasProjected&&!Rr(this.latestValues)&&(u.transform=g?g({},""):"none",this.hasProjected=!1);return}u.visibility="";const h=v.animationValues||v.latestValues;this.applyTransformsToTarget();let j=TC(this.projectionDeltaWithTransform,this.treeScale,h);g&&(j=g(h,j)),u.transform=j;const{x:w,y:D}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${D.origin*100}% 0`,v.animationValues?u.opacity=v===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=v===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const S in _i){if(h[S]===void 0)continue;const{correct:b,applyTo:C,isCSSVariable:A}=_i[S],L=j==="none"?h[S]:b(h[S],v);if(C){const N=C.length;for(let I=0;I<N;I++)u[C[I]]=L}else A?this.options.visualElement.renderState.vars[S]=L:u[S]=L}this.options.layoutId&&(u.pointerEvents=v===this?xl(m?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(Av),this.root.sharedNodes.clear()}}}function DC(t){t.updateLayout()}function LC(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=t.layout,{animationType:l}=t.options,d=s.source!==t.layout.source;l==="size"?Ys(h=>{const j=d?s.measuredBox[h]:s.layoutBox[h],w=vs(j);j.min=a[h].min,j.max=j.min+w}):rj(l,s.layoutBox,a)&&Ys(h=>{const j=d?s.measuredBox[h]:s.layoutBox[h],w=vs(a[h]);j.max=j.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+w)});const u=ka();Mi(u,a,s.layoutBox);const m=ka();d?Mi(m,t.applyTransform(i,!0),s.measuredBox):Mi(m,a,s.layoutBox);const g=!ej(u);let v=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:j,layout:w}=h;if(j&&w){const D=Mt();Ii(D,s.layoutBox,j.layoutBox);const S=Mt();Ii(S,a,w.layoutBox),tj(D,S)||(v=!0),h.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=D,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:m,layoutDelta:u,hasLayoutChanged:g,hasRelativeLayoutChanged:v})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function RC(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MC(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IC(t){t.clearSnapshot()}function Av(t){t.clearMeasurements()}function Tv(t){t.isLayoutDirty=!1}function OC(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ev(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FC(t){t.resolveTargetDelta()}function UC(t){t.calcProjection()}function BC(t){t.resetSkewAndRotation()}function WC(t){t.removeLeadSnapshot()}function Pv(t,s,a){t.translate=Tt(s.translate,0,a),t.scale=Tt(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function Dv(t,s,a,i){t.min=Tt(s.min,a.min,i),t.max=Tt(s.max,a.max,i)}function VC(t,s,a,i){Dv(t.x,s.x,a.x,i),Dv(t.y,s.y,a.y,i)}function _C(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $C={duration:.45,ease:[.4,0,.1,1]},Lv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Rv=Lv("applewebkit/")&&!Lv("chrome/")?Math.round:Qs;function Mv(t){t.min=Rv(t.min),t.max=Rv(t.max)}function zC(t){Mv(t.x),Mv(t.y)}function rj(t,s,a){return t==="position"||t==="preserve-aspect"&&!GS(Sv(s),Sv(a),.2)}function HC(t){return t!==t.root&&t.scroll?.wasRoot}const qC=nj({attachResizeListener:(t,s)=>zi(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hu={current:void 0},aj=nj({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hu.current){const t=new qC({});t.mount(window),t.setOptions({layoutScroll:!0}),hu.current=t}return hu.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),YC={pan:{Feature:uC},drag:{Feature:dC,ProjectionNode:aj,MeasureLayout:Jy}};function Iv(t,s,a){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",a==="Start");const l="onHover"+a,d=i[l];d&&wt.postRender(()=>d(s,Ji(s)))}class GC extends fr{mount(){const{current:s}=this.node;s&&(this.unmount=bk(s,(a,i)=>(Iv(this.node,i,"Start"),l=>Iv(this.node,l,"End"))))}unmount(){}}class QC extends fr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gi(zi(this.node.current,"focus",()=>this.onFocus()),zi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ov(t,s,a){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",a==="Start");const l="onTap"+(a==="End"?"":a),d=i[l];d&&wt.postRender(()=>d(s,Ji(s)))}class KC extends fr{mount(){const{current:s}=this.node;s&&(this.unmount=Ck(s,(a,i)=>(Ov(this.node,i,"Start"),(l,{success:d})=>Ov(this.node,l,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qu=new WeakMap,mu=new WeakMap,JC=t=>{const s=qu.get(t.target);s&&s(t)},ZC=t=>{t.forEach(JC)};function XC({root:t,...s}){const a=t||document;mu.has(a)||mu.set(a,{});const i=mu.get(a),l=JSON.stringify(s);return i[l]||(i[l]=new IntersectionObserver(ZC,{root:t,...s})),i[l]}function e2(t,s,a){const i=XC(s);return qu.set(t,a),i.observe(t),()=>{qu.delete(t),i.unobserve(t)}}const t2={some:0,all:1};class s2 extends fr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:i,amount:l="some",once:d}=s,u={root:a?a.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:t2[l]},m=g=>{const{isIntersecting:v}=g;if(this.isInView===v||(this.isInView=v,d&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:h,onViewportLeave:j}=this.node.getProps(),w=v?h:j;w&&w(g)};return e2(this.node.current,u,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(n2(s,a))&&this.startObserver()}unmount(){}}function n2({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const r2={inView:{Feature:s2},tap:{Feature:KC},focus:{Feature:QC},hover:{Feature:GC}},a2={layout:{ProjectionNode:aj,MeasureLayout:Jy}},Yu={current:null},ij={current:!1};function i2(){if(ij.current=!0,!!Sh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Yu.current=t.matches;t.addEventListener("change",s),s()}else Yu.current=!1}const o2=new WeakMap;function l2(t,s,a){for(const i in s){const l=s[i],d=a[i];if(hs(l))t.addValue(i,l);else if(hs(d))t.addValue(i,Pa(l,{owner:t}));else if(d!==l)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=t.getStaticValue(i);t.addValue(i,Pa(u!==void 0?u:l,{owner:t}))}}for(const i in a)s[i]===void 0&&t.removeValue(i);return s}const Fv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class c2{scrapeMotionValuesFromProps(s,a,i){return{}}constructor({parent:s,props:a,presenceContext:i,reducedMotionConfig:l,blockInitialAnimation:d,visualState:u},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_h,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Es.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,wt.render(this.render,!1,!0))};const{latestValues:g,renderState:v}=u;this.latestValues=g,this.baseTarget={...g},this.initialValues=a.initial?{...g}:{},this.renderState=v,this.parent=s,this.props=a,this.presenceContext=i,this.depth=s?s.depth+1:0,this.reducedMotionConfig=l,this.options=m,this.blockInitialAnimation=!!d,this.isControllingVariants=Fl(a),this.isVariantNode=Ay(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:h,...j}=this.scrapeMotionValuesFromProps(a,{},this);for(const w in j){const D=j[w];g[w]!==void 0&&hs(D)&&D.set(g[w],!1)}}mount(s){this.current=s,o2.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,i)=>this.bindToMotionValue(i,a)),ij.current||i2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yu.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ur(this.notifyUpdate),ur(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const i=Fa.has(s);i&&this.onBindTransform&&this.onBindTransform();const l=a.on("change",m=>{this.latestValues[s]=m,this.props.onUpdate&&wt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),d=a.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{l(),d(),u&&u(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Da){const a=Da[s];if(!a)continue;const{isEnabled:i,Feature:l}=a;if(!this.features[s]&&l&&i(this.props)&&(this.features[s]=new l(this)),this.features[s]){const d=this.features[s];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let i=0;i<Fv.length;i++){const l=Fv[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const d="on"+l,u=s[d];u&&(this.propEventSubscriptions[l]=this.on(l,u))}this.prevMotionValues=l2(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const i=this.values.get(s);a!==i&&(i&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let i=this.values.get(s);return i===void 0&&a!==void 0&&(i=Pa(a===null?void 0:a,{owner:this}),this.addValue(s,i)),i}readValue(s,a){let i=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return i!=null&&(typeof i=="string"&&(Mx(i)||Ox(i))?i=parseFloat(i):!Ek(i)&&hr.test(a)&&(i=vy(s,a)),this.setBaseTarget(s,hs(i)?i.get():i)),hs(i)?i.get():i}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){const{initial:a}=this.props;let i;if(typeof a=="string"||typeof a=="object"){const d=em(this.props,a,this.presenceContext?.custom);d&&(i=d[s])}if(a&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,s);return l!==void 0&&!hs(l)?l:this.initialValues[s]!==void 0&&i===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new Ph),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}}class oj extends c2{constructor(){super(...arguments),this.KeyframeResolver=vk}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:i}){delete a[s],delete i[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;hs(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function lj(t,{style:s,vars:a},i,l){const d=t.style;let u;for(u in s)d[u]=s[u];l?.applyProjectionStyles(d,i);for(u in a)d.setProperty(u,a[u])}function d2(t){return window.getComputedStyle(t)}class u2 extends oj{constructor(){super(...arguments),this.type="html",this.renderInstance=lj}readValueFromInstance(s,a){if(Fa.has(a))return this.projection?.isProjecting?Mu(a):O1(s,a);{const i=d2(s),l=(Rh(a)?i.getPropertyValue(a):i[a])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(s,{transformPagePoint:a}){return Yy(s,a)}build(s,a,i){Jh(s,a,i.transformTemplate)}scrapeMotionValuesFromProps(s,a,i){return tm(s,a,i)}}const cj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h2(t,s,a,i){lj(t,s,void 0,i);for(const l in s.attrs)t.setAttribute(cj.has(l)?l:Kh(l),s.attrs[l])}class m2 extends oj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(Fa.has(a)){const i=gy(a);return i&&i.default||0}return a=cj.has(a)?a:Kh(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,i){return Fy(s,a,i)}build(s,a,i){Ry(s,a,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(s,a,i,l){h2(s,a,i,l)}mount(s){this.isSVGTag=Iy(s.tagName),super.mount(s)}}const p2=(t,s)=>Xh(t)?new m2(s):new u2(s,{allowProjection:t!==y.Fragment}),f2=pS({...WS,...r2,...YC,...a2},p2),Pe=Bk(f2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,i)=>i?i.toUpperCase():a.toLowerCase()),Uv=t=>{const s=v2(t);return s.charAt(0).toUpperCase()+s.slice(1)},dj=(...t)=>t.filter((s,a,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===a).join(" ").trim(),x2=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=y.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:u,...m},g)=>y.createElement("svg",{ref:g,...y2,width:s,height:s,stroke:t,strokeWidth:i?Number(a)*24/Number(s):a,className:dj("lucide",l),...!d&&!x2(m)&&{"aria-hidden":"true"},...m},[...u.map(([v,h])=>y.createElement(v,h)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(t,s)=>{const a=y.forwardRef(({className:i,...l},d)=>y.createElement(j2,{ref:d,iconNode:s,className:dj(`lucide-${g2(Uv(t))}`,`lucide-${t}`,i),...l}));return a.displayName=Uv(t),a};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],b2=Ft("bath",w2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gu=Ft("calendar",N2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ki=Ft("check",k2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jl=Ft("circle-check-big",S2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A2=Ft("circle-x",C2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qu=Ft("clock",T2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bv=Ft("download",E2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pu=Ft("file-text",P2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ja=Ft("house",D2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],R2=Ft("mail",L2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],I2=Ft("map-pin",M2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],hl=Ft("phone",O2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fu=Ft("plus",F2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gu=Ft("save",U2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],W2=Ft("shield",B2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],va=Ft("square-check-big",V2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],vu=Ft("square-pen",_2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Si=Ft("square",$2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xu=Ft("trash-2",z2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wv=Ft("user",H2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uj=Ft("users",q2);window.getNotifications=window.getNotifications||function(){return console.log("getNotifications called from iframe - using fallback"),Promise.resolve([])};const Y2=()=>{const t={...console};console=new Proxy(console,{get(s,a){return a==="warn"||a==="error"||a==="log"?(...i)=>{const l=i.join(" ");["mapContainer","Google Maps JavaScript API","Permissions policy violation","getNotifications","Invalid DOM property","componentWillMount","componentWillReceiveProps","ReactDOM.render is no longer supported","string ref","strict-mode-string-ref","mapTypeId_changed","styles_changed","Geolocation access has been blocked","InvalidValueError: in property address","Failed to decode downloaded font","OTS parsing error","Failed to load resource","Uncaught SyntaxError","InvalidAccessError: Failed to execute","applicationServerKey is not valid","Initialization error","Error while retrieving token","subscribe on PushManager","Error getting location","Geolocation has been disabled","worker init","worker messaging","res 65.246.84.74","got ip","timeDifference","firebase mounted","should call","called","Firebase apps","Initializing Firebase","Firebase initialized","Firebase Messaging initialized","req token","Requesting permission","firebase","loadAppData is resolved","Click is in the middle bottom","Click is in the bottom-right corner","google.maps.places.AutocompleteService","google.maps.places.PlacesService","google.maps.Marker","mapId is present","map styles are controlled via the cloud console","deprecated","not available to new customers","not scheduled to be discontinued","will continue to receive bug fixes","at least 12 months notice","migration guide","ReferenceError: getNotifications","Geolocation has been disabled in this document","The notification permission was not granted and blocked instead","messaging/permission-blocked","Geolocation has been disabled in this document by permissions policy","As of March 1st, 2025","As of February 21st, 2024","Basemap iframe loaded successfully"].some(u=>l.includes(u))||t[a](...i)}:s[a]}}),window.addEventListener("error",s=>{const a=s.message||"";if(["getNotifications","Geolocation","applicationServerKey","PushManager","mapContainer","InvalidValueError","ReferenceError","Failed to decode downloaded font","OTS parsing error","The notification permission was not granted and blocked instead","messaging/permission-blocked","Geolocation has been disabled in this document by permissions policy"].some(l=>a.includes(l)))return s.preventDefault(),!1}),console.log("Iframe error handling initialized")},Zi="timeBlocks",Xi="regions",El="availability",Ul=async()=>{const t=fe();return(await De(Ce(t,Zi))).docs.map(a=>({id:a.id,...a.data()}))},hj=t=>{const s=fe();return Yi(Ce(s,Zi),a=>t(a.docs.map(i=>({id:i.id,...i.data()}))))},G2=async(t,s)=>{const a=fe();return gn(Ae(a,Zi,t),s,{merge:!0})},mj=async t=>{const s=fe();return Yt(Ce(s,Zi),t)},Q2=async t=>{const s=fe();return us(Ae(s,Zi,t))},nm=async()=>{const t=fe();return(await De(Ce(t,Xi))).docs.map(a=>({id:a.id,...a.data()}))},K2=t=>{const s=fe();return Yi(Ce(s,Xi),a=>t(a.docs.map(i=>({id:i.id,...i.data()}))))},J2=async(t,s)=>{const a=fe();return gn(Ae(a,Xi,t),s,{merge:!0})},pj=async t=>{const s=fe();return Yt(Ce(s,Xi),t)},Z2=async t=>{const s=fe();return us(Ae(s,Xi,t))},Pl=async(t=null)=>{const s=fe();if(console.log("🔍 Fetching availability for region:",t),t){const a=Ze(Ce(s,El),ss(`regions.${t}`,"!=",null)),i=await De(a),l={};return i.docs.forEach(d=>{const u=d.data();console.log("📅 Availability data for date:",d.id,u),u&&u.regions&&u.regions[t]&&(l[d.id]=u.regions[t])}),console.log("✅ Final availability for region:",t,l),l}else{const a=await De(Ce(s,El)),i={};return a.docs.forEach(l=>{const d=l.data();console.log("📅 Availability data for date:",l.id,d),d&&(i[l.id]=d)}),console.log("✅ Final availability for all regions:",i),i}},X2=(t,s)=>{const a=fe();return console.log("🔄 Setting up real-time listener for region:",t),Yi(Ce(a,El),i=>{const l={};i.docs.forEach(d=>{const u=d.data();console.log("📅 Real-time availability data for date:",d.id,u),u&&u.regions&&u.regions[t]&&(l[d.id]=u.regions[t])}),console.log("✅ Real-time availability for region:",t,l),s(l)})},fj=async(t,s)=>{const a=fe();return gn(Ae(a,El,t),s,{merge:!0})},gj={MIDA:["Anne Arundel MD","Baltimore City MD","Baltimore County MD","Berkeley WV","Calvert MD","Carroll MD","Cecil MD","Charles MD","District of Columbia","Fredrick MD","Harford MD","Howard MD","Jefferson WV","Montgomery MD","Morgan WV","Prince George's MD","St Mary's MD","Washington MD"],ESDE:["Caroline MD","Dorchester MD","Kent DE","Kent MD","Queen Anne's MD","Somerset MD","Sussex DE","Talbot MD","Wicomico MD","Worcester MD"],NOVA:["Alexandria VA","Arlington VA","Caroline VA","Charles City VA","Chesterfield VA","Clarke VA","Colonial Heights VA","Culpeper VA","Essex VA","Fairfax VA","Falls Church VA","Fauquier VA","Fredrick VA","Fredricksburg VA","Gloucester VA","Goochland VA","Hanover VA","Henrico VA","Hopewell VA","King and Queen VA","King George VA","King William VA","Lancaster VA","Loudon VA","Louisa VA","Madison VA","Manassas Park VA","Manassas VA","Mathews VA","Middlesex VA","New Kent VA","Northumberland VA","Orange VA","Petersburg VA","Powhatan VA","Prince William VA","Rappahanncock VA","Richmond City VA","Richmond County VA","Spotsylvania VA","Stafford VA","Warren VA","Westmoreland VA","Winchester VA"],NENG:["Barnstable MA","Bristol MA","Bristol RI","Essex MA","Kent RI","Middlessex MA","Newport RI","Norfolk MA","Plymouth MA","Providence RI","Suffolk MA","Suffolk MA","Washington RI","Worcester MA"],NHME:["Bellknap NH","Carroll NH","Cheshire NH","Cumberland ME","Grafton NH","Hillsborough NH","Merrimack NH","Rockingham NH","Strafford NH","Sullivan NH","York ME"],CTWM:["Berkshire MA","Fairfield CT","Franklin MA","Hampden MA","Hampshire MA","Hartford CT","Litchfield CT","Middlessex CT","New Haven CT","New London CT","Tolland CT","Windham CT"],SOPA:["Adams PA","Berks PA","Carbon PA","Chester PA","Columbia PA","Cumberland PA","Dauphin PA","Juniata PA","Lancaster PA","Lebanon PA","Lehigh PA","Montour PA","Northumberland PA","Perry PA","Schuylkill PA","Snyder PA","Union PA","York PA"],WCFL:["Citrus FL","DeSoto FL","Hardee FL","Hernando FL","Hillsborough FL","Manatee FL","Pasco FL","Pinellas FL","Polk FL","Sarasota FL"]};function eA(t){if(!t)return null;console.log("🔍 Checking address:",t);const s=t.toUpperCase(),a=["MD","VA","WV","DE","MA","RI","NH","ME","CT","PA","FL"];let i=null,l=null;for(const d of a)if(new RegExp(`\\b${d}\\b`).test(s)){i=d,console.log("📍 Found state:",i);break}if(!i)return console.log("⚠️ No state found in address"),null;for(const[d,u]of Object.entries(gj)){for(const m of u){const[g,v]=m.split(" ");if(v===i){const h=g.toUpperCase();if(s.includes(h)){l=g,console.log("📍 Found county:",l,"in region:",d);break}}}if(l)break}if(!l&&i==="MD"&&(s.includes("SEVERN")||s.includes("21144")?(l="Anne Arundel",console.log("📍 Determined Anne Arundel County from city/zip")):s.includes("HANOVER")||s.includes("21076")?(l="Howard",console.log("📍 Determined Howard County from city/zip")):s.includes("BALTIMORE")?(l="Baltimore",console.log("📍 Determined Baltimore County from city")):s.includes("ROCKVILLE")||s.includes("BETHESDA")||s.includes("SILVER SPRING")?(l="Montgomery",console.log("📍 Determined Montgomery County from city")):(s.includes("LAUREL")||s.includes("20708"))&&(l="Prince George's",console.log("📍 Determined Prince George's County from city/zip"))),l&&i){const d=`${l} ${i}`;return console.log("✅ Final result:",d),d}return console.log("❌ Could not determine county/state"),null}function tA(t){if(!t)return console.log("❌ No address provided"),{inServiceArea:!1,region:null,county:null};const s=eA(t);if(!s)return console.log("❌ Could not extract county/state from address"),{inServiceArea:!1,region:null,county:null};for(const[a,i]of Object.entries(gj))if(i.includes(s))return console.log("✅ Address is in service area:",a,s),{inServiceArea:!0,region:a,county:s};return console.log("❌ Address not in any service area:",s),{inServiceArea:!1,region:null,county:null}}function vj(t){var s,a,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=vj(t[s]))&&(i&&(i+=" "),i+=a)}else for(a in t)t[a]&&(i&&(i+=" "),i+=a);return i}function Bl(){for(var t,s,a=0,i="",l=arguments.length;a<l;a++)(t=arguments[a])&&(s=vj(t))&&(i&&(i+=" "),i+=s);return i}const sA=(t,s,a,i)=>{if(a==="length"||a==="prototype"||a==="arguments"||a==="caller")return;const l=Object.getOwnPropertyDescriptor(t,a),d=Object.getOwnPropertyDescriptor(s,a);!nA(l,d)&&i||Object.defineProperty(t,a,d)},nA=function(t,s){return t===void 0||t.configurable||t.writable===s.writable&&t.enumerable===s.enumerable&&t.configurable===s.configurable&&(t.writable||t.value===s.value)},rA=(t,s)=>{const a=Object.getPrototypeOf(s);a!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,a)},aA=(t,s)=>`/* Wrapped ${t}*/
${s}`,iA=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),oA=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),lA=(t,s,a)=>{const i=a===""?"":`with ${a.trim()}() `,l=aA.bind(null,i,s.toString());Object.defineProperty(l,"name",oA);const{writable:d,enumerable:u,configurable:m}=iA;Object.defineProperty(t,"toString",{value:l,writable:d,enumerable:u,configurable:m})};function cA(t,s,{ignoreNonConfigurable:a=!1}={}){const{name:i}=t;for(const l of Reflect.ownKeys(s))sA(t,s,l,a);return rA(t,s),lA(t,s,i),t}const dA=new WeakMap,Vv=new WeakMap;function xj(t,{cacheKey:s,cache:a=new Map,maxAge:i}={}){if(i===0)return t;if(typeof i=="number"){if(i>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const l=function(...d){const u=s?s(d):d[0],m=a.get(u);if(m)return m.data;const g=t.apply(this,d),v=typeof i=="function"?i(...d):i;if(a.set(u,{data:g,maxAge:v?Date.now()+v:Number.POSITIVE_INFINITY}),v&&v>0&&v!==Number.POSITIVE_INFINITY){const h=setTimeout(()=>{a.delete(u)},v);h.unref?.();const j=Vv.get(t)??new Set;j.add(h),Vv.set(t,j)}return g};return cA(l,t,{ignoreNonConfigurable:!0}),dA.set(l,a),l}function uA(t){return typeof t=="string"}function hA(t,s,a){return a.indexOf(t)===s}function mA(t){return t.toLowerCase()===t}function _v(t){return t.indexOf(",")===-1?t:t.split(",")}function Ku(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var s=t.split(".")[0],a=s===void 0?"":s;return Ku(a)}if(t.indexOf("@")!==-1){var i=t.split("@")[0],a=i===void 0?"":i;return Ku(a)}if(t.indexOf("-")===-1||!mA(t))return t;var l=t.split("-"),d=l[0],u=l[1],m=u===void 0?"":u;return"".concat(d,"-").concat(m.toUpperCase())}function pA(t){var s=t===void 0?{}:t,a=s.useFallbackLocale,i=a===void 0?!0:a,l=s.fallbackLocale,d=l===void 0?"en-US":l,u=[];if(typeof navigator<"u"){for(var m=navigator.languages||[],g=[],v=0,h=m;v<h.length;v++){var j=h[v];g=g.concat(_v(j))}var w=navigator.language,D=w&&_v(w);u=u.concat(g,D)}return i&&u.push(d),u.filter(uA).map(Ku).filter(hA)}var fA=xj(pA,{cacheKey:JSON.stringify});function gA(t){return fA(t)[0]||null}var yj=xj(gA,{cacheKey:JSON.stringify});function Un(t,s,a){return function(l,d=a){const u=t(l)+d;return s(u)}}function eo(t){return function(a){return new Date(t(a).getTime()-1)}}function to(t,s){return function(i){return[t(i),s(i)]}}function bt(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const s=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(s))return s;throw new Error(`Failed to get year from date: ${t}.`)}function gr(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function Wl(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function Ua(t){const s=bt(t),a=s+(-s+1)%100,i=new Date;return i.setFullYear(a,0,1),i.setHours(0,0,0,0),i}const vA=Un(bt,Ua,-100),jj=Un(bt,Ua,100),rm=eo(jj),xA=Un(bt,rm,-100),wj=to(Ua,rm);function vr(t){const s=bt(t),a=s+(-s+1)%10,i=new Date;return i.setFullYear(a,0,1),i.setHours(0,0,0,0),i}const bj=Un(bt,vr,-10),am=Un(bt,vr,10),Vl=eo(am),Nj=Un(bt,Vl,-10),kj=to(vr,Vl);function Ba(t){const s=bt(t),a=new Date;return a.setFullYear(s,0,1),a.setHours(0,0,0,0),a}const Sj=Un(bt,Ba,-1),im=Un(bt,Ba,1),_l=eo(im),Cj=Un(bt,_l,-1),yA=to(Ba,_l);function om(t,s){return function(i,l=s){const d=bt(i),u=gr(i)+l,m=new Date;return m.setFullYear(d,u,1),m.setHours(0,0,0,0),t(m)}}function _r(t){const s=bt(t),a=gr(t),i=new Date;return i.setFullYear(s,a,1),i.setHours(0,0,0,0),i}const Aj=om(_r,-1),lm=om(_r,1),so=eo(lm),Tj=om(so,-1),jA=to(_r,so);function wA(t,s){return function(i,l=s){const d=bt(i),u=gr(i),m=Wl(i)+l,g=new Date;return g.setFullYear(d,u,m),g.setHours(0,0,0,0),t(g)}}function no(t){const s=bt(t),a=gr(t),i=Wl(t),l=new Date;return l.setFullYear(s,a,i),l.setHours(0,0,0,0),l}const bA=wA(no,1),cm=eo(bA),NA=to(no,cm);function Ej(t){return Wl(so(t))}var ns={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},kA={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},dm=[0,1,2,3,4,5,6],yu=new Map;function SA(t){return function(a,i){var l=a||yj();yu.has(l)||yu.set(l,new Map);var d=yu.get(l);return d.has(t)||d.set(t,new Intl.DateTimeFormat(l||void 0,t).format),d.get(t)(i)}}function CA(t){var s=new Date(t);return new Date(s.setHours(12))}function $r(t){return function(s,a){return SA(t)(s,CA(a))}}var AA={day:"numeric"},TA={day:"numeric",month:"long",year:"numeric"},EA={month:"long"},PA={month:"long",year:"numeric"},DA={weekday:"short"},LA={weekday:"long"},RA={year:"numeric"},MA=$r(AA),IA=$r(TA),OA=$r(EA),Pj=$r(PA),FA=$r(DA),UA=$r(LA),$l=$r(RA),BA=dm[0],WA=dm[5],$v=dm[6];function Hi(t,s){s===void 0&&(s=ns.ISO_8601);var a=t.getDay();switch(s){case ns.ISO_8601:return(a+6)%7;case ns.ISLAMIC:return(a+1)%7;case ns.HEBREW:case ns.GREGORY:return a;default:throw new Error("Unsupported calendar type.")}}function VA(t){var s=Ua(t);return bt(s)}function _A(t){var s=vr(t);return bt(s)}function Ju(t,s){s===void 0&&(s=ns.ISO_8601);var a=bt(t),i=gr(t),l=t.getDate()-Hi(t,s);return new Date(a,i,l)}function $A(t,s){s===void 0&&(s=ns.ISO_8601);var a=s===ns.GREGORY?ns.GREGORY:ns.ISO_8601,i=Ju(t,s),l=bt(t)+1,d,u;do d=new Date(l,0,a===ns.ISO_8601?4:1),u=Ju(d,s),l-=1;while(t<u);return Math.round((i.getTime()-u.getTime())/(864e5*7))+1}function Br(t,s){switch(t){case"century":return Ua(s);case"decade":return vr(s);case"year":return Ba(s);case"month":return _r(s);case"day":return no(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function zA(t,s){switch(t){case"century":return vA(s);case"decade":return bj(s);case"year":return Sj(s);case"month":return Aj(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function Dj(t,s){switch(t){case"century":return jj(s);case"decade":return am(s);case"year":return im(s);case"month":return lm(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function HA(t,s){switch(t){case"decade":return bj(s,-100);case"year":return Sj(s,-10);case"month":return Aj(s,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function qA(t,s){switch(t){case"decade":return am(s,100);case"year":return im(s,10);case"month":return lm(s,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function Lj(t,s){switch(t){case"century":return rm(s);case"decade":return Vl(s);case"year":return _l(s);case"month":return so(s);case"day":return cm(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function YA(t,s){switch(t){case"century":return xA(s);case"decade":return Nj(s);case"year":return Cj(s);case"month":return Tj(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function GA(t,s){switch(t){case"decade":return Nj(s,-100);case"year":return Cj(s,-10);case"month":return Tj(s,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function zv(t,s){switch(t){case"century":return wj(s);case"decade":return kj(s);case"year":return yA(s);case"month":return jA(s);case"day":return NA(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function QA(t,s,a){var i=[s,a].sort(function(l,d){return l.getTime()-d.getTime()});return[Br(t,i[0]),Lj(t,i[1])]}function Rj(t,s,a){return a.map(function(i){return(s||$l)(t,i)}).join(" – ")}function KA(t,s,a){return Rj(t,s,wj(a))}function Mj(t,s,a){return Rj(t,s,kj(a))}function JA(t){return t.getDay()===new Date().getDay()}function Ij(t,s){s===void 0&&(s=ns.ISO_8601);var a=t.getDay();switch(s){case ns.ISLAMIC:case ns.HEBREW:return a===WA||a===$v;case ns.ISO_8601:case ns.GREGORY:return a===$v||a===BA;default:throw new Error("Unsupported calendar type.")}}var fn="react-calendar__navigation";function ZA(t){var s=t.activeStartDate,a=t.drillUp,i=t.formatMonthYear,l=i===void 0?Pj:i,d=t.formatYear,u=d===void 0?$l:d,m=t.locale,g=t.maxDate,v=t.minDate,h=t.navigationAriaLabel,j=h===void 0?"":h,w=t.navigationAriaLive,D=t.navigationLabel,S=t.next2AriaLabel,b=S===void 0?"":S,C=t.next2Label,A=C===void 0?"»":C,L=t.nextAriaLabel,N=L===void 0?"":L,I=t.nextLabel,W=I===void 0?"›":I,B=t.prev2AriaLabel,Q=B===void 0?"":B,F=t.prev2Label,te=F===void 0?"«":F,ce=t.prevAriaLabel,z=ce===void 0?"":ce,ee=t.prevLabel,oe=ee===void 0?"‹":ee,re=t.setActiveStartDate,le=t.showDoubleView,O=t.view,q=t.views,Y=q.indexOf(O)>0,T=O!=="century",R=zA(O,s),E=T?HA(O,s):void 0,f=Dj(O,s),P=T?qA(O,s):void 0,M=function(){if(R.getFullYear()<0)return!0;var ge=YA(O,s);return v&&v>=ge}(),K=T&&function(){if(E.getFullYear()<0)return!0;var ge=GA(O,s);return v&&v>=ge}(),ue=g&&g<f,be=T&&g&&g<P;function pe(){re(R,"prev")}function X(){re(E,"prev2")}function _(){re(f,"next")}function V(){re(P,"next2")}function J(ge){var We=function(){switch(O){case"century":return KA(m,u,ge);case"decade":return Mj(m,u,ge);case"year":return u(m,ge);case"month":return l(m,ge);default:throw new Error("Invalid view: ".concat(O,"."))}}();return D?D({date:ge,label:We,locale:m||yj()||void 0,view:O}):We}function ae(){var ge="".concat(fn,"__label");return e.jsxs("button",{"aria-label":j,"aria-live":w,className:ge,disabled:!Y,onClick:a,style:{flexGrow:1},type:"button",children:[e.jsx("span",{className:"".concat(ge,"__labelText ").concat(ge,"__labelText--from"),children:J(s)}),le?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"".concat(ge,"__divider"),children:" – "}),e.jsx("span",{className:"".concat(ge,"__labelText ").concat(ge,"__labelText--to"),children:J(f)})]}):null]})}return e.jsxs("div",{className:fn,children:[te!==null&&T?e.jsx("button",{"aria-label":Q,className:"".concat(fn,"__arrow ").concat(fn,"__prev2-button"),disabled:K,onClick:X,type:"button",children:te}):null,oe!==null&&e.jsx("button",{"aria-label":z,className:"".concat(fn,"__arrow ").concat(fn,"__prev-button"),disabled:M,onClick:pe,type:"button",children:oe}),ae(),W!==null&&e.jsx("button",{"aria-label":N,className:"".concat(fn,"__arrow ").concat(fn,"__next-button"),disabled:ue,onClick:_,type:"button",children:W}),A!==null&&T?e.jsx("button",{"aria-label":b,className:"".concat(fn,"__arrow ").concat(fn,"__next2-button"),disabled:be,onClick:V,type:"button",children:A}):null]})}var Aa=function(){return Aa=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Aa.apply(this,arguments)},XA=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a};function Hv(t){return"".concat(t,"%")}function um(t){var s=t.children,a=t.className,i=t.count,l=t.direction,d=t.offset,u=t.style,m=t.wrap,g=XA(t,["children","className","count","direction","offset","style","wrap"]);return e.jsx("div",Aa({className:a,style:Aa({display:"flex",flexDirection:l,flexWrap:m?"wrap":"nowrap"},u)},g,{children:y.Children.map(s,function(v,h){var j=d&&h===0?Hv(100*d/i):null;return y.cloneElement(v,Aa(Aa({},v.props),{style:{flexBasis:Hv(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:j,marginInlineStart:j,marginInlineEnd:0}}))})}))}function eT(t,s,a){return s&&s>t?s:a&&a<t?a:t}function qi(t,s){return s[0]<=t&&s[1]>=t}function tT(t,s){return t[0]<=s[0]&&t[1]>=s[1]}function Oj(t,s){return qi(t[0],s)||qi(t[1],s)}function qv(t,s,a){var i=Oj(s,t),l=[];if(i){l.push(a);var d=qi(t[0],s),u=qi(t[1],s);d&&l.push("".concat(a,"Start")),u&&l.push("".concat(a,"End")),d&&u&&l.push("".concat(a,"BothEnds"))}return l}function sT(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function nT(t){if(!t)throw new Error("args is required");var s=t.value,a=t.date,i=t.hover,l="react-calendar__tile",d=[l];if(!a)return d;var u=new Date,m=function(){if(Array.isArray(a))return a;var D=t.dateType;if(!D)throw new Error("dateType is required when date is not an array of two dates");return zv(D,a)}();if(qi(u,m)&&d.push("".concat(l,"--now")),!s||!sT(s))return d;var g=function(){if(Array.isArray(s))return s;var D=t.valueType;if(!D)throw new Error("valueType is required when value is not an array of two dates");return zv(D,s)}();tT(g,m)?d.push("".concat(l,"--active")):Oj(g,m)&&d.push("".concat(l,"--hasActive"));var v=qv(g,m,"".concat(l,"--range"));d.push.apply(d,v);var h=Array.isArray(s)?s:[s];if(i&&h.length===1){var j=i>g[0]?[g[0],i]:[i,g[0]],w=qv(j,m,"".concat(l,"--hover"));d.push.apply(d,w)}return d}function zl(t){for(var s=t.className,a=t.count,i=a===void 0?3:a,l=t.dateTransform,d=t.dateType,u=t.end,m=t.hover,g=t.offset,v=t.renderTile,h=t.start,j=t.step,w=j===void 0?1:j,D=t.value,S=t.valueType,b=[],C=h;C<=u;C+=w){var A=l(C);b.push(v({classes:nT({date:A,dateType:d,hover:m,value:D,valueType:S}),date:A}))}return e.jsx(um,{className:s,count:i,offset:g,wrap:!0,children:b})}function Hl(t){var s=t.activeStartDate,a=t.children,i=t.classes,l=t.date,d=t.formatAbbr,u=t.locale,m=t.maxDate,g=t.maxDateTransform,v=t.minDate,h=t.minDateTransform,j=t.onClick,w=t.onMouseOver,D=t.style,S=t.tileClassName,b=t.tileContent,C=t.tileDisabled,A=t.view,L=y.useMemo(function(){var I={activeStartDate:s,date:l,view:A};return typeof S=="function"?S(I):S},[s,l,S,A]),N=y.useMemo(function(){var I={activeStartDate:s,date:l,view:A};return typeof b=="function"?b(I):b},[s,l,b,A]);return e.jsxs("button",{className:Bl(i,L),disabled:v&&h(v)>l||m&&g(m)<l||C?.({activeStartDate:s,date:l,view:A}),onClick:j?function(I){return j(l,I)}:void 0,onFocus:w?function(){return w(l)}:void 0,onMouseOver:w?function(){return w(l)}:void 0,style:D,type:"button",children:[d?e.jsx("abbr",{"aria-label":d(u,l),children:a}):a,N]})}var Zu=function(){return Zu=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Zu.apply(this,arguments)},rT=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a},Yv="react-calendar__century-view__decades__decade";function aT(t){var s=t.classes,a=s===void 0?[]:s,i=t.currentCentury,l=t.formatYear,d=l===void 0?$l:l,u=rT(t,["classes","currentCentury","formatYear"]),m=u.date,g=u.locale,v=[];return a&&v.push.apply(v,a),v.push(Yv),Ua(m).getFullYear()!==i&&v.push("".concat(Yv,"--neighboringCentury")),e.jsx(Hl,Zu({},u,{classes:v,maxDateTransform:Vl,minDateTransform:vr,view:"century",children:Mj(g,d,m)}))}var Xu=function(){return Xu=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Xu.apply(this,arguments)},Gv=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a};function iT(t){var s=t.activeStartDate,a=t.hover,i=t.showNeighboringCentury,l=t.value,d=t.valueType,u=Gv(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),m=VA(s),g=m+(i?119:99);return e.jsx(zl,{className:"react-calendar__century-view__decades",dateTransform:vr,dateType:"decade",end:g,hover:a,renderTile:function(v){var h=v.date,j=Gv(v,["date"]);return e.jsx(aT,Xu({},u,j,{activeStartDate:s,currentCentury:m,date:h}),h.getTime())},start:m,step:10,value:l,valueType:d})}var eh=function(){return eh=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},eh.apply(this,arguments)};function oT(t){function s(){return e.jsx(iT,eh({},t))}return e.jsx("div",{className:"react-calendar__century-view",children:s()})}var th=function(){return th=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},th.apply(this,arguments)},lT=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a},Qv="react-calendar__decade-view__years__year";function cT(t){var s=t.classes,a=s===void 0?[]:s,i=t.currentDecade,l=t.formatYear,d=l===void 0?$l:l,u=lT(t,["classes","currentDecade","formatYear"]),m=u.date,g=u.locale,v=[];return a&&v.push.apply(v,a),v.push(Qv),vr(m).getFullYear()!==i&&v.push("".concat(Qv,"--neighboringDecade")),e.jsx(Hl,th({},u,{classes:v,maxDateTransform:_l,minDateTransform:Ba,view:"decade",children:d(g,m)}))}var sh=function(){return sh=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},sh.apply(this,arguments)},Kv=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a};function dT(t){var s=t.activeStartDate,a=t.hover,i=t.showNeighboringDecade,l=t.value,d=t.valueType,u=Kv(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),m=_A(s),g=m+(i?11:9);return e.jsx(zl,{className:"react-calendar__decade-view__years",dateTransform:Ba,dateType:"year",end:g,hover:a,renderTile:function(v){var h=v.date,j=Kv(v,["date"]);return e.jsx(cT,sh({},u,j,{activeStartDate:s,currentDecade:m,date:h}),h.getTime())},start:m,value:l,valueType:d})}var nh=function(){return nh=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},nh.apply(this,arguments)};function uT(t){function s(){return e.jsx(dT,nh({},t))}return e.jsx("div",{className:"react-calendar__decade-view",children:s()})}var rh=function(){return rh=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},rh.apply(this,arguments)},hT=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a},Jv=function(t,s,a){if(a||arguments.length===2)for(var i=0,l=s.length,d;i<l;i++)(d||!(i in s))&&(d||(d=Array.prototype.slice.call(s,0,i)),d[i]=s[i]);return t.concat(d||Array.prototype.slice.call(s))},mT="react-calendar__year-view__months__month";function pT(t){var s=t.classes,a=s===void 0?[]:s,i=t.formatMonth,l=i===void 0?OA:i,d=t.formatMonthYear,u=d===void 0?Pj:d,m=hT(t,["classes","formatMonth","formatMonthYear"]),g=m.date,v=m.locale;return e.jsx(Hl,rh({},m,{classes:Jv(Jv([],a,!0),[mT],!1),formatAbbr:u,maxDateTransform:so,minDateTransform:_r,view:"year",children:l(v,g)}))}var ah=function(){return ah=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},ah.apply(this,arguments)},Zv=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a};function fT(t){var s=t.activeStartDate,a=t.hover,i=t.value,l=t.valueType,d=Zv(t,["activeStartDate","hover","value","valueType"]),u=0,m=11,g=bt(s);return e.jsx(zl,{className:"react-calendar__year-view__months",dateTransform:function(v){var h=new Date;return h.setFullYear(g,v,1),_r(h)},dateType:"month",end:m,hover:a,renderTile:function(v){var h=v.date,j=Zv(v,["date"]);return e.jsx(pT,ah({},d,j,{activeStartDate:s,date:h}),h.getTime())},start:u,value:i,valueType:l})}var ih=function(){return ih=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},ih.apply(this,arguments)};function gT(t){function s(){return e.jsx(fT,ih({},t))}return e.jsx("div",{className:"react-calendar__year-view",children:s()})}var oh=function(){return oh=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},oh.apply(this,arguments)},vT=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a},ju="react-calendar__month-view__days__day";function xT(t){var s=t.calendarType,a=t.classes,i=a===void 0?[]:a,l=t.currentMonthIndex,d=t.formatDay,u=d===void 0?MA:d,m=t.formatLongDate,g=m===void 0?IA:m,v=vT(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=v.date,j=v.locale,w=[];return i&&w.push.apply(w,i),w.push(ju),Ij(h,s)&&w.push("".concat(ju,"--weekend")),h.getMonth()!==l&&w.push("".concat(ju,"--neighboringMonth")),e.jsx(Hl,oh({},v,{classes:w,formatAbbr:g,maxDateTransform:cm,minDateTransform:no,view:"month",children:u(j,h)}))}var lh=function(){return lh=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},lh.apply(this,arguments)},Xv=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a};function yT(t){var s=t.activeStartDate,a=t.calendarType,i=t.hover,l=t.showFixedNumberOfWeeks,d=t.showNeighboringMonth,u=t.value,m=t.valueType,g=Xv(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),v=bt(s),h=gr(s),j=l||d,w=Hi(s,a),D=j?0:w,S=(j?-w:0)+1,b=function(){if(l)return S+6*7-1;var C=Ej(s);if(d){var A=new Date;A.setFullYear(v,h,C),A.setHours(0,0,0,0);var L=7-Hi(A,a)-1;return C+L}return C}();return e.jsx(zl,{className:"react-calendar__month-view__days",count:7,dateTransform:function(C){var A=new Date;return A.setFullYear(v,h,C),no(A)},dateType:"day",hover:i,end:b,renderTile:function(C){var A=C.date,L=Xv(C,["date"]);return e.jsx(xT,lh({},g,L,{activeStartDate:s,calendarType:a,currentMonthIndex:h,date:A}),A.getTime())},offset:D,start:S,value:u,valueType:m})}var Fj="react-calendar__month-view__weekdays",wu="".concat(Fj,"__weekday");function jT(t){for(var s=t.calendarType,a=t.formatShortWeekday,i=a===void 0?FA:a,l=t.formatWeekday,d=l===void 0?UA:l,u=t.locale,m=t.onMouseLeave,g=new Date,v=_r(g),h=bt(v),j=gr(v),w=[],D=1;D<=7;D+=1){var S=new Date(h,j,D-Hi(v,s)),b=d(u,S);w.push(e.jsx("div",{className:Bl(wu,JA(S)&&"".concat(wu,"--current"),Ij(S,s)&&"".concat(wu,"--weekend")),children:e.jsx("abbr",{"aria-label":b,title:b,children:i(u,S).replace(".","")})},D))}return e.jsx(um,{className:Fj,count:7,onFocus:m,onMouseOver:m,children:w})}var Dl=function(){return Dl=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Dl.apply(this,arguments)},ex=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a},tx="react-calendar__tile";function wT(t){var s=t.onClickWeekNumber,a=t.weekNumber,i=e.jsx("span",{children:a});if(s){var l=t.date,d=t.onClickWeekNumber,u=t.weekNumber,m=ex(t,["date","onClickWeekNumber","weekNumber"]);return e.jsx("button",Dl({},m,{className:tx,onClick:function(g){return d(u,l,g)},type:"button",children:i}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var m=ex(t,["date","onClickWeekNumber","weekNumber"]);return e.jsx("div",Dl({},m,{className:tx,children:i}))}}function bT(t){var s=t.activeStartDate,a=t.calendarType,i=t.onClickWeekNumber,l=t.onMouseLeave,d=t.showFixedNumberOfWeeks,u=function(){if(d)return 6;var v=Ej(s),h=Hi(s,a),j=v-(7-h);return 1+Math.ceil(j/7)}(),m=function(){for(var v=bt(s),h=gr(s),j=Wl(s),w=[],D=0;D<u;D+=1)w.push(Ju(new Date(v,h,j+D*7),a));return w}(),g=m.map(function(v){return $A(v,a)});return e.jsx(um,{className:"react-calendar__month-view__weekNumbers",count:u,direction:"column",onFocus:l,onMouseOver:l,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:g.map(function(v,h){var j=m[h];if(!j)throw new Error("date is not defined");return e.jsx(wT,{date:j,onClickWeekNumber:i,weekNumber:v},v)})})}var ch=function(){return ch=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},ch.apply(this,arguments)},NT=function(t,s){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a};function kT(t){if(t)for(var s=0,a=Object.entries(kA);s<a.length;s++){var i=a[s],l=i[0],d=i[1];if(d.includes(t))return l}return ns.ISO_8601}function ST(t){var s=t.activeStartDate,a=t.locale,i=t.onMouseLeave,l=t.showFixedNumberOfWeeks,d=t.calendarType,u=d===void 0?kT(a):d,m=t.formatShortWeekday,g=t.formatWeekday,v=t.onClickWeekNumber,h=t.showWeekNumbers,j=NT(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function w(){return e.jsx(jT,{calendarType:u,formatShortWeekday:m,formatWeekday:g,locale:a,onMouseLeave:i})}function D(){return h?e.jsx(bT,{activeStartDate:s,calendarType:u,onClickWeekNumber:v,onMouseLeave:i,showFixedNumberOfWeeks:l}):null}function S(){return e.jsx(yT,ch({calendarType:u},j))}var b="react-calendar__month-view";return e.jsx("div",{className:Bl(b,h?"".concat(b,"--weekNumbers"):""),children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[D(),e.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[w(),S()]})]})})}var Ta=function(){return Ta=Object.assign||function(t){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Ta.apply(this,arguments)},ml="react-calendar",wl=["century","decade","year","month"],CT=["decade","year","month","day"],hm=new Date;hm.setFullYear(1,0,1);hm.setHours(0,0,0,0);var AT=new Date(864e13);function Ti(t){return t instanceof Date?t:new Date(t)}function Uj(t,s){return wl.slice(wl.indexOf(t),wl.indexOf(s)+1)}function TT(t,s,a){var i=Uj(s,a);return i.indexOf(t)!==-1}function mm(t,s,a){return t&&TT(t,s,a)?t:a}function Bj(t){var s=wl.indexOf(t);return CT[s]}function ET(t,s){var a=Array.isArray(t)?t[s]:t;if(!a)return null;var i=Ti(a);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(t));return i}function Wj(t,s){var a=t.value,i=t.minDate,l=t.maxDate,d=t.maxDetail,u=ET(a,s);if(!u)return null;var m=Bj(d),g=function(){switch(s){case 0:return Br(m,u);case 1:return Lj(m,u);default:throw new Error("Invalid index value: ".concat(s))}}();return eT(g,i,l)}var pm=function(t){return Wj(t,0)},Vj=function(t){return Wj(t,1)},PT=function(t){return[pm,Vj].map(function(s){return s(t)})};function _j(t){var s=t.maxDate,a=t.maxDetail,i=t.minDate,l=t.minDetail,d=t.value,u=t.view,m=mm(u,l,a),g=pm({value:d,minDate:i,maxDate:s,maxDetail:a})||new Date;return Br(m,g)}function DT(t){var s=t.activeStartDate,a=t.defaultActiveStartDate,i=t.defaultValue,l=t.defaultView,d=t.maxDate,u=t.maxDetail,m=t.minDate,g=t.minDetail,v=t.value,h=t.view,j=mm(h,g,u),w=s||a;return w?Br(j,w):_j({maxDate:d,maxDetail:u,minDate:m,minDetail:g,value:v||i,view:h||l})}function bu(t){return t&&(!Array.isArray(t)||t.length===1)}function pl(t,s){return t instanceof Date&&s instanceof Date&&t.getTime()===s.getTime()}var LT=y.forwardRef(function(s,a){var i=s.activeStartDate,l=s.allowPartialRange,d=s.calendarType,u=s.className,m=s.defaultActiveStartDate,g=s.defaultValue,v=s.defaultView,h=s.formatDay,j=s.formatLongDate,w=s.formatMonth,D=s.formatMonthYear,S=s.formatShortWeekday,b=s.formatWeekday,C=s.formatYear,A=s.goToRangeStartOnSelect,L=A===void 0?!0:A,N=s.inputRef,I=s.locale,W=s.maxDate,B=W===void 0?AT:W,Q=s.maxDetail,F=Q===void 0?"month":Q,te=s.minDate,ce=te===void 0?hm:te,z=s.minDetail,ee=z===void 0?"century":z,oe=s.navigationAriaLabel,re=s.navigationAriaLive,le=s.navigationLabel,O=s.next2AriaLabel,q=s.next2Label,Y=s.nextAriaLabel,T=s.nextLabel,R=s.onActiveStartDateChange,E=s.onChange,f=s.onClickDay,P=s.onClickDecade,M=s.onClickMonth,K=s.onClickWeekNumber,ue=s.onClickYear,be=s.onDrillDown,pe=s.onDrillUp,X=s.onViewChange,_=s.prev2AriaLabel,V=s.prev2Label,J=s.prevAriaLabel,ae=s.prevLabel,ge=s.returnValue,We=ge===void 0?"start":ge,ze=s.selectRange,Ge=s.showDoubleView,vt=s.showFixedNumberOfWeeks,Ve=s.showNavigation,Ke=Ve===void 0?!0:Ve,et=s.showNeighboringCentury,rs=s.showNeighboringDecade,He=s.showNeighboringMonth,xt=He===void 0?!0:He,Jt=s.showWeekNumbers,Ps=s.tileClassName,Us=s.tileContent,Dt=s.tileDisabled,Lt=s.value,Vt=s.view,xs=y.useState(m),bn=xs[0],Ds=xs[1],Ks=y.useState(null),me=Ks[0],ve=Ks[1],Me=y.useState(Array.isArray(g)?g.map(function(Je){return Je!==null?Ti(Je):null}):g!=null?Ti(g):null),je=Me[0],Qe=Me[1],it=y.useState(v),Ie=it[0],Te=it[1],Ee=i||bn||DT({activeStartDate:i,defaultActiveStartDate:m,defaultValue:g,defaultView:v,maxDate:B,maxDetail:F,minDate:ce,minDetail:ee,value:Lt,view:Vt}),Xe=function(){var Je=function(){return ze&&bu(je)?je:Lt!==void 0?Lt:je}();return Je?Array.isArray(Je)?Je.map(function(ht){return ht!==null?Ti(ht):null}):Je!==null?Ti(Je):null:null}(),nt=Bj(F),Re=mm(Vt||Ie,ee,F),ct=Uj(ee,F),Zt=ze?me:null,ys=ct.indexOf(Re)<ct.length-1,Nt=ct.indexOf(Re)>0,Js=y.useCallback(function(Je){var ht=function(){switch(We){case"start":return pm;case"end":return Vj;case"range":return PT;default:throw new Error("Invalid returnValue.")}}();return ht({maxDate:B,maxDetail:F,minDate:ce,value:Je})},[B,F,ce,We]),Zs=y.useCallback(function(Je,ht){Ds(Je);var yt={action:ht,activeStartDate:Je,value:Xe,view:Re};R&&!pl(Ee,Je)&&R(yt)},[Ee,R,Xe,Re]),ln=y.useCallback(function(Je,ht){var yt=function(){switch(Re){case"century":return P;case"decade":return ue;case"year":return M;case"month":return f;default:throw new Error("Invalid view: ".concat(Re,"."))}}();yt&&yt(Je,ht)},[f,P,M,ue,Re]),js=y.useCallback(function(Je,ht){if(ys){ln(Je,ht);var yt=ct[ct.indexOf(Re)+1];if(!yt)throw new Error("Attempted to drill down from the lowest view.");Ds(Je),Te(yt);var as={action:"drillDown",activeStartDate:Je,value:Xe,view:yt};R&&!pl(Ee,Je)&&R(as),X&&Re!==yt&&X(as),be&&be(as)}},[Ee,ys,R,ln,be,X,Xe,Re,ct]),cn=y.useCallback(function(){if(Nt){var Je=ct[ct.indexOf(Re)-1];if(!Je)throw new Error("Attempted to drill up from the highest view.");var ht=Br(Je,Ee);Ds(ht),Te(Je);var yt={action:"drillUp",activeStartDate:ht,value:Xe,view:Je};R&&!pl(Ee,ht)&&R(yt),X&&Re!==Je&&X(yt),pe&&pe(yt)}},[Ee,Nt,R,pe,X,Xe,Re,ct]),Nn=y.useCallback(function(Je,ht){var yt=Xe;ln(Je,ht);var as=ze&&!bu(yt),is;if(ze)if(as)is=Br(nt,Je);else{if(!yt)throw new Error("previousValue is required");if(Array.isArray(yt))throw new Error("previousValue must not be an array");is=QA(nt,yt,Je)}else is=Js(Je);var kn=!ze||as||L?_j({maxDate:B,maxDetail:F,minDate:ce,minDetail:ee,value:is,view:Re}):null;ht.persist(),Ds(kn),Qe(is);var zr={action:"onChange",activeStartDate:kn,value:is,view:Re};if(R&&!pl(Ee,kn)&&R(zr),E)if(ze){var Va=bu(is);if(!Va)E(is||null,ht);else if(l){if(Array.isArray(is))throw new Error("value must not be an array");E([is||null,null],ht)}}else E(is||null,ht)},[Ee,l,Js,L,B,F,ce,ee,R,E,ln,ze,Xe,nt,Re]);function Bn(Je){ve(Je)}function dn(){ve(null)}y.useImperativeHandle(a,function(){return{activeStartDate:Ee,drillDown:js,drillUp:cn,onChange:Nn,setActiveStartDate:Zs,value:Xe,view:Re}},[Ee,js,cn,Nn,Zs,Xe,Re]);function xr(Je){var ht=Je?Dj(Re,Ee):Br(Re,Ee),yt=ys?js:Nn,as={activeStartDate:ht,hover:Zt,locale:I,maxDate:B,minDate:ce,onClick:yt,onMouseOver:ze?Bn:void 0,tileClassName:Ps,tileContent:Us,tileDisabled:Dt,value:Xe,valueType:nt};switch(Re){case"century":return e.jsx(oT,Ta({formatYear:C,showNeighboringCentury:et},as));case"decade":return e.jsx(uT,Ta({formatYear:C,showNeighboringDecade:rs},as));case"year":return e.jsx(gT,Ta({formatMonth:w,formatMonthYear:D},as));case"month":return e.jsx(ST,Ta({calendarType:d,formatDay:h,formatLongDate:j,formatShortWeekday:S,formatWeekday:b,onClickWeekNumber:K,onMouseLeave:ze?dn:void 0,showFixedNumberOfWeeks:typeof vt<"u"?vt:Ge,showNeighboringMonth:xt,showWeekNumbers:Jt},as));default:throw new Error("Invalid view: ".concat(Re,"."))}}function Wa(){return Ke?e.jsx(ZA,{activeStartDate:Ee,drillUp:cn,formatMonthYear:D,formatYear:C,locale:I,maxDate:B,minDate:ce,navigationAriaLabel:oe,navigationAriaLive:re,navigationLabel:le,next2AriaLabel:O,next2Label:q,nextAriaLabel:Y,nextLabel:T,prev2AriaLabel:_,prev2Label:V,prevAriaLabel:J,prevLabel:ae,setActiveStartDate:Zs,showDoubleView:Ge,view:Re,views:ct}):null}var Bs=Array.isArray(Xe)?Xe:[Xe];return e.jsxs("div",{className:Bl(ml,ze&&Bs.length===1&&"".concat(ml,"--selectRange"),Ge&&"".concat(ml,"--doubleView"),u),ref:N,children:[Wa(),e.jsxs("div",{className:"".concat(ml,"__viewContainer"),onBlur:ze?dn:void 0,onMouseLeave:ze?dn:void 0,children:[xr(),Ge?xr(!0):null]})]})});function RT(t){const s=[{label:"Owner Name",keys:["Owner Name","Nome"]},{label:"Owner Address",keys:["Owner Address","Mailing Address"]},{label:"Owner City",keys:["Owner Cty","Owner City"]},{label:"Owner State",keys:["Owner sate","Owner State","State"]},{label:"Owner Zip Code",keys:["OwnerZip Code","Owner Zip","Zip"]},{label:"County Name",keys:["CountyNeme","County Name"]},{label:"County FIPS",keys:["County Fips Code","County FIPS"]},{label:"Acres",keys:["Acres"]},{label:"APN",keys:["Ap","APN"]}],a={};for(const i of s)for(const l of i.keys){const d=new RegExp(`${l}s*[:=]?s*([^
]+)`,"i"),u=t.match(d);if(u){a[i.label]=u[1].trim();break}}return a}const MT=({onNavigate:t})=>{const[s,a]=y.useState(0),[i,l]=y.useState(""),[d,u]=y.useState(""),[m,g]=y.useState(""),[v,h]=y.useState({issues:"",currentSetup:"",replacementType:"",plumbingSetup:"",materialsPurchased:"",roofType:"",activeLeaks:"",roofReplaced:""}),[j,w]=y.useState({date:"",time:"",confirmed:!1}),[D,S]=y.useState(!1),[b,C]=y.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",secondaryName:"",secondaryPhone:"",secondaryEmail:"",relationshipToPrimary:"",showSecondary:!1}),[A,L]=y.useState({projectChecklist:[],bathChecklist:[],roofChecklist:[],commitmentChecklist:[]}),[N,I]=y.useState({address:"",results:null,loading:!1,error:null,suggestions:[],showSuggestions:!1,selectedCoordinates:null,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}}),[W,B]=y.useState(!0),[Q,F]=y.useState(!1),[te,ce]=y.useState(!1),[z,ee]=y.useState(null),[oe,re]=y.useState(!1),[le,O]=y.useState(""),[q,Y]=y.useState(!1),[T,R]=y.useState({}),[E,f]=y.useState(!1),[P,M]=y.useState(!1),[K,ue]=y.useState({type:"success",title:"",message:"",details:""}),[be,pe]=y.useState(!1),[X,_]=y.useState(""),[V,J]=y.useState(!1),ae=[{key:"basemapVerified",label:"Screenshot Uploaded & Owner Verified"},{key:"addressVerified",label:"Address Matches Screenshot"},{key:"propertyTypeConfirmed",label:"Property Type Matches Screenshot"},{key:"characteristicsNoted",label:"Key Characteristics Noted"},{key:"accessInfoCollected",label:"Access/Entry Info from Screenshot"}],ge=te&&N.checklist.addressVerified&&N.checklist.propertyTypeConfirmed&&N.checklist.characteristicsNoted&&N.checklist.accessInfoCollected;y.useEffect(()=>{s===0&&!i&&!d&&!m&&Ie()},[]),y.useEffect(()=>{if(s===0&&!i&&!d&&!m)return;const $={currentStep:s,callType:i,projectType:d,userName:m,customerInfo:b,projectDetails:v,appointment:j,appointmentConfirmed:D,checklistItems:A,propertySearch:N,propertySearchCollapsed:W,basemapVisited:Q,basemapVerified:te,basemapScreenshot:z,parsedPropertyInfo:T,timestamp:new Date().toISOString()};localStorage.setItem("scheduleScriptData",JSON.stringify($)),console.log("💾 Auto-saved progress:",{currentStep:s,callType:i,projectType:d}),J(!0),_("Progress saved automatically"),pe(!0),setTimeout(()=>pe(!1),2e3)},[s,i,d,m,b,v,j,D,A,N,W,Q,te,z,T]),y.useEffect(()=>{const $=localStorage.getItem("scheduleScriptData");if($)try{const G=JSON.parse($),he=new Date(G.timestamp);(new Date-he)/(1e3*60*60)<24?(console.log("🔄 Loading saved progress from localStorage"),J(!0),G.currentStep!==void 0&&a(G.currentStep),G.callType&&l(G.callType),G.projectType&&u(G.projectType),G.userName&&g(G.userName),G.customerInfo&&C(G.customerInfo),G.projectDetails&&h(G.projectDetails),G.appointment&&w(G.appointment),G.appointmentConfirmed!==void 0&&S(G.appointmentConfirmed),G.checklistItems&&L(G.checklistItems),G.propertySearch&&I(G.propertySearch),G.propertySearchCollapsed!==void 0&&B(G.propertySearchCollapsed),G.basemapVisited!==void 0&&F(G.basemapVisited),G.basemapVerified!==void 0&&ce(G.basemapVerified),G.basemapScreenshot&&ee(G.basemapScreenshot),G.parsedPropertyInfo&&R(G.parsedPropertyInfo),console.log("✅ Progress restored:",{currentStep:G.currentStep,callType:G.callType,projectType:G.projectType}),_(`Welcome back! Continuing from step ${G.currentStep+1}`),pe(!0),setTimeout(()=>pe(!1),3e3)):(console.log("⏰ Saved data is too old, starting fresh"),localStorage.removeItem("scheduleScriptData"),J(!1))}catch(G){console.error("❌ Error loading saved progress:",G),localStorage.removeItem("scheduleScriptData"),J(!1)}else J(!1)},[]),y.useEffect(()=>{z?(Y(!0),O(""),RN.recognize(z,"eng",{logger:$=>{}}).then(({data:{text:$}})=>{O($),Y(!1)}).catch(()=>{O("Could not extract text from image."),Y(!1)})):(O(""),Y(!1))},[z]),y.useEffect(()=>{if(le&&!q){const $=RT(le);R($)}else R({})},[le,q]),y.useEffect(()=>{z&&le&&!q?(ce(!0),I($=>({...$,checklist:{addressVerified:!0,propertyTypeConfirmed:!0,characteristicsNoted:!0,accessInfoCollected:!0}}))):z||(ce(!1),I($=>({...$,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}})))},[z,le,q]);const We=[{id:"greeting",title:"Call Greeting",type:"greeting"},{id:"propertySearch",title:"Property Search",type:"property"},{id:"projectType",title:"Project Type Selection",type:"selection"},{id:"projectChecklist",title:"Project Checklist",type:"checklist"},{id:"projectQuestions",title:"Project-Specific Questions",type:"questions"},{id:"valueProposition",title:"Value of the Visit",type:"presentation"},{id:"customerInfo",title:"Customer Information",type:"customer"},{id:"commitment",title:"Commitment & Scheduling",type:"scheduling"},{id:"buttonUp",title:"Button Up & Final Steps",type:"final"},{id:"confirmation",title:"Appointment Confirmation",type:"confirmation"}],ze={incoming:{script:"It's a great day here at Long, my name is _______ How may I HELP you?",tone:"Friendly, consultative, not pushy. Make it feel like a conversation, not a sales pitch."},outgoing:{script:"Hello Mr. / Mrs..... My name is (agent name) with Long Home on a recorded line following up on your inquiry for your (project type). Is this the best phone number to reach you on in case we are disconnected? Perfect!",tone:"Professional, warm, and consultative approach."}},Ge=$=>{const G=$==="bath"?"bath/shower":$==="roof"?"roof":"product",he=$==="bath"?"bath/shower":$==="roof"?"roof":"product";return[`How old is your ${he}?`,`What issues are you currently having with your ${he}?`,`What would you like to have done? (Ask ${G} related questions)`]},vt=["Do you currently have a tub or shower in the space?","What are you looking to replace it with? (Tub to Tub/Shower to Shower or Conversion)","Is plumbing set up for a bath or shower to connect to? ***","Have you purchased any materials yet? (Must get a no. All purchases & installations must be from Long)?"],Ve=["Are you looking for asphalt shingles, metal, or flat roof?","Do you currently have any active leaks or missing shingles?","Have you ever replaced the roof since owning your home?"],Ke=["First and Last Name of all parties involved","Address","Appointment Date and Time","Verify Product"],[et,rs]=y.useState({weekdays:[],weekends:[]}),[He,xt]=y.useState(!0),Jt=y.useRef(null);y.useEffect(()=>{const $=G=>{Jt.current&&!Jt.current.contains(G.target)&&I(he=>({...he,showSuggestions:!1}))};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[]);const Ps=($,G)=>{L(he=>({...he,[$]:he[$].includes(G)?he[$].filter(Se=>Se!==G):[...he[$],G]}))},Us=($,G)=>{w(he=>({...he,[$]:G}))},Dt=($,G)=>{C(he=>({...he,[$]:G}))},Lt=()=>{s>0&&a(s-1)},Vt=()=>{s<We.length-1&&a(s+1)},xs=async()=>{if(N.address){I($=>({...$,loading:!0,error:null}));try{let $,G;if(N.selectedCoordinates)[G,$]=N.selectedCoordinates;else{const _t=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(N.address)}`)).json();if(!_t.length)throw new Error("Address not found");[G,$]=_t[0].lon,_t[0].lat}console.log("Using coordinates:",{lat:$,lon:G});const he=void 0;if(!he||he==="your_regrid_api_key_here")throw new Error("Regrid API key not configured. Please add your Regrid API key to .env.local");console.log("Regrid API key available:",!!he);let Se,de;Se=`https://app.regrid.com/api/v2/parcels/point?lat=${$}&lon=${G}&token=${he}&radius=500`,console.log("Trying Regrid v2 API with lat/lon (500m radius):",Se);let Ne=await fetch(Se);if(console.log("Regrid v2 response status:",Ne.status),console.log("Regrid v2 response headers:",Ne.headers),Ne.ok){if(de=await Ne.json(),console.log("Regrid v2 API response:",de),console.log("Regrid v2 API response structure:",{hasParcels:!!de.parcels,parcelsType:typeof de.parcels,hasFeatures:de.parcels&&!!de.parcels.features,featuresLength:de.parcels&&de.parcels.features?de.parcels.features.length:0,firstFeature:de.parcels&&de.parcels.features?de.parcels.features[0]:null}),de.parcels&&de.parcels.features&&de.parcels.features.length>0)if(Se=`https://app.regrid.com/api/v2/parcels/address?query=${encodeURIComponent(N.address)}&token=${he}`,console.log("Trying Regrid v2 API with address:",Se),Ne=await fetch(Se),console.log("Regrid v2 address response status:",Ne.status),Ne.ok)de=await Ne.json(),console.log("Regrid v2 address API response:",de);else if(Se=`https://app.regrid.com/api/v2/parcels/point?lat=${$}&lon=${G}&radius=500`,console.log("Trying Regrid v2 API with Authorization header:",Se),Ne=await fetch(Se,{headers:{Authorization:`Bearer ${he}`,"Content-Type":"application/json"}}),console.log("Regrid v2 Auth header response status:",Ne.status),Ne.ok)de=await Ne.json(),console.log("Regrid v2 Auth header API response:",de);else throw new Error(`All Regrid v2 API attempts failed. Last error: ${Ne.status} ${Ne.statusText}`);else if(console.log("No parcels found with lat/lon search, trying address search..."),Se=`https://app.regrid.com/api/v2/parcels/address?query=${encodeURIComponent(N.address)}&token=${he}`,console.log("Trying Regrid v2 API with address:",Se),Ne=await fetch(Se),console.log("Regrid v2 address response status:",Ne.status),Ne.ok&&(de=await Ne.json(),console.log("Regrid v2 address API response:",de),!(de.parcels&&de.parcels.features&&de.parcels.features.length>0))){console.log("No parcels found with address search, trying simplified address...");const ws=N.address.split(",")[0];Se=`https://app.regrid.com/api/v2/parcels/address?query=${encodeURIComponent(ws)}&token=${he}`,console.log("Trying Regrid v2 API with simplified address:",Se),Ne=await fetch(Se),console.log("Regrid v2 simplified address response status:",Ne.status),Ne.ok&&(de=await Ne.json(),console.log("Regrid v2 simplified address API response:",de))}}let tt=null;if(de.parcels&&de.parcels.features&&de.parcels.features.length>0?(tt=de.parcels.features[0],console.log("Found parcel in features array")):de.parcels&&Array.isArray(de.parcels)&&de.parcels.length>0?(tt=de.parcels[0],console.log("Found parcel in parcels array")):de.features&&Array.isArray(de.features)&&de.features.length>0?(tt=de.features[0],console.log("Found parcel in root features array")):(console.log("No parcel found in any expected structure"),console.log("Available keys in response:",Object.keys(de))),!tt){console.log("No parcel found in API response, using mock data"),console.log("Full API response for debugging:",JSON.stringify(de,null,2));const dt={address:N.address,usedesc:"Single Family Home",yearbuilt:"1985",recrdareano:"2400",deeded_acres:"0.25",numrooms:"3",numunits:"1",garage_spaces:"2",taxamt:"3200",saledate:"2018",parval:"450000",owner:"John & Jane Doe"};I(_t=>({..._t,results:{address:dt.address,propertyType:dt.usedesc,yearBuilt:dt.yearbuilt,squareFootage:dt.recrdareano,lotSize:`${dt.deeded_acres} acres`,bedrooms:dt.numrooms,bathrooms:"2.5",garageSpaces:dt.garage_spaces,propertyTax:`$${dt.taxamt}/year`,lastSold:dt.saledate,estimatedValue:`$${dt.parval}`,ownerName:dt.owner},loading:!1,checklist:{..._t.checklist,addressVerified:!0}}));return}const ps=tt.properties||{},lt=ps.fields||{};console.log("Parcel properties:",ps),console.log("Parcel fields:",lt),I(dt=>({...dt,results:{address:ps.headline||N.address,propertyType:lt.usedesc||"N/A",yearBuilt:lt.yearbuilt||"N/A",squareFootage:lt.recrdareano?`${lt.recrdareano} sq ft`:"N/A",lotSize:lt.deeded_acres?`${lt.deeded_acres} acres`:"N/A",bedrooms:lt.numrooms||"N/A",bathrooms:lt.numunits||"N/A",garageSpaces:"N/A",propertyTax:lt.taxamt?`$${lt.taxamt}/year`:"N/A",lastSold:lt.saledate||"N/A",estimatedValue:lt.parval?`$${lt.parval}`:"N/A",ownerName:lt.owner||"N/A"},loading:!1,checklist:{...dt.checklist,addressVerified:!0}}))}catch($){console.error("Property search error:",$),I(G=>({...G,error:$.message||"Failed to search property. Please try again.",loading:!1}))}}},bn=()=>{I({address:"",results:null,loading:!1,error:null,suggestions:[],showSuggestions:!1,selectedCoordinates:null,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}})},Ds=$=>{I(G=>({...G,checklist:{...G.checklist,[$]:!G.checklist[$]}}))},Ks=async $=>{if(console.log("handleAddressInputChange called with:",$),I(G=>({...G,address:$,showSuggestions:!1})),$.length<3){console.log("Value too short, clearing suggestions"),I(G=>({...G,suggestions:[]}));return}try{console.log("Mapbox API Key available:",!1),console.log("Making request to Mapbox API...");const Se=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent($)}.json?access_token=undefined&country=US&types=address&limit=5`)).json();console.log("Mapbox API response:",Se);const de=Se.features.map(Ne=>({id:Ne.id,address:Ne.place_name,coordinates:Ne.center}));console.log("Processed suggestions:",de),I(Ne=>({...Ne,suggestions:de,showSuggestions:de.length>0})),console.log("Setting suggestions:",de.length,"showSuggestions:",de.length>0)}catch(G){console.error("Error fetching address suggestions:",G)}},me=$=>{I(G=>({...G,address:$.address,suggestions:[],showSuggestions:!1,selectedCoordinates:$.coordinates}))},ve=($,G)=>!$||!G?"":`${new Date($).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"})} at ${G}`,Me=$=>{if(!$)return!1;const G=new Date($).getDay();return G===0||G===6};y.useEffect(()=>{(async()=>{try{xt(!0);const he=await Ul();if(he&&he.length>0){const Se=he.filter(Ne=>Ne.dayType==="weekday"),de=he.filter(Ne=>Ne.dayType==="weekend");rs({weekdays:Se,weekends:de})}else console.log("No time blocks found in Firestore"),rs({weekdays:[],weekends:[]});xt(!1)}catch(he){console.error("Error loading time blocks from Firestore:",he),rs({weekdays:[],weekends:[]}),xt(!1)}})();const G=hj(he=>{if(he&&he.length>0){const Se=he.filter(Ne=>Ne.dayType==="weekday"),de=he.filter(Ne=>Ne.dayType==="weekend");rs({weekdays:Se,weekends:de}),console.log("🕐 Current time blocks updated:",{weekdays:Se,weekends:de})}});return()=>G()},[]);const je={address:b.address||N.address||T?.["Owner Address"]||"",owner:`${b.firstName} ${b.lastName}`.trim()||T?.["Owner Name"]||"",county:T?.["County Name"]||"",countyFips:T?.["County FIPS"]||"",acres:T?.Acres||"",apn:T?.APN||"",projectType:d||"",userName:m||"",appointment:{date:j.date||"",time:j.time||""},projectDetails:v||{}},Qe=`🔍 Lead Notes – ${je.address||"Address not provided"}

🏠 Homeownership: Yes${je.owner?` (Owner: ${je.owner})`:""}
👤 Decision-Makers: All required parties will be present
📌 Project Interest:
• ${je.projectType==="bath"?"Bathroom remodel – replacing old tub with walk-in shower":je.projectType==="roof"?"Roof replacement":je.projectType||"N/A"}
${je.projectDetails?.issues?`• ${je.projectDetails.issues}`:""}

🗂️ Property Details:
${je.owner?`• Owner: ${je.owner}
`:""}${je.county?`• County: ${je.county}`:""}${je.countyFips?` (FIPS: ${je.countyFips})`:""}
${je.acres?`• Acres: ${je.acres}
`:""}${je.apn?`• APN: ${je.apn}
`:""}

📅 Appointment Status: ${je.appointment.date&&je.appointment.time?ve(je.appointment.date,je.appointment.time):"Not scheduled"}
${D?"✅ Appointment Confirmed (No Follow-up Needed)":"⏳ Appointment Pending (Follow-up Required)"}

✅ REP NOTES
Rep Name: ${je.userName||"N/A"}
Customer Name: ${je.owner||"N/A"}
Address: ${je.address||"N/A"}
Project Type: ${je.projectType==="bath"?"Bathroom remodel":je.projectType==="roof"?"Roof replacement":je.projectType||"N/A"}
Special Details: ${je.projectDetails?.issues||"N/A"}
Appointment Date & Time: ${je.appointment.date&&je.appointment.time?ve(je.appointment.date,je.appointment.time):"Not scheduled"}
Confirmation Status: ${D?"Confirmed":"Pending"}
`,it=`Thank you for scheduling your appointment with Long Home Products!

Here's what to expect:
• A design consultant will visit your home at ${je.address||"your address"}.
• Appointment: ${je.appointment.date&&je.appointment.time?ve(je.appointment.date,je.appointment.time):"date and time to be confirmed"}.
• We'll review your ${je.projectType==="bath"?"bathroom remodel":je.projectType==="roof"?"roof replacement":je.projectType||"project"} needs and provide a free estimate.
• Please ensure all decision-makers are present.

We look forward to meeting you!`;y.useCallback(()=>{const $=localStorage.getItem("scheduleScriptData");if($)try{const G=JSON.parse($),he=new Date(G.timestamp);(new Date-he)/(1e3*60*60)<24?(console.log("🔄 Resuming saved progress"),G.currentStep!==void 0&&a(G.currentStep),G.callType&&l(G.callType),G.projectType&&u(G.projectType),G.userName&&g(G.userName),G.customerInfo&&C(G.customerInfo),G.projectDetails&&h(G.projectDetails),G.appointment&&w(G.appointment),G.appointmentConfirmed!==void 0&&S(G.appointmentConfirmed),G.checklistItems&&L(G.checklistItems),G.propertySearch&&I(G.propertySearch),G.propertySearchCollapsed!==void 0&&B(G.propertySearchCollapsed),G.basemapVisited!==void 0&&F(G.basemapVisited),G.basemapVerified!==void 0&&ce(G.basemapVerified),G.basemapScreenshot&&ee(G.basemapScreenshot),G.parsedPropertyInfo&&R(G.parsedPropertyInfo),_(`Resumed from step ${G.currentStep+1}`),pe(!0),setTimeout(()=>pe(!1),2e3)):(console.log("⏰ Saved data is too old"),localStorage.removeItem("scheduleScriptData"),J(!1))}catch(G){console.error("❌ Error resuming progress:",G),localStorage.removeItem("scheduleScriptData"),J(!1)}},[]);const Ie=y.useCallback(()=>{a(0),l(""),u(""),g(""),S(!1),C({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",secondaryName:"",secondaryPhone:"",secondaryEmail:"",relationshipToPrimary:"",showSecondary:!1}),h({age:"",issues:"",currentSetup:"",replacementType:"",plumbingSetup:"",materialsPurchased:"",roofType:"",activeLeaks:"",roofReplaced:""}),w({date:"",time:"",confirmed:!1}),L({projectChecklist:[],bathChecklist:[],roofChecklist:[],commitmentChecklist:[]}),I({address:"",results:null,loading:!1,error:null,suggestions:[],showSuggestions:!1,selectedCoordinates:null,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}}),B(!0),F(!1),ce(!1),ee(null),re(!1),O(""),Y(!1),R({}),f(!1),M(!1),ue({type:"success",title:"",message:"",details:""}),localStorage.removeItem("scheduleScriptData"),ue({type:"success",title:"",message:"",details:""}),J(!1),console.log("🗑️ All data cleared for new appointment")},[]),Te=y.useCallback(()=>{navigator.clipboard.writeText(Qe).then(()=>{M(!0),setTimeout(()=>M(!1),2e3)})},[Qe]),Ee=y.useCallback(()=>{navigator.clipboard.writeText(it).then(()=>{alert("Customer recap copied to clipboard!")})},[it]),Xe=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Select Call Type"}),e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#f8fafc"},children:["Current selection: ",i||"None"]}),e.jsxs("div",{className:"greeting-options-dark",children:[e.jsxs(Pe.div,{className:`greeting-option-dark ${i==="incoming"?"selected-dark":""}`,onClick:()=>{l("incoming"),setTimeout(()=>a(s+1),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(hl,{className:"greeting-icon"}),e.jsxs("div",{className:"greeting-content-dark",children:[e.jsx("h4",{children:"Incoming Call"}),e.jsxs("p",{className:"greeting-script-dark",children:['"',ze.incoming.script,'"']}),e.jsx("p",{className:"greeting-tone-dark",children:ze.incoming.tone})]}),i==="incoming"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ki,{size:16})})]}),e.jsxs(Pe.div,{className:`greeting-option-dark ${i==="outgoing"?"selected-dark":""}`,onClick:()=>{l("outgoing"),setTimeout(()=>a(s+1),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(hl,{className:"greeting-icon"}),e.jsxs("div",{className:"greeting-content-dark",children:[e.jsx("h4",{children:"Outgoing Call"}),e.jsxs("p",{className:"greeting-script-dark",children:['"',ze.outgoing.script,'"']}),e.jsx("p",{className:"greeting-tone-dark",children:ze.outgoing.tone})]}),i==="outgoing"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ki,{size:16})})]})]}),e.jsx("div",{className:"step-navigation-dark",children:e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,disabled:s===0,whileHover:{scale:1.05},whileTap:{scale:.95},style:{opacity:s===0?.5:1},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})})]}),nt=()=>{const $=()=>{const he={};if(N.address&&!b.address&&(he.address=N.address),T?.["Owner Name"]&&!b.firstName&&!b.lastName){const Se=T["Owner Name"],de=Se.split(" ");de.length>=2?(he.firstName=de[0],he.lastName=de.slice(1).join(" ")):he.firstName=Se}T?.["Owner City"]&&!b.city&&(he.city=T["Owner City"]),T?.["Owner State"]&&!b.state&&(he.state=T["Owner State"]),T?.["Owner Zip Code"]&&!b.zipCode&&(he.zipCode=T["Owner Zip Code"].replace(":","").trim()),Object.keys(he).length>0&&C(Se=>({...Se,...he}))},G=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];return e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{background:"rgba(59,130,246,0.03)",borderRadius:16,padding:"2.5rem 1.5rem",boxShadow:"0 2px 16px rgba(59,130,246,0.07)",maxWidth:600,margin:"0 auto"},children:[e.jsxs("h3",{className:"step-title-dark",style:{color:"#2563eb",display:"flex",alignItems:"center",gap:10,fontSize:"2rem",marginBottom:18},children:[e.jsx(Wv,{style:{color:"#2563eb",fontSize:28}}),"Quick Customer Info"]}),(N.address||T&&Object.keys(T).length>0)&&e.jsxs("div",{style:{background:"#1e293b",borderRadius:8,padding:"1rem",marginBottom:"1rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",color:"#94a3b8"},children:"📋 Available property data:"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:[T?.["Owner Name"]&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["👤 ",T["Owner Name"]]}),T?.["Owner City"]&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["🏙️ ",T["Owner City"]]}),T?.["Owner State"]&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["🗺️ ",T["Owner State"]]}),N.address&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["📍 ",N.address]})]}),e.jsx("button",{onClick:$,style:{background:"#3b82f6",color:"white",border:"none",borderRadius:6,padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8},children:"🚀 Auto-fill from property data"})]}),e.jsxs("div",{className:"customer-info-container-dark",style:{background:"#1e293b",borderRadius:12,boxShadow:"0 1px 8px rgba(0,0,0,0.3)",padding:"2rem",marginBottom:24,border:"1px solid #334155"},children:[e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:18,flexWrap:"wrap",marginBottom:16},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsxs("label",{className:"form-label-dark",children:["Name ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:`${b.firstName} ${b.lastName}`.trim(),onChange:he=>{const Se=he.target.value.split(" ");C(de=>({...de,firstName:Se[0]||"",lastName:Se.slice(1).join(" ")||""}))},className:"form-input-dark",placeholder:"First Last",required:!0})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsxs("label",{className:"form-label-dark",children:["Phone ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"tel",value:b.phone,onChange:he=>Dt("phone",he.target.value),className:"form-input-dark",placeholder:"(555) 123-4567",required:!0})]})]}),e.jsxs("div",{className:"form-group-dark",style:{marginBottom:16},children:[e.jsx("label",{className:"form-label-dark",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:b.email,onChange:he=>Dt("email",he.target.value),className:"form-input-dark",placeholder:"email@example.com"})]}),e.jsxs("div",{className:"form-group-dark",style:{marginBottom:16},children:[e.jsxs("label",{className:"form-label-dark",children:["Address ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:b.address,onChange:he=>Dt("address",he.target.value),className:"form-input-dark",placeholder:"Street address",required:!0})]}),e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:2,minWidth:120},children:[e.jsxs("label",{className:"form-label-dark",children:["City ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:b.city,onChange:he=>Dt("city",he.target.value),className:"form-input-dark",placeholder:"City",required:!0})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:80},children:[e.jsxs("label",{className:"form-label-dark",children:["State ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:b.state,onChange:he=>Dt("state",he.target.value),className:"form-input-dark",required:!0,children:[e.jsx("option",{value:"",children:"State"}),G.map(he=>e.jsx("option",{value:he,children:he},he))]})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:80},children:[e.jsxs("label",{className:"form-label-dark",children:["ZIP ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:b.zipCode,onChange:he=>Dt("zipCode",he.target.value),className:"form-input-dark",placeholder:"ZIP",required:!0})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem",borderTop:"1px solid #475569",paddingTop:"1rem"},children:[e.jsxs("button",{onClick:()=>C(he=>({...he,showSecondary:!he.showSecondary})),style:{background:"transparent",color:"#34d399",border:"none",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8,fontWeight:600},children:[b.showSecondary?"▼":"▶"," Add Secondary Contact (Optional)"]}),b.showSecondary&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#0f172a",borderRadius:8},children:[e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsx("label",{className:"form-label-dark",children:"Secondary Name"}),e.jsx("input",{type:"text",value:b.secondaryName,onChange:he=>Dt("secondaryName",he.target.value),className:"form-input-dark",placeholder:"Spouse, partner, etc."})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsx("label",{className:"form-label-dark",children:"Secondary Phone"}),e.jsx("input",{type:"tel",value:b.secondaryPhone,onChange:he=>Dt("secondaryPhone",he.target.value),className:"form-input-dark",placeholder:"(555) 123-4567"})]})]}),e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsx("label",{className:"form-label-dark",children:"Secondary Email"}),e.jsx("input",{type:"email",value:b.secondaryEmail,onChange:he=>Dt("secondaryEmail",he.target.value),className:"form-input-dark",placeholder:"email@example.com"})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:120},children:[e.jsx("label",{className:"form-label-dark",children:"Relationship"}),e.jsxs("select",{value:b.relationshipToPrimary,onChange:he=>Dt("relationshipToPrimary",he.target.value),className:"form-input-dark",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Partner",children:"Partner"}),e.jsx("option",{value:"Parent",children:"Parent"}),e.jsx("option",{value:"Child",children:"Child"}),e.jsx("option",{value:"Roommate",children:"Roommate"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]})]})]}),e.jsxs("div",{className:"step-navigation-dark",style:{display:"flex",justifyContent:"space-between",marginTop:32},children:[e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(Pe.button,{className:"nav-button-dark next-button-dark",onClick:Vt,disabled:!b.firstName||!b.lastName||!b.phone||!b.address||!b.city||!b.state||!b.zipCode,whileHover:{scale:1.05},whileTap:{scale:.95},style:{opacity:!b.firstName||!b.lastName||!b.phone||!b.address||!b.city||!b.state||!b.zipCode?.5:1},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})},Re=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Select Project Type"}),e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#f8fafc"},children:["Current selection: ",d||"None"]}),e.jsxs("div",{className:"project-options-dark",children:[e.jsxs(Pe.div,{className:`project-option-dark ${d==="bath"?"selected-dark":""}`,onClick:()=>{u("bath"),setTimeout(()=>a(4),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(ja,{className:"project-icon"}),e.jsxs("div",{className:"project-content-dark",children:[e.jsx("h4",{children:"Bath/Shower Replacement"}),e.jsx("p",{children:"Schedule bath check and consultation"})]}),d==="bath"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ki,{size:16})})]}),e.jsxs(Pe.div,{className:`project-option-dark ${d==="roof"?"selected-dark":""}`,onClick:()=>{u("roof"),setTimeout(()=>a(4),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(ja,{className:"project-icon"}),e.jsxs("div",{className:"project-content-dark",children:[e.jsx("h4",{children:"Roof Replacement"}),e.jsx("p",{children:"Schedule roof inspection and estimate"})]}),d==="roof"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ki,{size:16})})]})]}),e.jsx("div",{className:"step-navigation-dark",children:e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})})]}),ct=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h3",{className:"step-title-dark",children:[d==="bath"?"Bath/Shower":d==="roof"?"Roof":"Project"," Checklist"]}),e.jsxs("div",{className:"checklist-container-dark",children:[e.jsxs("h4",{className:"checklist-title-dark",children:[d==="bath"?"Bath/Shower":d==="roof"?"Roof":"General"," Project Questions:"]}),e.jsx("div",{className:"checklist-items-dark",children:Ge(d).map(($,G)=>e.jsxs(Pe.div,{className:`checklist-item-dark ${A.projectChecklist.includes(G)?"completed-dark":""}`,onClick:()=>Ps("projectChecklist",G),whileHover:{scale:1.02},whileTap:{scale:.98},children:[A.projectChecklist.includes(G)?e.jsx(va,{className:"check-icon"}):e.jsx(Si,{className:"check-icon"}),e.jsx("span",{children:$})]},G))})]}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(Pe.button,{className:"nav-button-dark next-button-dark",onClick:Vt,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),Zt=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h3",{className:"step-title-dark",children:[d==="bath"?"Bath/Shower":"Roof"," Specific Questions"]}),e.jsx("div",{className:"questions-container-dark",children:d==="bath"?e.jsx("div",{className:"checklist-items-dark",children:vt.map(($,G)=>e.jsxs(Pe.div,{className:`checklist-item-dark ${A.bathChecklist.includes(G)?"completed-dark":""}`,onClick:()=>Ps("bathChecklist",G),whileHover:{scale:1.02},whileTap:{scale:.98},children:[A.bathChecklist.includes(G)?e.jsx(va,{className:"check-icon"}):e.jsx(Si,{className:"check-icon"}),e.jsx("span",{children:$})]},G))}):e.jsx("div",{className:"checklist-items-dark",children:Ve.map(($,G)=>e.jsxs(Pe.div,{className:`checklist-item-dark ${A.roofChecklist.includes(G)?"completed-dark":""}`,onClick:()=>Ps("roofChecklist",G),whileHover:{scale:1.02},whileTap:{scale:.98},children:[A.roofChecklist.includes(G)?e.jsx(va,{className:"check-icon"}):e.jsx(Si,{className:"check-icon"}),e.jsx("span",{children:$})]},G))})}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(Pe.button,{className:"nav-button-dark next-button-dark",onClick:Vt,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),ys=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Value of the Visit"}),e.jsx("div",{className:"value-proposition-dark",children:e.jsxs("div",{className:"proposition-card-dark",children:[e.jsx("h4",{className:"proposition-title-dark",children:"Script for Agent:"}),e.jsx("p",{className:"proposition-text-dark",children:'"Now that I have a clear understanding of what you are looking for, let me explain the next steps in our process and how we can assist you today: Long provides total replacements services only. We need you to set aside 60-90 minutes so one of our design consultants can visit your home with samples in hand to show you. The design consultant will do a wellness check and go over different colors, styles, warranty, and financing options available. After taking measurements and answering all your questions, they will provide you with an on-the-spot estimate. How does that sound?"'}),e.jsxs("div",{className:"key-points-dark",children:[e.jsx("h5",{children:"Key Points:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"60-90 minute consultation"}),e.jsx("li",{children:"Total replacement services only"}),e.jsx("li",{children:"Own the property"}),e.jsx("li",{children:"All decision makers must be present"})]})]})]})}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(Pe.button,{className:"nav-button-dark next-button-dark",onClick:Vt,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),[Nt,Js]=y.useState(null),[Zs,ln]=y.useState(null),[js,cn]=y.useState(null),[Nn,Bn]=y.useState([]),[dn,xr]=y.useState({}),[Wa,Bs]=y.useState(!1);y.useEffect(()=>{if(b.address){const $=[b.address,b.city,b.state,b.zipCode].filter(Boolean).join(", ");console.log("🔍 Checking full address for region detection:",$);const G=tA($);G.inServiceArea?(Js(G.region),ln(null),console.log("✅ Region detected:",G.region)):(Js(null),ln("Region could not be determined from address. Please select manually."),console.log("❌ Region not detected for address:",$))}else Js(null),ln(null)},[b.address,b.city,b.state,b.zipCode]);const Je=["MIDA","ESDE","NOVA","NENG","NHME","CTWM","SOPA","WCFL"];y.useEffect(()=>{if(Nt){ht(Nt);const $=X2(Nt,G=>{console.log("🔄 Real-time availability update for region:",Nt,G),xr(G||{});const he=G?Object.keys(G).filter(Se=>{const de=G[Se];if(!de)return!1;let Ne=!1;return Object.values(de).forEach(tt=>{typeof tt=="object"&&tt.available?tt.available>0&&(Ne=!0):typeof tt=="number"&&tt>0&&(Ne=!0)}),Ne}):[];Bn(he)});return()=>$()}},[Nt]);const ht=async $=>{Bs(!0);try{console.log("🔄 Loading availability for region:",$);const G=await Pl($);console.log("📅 Raw availability data:",G),xr(G);const he=G?Object.keys(G).filter(Se=>{const de=G[Se];if(console.log("📊 Checking availability for date:",Se,de),!de)return!1;let Ne=!1;return typeof de=="object"&&de!==null&&Object.values(de).forEach(tt=>{typeof tt=="object"&&tt.available?tt.available>0&&(Ne=!0):typeof tt=="number"&&tt>0&&(Ne=!0)}),Ne}):[];console.log("✅ Available dates:",he),Bn(he)}catch(G){console.error("❌ Error loading availability:",G)}finally{Bs(!1)}},yt=({date:$,view:G})=>{if(G!=="month")return null;const he=$.toISOString().split("T")[0],Se=dn[he];if(!Se)return null;console.log("📅 Day availability for",he,":",Se);let de=0;return typeof Se=="object"&&Se!==null&&Object.values(Se).forEach(Ne=>{typeof Ne=="object"&&Ne.available?de+=Ne.available:typeof Ne=="number"&&(de+=Ne)}),console.log("📊 Total slots for",he,":",de),de===0?null:e.jsx("div",{className:"calendar-slot-count",children:e.jsx("span",{className:"slot-count-badge",children:de})})},as=({date:$,view:G})=>{if(G!=="month")return null;const he=$.toISOString().split("T")[0],Se=dn[he];if(!Se)return"calendar-day-unavailable";let de=0;return typeof Se=="object"&&Se!==null&&Object.values(Se).forEach(Ne=>{typeof Ne=="object"&&Ne.available?de+=Ne.available:typeof Ne=="number"&&(de+=Ne)}),de===0?"calendar-day-unavailable":de<=2?"calendar-day-limited":de<=5?"calendar-day-moderate":"calendar-day-available"},is=$=>{cn($),w(G=>({...G,date:$.toISOString().split("T")[0],time:""}))},kn=($,G)=>{if(!$||!G)return[];const he=dn||{},Se=new Date;Se.setHours(0,0,0,0);const de=new Date($);if(de.setHours(0,0,0,0),de.getTime()===Se.getTime())return[];const Ne=$.toISOString().split("T")[0],tt=he[Ne];if(!tt)return[];const ps=Me($),lt=ps?et.weekends:et.weekdays;console.log("📅 Date:",Ne,"Weekend:",ps),console.log("🕐 Current time blocks:",lt),console.log("📊 Day availability:",tt);let dt=[];if(tt.slots){for(const[_t,ws]of Object.entries(tt.slots))if(ws[G]&&ws[G].available>0){const Xs=lt.find(Wn=>Wn.id===_t);Xs&&dt.push({time:Xs.time,timeId:_t,availableSlots:ws[G].available,label:`${Xs.time} (${ws[G].available} slot${ws[G].available>1?"s":""} available)`})}}else for(const[_t,ws]of Object.entries(tt)){const Xs={morning:"weekday-morning","late-morning":"weekday-morning","early-afternoon":"weekday-afternoon","late-afternoon":"weekday-afternoon",evening:"weekday-evening"};ps&&(Xs.morning="weekend-morning",Xs["late-morning"]="weekend-morning",Xs["early-afternoon"]="weekend-afternoon",Xs["late-afternoon"]="weekend-afternoon");const Wn=Xs[_t],Yr=lt.find(_a=>_a.id===Wn);Yr&&ws.available>0&&dt.push({time:Yr.time,timeId:Wn,availableSlots:ws.available,label:`${Yr.time} (${ws.available} slot${ws.available>1?"s":""} available)`})}return console.log("✅ Available slots:",dt),dt},zr=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Commitment & Scheduling"}),e.jsx("div",{className:"commitment-container-dark",children:e.jsxs("div",{className:"commitment-card-dark",children:[e.jsx("h4",{className:"commitment-title-dark",children:"Commitment Script:"}),e.jsx("p",{className:"commitment-text-dark",children:'"All we ask is that all parties involved are present when we come out for the free in-home estimate. I can have a design consultant make a special trip out to your home tomorrow, currently, I have a 2pm & 6 pm left, which time works best for all parties involved?"'}),e.jsxs("div",{className:"appointment-scheduling-dark",children:[e.jsxs("div",{className:"region-selection-container",children:[e.jsx("h5",{children:"Service Region:"}),Nt?e.jsx("div",{className:"region-info",children:e.jsxs("span",{className:"region-badge",children:["Region: ",Nt]})}):e.jsxs("div",{className:"region-info error",children:[e.jsx("span",{children:Zs||"Region not detected."}),e.jsxs("select",{value:Nt||"",onChange:$=>Js($.target.value),className:"region-select",children:[e.jsx("option",{value:"",children:"Select Region"}),Je.map($=>e.jsx("option",{value:$,children:$},$))]})]})]}),Nt&&e.jsxs("div",{className:"calendar-container",children:[e.jsx("h5",{children:"Select Appointment Date:"}),Wa?e.jsxs("div",{className:"loading-calendar",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading availability..."})]}):e.jsxs("div",{className:"modern-calendar-wrapper",children:[e.jsx(LT,{onChange:is,value:js,tileContent:yt,tileClassName:as,minDate:new Date(new Date().setHours(0,0,0,0)),maxDate:new Date(Date.now()+30*24*60*60*1e3),className:"modern-calendar",tileDisabled:({date:$})=>{const G=new Date;G.setHours(0,0,0,0);const he=new Date($);if(he.setHours(0,0,0,0),he<G)return!0;const Se=$.toISOString().split("T")[0],de=dn?.[Se];if(!de)return!0;let Ne=!1;return typeof de=="object"&&de!==null&&Object.values(de).forEach(tt=>{typeof tt=="object"&&tt.available?tt.available>0&&(Ne=!0):typeof tt=="number"&&tt>0&&(Ne=!0)}),!Ne}}),e.jsxs("div",{className:"calendar-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color available"}),e.jsx("span",{children:"Available (5+ slots)"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color moderate"}),e.jsx("span",{children:"Moderate (3-5 slots)"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color limited"}),e.jsx("span",{children:"Limited (1-2 slots)"})]})]})]})]}),js&&Nt&&e.jsxs("div",{className:"time-selection-container",children:[e.jsx("h5",{children:"Select Appointment Time:"}),e.jsx("div",{className:"time-slots-grid",children:kn(js,Nt).map($=>e.jsxs(Pe.button,{className:`time-slot-modern ${j.time===$.time?"selected-modern":""}`,onClick:()=>Us("time",$.time),whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(Qu,{className:"time-icon"}),e.jsxs("div",{className:"time-block-info",children:[e.jsx("span",{className:"time-block-time",children:$.time}),e.jsxs("span",{className:"time-block-slots",children:[$.availableSlots," slot",$.availableSlots>1?"s":""," available"]})]})]},$.timeId))}),kn(js,Nt).length===0&&e.jsx("div",{className:"no-availability-modern",children:e.jsx("p",{children:"No available time slots for this date. Please select a different date."})})]})]})]})}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(Pe.button,{className:"nav-button-dark next-button-dark",onClick:Vt,disabled:!j.date||!j.time,whileHover:{scale:1.05},whileTap:{scale:.95},style:{opacity:!j.date||!j.time?.5:1},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),Va=()=>e.jsx(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",borderRadius:24,boxShadow:"0 8px 32px rgba(16,185,129,0.15)",padding:"2.5rem 1.5rem",maxWidth:520,margin:"0 auto"},children:e.jsxs("div",{style:{background:"white",borderRadius:20,boxShadow:"0 8px 32px rgba(16,185,129,0.10)",padding:"2.5rem 2rem 2rem 2rem",width:"100%",maxWidth:480,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"50%",width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,boxShadow:"0 4px 16px rgba(16,185,129,0.15)"},children:e.jsx(jl,{size:48,color:"white"})}),e.jsx("h2",{style:{color:"#059669",fontWeight:800,fontSize:"2rem",marginBottom:8,textAlign:"center"},children:"Appointment Confirmed!"}),e.jsx("p",{style:{color:"#334155",fontSize:"1.1rem",marginBottom:28,textAlign:"center"},children:"Your appointment has been successfully scheduled"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.2rem 1.5rem",width:"100%",marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(Gu,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"DATE"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:ve(j.date,"")})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(Qu,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"TIME"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:j.time})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(ja,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"PROJECT"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:d==="bath"?"Bathroom Remodel":d==="roof"?"Roof Replacement":d})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(Wv,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"CUSTOMER"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:b.firstName&&b.lastName?`${b.firstName} ${b.lastName}`:"Not provided"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(hl,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"PHONE"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:b.phone||"Not provided"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(R2,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"EMAIL"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:b.email||"Not provided"})]})]})]}),e.jsxs("div",{style:{background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:16,padding:"0.75rem 1.5rem",fontWeight:700,fontSize:"1.1rem",marginBottom:18,boxShadow:"0 2px 8px rgba(16,185,129,0.10)",display:"flex",alignItems:"center",gap:10},children:[e.jsx(jl,{size:20,color:"white"}),"Appointment Fully Confirmed"]}),e.jsxs("p",{style:{color:"#334155",fontSize:"1rem",marginBottom:28,textAlign:"center"},children:["Customer has confirmed the appointment and no follow-up is needed. This will update the Salesforce status to ",e.jsx("b",{children:'"Set"'}),"."]}),e.jsxs("button",{className:"action-button",style:{background:"linear-gradient(90deg, #6366f1 0%, #3b82f6 100%)",color:"white",border:"none",borderRadius:12,padding:"1rem 2.5rem",fontWeight:700,fontSize:"1.1rem",boxShadow:"0 2px 8px rgba(59,130,246,0.10)",marginTop:8,marginBottom:0,cursor:"pointer",transition:"all 0.2s"},onClick:()=>{S(!0)},children:[e.jsx(ki,{size:20,style:{marginRight:10,verticalAlign:"middle"}}),"Confirm with Customer"]})]})}),Gl=()=>{const $=()=>{const Se={appointment:{date:j.date,time:j.time,confirmed:D},customerInfo:{name:`${b.firstName} ${b.lastName}`,phone:b.phone,email:b.email,address:`${b.address}, ${b.city}, ${b.state} ${b.zipCode}`,secondaryContact:b.showSecondary?`${b.secondaryName} (${b.relationshipToPrimary}) - ${b.secondaryPhone}`:"N/A"},projectDetails:{type:d,issues:v.issues,currentSetup:v.currentSetup,replacementType:v.replacementType,plumbingSetup:v.plumbingSetup,materialsPurchased:v.materialsPurchased,roofType:v.roofType,activeLeaks:v.activeLeaks,roofReplaced:v.roofReplaced},propertyInfo:T,callType:i,userName:m,timestamp:new Date().toLocaleString()};return JSON.stringify(Se,null,2)},G=()=>{const Se=$(),de=new Blob([Se],{type:"application/json"}),Ne=URL.createObjectURL(de),tt=document.createElement("a");tt.href=Ne,tt.download=`appointment_${b.firstName}_${b.lastName}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL(Ne)},he=()=>{const Se=$(),de=JSON.parse(Se);let Ne=`APPOINTMENT SUMMARY
===================

CUSTOMER INFORMATION:
Name: ${de.customerInfo.name}
Phone: ${de.customerInfo.phone}
Email: ${de.customerInfo.email}
Address: ${de.customerInfo.address}
Secondary Contact: ${de.customerInfo.secondaryContact}

APPOINTMENT DETAILS:
Date: ${de.appointment.date}
Time: ${de.appointment.time}
Confirmed: ${de.appointment.confirmed?"Yes":"No"}

PROJECT INFORMATION:
Type: ${de.projectDetails.type}
Issues: ${de.projectDetails.issues}
Current Setup: ${de.projectDetails.currentSetup}
Replacement Type: ${de.projectDetails.replacementType}
Plumbing Setup: ${de.projectDetails.plumbingSetup}
Materials Purchased: ${de.projectDetails.materialsPurchased}
Roof Type: ${de.projectDetails.roofType}
Active Leaks: ${de.projectDetails.activeLeaks}
Roof Replaced: ${de.projectDetails.roofReplaced}

PROPERTY INFORMATION:
${Object.entries(de.propertyInfo).map(([dt,_t])=>`${dt}: ${_t}`).join(`
`)}

CALL DETAILS:
Call Type: ${de.callType}
Rep: ${de.userName}
Timestamp: ${de.timestamp}

NOTES FOR SALESFORCE ENTRY:
- Lead Source: Phone Call
- Status: Appointment Scheduled
- Priority: High
- Description: ${de.projectDetails.type} appointment scheduled for ${de.appointment.date} at ${de.appointment.time}
- Next Steps: Follow up with customer before appointment`;const tt=new Blob([Ne],{type:"text/plain"}),ps=URL.createObjectURL(tt),lt=document.createElement("a");lt.href=ps,lt.download=`appointment_summary_${b.firstName}_${b.lastName}_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),URL.revokeObjectURL(ps)};return e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Button Up & Confirmation"}),e.jsx("div",{className:"confirmation-container-dark",children:e.jsxs("div",{className:"confirmation-card-dark",children:[e.jsx("h4",{className:"confirmation-title-dark",children:"Final Confirmation Checklist:"}),e.jsx("div",{className:"checklist-items-dark",children:Ke.map((Se,de)=>e.jsxs(Pe.div,{className:`checklist-item-dark ${A.commitmentChecklist.includes(de)?"completed-dark":""}`,onClick:()=>Ps("commitmentChecklist",de),whileHover:{scale:1.02},whileTap:{scale:.98},children:[A.commitmentChecklist.includes(de)?e.jsx(va,{className:"check-icon"}):e.jsx(Si,{className:"check-icon"}),e.jsx("span",{children:Se})]},de))}),e.jsxs("div",{className:"closing-script-dark",children:[e.jsx("h5",{children:"Closing Script:"}),e.jsxs("p",{children:['"Before I finalize everything, could you do a few things for me? Please mention the appointment to any other parties involved, and mark your calendar to avoid rescheduling. Also, do not make any decisions until Long gets a chance to show you our product and how we can offer you peace of mind at a great price. Does that make sense? OK FANTASTIC…. The next point of contact will be the rep at your home on ',j.date," at ",j.time," to do the estimate for you on a total replacement of your ",d,'. Thank you and have a wonderful day!"']})]})]})}),e.jsxs(Pe.div,{className:"salesforce-section-dark",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"16px",padding:"2rem",marginTop:"2rem",textAlign:"center"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Salesforce Integration"]}),e.jsx("h4",{style:{color:"#1f2937",fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem"},children:"Coming Soon! 🚀"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem"},children:"Direct Salesforce integration is currently under development. In the meantime, you can download the appointment data in a formatted format to manually enter into Salesforce."})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap",marginBottom:"1.5rem"},children:[e.jsxs(Pe.button,{onClick:he,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 15V3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Download Formatted Summary"]}),e.jsxs(Pe.button,{onClick:G,style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 2V8H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 13H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 17H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 9H9H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Download JSON Data"]})]}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",fontStyle:"italic",marginBottom:"1.5rem"},children:'💡 Tip: Use the "Formatted Summary" for easy copy-paste into Salesforce, or "JSON Data" for technical integration.'})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap",marginTop:"2rem"},children:[e.jsxs(Pe.button,{className:"complete-button-dark",onClick:()=>{a(0),l(""),u(""),g(""),h({issues:"",currentSetup:"",replacementType:"",plumbingSetup:"",materialsPurchased:"",roofType:"",activeLeaks:"",roofReplaced:""}),w({date:"",time:"",confirmed:!1}),S(!1),C({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",secondaryName:"",secondaryPhone:"",secondaryEmail:"",relationshipToPrimary:"",showSecondary:!1}),L({projectChecklist:[],bathChecklist:[],roofChecklist:[],commitmentChecklist:[]})},style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 12L5 10L9 14L21 2L23 4L9 18L3 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Finish & Restart Script"]}),e.jsxs(Pe.button,{onClick:()=>qr(),style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 2H2V22H22V2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Try Salesforce Integration"]})]})]})},kt=()=>e.jsxs(Pe.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Property Search & Verification"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:500,marginBottom:"0.5rem",color:"#fff"},children:"For best results, use the Basemap tool to visually locate the property first. Then return here to enter the address for search and verification."}),e.jsxs("a",{href:"https://app.basemap.com/?_gl=1*1s9rt3w*_gcl_au*MTg4MTc1NjgwOC4xNzUyNzU4NzU5*_ga*MTE3ODIzOTY4Ni4xNzUyNzU4NzU5*_ga_4XG891YZD4*czE3NTI3NTg3NTkkbzEkZzAkdDE3NTI3NTg3NTkkajYwJGwwJGgw*_ga_8X0CQ17R59*czE3NTI3NTg3NTkkbzEkZzAkdDE3NTI3NTg3NTkkajYwJGwwJGgw",target:"_blank",rel:"noopener noreferrer",className:"basemap-link-dark prominent",style:{display:"inline-flex",alignItems:"center",gap:"12px",background:"linear-gradient(90deg, #3b82f6 0%, #06b6d4 100%)",color:"#fff",textDecoration:"none",fontWeight:700,fontSize:"1.2rem",borderRadius:"8px",padding:"1rem 2rem",margin:"0.5rem 0 0 0",boxShadow:"0 4px 16px rgba(0,0,0,0.18)",transition:"background 0.2s"},onClick:()=>F(!0),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M18 13V19C18 20.1046 17.1046 21 16 21H5C3.89543 21 3 20.1046 3 19V8C3 6.89543 3.89543 6 5 6H11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15 3H21V9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 14L21 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Open Basemap Tool"]}),Q&&!te&&e.jsxs("button",{style:{marginTop:"1rem",padding:"0.5rem 1.5rem",background:"#10b981",color:"#fff",border:"none",borderRadius:"6px",fontWeight:600,fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>ce(!0),children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 13l4 4L19 7",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Mark as Verified from Basemap"]}),Q&&e.jsxs("div",{style:{marginTop:"1.5rem",marginBottom:"1rem",textAlign:"center",border:oe?"2.5px solid #3b82f6":"1.5px solid #e5e7eb",borderRadius:12,background:"rgba(59,130,246,0.06)",padding:"1.5rem 1rem",maxWidth:400,marginLeft:"auto",marginRight:"auto",boxShadow:"0 2px 12px rgba(59,130,246,0.07)",transition:"border 0.2s"},tabIndex:0,onPaste:$=>{if($.clipboardData&&$.clipboardData.items)for(let G=0;G<$.clipboardData.items.length;G++){const he=$.clipboardData.items[G];if(he.type.indexOf("image")!==-1){const Se=he.getAsFile(),de=new FileReader;de.onload=Ne=>ee(Ne.target.result),de.readAsDataURL(Se),$.preventDefault();break}}},onFocus:()=>re(!0),onBlur:()=>re(!1),children:[e.jsxs("div",{style:{fontSize:13,color:"#2563eb",marginBottom:6,fontWeight:500},children:["You can ",e.jsx("b",{children:"paste"})," (Ctrl+V) a copied screenshot here!"]}),e.jsx("label",{style:{fontWeight:700,color:"#2563eb",display:"block",marginBottom:14,fontSize:"1.1rem",letterSpacing:.2},children:"Upload Basemap Screenshot (property info)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:10},children:[e.jsx("input",{id:"basemap-screenshot-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:$=>{const G=$.target.files[0];if(G){const he=new FileReader;he.onload=Se=>ee(Se.target.result),he.readAsDataURL(G)}}}),e.jsx("label",{htmlFor:"basemap-screenshot-upload",style:{background:"linear-gradient(90deg, #3b82f6 0%, #06b6d4 100%)",color:"#fff",padding:"0.5rem 1.2rem",borderRadius:8,fontWeight:600,fontSize:"1rem",cursor:"pointer",boxShadow:"0 1px 4px rgba(59,130,246,0.08)",border:"none",display:"inline-block",transition:"background 0.2s",marginRight:4},children:"Choose Screenshot"}),e.jsx("span",{style:{color:"#555",fontSize:"0.98rem",fontWeight:500,minWidth:120,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},children:z?"Screenshot selected":"No file chosen"}),z&&e.jsx("button",{onClick:()=>ee(null),style:{background:"none",border:"none",color:"#ef4444",fontSize:18,marginLeft:4,cursor:"pointer",padding:0,lineHeight:1},title:"Remove screenshot",children:"×"})]}),z&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("img",{src:z,alt:"Basemap Screenshot Preview",style:{maxWidth:"100%",maxHeight:320,borderRadius:10,boxShadow:"0 4px 24px rgba(59,130,246,0.13)"}}),e.jsx("div",{style:{fontSize:13,color:"#2563eb",marginTop:6,fontWeight:500},children:"Screenshot attached"}),e.jsx("div",{style:{marginTop:18,background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:8,padding:"1rem",color:"#222",fontSize:"1rem",minHeight:48,maxWidth:420,marginLeft:"auto",marginRight:"auto",boxShadow:"0 1px 4px rgba(59,130,246,0.06)"},children:q?e.jsx("span",{style:{color:"#3b82f6",fontWeight:500},children:"Extracting text from screenshot..."}):T&&Object.keys(T).length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem 1.5rem"},children:Object.entries(T).map(([$,G])=>e.jsxs(Ll.Fragment,{children:[e.jsxs("div",{style:{fontWeight:600,color:"#2563eb"},children:[$,":"]}),e.jsx("div",{style:{color:"#222",wordBreak:"break-word"},children:G})]},$))}):e.jsx("span",{style:{color:"#888"},children:le||"No text extracted yet."})})]})]}),te&&e.jsxs("div",{style:{marginTop:"1rem",color:"#10b981",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 13l4 4L19 7",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified from Basemap"]})]}),e.jsxs("div",{className:"search-form-container-dark",children:[e.jsxs("div",{className:"search-header-dark",style:{cursor:"pointer",userSelect:"none"},onClick:()=>B($=>!$),children:[e.jsx("div",{className:"search-icon-container-dark",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"search-title-dark",children:[e.jsxs("h4",{style:{display:"inline-block",marginRight:8},children:["Property Address Search",e.jsx("span",{style:{background:"#f59e42",color:"#fff",fontWeight:700,fontSize:"0.75rem",borderRadius:"6px",padding:"2px 8px",marginLeft:8,verticalAlign:"middle",letterSpacing:.5},children:"Beta"})]}),e.jsx("span",{style:{fontSize:18,verticalAlign:"middle",transition:"transform 0.2s",display:"inline-block",transform:W?"rotate(-90deg)":"rotate(0deg)"},children:"▶"}),e.jsx("p",{style:{fontSize:"0.92rem",color:"#aaa",margin:0},children:"Enter the property address to search for detailed information"})]})]}),!W&&e.jsxs("div",{style:{background:"rgba(59,130,246,0.04)",border:"1px solid #e5e7eb",borderRadius:8,padding:"1rem",marginTop:8,marginBottom:8,maxWidth:420,marginLeft:"auto",marginRight:"auto",boxShadow:"0 1px 4px rgba(59,130,246,0.04)"},children:[e.jsxs("div",{className:"search-input-section-dark",children:[e.jsx("label",{className:"input-label-dark",style:{fontWeight:700,fontSize:"1.1rem",marginBottom:8,display:"block",color:"#3b82f6"},children:"Regrid Property Search"}),e.jsx("input",{type:"text",placeholder:"Enter full property address...",className:"modern-input-dark",value:N.address||"",onChange:$=>Ks($.target.value),onFocus:()=>N.suggestions.length>0&&I($=>({...$,showSuggestions:!0}))}),N.showSuggestions&&N.suggestions.length>0&&e.jsx("div",{className:"suggestions-dropdown-dark",children:N.suggestions.map($=>e.jsxs("div",{className:"suggestion-item-dark",onClick:()=>me($),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M17.657 16.657L13.414 20.9C13.039 21.275 12.525 21.485 12 21.485C11.475 21.485 10.961 21.275 10.586 20.9L6.343 16.657C5.22422 15.5381 4.46234 14.1127 4.15369 12.5608C3.84504 11.009 4.00349 9.40047 4.60901 7.93853C5.21452 6.4766 6.2399 5.22425 7.55548 4.34668C8.87107 3.46911 10.4178 3.00024 12 3.00024C13.5822 3.00024 15.1289 3.46911 16.4445 4.34668C17.7601 5.22425 18.7855 6.4766 19.391 7.93853C19.9965 9.40047 20.155 11.009 19.8463 12.5608C19.5377 14.1127 18.7758 15.5381 17.657 16.657Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15 11C15 12.6569 13.6569 14 12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),$.address]},$.id))}),e.jsxs("div",{className:"search-actions-dark",style:{marginTop:12},children:[e.jsxs(Pe.button,{className:"search-button-dark primary",onClick:xs,whileHover:{scale:1.02},whileTap:{scale:.98},disabled:!N.address,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Search Property"]}),e.jsxs(Pe.button,{className:"search-button-dark secondary",onClick:bn,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 7L18.132 19.142C18.0579 20.1891 17.187 21.0273 16.148 21.0273H7.852C6.813 21.0273 5.94214 20.1891 5.868 19.142L5 7M10 11V17M14 11V17M15 7V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V7M4 7H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Clear"]})]})]}),N.results&&e.jsx("div",{className:"search-results-container-dark"})]})]}),e.jsxs("div",{className:"property-checklist-section-dark",children:[e.jsx("h4",{children:"Property Verification Checklist"}),e.jsx("div",{className:"property-checklist-grid-dark",children:ae.map($=>e.jsxs(Pe.div,{className:`checklist-item-dark ${($.key==="basemapVerified"?te:N.checklist[$.key])?"completed-dark":""}`,onClick:()=>{$.key==="basemapVerified"?ce(G=>!G):Ds($.key)},whileHover:{scale:1.02},whileTap:{scale:.98},style:{cursor:"pointer"},children:[($.key==="basemapVerified"?te:N.checklist[$.key])?e.jsx(va,{className:"check-icon"}):e.jsx(Si,{className:"check-icon"}),e.jsx("span",{children:$.label})]},$.key))})]}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(Pe.button,{className:"nav-button-dark back-button-dark",onClick:Lt,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(Pe.button,{className:"nav-button-dark next-button-dark",onClick:Vt,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:!ge,style:{opacity:ge?1:.5},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),Ql=()=>{switch(We[s].id){case"greeting":return Xe();case"customerInfo":return nt();case"projectType":return Re();case"propertySearch":return kt();case"projectChecklist":return ct();case"projectQuestions":return Zt();case"valueProposition":return ys();case"commitment":return zr();case"confirmation":return Va();case"buttonUp":return Gl();default:return Xe()}},[Sn,Hr]=y.useState({open:!1,duplicates:[],allowSave:!1}),[yr,Kl]=y.useState(!1),qr=async($=!1)=>{try{console.log("Sending data to Salesforce...",{forceCreate:$});const G={appointment:j,propertyInfo:T,customerInfo:b,projectType:d,callType:i,userName:m,appointmentConfirmed:D,allowSave:$};console.log("Data being sent:",G);const he="/.netlify/functions/sendToSalesforce";console.log("Using API URL:",he);const Se=await fetch(he,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});console.log("Response status:",Se.status),console.log("Response headers:",Se.headers);const de=await Se.text();console.log("Raw response text:",de);const Ne=de?JSON.parse(de):{};if(console.log("Parsed result:",Ne),Se.ok)console.log("Data sent successfully:",Ne),ue({type:"success",title:"Success",message:"Data sent to Salesforce successfully."});else if(Se.status===409&&Ne.error==="DUPLICATE"){if(console.log("Duplicate detected:",Ne),!Ne.duplicates||Ne.duplicates.length===0)if(console.log("No actual duplicates found, proceeding with creation"),$){console.log("Already forcing creation, proceeding anyway"),ue({type:"success",title:"Success",message:"Data sent to Salesforce successfully."});return}else return qr(!0);if($){console.log("Force create is true, proceeding with success"),ue({type:"success",title:"Success",message:"Data sent to Salesforce successfully."});return}console.log("Checking duplicates array:",Ne.duplicates),console.log("Duplicates length:",Ne.duplicates?Ne.duplicates.length:"undefined"),Ne.duplicates&&Ne.duplicates.length>0?(console.log("Setting duplicate modal with:",{open:!0,duplicates:Ne.duplicates||[],allowSave:Ne.allowSave||!1}),Hr({open:!0,duplicates:Ne.duplicates||[],allowSave:Ne.allowSave||!1})):(console.log("No duplicates to show, proceeding with success message"),ue({type:"success",title:"Success",message:"Data sent to Salesforce successfully."}))}else console.error("Error sending data:",Ne),ue({type:"error",title:"Error",message:"Failed to send data to Salesforce.",details:Ne.error||"No error details provided."})}catch(G){console.error("Unexpected error:",G),ue({type:"error",title:"Error",message:"An unexpected error occurred.",details:G.message})}};return e.jsxs("div",{className:"schedule-script-container-dark",children:[e.jsxs(Pe.div,{className:"schedule-script-header-dark",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("div",{className:"header-content",children:[e.jsxs(Pe.h1,{className:"schedule-script-title-dark",initial:{scale:.8},animate:{scale:1},transition:{duration:.6,delay:.2},children:[e.jsx(pu,{className:"title-icon"}),"Interactive Scheduling Script"]}),e.jsx(Pe.p,{className:"schedule-script-subtitle-dark",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:"Follow the step-by-step script to schedule appointments effectively"})]}),e.jsx(Pe.div,{className:"header-navigation-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsxs("div",{className:"quick-nav-dark",children:[e.jsxs(Pe.button,{onClick:()=>t("home"),className:"nav-button-dark home-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs(Pe.button,{onClick:()=>t("rebuttals"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs(Pe.button,{onClick:()=>t("disposition"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 3H15V5H9V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs(Pe.button,{onClick:()=>t("customerService"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs(Pe.button,{onClick:()=>t("faq"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.30197 14.92 10.02C14.92 12 11.92 13 11.92 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 17H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"FAQ"]}),e.jsxs(Pe.button,{onClick:Ie,className:"nav-button-dark",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",fontWeight:600},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Start New Appointment"]})]})})]}),e.jsxs(Pe.div,{className:"schedule-script-content-dark",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},children:[e.jsx("div",{className:"script-progress-dark",children:e.jsx("div",{className:"progress-bar-prominent",children:We.map(($,G)=>{let he=pu;return $.type==="greeting"&&(he=hl),$.type==="selection"&&(he=ja),$.type==="property"&&(he=ja),$.type==="checklist"&&(he=va),$.type==="questions"&&(he=uj),$.type==="presentation"&&(he=pu),$.type==="scheduling"&&(he=Gu),$.type==="confirmation"&&(he=jl),e.jsxs(Pe.div,{className:`progress-step-prominent ${G<s?"completed":""} ${G===s?"current":""}`,"aria-label":`Go to step: ${$.title}`,children:[e.jsx("div",{className:"step-icon-wrapper",children:e.jsx(he,{className:"step-icon"})}),e.jsx("span",{className:"step-label-prominent",children:$.title}),G<We.length-1&&e.jsx("span",{className:"step-connector"})]},$.id)})})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:`${yr?"56px":"300px"} 1fr`,gap:"2rem",alignItems:"flex-start"},children:[e.jsx(Ex,{collapsed:yr,onCollapseChange:Kl}),e.jsx("div",{className:"script-main-content-dark",children:Ql()})]})]}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)",padding:"2rem"},children:e.jsxs(Pe.div,{style:{background:"#fff",borderRadius:20,padding:"2rem",maxWidth:1200,width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",position:"relative"},initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,type:"spring"},children:[e.jsx("button",{onClick:()=>f(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"#f1f5f9",border:"none",borderRadius:"50%",width:"2.5rem",height:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.2rem",color:"#64748b",transition:"all 0.2s"},onMouseEnter:$=>{$.target.style.background="#e2e8f0",$.target.style.color="#475569"},onMouseLeave:$=>{$.target.style.background="#f1f5f9",$.target.style.color="#64748b"},children:"✕"}),e.jsx("h1",{style:{color:"#1e293b",marginBottom:"2rem",textAlign:"center",fontSize:"2rem",fontWeight:700},children:"📋 Appointment Recaps"}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:16,padding:"2rem",maxWidth:500,minWidth:350,color:"#fff",position:"relative",boxShadow:"0 8px 32px rgba(59,130,246,0.3)"},children:[e.jsx("h2",{style:{color:"#fff",marginBottom:16,fontSize:"1.5rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:"👨‍💼 Rep Recap"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"1rem",marginBottom:20,lineHeight:"1.5",color:"#e2e8f0"},children:Qe}),e.jsx("button",{onClick:Te,style:{background:P?"#10b981":"rgba(255, 255, 255, 0.2)",color:"#fff",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:8,padding:"0.75rem 1.5rem",fontWeight:600,fontSize:"1rem",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseEnter:$=>{P||($.target.style.background="rgba(255, 255, 255, 0.3)",$.target.style.transform="scale(1.05)")},onMouseLeave:$=>{P||($.target.style.background="rgba(255, 255, 255, 0.2)",$.target.style.transform="scale(1)")},children:P?"✅ Copied!":"📋 Copy Rep Recap"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:16,padding:"2rem",maxWidth:450,minWidth:320,color:"#fff",boxShadow:"0 8px 32px rgba(16,185,129,0.3)"},children:[e.jsx("h2",{style:{color:"#fff",marginBottom:16,fontSize:"1.5rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:"👤 Customer Recap"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1.5",color:"#d1fae5"},children:it}),e.jsx("button",{onClick:Ee,style:{background:"rgba(255, 255, 255, 0.2)",color:"#fff",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:8,padding:"0.75rem 1.5rem",fontWeight:600,fontSize:"1rem",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)",marginTop:"1rem"},onMouseEnter:$=>{$.target.style.background="rgba(255, 255, 255, 0.3)",$.target.style.transform="scale(1.05)"},onMouseLeave:$=>{$.target.style.background="rgba(255, 255, 255, 0.2)",$.target.style.transform="scale(1)"},children:"📋 Copy Customer Recap"})]})]})]})}),K.title&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},children:e.jsxs(Pe.div,{style:{background:K.type==="success"?"linear-gradient(135deg, #059669 0%, #10b981 100%)":"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",borderRadius:20,padding:"2rem",maxWidth:500,width:"90%",color:"white",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",textAlign:"center"},initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,type:"spring"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:K.type==="success"?"✅":"❌"}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:700,marginBottom:"1rem"},children:K.title}),e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1rem",opacity:.9},children:K.message}),K.details&&e.jsx("p",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"1.5rem"},children:K.details}),e.jsx("button",{onClick:()=>{ue({type:"success",title:"",message:"",details:""}),K.type==="success"&&j.date&&j.time&&(b.firstName||b.lastName)&&f(!0)},style:{background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:12,padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseEnter:$=>{$.target.style.background="rgba(255, 255, 255, 0.3)",$.target.style.transform="scale(1.05)"},onMouseLeave:$=>{$.target.style.background="rgba(255, 255, 255, 0.2)",$.target.style.transform="scale(1)"},children:K.type==="success"?"Continue":"Close"})]})}),be&&e.jsx(Pe.div,{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"0 8px 32px rgba(16,185,129,0.3)",zIndex:1e4,maxWidth:"300px",fontSize:"0.9rem",fontWeight:500},initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{duration:.3,type:"spring"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"💾"}),X]})}),Sn.open&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},children:e.jsxs(Pe.div,{style:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",borderRadius:24,padding:"2rem",minWidth:480,maxWidth:600,boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.2)",position:"relative",overflow:"hidden"},initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.4,type:"spring"},children:[e.jsx("div",{style:{position:"absolute",top:-20,right:-20,width:100,height:100,background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:"50%",opacity:.3}}),e.jsx("div",{style:{position:"absolute",bottom:-30,left:-30,width:80,height:80,background:"linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%)",borderRadius:"50%",opacity:.3}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",position:"relative",zIndex:1},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"},children:"⚠️"}),e.jsx("h2",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1.8rem",fontWeight:700,background:"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Duplicate Lead Detected"}),e.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",fontWeight:500},children:"A similar lead already exists in Salesforce"})]}),Sn.duplicates.map(($,G)=>e.jsxs(Pe.div,{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",border:"2px solid #e2e8f0",borderRadius:16,padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",position:"relative",overflow:"hidden"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:G*.1},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:4,background:"linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%)"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Name"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:600},children:$.name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Phone"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:$.phone})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Email"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:$.email})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Company"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:$.company})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:$.status})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Lead Source"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:$.leadSource})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:8,border:"1px solid rgba(59, 130, 246, 0.1)"},children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"📍 Address Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Address:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.address})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"City:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.city})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"State:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.state})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"ZIP:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.zipCode})]})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16, 185, 129, 0.05)",borderRadius:8,border:"1px solid rgba(16, 185, 129, 0.1)"},children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"📅 Activity Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Last Activity:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.lastActivity})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Created:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.createdDate})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Last Modified:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:$.lastModifiedDate})]})]})]}),$.description&&$.description!=="N/A"&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(245, 158, 11, 0.05)",borderRadius:8,border:"1px solid rgba(245, 158, 11, 0.1)"},children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"📝 Description"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"0.9rem",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:$.description})]}),e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsx("a",{href:$.salesforceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",padding:"0.5rem 1rem",borderRadius:8,background:"rgba(59, 130, 246, 0.1)",transition:"all 0.2s ease",display:"inline-block"},onMouseEnter:he=>{he.target.style.background="rgba(59, 130, 246, 0.2)",he.target.style.transform="scale(1.05)"},onMouseLeave:he=>{he.target.style.background="rgba(59, 130, 246, 0.1)",he.target.style.transform="scale(1)"},children:"🔗 View in Salesforce"})})]},$.id)),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(Pe.button,{onClick:()=>{const $=Sn.duplicates[0]?.salesforceUrl;$&&$!=="https://login.salesforce.com"&&$.startsWith("http")?window.open($,"_blank"):alert("Unable to open Salesforce record. Please log into Salesforce and search for the lead manually.")},style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",borderRadius:12,padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},onMouseEnter:$=>{$.target.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.4)"},onMouseLeave:$=>{$.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)"},children:"👁️ View Existing Lead"}),Sn.allowSave&&e.jsx(Pe.button,{onClick:()=>{Hr({...Sn,open:!1}),qr(!0)},style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:12,padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},onMouseEnter:$=>{$.target.style.boxShadow="0 6px 20px rgba(16, 185, 129, 0.4)"},onMouseLeave:$=>{$.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:"➕ Create New Anyway"}),e.jsx(Pe.button,{onClick:()=>Hr({open:!1,duplicates:[],allowSave:!1}),style:{background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",color:"#374151",border:"none",borderRadius:12,padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},onMouseEnter:$=>{$.target.style.background="linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)"},onMouseLeave:$=>{$.target.style.background="linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)"},children:"❌ Cancel"})]})]})})]})},Ci="faqs",Ei={async getAllFAQs(){try{const t=Ze(Ce(fe(),Ci),It("createdAt","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error fetching FAQs:",t),new Error("Failed to fetch FAQs")}},async getFAQById(t){try{const s=Ae(fe(),Ci,t),a=await pt(s);if(a.exists())return{id:a.id,...a.data()};throw new Error("FAQ not found")}catch(s){throw console.error("Error fetching FAQ:",s),new Error("Failed to fetch FAQ")}},async addFAQ(t){try{return{id:(await Yt(Ce(fe(),Ci),{...t,createdAt:Ts(),updatedAt:Ts()})).id,...t,createdAt:new Date,updatedAt:new Date}}catch(s){throw console.error("Error adding FAQ:",s),new Error("Failed to add FAQ")}},async updateFAQ(t,s){try{const a=Ae(fe(),Ci,t);return await Wt(a,{...s,updatedAt:Ts()}),{id:t,...s,updatedAt:new Date}}catch(a){throw console.error("Error updating FAQ:",a),new Error("Failed to update FAQ")}},async deleteFAQ(t){try{const s=Ae(fe(),Ci,t);return await us(s),t}catch(s){throw console.error("Error deleting FAQ:",s),new Error("Failed to delete FAQ")}},async searchFAQs(t){try{const s=await this.getAllFAQs(),a=t.toLowerCase();return s.filter(i=>i.question.toLowerCase().includes(a)||i.answer.toLowerCase().includes(a))}catch(s){throw console.error("Error searching FAQs:",s),new Error("Failed to search FAQs")}}},IT=({onNavigate:t})=>{const{currentUser:s}=wn(),[a,i]=y.useState(null),[l,d]=y.useState([]),[u,m]=y.useState(!0),[g,v]=y.useState(null),[h,j]=y.useState(!1),[w,D]=y.useState(!1),[S,b]=y.useState(!1),C={title:"Long Home Reference Guide",lastUpdated:new Date().toLocaleDateString(),sections:{roof:{title:"Roof Services",icon:e.jsx(ja,{className:"section-icon"}),canDo:{title:"Can Do",items:["Total replacement of roof:","• Asphalt Shingle roof","• Metal Roof","• Flat roof","• (Synthetic) Cedar Shake","• (Synthetic) Slate","• Modular home same as Single Family","• Mobile home (Asphalt shingle Only)","• 2 car lengths wide garage (Must be detached from home)","• Barns (Asphalt shingle. Must be on Plywood)"]},cantDo:{title:"Can't Do",items:["Cedar Shake","Slate","Partial Replacement","Roof Repairs","Structural work/Framing","Shed","Single car garage","Mobile home (Metal, flat roof, etc.)","Roof that covers multiple properties (Example: Condos, Apartments, etc.)","Insurance (No open claims)","Commercial Properties","Shingle Lay over"]}},bath:{title:"Bath Services",icon:e.jsx(b2,{className:"section-icon"}),canDo:{title:"Can Do",items:["Must have existing Tub/Shower (Wet Area)","• Tub/shower replacement","• Tub to Shower Conversion","• Walk in Tubs (Excludes NH, RI)","• Modular home same as Single Family","• Mobile home (No walk in Tub)","• Full bathroom extras (Wet area must be included)","  - Toilet","  - Vanity","  - Flooring (Vinyl tile)","  - Mirror"]},cantDo:{title:"Can't Do",items:["Half Bathrooms","Partial Replacement, Repairs, Liners","Plumbing/Demolition","Lighting","Ceramic Tile","Mobile home (Walk in tubs)","Insurance (No open claims)","Commercial Properties","Free standing/Claw Tub"]}}}};y.useEffect(()=>{L(),A()},[s]);const A=()=>{const B=localStorage.getItem("adminUser");if(B)try{const Q=JSON.parse(B);j(Q.role==="admin")}catch(Q){console.error("Error parsing admin user data:",Q),j(!1)}else j(!1)},L=async()=>{try{m(!0),v(null);const B=await Ei.getAllFAQs();d(B)}catch(B){console.error("Error loading FAQs:",B),v("Failed to load FAQs. Please try again.")}finally{m(!1)}},N=y.useCallback(B=>{i(Q=>Q===B?null:B)},[]),I=()=>{try{const B=document.createElement("a");B.href="/Can-Can't do.pdf",B.download="Long-Home-Can-Cant-Do-Reference-Guide.pdf",B.target="_blank",document.body.appendChild(B),B.click(),document.body.removeChild(B)}catch(B){console.error("Error downloading file:",B);try{window.open("/Can-Can't do.pdf","_blank")}catch(Q){console.error("Fallback download failed:",Q),alert("Failed to download the reference guide. Please try again.")}}},W=()=>{try{const B=document.createElement("a");B.href="/Scheduling Script Update 2025 - Jill Approved.docx",B.download="Long-Home-Scheduling-Script-2025.docx",B.target="_blank",document.body.appendChild(B),B.click(),document.body.removeChild(B)}catch(B){console.error("Error downloading file:",B);try{window.open("/Scheduling Script Update 2025 - Jill Approved.docx","_blank")}catch(Q){console.error("Fallback download failed:",Q),alert("Failed to download the scheduling script. Please try again.")}}};return u?e.jsx("div",{className:"faq-container",children:e.jsxs("div",{className:"faq-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading FAQs..."})]})}):g?e.jsx("div",{className:"faq-container",children:e.jsxs("div",{className:"faq-error",children:[e.jsx("span",{className:"error-icon",children:"⚠️"}),e.jsx("h3",{children:"Error Loading FAQs"}),e.jsx("p",{children:g}),e.jsx("button",{onClick:L,className:"retry-button",children:"Try Again"})]})}):e.jsxs("div",{className:"faq-container",children:[e.jsxs("div",{className:"faq-header",children:[e.jsx(Pe.h1,{className:"faq-title",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:"Frequently Asked Questions"}),e.jsx(Pe.p,{className:"faq-subtitle",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:"FAQ for Reps"}),e.jsx("div",{className:"header-navigation",children:e.jsxs("div",{className:"quick-nav",children:[e.jsxs("button",{onClick:()=>t("home"),className:"nav-button home-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs("button",{onClick:()=>t("rebuttals"),className:"nav-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs("button",{onClick:()=>t("disposition"),className:"nav-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 3H15V5H9V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs("button",{onClick:()=>t("customerService"),className:"nav-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs("button",{onClick:()=>t("scheduleScript"),className:"nav-button",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Schedule Script"]})]})})]}),e.jsxs("div",{className:"faq-content",children:[e.jsxs(Pe.div,{className:"reference-guide-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:[e.jsxs("div",{className:"reference-guide-header",children:[e.jsxs("div",{className:"reference-guide-title",children:[e.jsx(W2,{className:"reference-guide-icon"}),e.jsxs("div",{children:[e.jsx("h2",{children:C.title}),e.jsxs("p",{className:"last-updated",children:["Last Updated: ",C.lastUpdated]})]})]}),e.jsxs("div",{className:"reference-guide-actions",children:[e.jsxs(Pe.button,{className:"download-reference-button",onClick:I,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[e.jsx(Bv,{className:"button-icon"}),"Download"]}),e.jsxs(Pe.button,{className:"download-script-button",onClick:W,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[e.jsx(Bv,{className:"button-icon"}),"Download Script"]})]})]}),e.jsx("div",{className:"reference-guide-content",children:Object.entries(C.sections).map(([B,Q])=>e.jsxs(Pe.div,{className:"reference-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.3},children:[e.jsxs("div",{className:"section-header",children:[Q.icon,e.jsx("h3",{children:Q.title})]}),e.jsxs("div",{className:"section-cards-flex",children:[e.jsxs("div",{className:"can-do-card",children:[e.jsxs("div",{className:"section-subheader",children:[e.jsx(jl,{className:"check-icon"}),e.jsx("h4",{children:Q.canDo.title})]}),Q.canDo.items.map((F,te)=>{if(!F.startsWith("•")){const ce=[];for(let z=te+1;z<Q.canDo.items.length&&Q.canDo.items[z].startsWith("•");z++)ce.push(Q.canDo.items[z]);return e.jsxs("div",{className:"main-with-subs",children:[e.jsx("div",{className:"main-item",children:F}),ce.length>0&&e.jsx("ul",{className:"service-list sub-items",children:ce.map((z,ee)=>e.jsx("li",{className:"sub-item",children:z},ee))})]},te)}return null})]}),e.jsxs("div",{className:"cant-do-card",children:[e.jsxs("div",{className:"section-subheader",children:[e.jsx(A2,{className:"x-icon"}),e.jsx("h4",{children:Q.cantDo.title})]}),e.jsx("ul",{className:"service-list cant-do-list",children:Q.cantDo.items.map((F,te)=>e.jsx("li",{className:"sub-item",children:F},te))})]})]})]},B))})]}),e.jsxs(Pe.div,{className:"faq-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},children:[e.jsx("h2",{className:"faq-section-title",children:"General FAQs"}),e.jsx("div",{className:"faq-grid",children:l.length>0?l.map((B,Q)=>e.jsxs(Pe.div,{className:`faq-card-public${a===Q?" expanded":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5+Q*.05},children:[e.jsxs("button",{className:`faq-question-public ${a===Q?"active":""}`,onClick:()=>N(Q),"aria-expanded":a===Q,children:[e.jsx("span",{className:"faq-q-icon",children:"❓"}),e.jsx("span",{className:"question-text",children:B.question}),e.jsx("span",{className:"expand-icon",children:a===Q?"−":"+"})]}),e.jsx("div",{className:"faq-divider-public"}),e.jsx(Mk,{mode:"wait",children:a===Q&&e.jsx(Pe.div,{className:"faq-answer-public active",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeInOut"},children:e.jsx("p",{children:B.answer})})})]},Q)):e.jsx("div",{className:"empty-faq",children:e.jsxs("div",{className:"empty-faq-content",children:[e.jsx("h3",{children:"No FAQ content available"}),e.jsx("p",{children:"FAQ content will be added here. Please check back later or contact support for assistance."})]})})})]}),e.jsx("div",{className:"faq-footer",children:e.jsxs("div",{className:"contact-section",children:[e.jsx("h3",{children:"Still have questions?"}),e.jsx("p",{children:"Contact our support team for additional assistance."}),e.jsxs("div",{className:"contact-info",children:[e.jsxs("div",{className:"contact-item",children:[e.jsx("span",{className:"contact-label",children:"Email:"}),e.jsx("span",{className:"contact-value",children:"contactsupervisors@longhome.com"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx("span",{className:"contact-label",children:"Phone:"}),e.jsx("span",{className:"contact-value",children:"1-800-LONG-HOME"})]})]})]})})]})]})},mr="serviceTopics",dh="customerServiceCategories",$j=[{topic:"appointments",title:"Appointment Management",description:"Handle all appointment-related inquiries and requests",steps:["Verify customer information","Check availability","Confirm details","Send confirmation"],tips:["Be flexible with timing","Offer alternatives","Document all changes"],keywords:["appointments","scheduling","management"],isUrgent:!1},{topic:"appointments",title:"Appointment Verification",description:"Verify and validate appointment details",steps:["Check appointment date and time","Verify customer contact information","Confirm service requirements","Review special instructions"],tips:["Double-check all details","Note any special requirements","Update customer records"],keywords:["verification","validation","details"],isUrgent:!1},{topic:"appointments",title:"Appointment Updates",description:"Handle appointment modifications and updates",steps:["Review requested changes","Check new availability","Update appointment details","Notify relevant parties"],tips:["Be prompt with updates","Maintain clear communication","Document all changes"],keywords:["updates","modifications","changes"],isUrgent:!1},{topic:"scheduling",title:"New Appointment Scheduling",description:"Process for scheduling new customer appointments",steps:["Collect customer contact information","Determine service requirements","Find optimal time slot","Confirm appointment details"],tips:["Offer multiple time options","Consider customer preferences","Check technician availability"],keywords:["new appointment","schedule","booking"],isUrgent:!1},{topic:"scheduling",title:"Bulk Scheduling",description:"Handle multiple appointment scheduling requests",steps:["Review all scheduling requests","Group similar appointments","Optimize schedule","Send batch confirmations"],tips:["Prioritize urgent requests","Maintain schedule balance","Consider travel time"],keywords:["bulk","multiple","group scheduling"],isUrgent:!1},{topic:"scheduling",title:"Priority Scheduling",description:"Handle urgent and priority scheduling requests",steps:["Assess urgency level","Check immediate availability","Coordinate with team","Confirm priority booking"],tips:["Respond quickly","Maintain clear communication","Follow up promptly"],keywords:["priority","urgent","immediate"],isUrgent:!0},{topic:"confirmation",title:"Appointment Confirmation",description:"Send and manage appointment confirmations",steps:["Prepare confirmation details","Send confirmation message","Request acknowledgment","Follow up if needed"],tips:["Include all necessary details","Use clear formatting","Provide contact information"],keywords:["confirmation","verify","acknowledge"],isUrgent:!1},{topic:"confirmation",title:"Reminder Notifications",description:"Send appointment reminders to customers",steps:["Schedule reminder timing","Prepare reminder message","Send notification","Track delivery status"],tips:["Send reminders in advance","Use multiple channels","Include cancellation policy"],keywords:["reminder","notification","alert"],isUrgent:!1},{topic:"cancellation",title:"Appointment Cancellation",description:"Process appointment cancellations",steps:["Record cancellation reason","Update schedule","Notify relevant parties","Offer rescheduling options"],tips:["Be understanding","Document cancellation reason","Maintain professional tone"],keywords:["cancellation","cancel","terminate"],isUrgent:!1},{topic:"cancellation",title:"Rescheduling Process",description:"Handle appointment rescheduling requests",steps:["Review rescheduling request","Check new availability","Update appointment details","Send new confirmation"],tips:["Be flexible with timing","Offer multiple options","Maintain clear communication"],keywords:["reschedule","rescheduling","change time"],isUrgent:!1},{topic:"followup",title:"Service Follow-up",description:"Conduct post-service follow-ups",steps:["Review service details","Contact customer","Gather feedback","Address any concerns"],tips:["Follow up promptly","Be attentive to feedback","Document all interactions"],keywords:["follow-up","feedback","service review"],isUrgent:!1},{topic:"followup",title:"Customer Satisfaction",description:"Measure and improve customer satisfaction",steps:["Send satisfaction survey","Analyze responses","Identify areas for improvement","Implement changes"],tips:["Make surveys concise","Act on feedback","Follow up on concerns"],keywords:["satisfaction","feedback","survey"],isUrgent:!1},{topic:"followup",title:"Issue Resolution",description:"Handle post-service issues and complaints",steps:["Listen to concerns","Investigate issue","Propose solution","Follow up on resolution"],tips:["Respond quickly","Be empathetic","Document all actions"],keywords:["issue","complaint","resolution"],isUrgent:!1}],OT=[{title:"Appointment Management",description:"Manage and handle appointment-related inquiries",icon:"📅",keySteps:["Verify appointment details","Check availability","Confirm changes"],quickTips:["Be proactive with scheduling","Offer alternatives when needed"],tags:["appointments","scheduling","management"]},{title:"Scheduling",description:"Handle new appointment scheduling requests",icon:"⏰",keySteps:["Collect customer information","Find suitable time slots","Confirm booking"],quickTips:["Offer multiple options","Consider customer preferences"],tags:["scheduling","booking","appointments"]},{title:"Cancellation",description:"Process appointment cancellations and rescheduling",icon:"❌",keySteps:["Verify cancellation reason","Process cancellation","Offer alternatives"],quickTips:["Be understanding","Offer rescheduling options"],tags:["cancellation","rescheduling","appointments"]},{title:"Confirmation",description:"Handle appointment confirmations and reminders",icon:"✅",keySteps:["Send confirmation details","Verify contact information","Set reminders"],quickTips:["Send reminders in advance","Include all necessary details"],tags:["confirmation","reminders","appointments"]},{title:"Follow-up",description:"Manage post-appointment follow-ups",icon:"📞",keySteps:["Check service satisfaction","Address any concerns","Schedule follow-up if needed"],quickTips:["Be prompt with follow-ups","Address issues proactively"],tags:["follow-up","feedback","service"]}],FT=async()=>{try{console.log("Checking if service topics need initialization...");const t=Ze(Ce(fe(),mr));if((await De(t)).empty){console.log("No service topics found. Initializing default topics...");const a=qt(fe());for(const i of $j){const l=Ae(Ce(fe(),mr));a.set(l,{...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}await a.commit(),console.log("Default service topics initialized successfully")}else console.log("Service topics already exist, skipping initialization")}catch(t){throw console.error("Error initializing default service topics:",t),t}},UT=async()=>{try{console.log("Checking if categories need initialization...");const t=Ze(Ce(fe(),dh));if((await De(t)).empty){console.log("No categories found. Initializing default categories...");const a=qt(fe());for(const i of OT){const l=Ae(Ce(fe(),dh));a.set(l,{...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}await a.commit(),console.log("Default categories initialized successfully")}else console.log("Categories already exist, skipping initialization")}catch(t){throw console.error("Error initializing default categories:",t),t}},zj=async()=>{try{await Wr(),console.log("Fetching service topics...");const t=Ze(Ce(fe(),mr)),s=await De(t);if(s.empty){console.log("No topics found, initializing default topics..."),await FT();const l=(await De(t)).docs.map(d=>({id:d.id,...d.data()}));return console.log(`Successfully fetched ${l.length} service topics`),l}const a=s.docs.map(i=>({id:i.id,...i.data()}));return console.log(`Successfully fetched ${a.length} service topics`),a}catch(t){throw console.error("Error fetching service topics:",t),new Error("Failed to fetch service topics. Please try again.")}},BT=async()=>{try{await Wr(),console.log("Fetching urgent service topics...");const t=Ze(Ce(fe(),mr),ss("isUrgent","==",!0),It("title")),a=(await De(t)).docs.map(i=>({id:i.id,...i.data()}));return console.log(`Successfully fetched ${a.length} urgent service topics`),a}catch(t){throw console.error("Error fetching urgent service topics:",t),new Error("Failed to fetch urgent service topics. Please try again.")}},WT=async t=>{try{await Wr(),console.log("Adding new service topic...");const s=await Yt(Ce(fe(),mr),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return console.log("Service topic added successfully with ID:",s.id),{id:s.id,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}catch(s){throw console.error("Error adding service topic:",s),new Error("Failed to add service topic. Please try again.")}},VT=async(t,s)=>{try{await Wr(),console.log("Updating service topic:",t);const a=Ae(fe(),mr,t);return await Wt(a,{...s,updatedAt:new Date().toISOString()}),console.log("Service topic updated successfully"),{id:t,...s,updatedAt:new Date().toISOString()}}catch(a){throw console.error("Error updating service topic:",a),new Error("Failed to update service topic. Please try again.")}},_T=async t=>{try{await Wr(),console.log("Deleting service topic:",t);const s=Ae(fe(),mr,t);return await us(s),console.log("Service topic deleted successfully"),!0}catch(s){throw console.error("Error deleting service topic:",s),new Error("Failed to delete service topic. Please try again.")}},$T=async()=>{try{await Wr(),console.log("Fetching service categories..."),await UT();const t=Ze(Ce(fe(),dh),It("title")),a=(await De(t)).docs.map(i=>({id:i.id,...i.data()}));return console.log(`Successfully fetched ${a.length} categories:`,a),a}catch(t){throw console.error("Error fetching categories:",t),new Error("Failed to fetch categories. Please try again.")}},zT=async()=>{try{await Wr();const t=Ce(fe(),mr),s=await De(t),a=qt(fe());return s.docs.forEach(i=>{a.delete(i.ref)}),$j.forEach(i=>{const l=Ae(t);a.set(l,{...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await a.commit(),!0}catch(t){throw console.error("Error resetting service topics:",t),t}},Nu=(t,s)=>{s=s.toLowerCase(),t=t.toLowerCase();let a=0,i=0,l=0;for(;i<t.length&&a<s.length;)s[a]===t[i]&&(l++,a++),i++;return a===s.length?l/s.length:0},HT={appointment:["apointment","appoinment","appoitment","apointmnt"],schedule:["scedule","scedual","schedual","scedul"],cancel:["cancell","cancle","cancell","cancle"],reschedule:["rescedule","rescedual","reschedual","rescedul"],confirm:["confrim","conferm","confurm","confrm"],follow:["follw","folow","foll","folow"],up:["up","up","up","up"],management:["managment","mangement","managment","mangmnt"],service:["servise","servis","servic","servis"],customer:["custumer","custmer","custmor","custmr"],help:["helpp","helpe","hel","helpe"],search:["searcgh","serch","searh","serach"],find:["fid","findd","fnd","find"],looking:["lookin","lookng","lookig","lookn"],assist:["asist","assistt","asst","asist"],home:["hom","hoem","hme","hom"],correct:["corrcet","corret","corrct","corret"],spell:["spel","spelll","spl","spel"],word:["wrd","wor","wod","wrd"],make:["mak","maek","mke","mak"],way:["wai","wae","wayy","wai"],more:["moer","mor","mre","moer"],helpful:["helpfull","helpfu","helful","helpfl"],something:["somehting","somthing","somethng","somethig"],wrong:["wron","wrog","wong","wronng"],will:["wil","wll","wil","wll"],try:["try","tri","tryy","try"],auto:["auto","aut","autoo","auto"],options:["aoptiinoin","optins","optons","opions"],bar:["bar","br","bar","br"]},qT={"how to":["how do i","how can i","how do you","how to"],"when can":["when can i","when is","when will","when should"],"where to":["where can i","where do i","where is","where to"],"what is":["whats","what is","what are","what do"],"why do":["why does","why is","why are","why do"],"can i":["can you","is it possible","is there a way","can i"],"need to":["want to","have to","should i","need to"],"looking for":["searching for","trying to find","want to find","looking for"]},YT=({onNavigate:t,searchQuery:s})=>{const[a,i]=y.useState("all"),[l,d]=y.useState(s||""),[u,m]=y.useState(!1),[g,v]=y.useState(null),[h,j]=y.useState([]),[w,D]=y.useState(!1),[S,b]=y.useState(-1),[C,A]=y.useState(!1),[L,N]=y.useState(null),[I,W]=y.useState([]),[B,Q]=y.useState(!0),[F,te]=y.useState(null),[ce,z]=y.useState([]),[ee,oe]=y.useState([]),re=[{id:"appointments",name:"Appointment Management",icon:"📅",color:"blue",features:["Calendar Integration","Automated Reminders","Conflict Resolution","Appointment History","Rescheduling Options"],description:"Manage your appointments efficiently with our comprehensive scheduling system"},{id:"scheduling",name:"Scheduling",icon:"⏰",color:"green",features:["Real-time Availability","Multiple Time Zones","Recurring Appointments","Buffer Time Settings"],description:"Schedule appointments with ease using our flexible booking system"},{id:"confirmation",name:"Confirmation",icon:"✅",color:"yellow",features:["Email Confirmations","SMS Notifications","Calendar Invites","Reminder Settings"],description:"Keep track of your appointments with automated confirmations"},{id:"cancellation",name:"Cancellation",icon:"❌",color:"red",features:["Cancellation Policy","Rescheduling Options","Waitlist Management","No-show Prevention"],description:"Handle appointment cancellations and rescheduling efficiently"},{id:"followup",name:"Follow-up",icon:"📞",color:"purple",features:["Post-appointment Surveys","Feedback Collection","Follow-up Scheduling","Communication History"],description:"Maintain relationships with automated follow-up systems"}];y.useEffect(()=>{le()},[]);const le=async()=>{try{Q(!0),te(null),console.log("Loading customer service data...");const X=await $T();console.log("Loaded categories:",X),W(X);const _=await zj();console.log("Loaded service topics:",_),z(_);const V=await BT();console.log("Loaded urgent topics:",V),oe(V),console.log("All topics combined:",[..._,...V])}catch(X){console.error("Error loading data:",X),te("Failed to load data. Please try again.")}finally{Q(!1)}},O=[...ce,...ee].map((X,_)=>({...X,uniqueId:`${X.id}-${_}`})),q=X=>{const _=X.toLowerCase();for(const[V,J]of Object.entries(HT))if(J.includes(_))return V;return X},Y=X=>{let _=X.toLowerCase();for(const[V,J]of Object.entries(qT))for(const ae of J)_.includes(ae)&&(_=_.replace(ae,V));return _.split(" ").map(V=>q(V)).join(" ")},T=X=>{if(!X.trim())return[];const _=Y(X),V=[];return O.forEach(J=>{const ae=Nu(J.title,_),ge=Nu(J.description,_),We=J.keywords.map(vt=>Nu(vt,_)),ze=Math.max(...We),Ge=Math.max(ae,ge,ze);Ge>.3&&V.push({...J,relevanceScore:Ge})}),V.sort((J,ae)=>ae.relevanceScore-J.relevanceScore)},R=X=>{const _=X.target.value;d(_),D(!0),b(-1);const V=T(_);j(V)},E=X=>{if(w)switch(X.key){case"ArrowDown":X.preventDefault(),b(_=>_<h.length-1?_+1:_);break;case"ArrowUp":X.preventDefault(),b(_=>_>0?_-1:_);break;case"Enter":X.preventDefault(),S>=0&&S<h.length&&f(h[S]);break;case"Escape":D(!1);break}},f=X=>{d(X.title),D(!1),v(X),m(!0)},P=y.useMemo(()=>{const X=l.toLowerCase().trim();return O.filter(_=>{const V=a==="all"||_.topic===a;if(!X)return V;const J=_.title?.toLowerCase().includes(X)||_.description?.toLowerCase().includes(X)||_.steps?.some(ae=>ae.toLowerCase().includes(X))||_.tips?.some(ae=>ae.toLowerCase().includes(X))||_.keywords?.some(ae=>ae.toLowerCase().includes(X));return V&&J}).sort((_,V)=>_.title.localeCompare(V.title))},[O,a,l]),M=X=>{v(X),m(!0)},K=()=>{m(!1),v(null)},ue=X=>{A(!1),d(""),N(X),m(!0)},be=(X,_)=>{},pe=()=>a==="appointments"?e.jsxs("div",{className:"appointment-management",children:[e.jsxs("div",{className:"appointment-actions",children:[e.jsx("button",{onClick:()=>be(),children:"Schedule New"}),e.jsx("button",{onClick:()=>be(),children:"Reschedule"}),e.jsx("button",{onClick:()=>be(),children:"Cancel"}),e.jsx("button",{onClick:()=>be(),children:"Confirm"})]}),e.jsx("div",{className:"appointment-calendar"}),e.jsx("div",{className:"appointment-list"})]}):null;return e.jsxs("div",{className:"customer-service-container",children:[e.jsx(jh,{title:"Customer Service",subtitle:"Manage customer service interactions and support"}),B?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading customer service data..."})]}):F?e.jsxs("div",{className:"error-container",children:[e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"⚠️"}),e.jsx("span",{children:F})]}),e.jsx("button",{className:"retry-button",onClick:le,children:"Retry"})]}):e.jsxs("div",{className:"customer-service-content",children:[e.jsxs("div",{className:"customer-service-header",children:[e.jsx("h1",{className:"customer-service-title",children:"Customer Service"}),e.jsx("div",{className:"header-navigation",children:e.jsxs("div",{className:"quick-nav",children:[e.jsxs("button",{onClick:()=>t("home"),className:"nav-button home-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs("button",{onClick:()=>t("rebuttals"),className:`nav-button ${window.location.pathname.includes("rebuttals")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs("button",{onClick:()=>t("disposition"),className:`nav-button ${window.location.pathname.includes("disposition")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 3H15V5H9V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs("button",{onClick:()=>t("customerService"),className:`nav-button ${window.location.pathname.includes("customerService")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs("button",{onClick:()=>t("faq"),className:`nav-button ${window.location.pathname.includes("faq")?"active":""}`,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.30197 14.92 10.02C14.92 12 11.92 13 11.92 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 17H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"FAQ"]}),e.jsxs("button",{onClick:()=>t("scheduleScript"),className:`nav-button ${window.location.pathname.includes("scheduleScript")?"active":""}`,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Schedule Script"]})]})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx(Vr,{value:l,onChange:R,onClear:()=>{d(""),D(!1),j([])},placeholder:"Search service topics...",onKeyDown:E}),C&&e.jsxs("div",{className:"quick-actions-dropdown",children:[e.jsxs("div",{className:"quick-actions-header",children:[e.jsx("h3",{children:"Quick Actions"}),e.jsx("p",{children:"Select an urgent rebuttal to handle immediately"})]}),ee.map(X=>e.jsxs("div",{className:"quick-action-item",onClick:()=>ue(X),children:[e.jsx("span",{className:"quick-action-icon",children:"⚡"}),e.jsxs("div",{className:"quick-action-content",children:[e.jsx("h4",{children:X.title}),e.jsx("p",{children:X.description})]})]},X.id))]}),w&&h.length>0&&e.jsx("div",{className:"search-suggestions-dropdown",id:"search-suggestions",children:h.map((X,_)=>e.jsxs("div",{id:`suggestion-${_}`,className:`suggestion-item ${_===S?"selected":""}`,onClick:()=>f(X),role:"option","aria-selected":_===S,children:[e.jsx("span",{className:"suggestion-icon",children:re.find(V=>V.id===X.topic)?.icon||"📋"}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h4",{children:X.title}),e.jsx("p",{children:X.description})]})]},X.uniqueId))}),l&&e.jsxs("div",{className:"search-results-count",children:[P.length," result",P.length!==1?"s":""," found"]})]}),e.jsxs("div",{className:"service-layout",children:[e.jsxs("div",{className:"service-sidebar",children:[e.jsx("h2",{className:"sidebar-title",children:"Service Topics"}),e.jsxs("div",{className:"topic-buttons",children:[e.jsxs("button",{onClick:()=>i("all"),className:`topic-button ${a==="all"?"active":""}`,children:[e.jsx("span",{className:"topic-icon",children:"📋"}),e.jsx("span",{className:"topic-name",children:"All Topics"})]}),re.map(X=>e.jsxs("button",{onClick:()=>i(X.id),className:`topic-button ${a===X.id?"active":""}`,children:[e.jsx("span",{className:"topic-icon",children:X.icon}),e.jsx("span",{className:"topic-name",children:X.name})]},X.id))]})]}),e.jsx("div",{className:"service-main",children:e.jsx("div",{className:"categories-grid",children:P.length===0?e.jsx("div",{className:"no-data-message",children:e.jsx("p",{children:"No service topics found for the selected category."})}):P.map(X=>e.jsxs("div",{className:"category-card",onClick:()=>M(X),children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:"category-icon",children:re.find(_=>_.id===X.topic)?.icon||"📋"}),e.jsx("h3",{children:X.title})]}),e.jsx("div",{className:"category-description",children:e.jsx("p",{children:X.description})}),e.jsxs("div",{className:"category-details",children:[e.jsxs("div",{className:"key-steps",children:[e.jsx("h4",{children:"Key Steps"}),e.jsx("ul",{children:X.steps.slice(0,3).map((_,V)=>e.jsx("li",{children:_},V))})]}),e.jsxs("div",{className:"quick-tips",children:[e.jsx("h4",{children:"Quick Tips"}),e.jsx("ul",{children:X.tips.slice(0,2).map((_,V)=>e.jsx("li",{children:_},V))})]})]}),e.jsx("div",{className:"category-tags",children:X.keywords.map((_,V)=>e.jsx("span",{className:"category-tag",children:_},V))})]},X.uniqueId))})})]})]}),u&&g&&e.jsx("div",{className:"modal-overlay",onClick:K,children:e.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:g.title}),e.jsx("button",{className:"modal-close",onClick:K,children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"modal-section",children:[e.jsx("h3",{children:"Description"}),e.jsx("p",{children:g.description})]}),e.jsxs("div",{className:"modal-section",children:[e.jsx("h3",{children:"Steps"}),e.jsx("ol",{children:g.steps.map((X,_)=>e.jsx("li",{children:X},_))})]}),e.jsxs("div",{className:"modal-section",children:[e.jsx("h3",{children:"Tips"}),e.jsx("ul",{children:g.tips.map((X,_)=>e.jsx("li",{children:X},_))})]}),e.jsxs("div",{className:"modal-section",children:[e.jsx("h3",{children:"Related Keywords"}),e.jsx("div",{className:"keyword-tags",children:g.keywords.map((X,_)=>e.jsx("span",{className:"keyword-tag",children:X},_))})]})]})]})}),pe()]})},GT="modulepreload",QT=function(t){return"/"+t},sx={},nx=function(s,a,i){let l=Promise.resolve();if(a&&a.length>0){let u=function(v){return Promise.all(v.map(h=>Promise.resolve(h).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=m?.nonce||m?.getAttribute("nonce");l=u(a.map(v=>{if(v=QT(v),v in sx)return;sx[v]=!0;const h=v.endsWith(".css"),j=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${j}`))return;const w=document.createElement("link");if(w.rel=h?"stylesheet":GT,h||(w.as="script"),w.crossOrigin="",w.href=v,g&&w.setAttribute("nonce",g),document.head.appendChild(w),h)return new Promise((D,S)=>{w.addEventListener("load",D),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${v}`)))})}))}function d(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return l.then(u=>{for(const m of u||[])m.status==="rejected"&&d(m.reason);return s().catch(d)})};let La,uh;try{({db:La,auth:uh}=await nx(()=>import("./nodeConfig-BeIGTHyp.js"),__vite__mapDeps([0,1])))}catch{({db:La,auth:uh}=await nx(()=>import("./config-COIi6VQ1.js"),__vite__mapDeps([2,1])))}const ql="rebuttals",Yl=()=>{if(typeof window>"u")return{uid:"script-admin"};const t=uh.currentUser;if(!t)throw new Error("User must be authenticated to perform this action");return t},KT=async t=>{try{const s=Yl();return(await Yt(Ce(La,ql),{...t,createdBy:s.uid,createdAt:Ts(),updatedAt:Ts()})).id}catch(s){throw console.error("Error adding rebuttal:",s),s.code==="permission-denied"?new Error("You do not have permission to add rebuttals. Please make sure you are logged in as an admin."):s}},wa=async(t,s)=>{try{const a=Yl(),i=Ae(La,ql,t);await Wt(i,{...s,updatedBy:a.uid,updatedAt:Ts()})}catch(a){throw console.error("Error updating rebuttal:",a),a.code==="permission-denied"?new Error("You do not have permission to update rebuttals. Please make sure you are logged in as an admin."):a}},rx=async t=>{try{Yl();const s=Ae(La,ql,t);await us(s)}catch(s){throw console.error("Error deleting rebuttal:",s),s.code==="permission-denied"?new Error("You do not have permission to delete rebuttals. Please make sure you are logged in as an admin."):s}},ax=async()=>{try{Yl();const t=Ze(Ce(La,ql),It("createdAt","desc"));return(await De(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error getting rebuttals:",t),t.code==="permission-denied"?new Error("You do not have permission to view rebuttals. Please make sure you are logged in."):t}},ix=["Price Concern","Time Constraint","Spouse Decision","Budget Issues","Not Ready","Competitor Comparison","Quality Concerns","Installation Time","Warranty Questions","Financing Options","Custom Design","Material Selection","Maintenance","Rescheduling","Emergency Service"],hh=({rebuttal:t,onSave:s})=>{const[a,i]=y.useState({title:"",summary:"",content:{pt1:"",pt2:""},tags:[],category:"",situationOverview:"",rebuttalStrategy:"",tips:[]}),[l,d]=y.useState(!1),[u,m]=y.useState(""),[g,v]=y.useState(""),[h,j]=y.useState(""),[w,D]=y.useState(!1),[S,b]=y.useState([]),[C,A]=y.useState([]),[L,N]=y.useState(!0),I=ms(),{id:W}=bx(),B=!!W||!!t;y.useEffect(()=>{Q()},[]),y.useEffect(()=>{if(t&&B){console.log("Populating form with rebuttal data:",t);const O={title:t.title||"",summary:t.summary||"",content:{pt1:typeof t.content=="object"?t.content.pt1||"":t.content||"",pt2:typeof t.content=="object"&&t.content.pt2||""},tags:t.tags||[],category:t.category||"",situationOverview:t.situationOverview||"",rebuttalStrategy:t.rebuttalStrategy||"",tips:t.tips||[]};console.log("Setting form data to:",O),i(O)}},[t,B]);const Q=async()=>{try{N(!0);const O=await lr.getAllCategories();A(O)}catch(O){console.error("Error loading categories:",O)}finally{N(!1)}},F=O=>{const{name:q,value:Y}=O.target;i(T=>({...T,[q]:Y}))},te=(O,q)=>{i(Y=>({...Y,content:{...Y.content,[O]:q}}))},ce=O=>{const q=O.target.value;if(v(q),q.trim()){const Y=ix.filter(T=>T.toLowerCase().includes(q.toLowerCase())&&!a.tags.includes(T));b(Y),D(!0)}else b([]),D(!1)},z=O=>{const q=O||g.trim();q&&!a.tags.includes(q)&&(i(Y=>({...Y,tags:[...Y.tags,q]})),v(""),D(!1),b([]))},ee=O=>{i(q=>({...q,tags:q.tags.filter(Y=>Y!==O)}))},oe=()=>{h.trim()&&!a.tips.includes(h.trim())&&(i(O=>({...O,tips:[...O.tips,h.trim()]})),j(""))},re=O=>{i(q=>({...q,tips:q.tips.filter(Y=>Y!==O)}))},le=async O=>{O.preventDefault(),m(""),d(!0);try{const q={...a,updatedAt:new Date().toISOString()};if(B){const Y=t?.id||W;await wa(Y,q)}else q.createdAt=new Date().toISOString(),await KT(q);s?s():I("/admin/dashboard")}catch(q){console.error("Error saving rebuttal:",q),m("Error saving rebuttal")}finally{d(!1)}};return e.jsxs("div",{className:"edit-admin-form",children:[u&&e.jsx("div",{className:"error-message",children:u}),e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"📝"}),e.jsx("h3",{children:"Basic Information"}),e.jsx("p",{children:"Essential details about the rebuttal"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"title",children:[e.jsx("span",{className:"label-icon",children:"📝"}),e.jsx("span",{className:"label-text",children:"Title"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:F,required:!0,placeholder:"Enter rebuttal title",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"📝"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"category",children:[e.jsx("span",{className:"label-icon",children:"🏷️"}),e.jsx("span",{className:"label-text",children:"Category"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsxs("select",{id:"category",name:"category",value:a.category,onChange:F,required:!0,disabled:L,className:"form-select",children:[e.jsx("option",{value:"",children:"Select a category"}),C.map(O=>e.jsxs("option",{value:O.name,children:[O.icon," ",O.name]},O.id))]}),e.jsx("div",{className:"input-icon",children:"🏷️"})]}),L&&e.jsx("div",{className:"loading-indicator",children:"Loading categories..."})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"summary",children:[e.jsx("span",{className:"label-icon",children:"📋"}),e.jsx("span",{className:"label-text",children:"Summary"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"summary",name:"summary",value:a.summary,onChange:F,required:!0,rows:"3",placeholder:"Enter a brief summary of the rebuttal",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"📋"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"🎯"}),e.jsx("h3",{children:"Strategy & Content"}),e.jsx("p",{children:"Define the approach and detailed responses"})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"situationOverview",children:[e.jsx("span",{className:"label-icon",children:"🔍"}),e.jsx("span",{className:"label-text",children:"Situation Overview"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"situationOverview",name:"situationOverview",value:a.situationOverview,onChange:F,required:!0,rows:"4",placeholder:"Describe the situation or objection being addressed",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"🔍"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"rebuttalStrategy",children:[e.jsx("span",{className:"label-icon",children:"⚡"}),e.jsx("span",{className:"label-text",children:"Rebuttal Strategy"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"rebuttalStrategy",name:"rebuttalStrategy",value:a.rebuttalStrategy,onChange:F,required:!0,rows:"4",placeholder:"Describe the overall strategy for this rebuttal",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"⚡"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"content-pt1",children:[e.jsx("span",{className:"label-icon",children:"💬"}),e.jsx("span",{className:"label-text",children:"Initial Response (Part 1)"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"content-pt1",value:a.content.pt1,onChange:O=>te("pt1",O.target.value),required:!0,rows:"6",placeholder:"Enter the initial response to the objection...",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"💬"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"content-pt2",children:[e.jsx("span",{className:"label-icon",children:"🔄"}),e.jsx("span",{className:"label-text",children:"Follow-up Response (Part 2)"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"content-pt2",value:a.content.pt2,onChange:O=>te("pt2",O.target.value),rows:"6",placeholder:"Enter the follow-up response if the initial response doesn't work...",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"🔄"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"🏷️"}),e.jsx("h3",{children:"Tags & Tips"}),e.jsx("p",{children:"Organize and enhance your rebuttal"})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{children:[e.jsx("span",{className:"label-icon",children:"💡"}),e.jsx("span",{className:"label-text",children:"Tips"})]}),e.jsxs("div",{className:"tags-input-container",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",value:h,onChange:O=>j(O.target.value),placeholder:"Add a tip (e.g., 'Stay calm and professional')",className:"form-input",onKeyPress:O=>{O.key==="Enter"&&(O.preventDefault(),oe())}}),e.jsx("div",{className:"input-icon",children:"💡"})]}),e.jsx("button",{type:"button",onClick:oe,className:"add-tag-btn",children:"Add Tip"})]}),e.jsx("div",{className:"tags-container",children:a.tips.map((O,q)=>e.jsxs("span",{className:"tag",children:["💡 ",O,e.jsx("button",{type:"button",onClick:()=>re(O),className:"remove-tag-btn",children:"×"})]},q))})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{children:[e.jsx("span",{className:"label-icon",children:"🏷️"}),e.jsx("span",{className:"label-text",children:"Tags"})]}),e.jsxs("div",{className:"tags-input-container",children:[e.jsxs("div",{className:"tags-input-wrapper",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",value:g,onChange:ce,placeholder:"Add a tag or select from suggestions",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"🏷️"})]}),w&&S.length>0&&e.jsx("div",{className:"tags-dropdown",children:S.map((O,q)=>e.jsx("div",{className:"tag-suggestion",onClick:()=>z(O),children:O},q))})]}),e.jsx("button",{type:"button",onClick:()=>z(),className:"add-tag-btn",disabled:!g.trim(),children:"Add Tag"})]}),e.jsx("div",{className:"tags-container",children:a.tags.map((O,q)=>e.jsxs("span",{className:"tag",children:["#",O,e.jsx("button",{type:"button",onClick:()=>ee(O),className:"remove-tag-btn",children:"×"})]},q))}),e.jsxs("div",{className:"premade-tags",children:[e.jsx("h4",{children:"Common Tags:"}),e.jsx("div",{className:"premade-tags-list",children:ix.map((O,q)=>e.jsx("button",{type:"button",onClick:()=>z(O),className:"premade-tag",disabled:a.tags.includes(O),children:O},q))})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:s,className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"submit-btn",children:l?"Saving...":B?"Update":"Save"})]})]})]})},JT=()=>{const[t,s]=y.useState([]),[a,i]=y.useState(!0),[l,d]=y.useState(""),[u,m]=y.useState(""),[g,v]=y.useState(""),[h,j]=y.useState("all"),[w,D]=y.useState(!1),[S,b]=y.useState(null),[C,A]=y.useState([]),[L,N]=y.useState(""),[I,W]=y.useState(!1),[B,Q]=y.useState([]);ms();const F=y.useRef(null);y.useEffect(()=>{te()},[]),y.useEffect(()=>{w&&F.current&&(F.current.scrollTop=0)},[w]);const te=async()=>{try{i(!0);const f=await ax(),P=await ce(f);s(P)}catch(f){console.error("Error loading rebuttals:",f),d("Failed to load rebuttals")}finally{i(!1)}},ce=async(f,P=!0)=>{try{W(!0),Q([]);const M=await lr.getAllCategories(),K={};M.forEach(X=>{K[X.id]=X.name});let ue=!1;const be=[],pe=[];for(const X of f){const _=X.category;let V={...X};if(_&&_.length===20&&!_.includes(" ")){const J=K[_];J?(await wa(X.id,{...X,category:J}),V.category=J,ue=!0):pe.push(`Could not find category name for UID: ${_} (Rebuttal: ${X.title})`)}be.push(V)}return P&&pe.length>0&&(Q(pe),setTimeout(()=>Q([]),1e4)),W(!1),be}catch(M){return W(!1),console.error("Error checking/fixing category names:",M),f}},z=async()=>{W(!0);const f=await ax(),P=await ce(f,!0);s(P),W(!1)},ee=async f=>{if(window.confirm("Are you sure you want to delete this rebuttal? This action cannot be undone."))try{await rx(f),s(t.filter(P=>P.id!==f))}catch(P){console.error("Error deleting rebuttal:",P),d("Failed to delete rebuttal")}},oe=async f=>{try{await wa(f,{archived:!0,archivedAt:new Date().toISOString()}),s(t.map(P=>P.id===f?{...P,archived:!0,archivedAt:new Date().toISOString()}:P))}catch(P){console.error("Error archiving rebuttal:",P),d("Failed to archive rebuttal")}},re=async f=>{try{await wa(f,{archived:!1,archivedAt:null}),s(t.map(P=>P.id===f?{...P,archived:!1,archivedAt:null}:P))}catch(P){console.error("Error unarchiving rebuttal:",P),d("Failed to unarchive rebuttal")}},le=f=>{const P={...f,summary:f.summary||f.objection||"",situationOverview:f.situationOverview||f.summary||f.objection||"",rebuttalStrategy:f.rebuttalStrategy||"",content:f.content?typeof f.content=="object"?f.content:{pt1:f.content,pt2:""}:f.response?typeof f.response=="object"?f.response:{pt1:f.response,pt2:""}:{pt1:"",pt2:""},tips:f.tips||[]};b(P),D(!0)},O=()=>{console.log("handleFormClose called");const f=document.querySelector(".modal-content");f?(f.style.animation="modalSlideOut 0.2s ease-in forwards",setTimeout(()=>{D(!1),b(null),te()},200)):(D(!1),b(null),te())},q=async()=>{if(!(!L||C.length===0))try{L==="delete"?window.confirm(`Are you sure you want to delete ${C.length} rebuttals?`)&&(await Promise.all(C.map(f=>rx(f))),s(t.filter(f=>!C.includes(f.id)))):L==="archive"?(await Promise.all(C.map(f=>wa(f,{archived:!0,archivedAt:new Date().toISOString()}))),s(t.map(f=>C.includes(f.id)?{...f,archived:!0,archivedAt:new Date().toISOString()}:f))):L==="unarchive"&&(await Promise.all(C.map(f=>wa(f,{archived:!1,archivedAt:null}))),s(t.map(f=>C.includes(f.id)?{...f,archived:!1,archivedAt:null}:f))),A([]),N("")}catch(f){console.error("Error performing bulk action:",f),d("Failed to perform bulk action")}},Y=()=>{C.length===R.length?A([]):A(R.map(f=>f.id))},T=f=>{A(P=>P.includes(f)?P.filter(M=>M!==f):[...P,f])},R=t.filter(f=>{const P=f.title?.toLowerCase().includes(u.toLowerCase())||f.summary?.toLowerCase().includes(u.toLowerCase())||f.category?.toLowerCase().includes(u.toLowerCase())||f.tags?.some(ue=>ue.toLowerCase().includes(u.toLowerCase())),M=!g||f.category===g,K=h==="all"||h==="archived"&&f.archived||h==="active"&&!f.archived;return P&&M&&K}),E=[...new Set(t.map(f=>f.category).filter(Boolean))];return e.jsxs(e.Fragment,{children:[w&&e.jsx("div",{className:"edit-admin-modal-overlay",onClick:O,children:e.jsxs("div",{className:"edit-admin-modal-container",ref:F,onClick:f=>f.stopPropagation(),children:[e.jsx("div",{className:"edit-admin-modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-icon-section",children:[e.jsx("div",{className:"modal-main-icon",children:S?"✏️":"➕"}),e.jsxs("div",{className:"modal-title-group",children:[e.jsx("h2",{children:S?"Edit Rebuttal":"Create New Rebuttal"}),e.jsx("p",{children:"Manage rebuttal content and settings"}),S&&e.jsxs("div",{className:"company-status-badge",children:[e.jsx("span",{className:`status-indicator ${S.status||"active"}`}),e.jsx("span",{className:"status-text",children:S.status||"active"})]})]})]}),e.jsx("button",{className:"modal-close-btn",onClick:O,"aria-label":"Close modal",children:e.jsx("span",{children:"✕"})})]})}),e.jsx("div",{className:"modal-body",children:e.jsx(hh,{rebuttal:S,onSave:O})})]})}),e.jsxs("div",{className:"rebuttal-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Rebuttal Management"}),e.jsx("p",{children:"Manage all rebuttals in the system. Create, edit, archive, and delete rebuttals."})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"add-rebuttal-btn",onClick:()=>{b(null),D(!0)},children:"➕ Add New Rebuttal"}),e.jsx("button",{className:"fix-categories-btn",onClick:z,disabled:I,style:{marginLeft:"1rem",background:"#f39c12",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:I?"not-allowed":"pointer"},children:I?"Fixing...":"Fix Category Names"})]})]}),B.length>0&&e.jsxs("div",{className:"fix-warning-toast",children:[e.jsx("strong",{children:"Warning:"}),e.jsx("ul",{children:B.map((f,P)=>e.jsx("li",{children:f},P))})]}),l&&e.jsxs("div",{className:"error-message",children:[l,e.jsx("button",{onClick:()=>d(""),children:"×"})]}),e.jsxs("div",{className:"filters-section",children:[e.jsx(Vr,{value:u,onChange:f=>m(f.target.value),onClear:()=>m(""),placeholder:"Search rebuttals...",className:"admin-searchbar"}),e.jsxs("div",{className:"filter-controls",children:[e.jsxs("select",{value:g,onChange:f=>v(f.target.value),className:"filter-select",children:[e.jsx("option",{value:"",children:"All Categories"}),E.map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsxs("select",{value:h,onChange:f=>j(f.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),C.length>0&&e.jsxs("div",{className:"bulk-actions",children:[e.jsxs("div",{className:"bulk-info",children:[C.length," rebuttal(s) selected"]}),e.jsxs("div",{className:"bulk-controls",children:[e.jsxs("select",{value:L,onChange:f=>N(f.target.value),className:"bulk-select",children:[e.jsx("option",{value:"",children:"Select Action"}),e.jsx("option",{value:"archive",children:"Archive Selected"}),e.jsx("option",{value:"unarchive",children:"Unarchive Selected"}),e.jsx("option",{value:"delete",children:"Delete Selected"})]}),e.jsx("button",{onClick:q,disabled:!L,className:"bulk-action-btn",children:"Apply"})]})]}),e.jsxs("div",{className:"rebuttals-table-container",children:[e.jsx("div",{className:"mobile-rebuttal-cards",children:R.map(f=>e.jsxs("div",{className:`rebuttal-card${f.archived?" archived":""}`,children:[e.jsxs("div",{className:"rebuttal-card-header",children:[e.jsx("div",{className:"rebuttal-card-title",children:f.title}),e.jsx("span",{className:"category-badge",children:f.category})]}),e.jsx("div",{className:"rebuttal-card-summary",children:f.summary}),e.jsxs("div",{className:"rebuttal-card-tags",children:[f.tags?.slice(0,3).map((P,M)=>e.jsxs("span",{className:"tag-badge",children:["#",P]},M)),f.tags?.length>3&&e.jsxs("span",{className:"more-tags",children:["+",f.tags.length-3]})]}),e.jsxs("div",{className:"rebuttal-card-status",children:[e.jsx("span",{className:`status-badge ${f.archived?"archived":"active"}`,children:f.archived?"Archived":"Active"}),e.jsx("span",{className:"date-info",children:new Date(f.createdAt?.toDate?.()||f.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"rebuttal-card-actions",children:[e.jsx("button",{onClick:()=>le(f),className:"action-btn edit",title:"Edit",children:"✏️"}),f.archived?e.jsx("button",{onClick:()=>re(f.id),className:"action-btn unarchive",title:"Unarchive",children:"📦"}):e.jsx("button",{onClick:()=>oe(f.id),className:"action-btn archive",title:"Archive",children:"📦"}),e.jsx("button",{onClick:()=>ee(f.id),className:"action-btn delete",title:"Delete",children:"🗑️"})]})]},f.id))}),e.jsxs("table",{className:"rebuttals-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:C.length===R.length,onChange:Y,className:"select-all-checkbox"})}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Tags"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:R.map(f=>e.jsxs("tr",{className:f.archived?"archived":"",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:C.includes(f.id),onChange:()=>T(f.id),className:"rebuttal-checkbox"})}),e.jsx("td",{children:e.jsxs("div",{className:"rebuttal-title",children:[e.jsx("strong",{children:f.title}),e.jsx("p",{className:"rebuttal-summary",children:f.summary})]})}),e.jsx("td",{children:e.jsx("span",{className:"category-badge",children:f.category})}),e.jsx("td",{children:e.jsxs("div",{className:"tags-container",children:[f.tags?.slice(0,3).map((P,M)=>e.jsxs("span",{className:"tag-badge",children:["#",P]},M)),f.tags?.length>3&&e.jsxs("span",{className:"more-tags",children:["+",f.tags.length-3]})]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${f.archived?"archived":"active"}`,children:f.archived?"Archived":"Active"})}),e.jsx("td",{children:e.jsx("div",{className:"date-info",children:new Date(f.createdAt?.toDate?.()||f.createdAt).toLocaleDateString()})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:()=>le(f),className:"action-btn edit",title:"Edit",children:"✏️"}),f.archived?e.jsx("button",{onClick:()=>re(f.id),className:"action-btn unarchive",title:"Unarchive",children:"📦"}):e.jsx("button",{onClick:()=>oe(f.id),className:"action-btn archive",title:"Archive",children:"📦"}),e.jsx("button",{onClick:()=>ee(f.id),className:"action-btn delete",title:"Delete",children:"🗑️"})]})})]},f.id))})]})]}),e.jsxs("div",{className:"stats-footer",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Total:"}),e.jsx("span",{className:"stat-value",children:t.length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Active:"}),e.jsx("span",{className:"stat-value",children:t.filter(f=>!f.archived).length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Archived:"}),e.jsx("span",{className:"stat-value",children:t.filter(f=>f.archived).length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Categories:"}),e.jsx("span",{className:"stat-value",children:E.length})]})]})]})]})},ZT=()=>{const[t,s]=y.useState([]),[a,i]=y.useState(!0),[l,d]=y.useState(null),[u,m]=y.useState(null),[g,v]=y.useState(!1),[h,j]=y.useState(!1),[w,D]=y.useState(!1),[S,b]=y.useState(!1),[C,A]=y.useState(null),[L,N]=y.useState({name:"",icon:"",color:"",isActive:!0,description:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),I=["📊","📈","📉","📋","📝","📌","📍","🔍","🔎","🔐","🔑","🔒","🔓","💼","📁","📂","🗂️","📅","📆","🗓️","⏰","⏱️","⏲️","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🎯","🎨","🎭","🎪","🎟️","🎫","🎬","🎥","📺","📷","📹","🎞️","📽️","🎮","🎲","🧩","🎨","🎭","🎪","🎟️","🎫","🎬","🎥","📺","📷","📹","🎞️","📽️","🎮","🎲","🧩","🎯","🎨","🎪"];y.useEffect(()=>{W()},[]);const W=async()=>{try{i(!0);const ee=(await lr.getAllCategories()).map(oe=>({...oe,isActive:oe.isActive??!0}));s(ee),d(null)}catch(z){console.error("Error loading categories:",z),d("Failed to load categories. Please try again.")}finally{i(!1)}},B=z=>{if(!z)return"N/A";try{if(z.toDate)return z.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});const ee=new Date(z);return isNaN(ee.getTime())?"N/A":ee.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(ee){return console.error("Error formatting date:",ee),"N/A"}},Q=async z=>{z.preventDefault();try{const ee={...L,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await lr.addCategory(ee),v(!1),N({name:"",icon:"",color:"",isActive:!0,description:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),W()}catch(ee){console.error("Error adding category:",ee),d("Failed to add category. Please try again.")}},F=async z=>{z.preventDefault();try{const ee={...u,isActive:u.isActive??!0,updatedAt:new Date().toISOString()};await lr.updateCategory(u.id,ee),j(!1),m(null),W()}catch(ee){console.error("Error updating category:",ee),d("Failed to update category. Please try again.")}},te=async()=>{try{await lr.deleteCategory(C.id),D(!1),A(null),W()}catch(z){console.error("Error deleting category:",z),d("Failed to delete category. Please try again.")}},ce=z=>{g?N({...L,icon:z}):h&&u&&m({...u,icon:z}),b(!1)};return a?e.jsx("div",{className:"loading",children:"Loading categories..."}):l?e.jsx("div",{className:"error",children:l}):e.jsxs("div",{className:"category-management",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("h2",{children:"Manage Categories"}),e.jsx("button",{className:"add-button",onClick:()=>v(!0),children:"Add New Category"})]}),e.jsx("div",{className:"categories-list redesigned",children:t.map(z=>e.jsxs("div",{className:"category-card redesigned",children:[e.jsxs("div",{className:"category-card-main",children:[e.jsx("div",{className:"category-card-icon",style:{background:z.color?`linear-gradient(135deg, ${z.color}33 0%, #fff 100%)`:"#f3f4f6"},children:e.jsx("span",{className:"icon-emoji",children:z.icon})}),e.jsxs("div",{className:"category-card-info",children:[e.jsx("div",{className:"category-card-title",children:z.name}),z.description&&e.jsx("div",{className:"category-card-desc",children:z.description}),e.jsx("div",{className:"category-card-badges",children:e.jsx("span",{className:`status-badge ${z.isActive?"active":"inactive"}`,children:z.isActive?"Active":"Inactive"})})]})]}),e.jsxs("div",{className:"category-card-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Created",children:"📅"})," ",e.jsx("span",{className:"meta-label",children:"Created:"})," ",e.jsx("span",{className:"meta-value",children:B(z.createdAt)})]}),z.updatedAt&&e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Updated",children:"🕒"})," ",e.jsx("span",{className:"meta-label",children:"Updated:"})," ",e.jsx("span",{className:"meta-value",children:B(z.updatedAt)})]})]}),e.jsxs("div",{className:"category-card-actions",children:[e.jsxs("button",{className:"action-button edit-button",onClick:()=>{m(z),j(!0)},children:[e.jsx("span",{role:"img","aria-label":"Edit",children:"✏️"})," Edit"]}),e.jsxs("button",{className:"action-button delete-button",onClick:()=>{A(z),D(!0)},children:[e.jsx("span",{role:"img","aria-label":"Delete",children:"🗑️"})," Delete"]})]})]},z.id))}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Add New Category"}),e.jsxs("form",{onSubmit:Q,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:L.name,onChange:z=>N({...L,name:z.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:L.description,onChange:z=>N({...L,description:z.target.value}),placeholder:"Enter a description for this category",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsxs("div",{className:"emoji-input-container",children:[e.jsx("input",{type:"text",value:L.icon,onChange:z=>N({...L,icon:z.target.value}),placeholder:"Click to select an emoji",required:!0,readOnly:!0,onClick:()=>b(!0)}),e.jsx("span",{className:"emoji-preview",children:L.icon})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{value:L.color,onChange:z=>N({...L,color:z.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select a color"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"pink",children:"Pink"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"teal",children:"Teal"}),e.jsx("option",{value:"indigo",children:"Indigo"}),e.jsx("option",{value:"cyan",children:"Cyan"}),e.jsx("option",{value:"lime",children:"Lime"}),e.jsx("option",{value:"amber",children:"Amber"}),e.jsx("option",{value:"rose",children:"Rose"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:L.isActive,onChange:z=>N({...L,isActive:z.target.checked})}),"Active Category"]})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Add Category"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{v(!1),N({name:"",icon:"",color:"",isActive:!0,description:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},children:"Cancel"})]})]})]})}),h&&u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Edit Category"}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:u.name,onChange:z=>m({...u,name:z.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:u.description,onChange:z=>m({...u,description:z.target.value}),placeholder:"Enter a description for this category",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsxs("div",{className:"emoji-input-container",children:[e.jsx("input",{type:"text",value:u.icon,onChange:z=>m({...u,icon:z.target.value}),placeholder:"Click to select an emoji",required:!0,readOnly:!0,onClick:()=>b(!0)}),e.jsx("span",{className:"emoji-preview",children:u.icon})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{value:u.color,onChange:z=>m({...u,color:z.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select a color"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"pink",children:"Pink"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"teal",children:"Teal"}),e.jsx("option",{value:"indigo",children:"Indigo"}),e.jsx("option",{value:"cyan",children:"Cyan"}),e.jsx("option",{value:"lime",children:"Lime"}),e.jsx("option",{value:"amber",children:"Amber"}),e.jsx("option",{value:"rose",children:"Rose"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:u.isActive,onChange:z=>m({...u,isActive:z.target.checked})}),"Active Category"]})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Save Changes"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{j(!1),m(null)},children:"Cancel"})]})]})]})}),w&&C&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Delete Category"}),e.jsxs("p",{children:['Are you sure you want to delete the category "',C.name,'"?']}),e.jsx("p",{className:"warning",children:"This action cannot be undone."}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"delete-button",onClick:te,children:"Delete"}),e.jsx("button",{className:"cancel-button",onClick:()=>{D(!1),A(null)},children:"Cancel"})]})]})}),S&&e.jsx("div",{className:"modal-overlay emoji-picker-overlay",children:e.jsxs("div",{className:"modal-content emoji-picker-content",children:[e.jsxs("div",{className:"emoji-picker-header",children:[e.jsx("h3",{children:"Select an Emoji"}),e.jsx("button",{className:"close-button",onClick:()=>b(!1),children:"×"})]}),e.jsx("div",{className:"emoji-grid",children:I.map((z,ee)=>e.jsx("button",{className:"emoji-button",onClick:()=>ce(z),children:z},ee))})]})})]})},XT=()=>{const[t,s]=y.useState([]),[a,i]=y.useState(!0),[l,d]=y.useState(null),[u,m]=y.useState(!1),[g,v]=y.useState(null),[h,j]=y.useState(""),[w,D]=y.useState("all"),[S,b]=y.useState([]),[C,A]=y.useState(!1),L=Gs(),[N,I]=y.useState({name:"",description:"",category:"",icon:"📋",nextSteps:"",situations:[""],tips:[""],examples:[""],subcategories:[""],isActive:!0});y.useEffect(()=>{W()},[]);const W=async()=>{try{i(!0);const O=Ce(L,"dispositions"),Y=(await De(O)).docs.map(T=>({id:T.id,...T.data()})).sort((T,R)=>(T.name||"").localeCompare(R.name||""));s(Y)}catch(O){console.error("Error fetching dispositions:",O),d("Failed to load dispositions")}finally{i(!1)}},B=async O=>{O.preventDefault();try{const q=Ce(L,"dispositions"),Y={...N,situations:N.situations.filter(T=>T.trim()),tips:N.tips.filter(T=>T.trim()),examples:N.examples.filter(T=>T.trim()),subcategories:N.subcategories.filter(T=>T.trim())};g?await Wt(Ae(L,"dispositions",g.id),Y):await Yt(q,Y),m(!1),v(null),ce(),W()}catch(q){console.error("Error saving disposition:",q),d("Failed to save disposition")}},Q=O=>{v(O),I({name:O.name||"",description:O.description||"",category:O.category||"",icon:O.icon||"📋",nextSteps:O.nextSteps||"",situations:O.situations||[""],tips:O.tips||[""],examples:O.examples||[""],subcategories:O.subcategories||[""],isActive:O.isActive===void 0?!0:O.isActive}),m(!0)},F=async O=>{if(window.confirm("Are you sure you want to delete this disposition?"))try{await us(Ae(L,"dispositions",O)),W()}catch(q){console.error("Error deleting disposition:",q),d("Failed to delete disposition")}},te=async()=>{if(window.confirm(`Are you sure you want to delete ${S.length} dispositions?`))try{const O=S.map(q=>us(Ae(L,"dispositions",q)));await Promise.all(O),b([]),A(!1),W()}catch(O){console.error("Error bulk deleting dispositions:",O),d("Failed to delete dispositions")}},ce=()=>{I({name:"",description:"",category:"",icon:"📋",nextSteps:"",situations:[""],tips:[""],examples:[""],subcategories:[""],isActive:!0})},z=O=>{I(q=>({...q,[O]:[...q[O],""]}))},ee=(O,q)=>{I(Y=>({...Y,[O]:Y[O].filter((T,R)=>R!==q)}))},oe=(O,q,Y)=>{I(T=>({...T,[O]:T[O].map((R,E)=>E===q?Y:R)}))},re=t.filter(O=>{const q=O.name.toLowerCase().includes(h.toLowerCase())||O.description.toLowerCase().includes(h.toLowerCase()),Y=w==="all"||O.category===w;return q&&Y}),le=[...new Set(t.map(O=>O.category).filter(Boolean))];return a?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading dispositions..."})]}):e.jsxs("div",{className:"lead-disposition-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsx("h2",{children:"Lead Disposition Management"}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"fix-button",onClick:async()=>{try{const O=Ce(L,"dispositions"),Y=(await De(O)).docs.map(T=>T.data().isActive===void 0?Wt(T.ref,{isActive:!0}):Promise.resolve());await Promise.all(Y),W(),d("Fixed existing dispositions!"),setTimeout(()=>d(null),3e3)}catch(O){console.error("Error fixing dispositions:",O),d("Failed to fix dispositions")}},children:"🔧 Fix Existing Dispositions"}),e.jsx("button",{className:"add-button",onClick:()=>{v(null),ce(),m(!0)},children:"➕ Add New Disposition"})]})]}),l&&e.jsxs("div",{className:"error-message",children:[l,e.jsx("button",{onClick:()=>d(null),children:"×"})]}),e.jsxs("div",{className:"management-controls",children:[e.jsxs("div",{className:"search-filter",children:[e.jsx("input",{type:"text",placeholder:"Search dispositions...",value:h,onChange:O=>j(O.target.value),className:"search-input"}),e.jsxs("select",{value:w,onChange:O=>D(O.target.value),className:"category-filter",children:[e.jsx("option",{value:"all",children:"All Categories"}),le.map(O=>e.jsx("option",{value:O,children:O},O))]})]}),e.jsxs("div",{className:"bulk-actions",children:[e.jsxs("label",{className:"select-all",children:[e.jsx("input",{type:"checkbox",checked:S.length===re.length&&re.length>0,onChange:O=>{O.target.checked?b(re.map(q=>q.id)):b([])}}),"Select All"]}),S.length>0&&e.jsx("div",{className:"bulk-action-buttons",children:e.jsxs("button",{className:"bulk-delete-button",onClick:te,children:["🗑️ Delete Selected (",S.length,")"]})})]})]}),e.jsx("div",{className:"dispositions-grid",children:re.map(O=>e.jsxs("div",{className:"disposition-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("input",{type:"checkbox",checked:S.includes(O.id),onChange:q=>{q.target.checked?b(Y=>[...Y,O.id]):b(Y=>Y.filter(T=>T!==O.id))},className:"select-checkbox"}),e.jsx("span",{className:"disposition-icon",children:O.icon}),e.jsx("h3",{className:"disposition-name",children:O.name}),e.jsx("span",{className:`status-badge ${O.isActive===void 0||O.isActive?"active":"inactive"}`,children:O.isActive===void 0||O.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{className:"disposition-description",children:O.description}),O.category&&e.jsx("span",{className:"disposition-category",children:O.category}),O.nextSteps&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Next Steps:"}),e.jsx("p",{className:"detail-text",children:O.nextSteps})]}),O.tips&&O.tips.length>0&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Tips & Best Practices:"}),e.jsx("ul",{className:"detail-list",children:O.tips.map((q,Y)=>e.jsx("li",{className:"detail-item",children:q},Y))})]}),O.examples&&O.examples.length>0&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Common Examples:"}),e.jsx("ul",{className:"detail-list",children:O.examples.map((q,Y)=>e.jsx("li",{className:"detail-item",children:q},Y))})]}),O.subcategories&&O.subcategories.length>0&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Subcategories:"}),e.jsx("div",{className:"subcategories-container",children:O.subcategories.map((q,Y)=>e.jsx("span",{className:"subcategory-tag",children:q},Y))})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"edit-button",onClick:()=>Q(O),children:"✏️ Edit"}),e.jsx("button",{className:"delete-button",onClick:()=>F(O.id),children:"🗑️ Delete"})]})]},O.id))}),re.length===0&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No dispositions found. Create your first disposition to get started!"})}),u&&e.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:e.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:g?"Edit Disposition":"Add New Disposition"}),e.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:"×"})]}),e.jsxs("form",{onSubmit:B,className:"disposition-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",value:N.name,onChange:O=>I(q=>({...q,name:O.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsx("input",{type:"text",value:N.icon,onChange:O=>I(q=>({...q,icon:O.target.value})),placeholder:"📋"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{value:N.description,onChange:O=>I(q=>({...q,description:O.target.value})),required:!0,rows:3})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{type:"text",value:N.category,onChange:O=>I(q=>({...q,category:O.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:N.isActive?"active":"inactive",onChange:O=>I(q=>({...q,isActive:O.target.value==="active"})),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Next Steps"}),e.jsx("textarea",{value:N.nextSteps,onChange:O=>I(q=>({...q,nextSteps:O.target.value})),rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Situations"}),N.situations.map((O,q)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:O,onChange:Y=>oe("situations",q,Y.target.value),placeholder:"When to use this disposition..."}),e.jsx("button",{type:"button",onClick:()=>ee("situations",q),className:"remove-button",children:"×"})]},q)),e.jsx("button",{type:"button",onClick:()=>z("situations"),className:"add-array-button",children:"+ Add Situation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tips & Best Practices"}),N.tips.map((O,q)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:O,onChange:Y=>oe("tips",q,Y.target.value),placeholder:"Tip or best practice..."}),e.jsx("button",{type:"button",onClick:()=>ee("tips",q),className:"remove-button",children:"×"})]},q)),e.jsx("button",{type:"button",onClick:()=>z("tips"),className:"add-array-button",children:"+ Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Examples"}),N.examples.map((O,q)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:O,onChange:Y=>oe("examples",q,Y.target.value),placeholder:"Common example..."}),e.jsx("button",{type:"button",onClick:()=>ee("examples",q),className:"remove-button",children:"×"})]},q)),e.jsx("button",{type:"button",onClick:()=>z("examples"),className:"add-array-button",children:"+ Add Example"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subcategories"}),N.subcategories.map((O,q)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:O,onChange:Y=>oe("subcategories",q,Y.target.value),placeholder:"Subcategory name..."}),e.jsx("button",{type:"button",onClick:()=>ee("subcategories",q),className:"remove-button",children:"×"})]},q)),e.jsx("button",{type:"button",onClick:()=>z("subcategories"),className:"add-array-button",children:"+ Add Subcategory"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"cancel-button",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"save-button",children:[g?"Update":"Create"," Disposition"]})]})]})]})})]})},fl={"Appointment Management":"📅",Scheduling:"⏰",Cancellation:"❌",Confirmation:"✅","Follow-up":"📞",Rescheduling:"🔄",Urgent:"⚠️",General:"💬"},eE=["appointments","scheduling","confirmation","cancellation","followup"],tE=()=>{const[t,s]=y.useState([]),[a,i]=y.useState(!0),[l,d]=y.useState(null),[u,m]=y.useState(!1),[g,v]=y.useState(!1),[h,j]=y.useState(!1),[w,D]=y.useState(null),[S,b]=y.useState(""),[C,A]=y.useState("title"),[L,N]=y.useState(!1),[I,W]=y.useState("all"),[B,Q]=y.useState({total:0,urgent:0,categories:{}}),[F,te]=y.useState({title:"",description:"",topic:"",category:"",icon:"",steps:[""],tips:[""],keywords:[""],isUrgent:!1});y.useEffect(()=>{ce()},[]),y.useEffect(()=>{const M=t.filter(ue=>ue.isUrgent).length,K={};t.forEach(ue=>{K[ue.category]=(K[ue.category]||0)+1}),Q({total:t.length,urgent:M,categories:K})},[t]);const ce=async()=>{try{i(!0);const M=await zj();s(M),d(null)}catch(M){d("Failed to load service topics. Please try again."),console.error("Error loading topics:",M)}finally{i(!1)}},z=async()=>{if(window.confirm("Are you sure you want to reset all service topics? This action cannot be undone."))try{i(!0),await zT(),await ce(),d("Service topics have been reset successfully!"),setTimeout(()=>d(null),3e3)}catch(M){d("Failed to reset service topics. Please try again."),console.error("Error resetting topics:",M)}finally{i(!1)}},ee=()=>{te({title:"",description:"",topic:"",category:"",icon:"",steps:[""],tips:[""],keywords:[""],isUrgent:!1}),m(!0)},oe=M=>{D(M),te({title:M.title,description:M.description,topic:M.topic,category:M.category,icon:M.icon,steps:M.steps||[""],tips:M.tips||[""],keywords:M.keywords||[""],isUrgent:M.isUrgent||!1}),v(!0)},re=M=>{D(M),j(!0)},le=async M=>{M.preventDefault();try{u?await WT(F):await VT(w.id,F),await ce(),m(!1),v(!1),d(null)}catch(K){d("Failed to save service topic. Please try again."),console.error("Error saving topic:",K)}},O=async()=>{try{await _T(w.id),await ce(),j(!1),d(null)}catch(M){d("Failed to delete service topic. Please try again."),console.error("Error deleting topic:",M)}},q=M=>{const{name:K,value:ue,type:be,checked:pe}=M.target;te(X=>({...X,[K]:be==="checkbox"?pe:ue}))},Y=(M,K,ue)=>{te(be=>({...be,[ue]:be[ue].map((pe,X)=>X===M?K:pe)}))},T=M=>{te(K=>({...K,[M]:[...K[M],""]}))},R=(M,K)=>{te(ue=>({...ue,[K]:ue[K].filter((be,pe)=>pe!==M)}))},E=M=>{te(K=>({...K,icon:M})),N(!1)},f=t.filter(M=>{const K=M.title.toLowerCase().includes(S.toLowerCase())||M.description.toLowerCase().includes(S.toLowerCase())||M.category.toLowerCase().includes(S.toLowerCase()),ue=I==="all"||M.category===I;return K&&ue}).sort((M,K)=>{switch(C){case"title":return M.title.localeCompare(K.title);case"category":return M.category.localeCompare(K.category);case"urgent":return(K.isUrgent?1:0)-(M.isUrgent?1:0);default:return 0}}),P=[...new Set(t.map(M=>M.category).filter(Boolean))];return a?e.jsx("div",{className:"customer-service-management",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading customer service topics..."})]})}):e.jsxs("div",{className:"customer-service-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"Customer Service Management"}),e.jsx("p",{className:"header-subtitle",children:"Manage support topics, procedures, and customer service guidelines"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"reset-button",onClick:z,children:[e.jsx("span",{className:"button-icon",children:"🔄"}),"Reset Topics"]}),e.jsxs("button",{className:"add-button",onClick:ee,children:[e.jsx("span",{className:"button-icon",children:"➕"}),"Add New Topic"]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📋"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Topics"}),e.jsx("div",{className:"stat-number",children:B.total})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🏷️"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Categories"}),e.jsx("div",{className:"stat-number",children:P.length})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📈"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Active"}),e.jsx("div",{className:"stat-number",children:B.total-B.urgent})]})]})]}),l&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{children:l}),e.jsx("button",{onClick:()=>d(null),children:"×"})]}),e.jsx("div",{className:"management-controls",children:e.jsxs("div",{className:"search-filter",children:[e.jsx(Vr,{value:S,onChange:M=>b(M.target.value),onClear:()=>b(""),placeholder:"Search topics..."}),e.jsxs("select",{className:"category-filter",value:I,onChange:M=>W(M.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),P.map(M=>e.jsx("option",{value:M,children:M},M))]}),e.jsxs("select",{className:"sort-select",value:C,onChange:M=>A(M.target.value),children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"category",children:"Sort by Category"})]})]})}),e.jsx("div",{className:"topics-grid",children:f.map(M=>e.jsxs("div",{className:`topic-card ${M.isUrgent?"urgent":""}`,children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"topic-icon",children:e.jsx("span",{className:"icon",children:M.icon||fl[M.category]||"💬"})}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"edit-button",onClick:()=>oe(M),title:"Edit topic",children:"✏️"}),e.jsx("button",{className:"delete-button",onClick:()=>re(M),title:"Delete topic",children:"🗑️"})]})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{className:"topic-title",children:M.title}),e.jsx("p",{className:"topic-description",children:M.description}),e.jsx("div",{className:"topic-meta",children:e.jsxs("span",{className:"category-badge",children:[e.jsx("span",{className:"category-icon",children:fl[M.category]||"💬"}),M.category]})}),e.jsxs("div",{className:"topic-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Steps"}),e.jsx("span",{className:"stat-value",children:M.steps?.length||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Tips"}),e.jsx("span",{className:"stat-value",children:M.tips?.length||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Keywords"}),e.jsx("span",{className:"stat-value",children:M.keywords?.length||0})]})]})]})]},M.id))}),f.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"📋"}),e.jsx("h3",{children:"No topics found"}),e.jsx("p",{children:"Create your first customer service topic to get started!"}),e.jsxs("button",{className:"add-button",onClick:ee,children:[e.jsx("span",{className:"button-icon",children:"➕"}),"Add New Topic"]})]}),(u||g)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{m(!1),v(!1)},children:e.jsxs("div",{className:"topic-modal",onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:u?"Add New Topic":"Edit Topic"}),e.jsx("button",{className:"close-modal",onClick:()=>{m(!1),v(!1)},children:"×"})]}),e.jsxs("form",{onSubmit:le,className:"topic-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:F.title,onChange:q,required:!0,placeholder:"Enter topic title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category *"}),e.jsxs("select",{name:"category",value:F.category,onChange:q,required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),eE.map(M=>e.jsx("option",{value:M,children:M.charAt(0).toUpperCase()+M.slice(1)},M))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{name:"description",value:F.description,onChange:q,required:!0,rows:3,placeholder:"Describe the topic..."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Topic"}),e.jsx("input",{type:"text",name:"topic",value:F.topic,onChange:q,placeholder:"Enter topic keyword"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsxs("div",{className:"icon-input-container",children:[e.jsx("input",{type:"text",className:"icon-input",value:F.icon,onChange:q,name:"icon",onClick:()=>N(!0),placeholder:"Click to select icon",readOnly:!0}),e.jsx("div",{className:"icon-preview",children:F.icon||fl[F.category]||"💬"})]}),L&&e.jsx("div",{className:"icon-picker",children:e.jsx("div",{className:"icon-picker-grid",children:Object.values(fl).map((M,K)=>e.jsx("button",{className:"icon-picker-item",onClick:()=>E(M),children:M},K))})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Steps"}),F.steps.map((M,K)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:M,onChange:ue=>Y(K,ue.target.value,"steps"),placeholder:`Step ${K+1}`}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>R(K,"steps"),children:"×"})]},K)),e.jsx("button",{type:"button",className:"add-array-button",onClick:()=>T("steps"),children:"+ Add Step"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tips & Best Practices"}),F.tips.map((M,K)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:M,onChange:ue=>Y(K,ue.target.value,"tips"),placeholder:`Tip ${K+1}`}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>R(K,"tips"),children:"×"})]},K)),e.jsx("button",{type:"button",className:"add-array-button",onClick:()=>T("tips"),children:"+ Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Keywords"}),F.keywords.map((M,K)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:M,onChange:ue=>Y(K,ue.target.value,"keywords"),placeholder:`Keyword ${K+1}`}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>R(K,"keywords"),children:"×"})]},K)),e.jsx("button",{type:"button",className:"add-array-button",onClick:()=>T("keywords"),children:"+ Add Keyword"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{m(!1),v(!1)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"save-button",children:u?"Create Topic":"Save Changes"})]})]})]})}),h&&e.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"delete-modal",onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{className:"delete-header",children:[e.jsx("div",{className:"warning-icon",children:"⚠️"}),e.jsx("h2",{children:"Delete Topic"})]}),e.jsxs("div",{className:"delete-content",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',w?.title,'"']}),"?"]}),e.jsx("p",{className:"delete-warning",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"delete-actions",children:[e.jsx("button",{className:"cancel-button",onClick:()=>j(!1),children:"Cancel"}),e.jsx("button",{className:"delete-button",onClick:O,children:"Delete Topic"})]})]})})]})},sE=()=>{const[t,s]=y.useState([]),[a,i]=y.useState(!0),[l,d]=y.useState(null),[u,m]=y.useState(!1),[g,v]=y.useState(!1),[h,j]=y.useState(null),[w,D]=y.useState(""),[S,b]=y.useState({question:"",answer:""});y.useEffect(()=>{C()},[]);const C=async()=>{try{i(!0),d(null);const B=await Ei.getAllFAQs();s(B)}catch(B){console.error("Error loading FAQs:",B),d("Failed to load FAQs. Please try again.")}finally{i(!1)}},A=async B=>{B.preventDefault();try{if(!S.question.trim()||!S.answer.trim()){d("Please fill in both question and answer fields.");return}await Ei.addFAQ(S),b({question:"",answer:""}),m(!1),d(null),C()}catch(Q){console.error("Error adding FAQ:",Q),d("Failed to add FAQ. Please try again.")}},L=async B=>{B.preventDefault();try{if(!h.question.trim()||!h.answer.trim()){d("Please fill in both question and answer fields.");return}await Ei.updateFAQ(h.id,{question:h.question,answer:h.answer}),j(null),v(!1),d(null),C()}catch(Q){console.error("Error updating FAQ:",Q),d("Failed to update FAQ. Please try again.")}},N=async B=>{if(window.confirm("Are you sure you want to delete this FAQ?"))try{await Ei.deleteFAQ(B),C(),d(null)}catch(Q){console.error("Error deleting FAQ:",Q),d("Failed to delete FAQ. Please try again.")}},I=B=>{j({...B}),v(!0)},W=t.filter(B=>B.question.toLowerCase().includes(w.toLowerCase())||B.answer.toLowerCase().includes(w.toLowerCase()));return a?e.jsxs("div",{className:"faq-management-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading FAQs..."})]}):e.jsxs("div",{className:"faq-management",children:[e.jsxs("div",{className:"faq-management-header",children:[e.jsx("h2",{children:"FAQ Management"}),e.jsx("div",{className:"faq-actions",children:e.jsxs("button",{className:"add-faq-button",onClick:()=>m(!0),children:[e.jsx("span",{children:"➕"})," Add New FAQ"]})})]}),l&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"⚠️"}),l]}),e.jsxs("div",{className:"faq-search-section",children:[e.jsx(Vr,{value:w,onChange:B=>D(B.target.value),onClear:()=>D(""),placeholder:"Search FAQs..."}),e.jsx("div",{className:"search-results",children:w&&e.jsxs("span",{className:"results-count",children:[W.length," result",W.length!==1?"s":""," found"]})})]}),e.jsx("div",{className:"faq-list",children:W.length===0?e.jsx("div",{className:"no-faqs",children:e.jsxs("div",{className:"no-faqs-content",children:[e.jsx("span",{className:"no-faqs-icon",children:"❓"}),e.jsx("h3",{children:"No FAQs found"}),e.jsx("p",{children:w?"No FAQs match your search criteria.":'No FAQs have been added yet. Click "Add New FAQ" to get started.'})]})}):W.map(B=>e.jsxs("div",{className:"faq-item-admin",children:[e.jsxs("div",{className:"faq-content",children:[e.jsx("div",{className:"faq-question-admin",children:e.jsx("h3",{children:B.question})}),e.jsx("div",{className:"faq-answer-admin",children:e.jsx("p",{children:B.answer})}),e.jsxs("div",{className:"faq-meta",children:[e.jsxs("span",{className:"faq-date",children:["Created: ",B.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"]}),B.updatedAt&&B.updatedAt!==B.createdAt&&e.jsxs("span",{className:"faq-updated",children:["Updated: ",B.updatedAt?.toDate?.()?.toLocaleDateString()||"Unknown"]})]})]}),e.jsxs("div",{className:"faq-actions-admin",children:[e.jsx("button",{className:"edit-faq-button",onClick:()=>I(B),title:"Edit FAQ",children:"✏️"}),e.jsx("button",{className:"delete-faq-button",onClick:()=>N(B.id),title:"Delete FAQ",children:"🗑️"})]})]},B.id))}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("button",{className:"modal-close",onClick:()=>{m(!1),b({question:"",answer:""}),d(null)},"aria-label":"Close",children:"×"}),e.jsx("h2",{children:"Add New FAQ"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Question"}),e.jsx("input",{type:"text",value:S.question,onChange:B=>b({...S,question:B.target.value}),placeholder:"Enter the question...",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Answer"}),e.jsx("textarea",{value:S.answer,onChange:B=>b({...S,answer:B.target.value}),rows:6,placeholder:"Enter the answer...",required:!0}),e.jsxs("div",{className:"char-count",children:[S.answer.length," characters"]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Add FAQ"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{m(!1),b({question:"",answer:""}),d(null)},children:"Cancel"})]})]})]})}),g&&h&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Edit FAQ"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Question"}),e.jsx("input",{type:"text",value:h.question,onChange:B=>j({...h,question:B.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Answer"}),e.jsx("textarea",{value:h.answer,onChange:B=>j({...h,answer:B.target.value}),rows:6,required:!0}),e.jsxs("div",{className:"char-count",children:[h.answer.length," characters"]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Update FAQ"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{v(!1),j(null),d(null)},children:"Cancel"})]})]})]})})]})};mh().catch(t=>{console.error("Failed to initialize Firebase:",t)});const Or={async restoreAuthSession(){try{const t=localStorage.getItem("adminUser");if(!t)throw new Error("No stored admin user found");const s=JSON.parse(t);return console.log("🔍 userService: Attempting to restore auth session for:",s.email),s}catch(t){throw console.error("🔍 userService: Error restoring auth session:",t),t}},async createUser(t,s,a="user"){try{if(console.log("createUser called with:",{email:t,role:a}),!rt.currentUser)throw console.log("No current user in auth"),new Error("You must be logged in to create users");console.log("Current user exists:",rt.currentUser.email);const i=rt.currentUser.email,l=s;console.log("Creating user in Firebase Auth...");const u=(await px(rt,t,s)).user;console.log("User created in Firebase Auth:",u.uid),console.log("Creating user document in Firestore...");const m={uid:u.uid,email:u.email,role:a,createdAt:new Date().toISOString(),createdBy:rt.currentUser.uid,lastSignIn:null,isActive:!0,emailVerified:u.emailVerified||!1,displayName:u.displayName||"",updatedAt:new Date().toISOString()};return console.log("User data to be saved:",m),await gn(Ae(fe(),"users",u.uid),m),console.log("User document created in Firestore"),console.log("Signing out newly created user..."),await Uf(rt),console.log("Signing back in as admin..."),await bl(rt,i,l),console.log("Successfully signed back in as admin"),u}catch(i){throw console.error("Error creating user:",i),console.error("Error details:",{code:i.code,message:i.message,stack:i.stack}),i.code==="auth/email-already-in-use"?new Error("This email is already registered"):i.code==="auth/invalid-email"?new Error("Invalid email address"):i.code==="auth/weak-password"?new Error("Password should be at least 6 characters"):i}},async syncUsers(){try{if(!rt.currentUser)throw new Error("You must be logged in to sync users");const t=await De(Ce(fe(),"users")),s=new Set(t.docs.map(i=>i.data().uid)),a=await De(Ce(fe(),"users"));for(const i of a.docs){const l=i.data();s.has(l.uid)||await gn(i(fe(),"users",l.uid),{uid:l.uid,email:l.email,role:"user",createdAt:new Date().toISOString(),lastSignIn:null,isActive:!0,emailVerified:!1})}return!0}catch(t){throw console.error("Error syncing users:",t),t}},async getAllUsers(){try{if(console.log("getAllUsers called, checking current user..."),!rt.currentUser)throw console.log("No current user in auth"),new Error("You must be logged in to view users");console.log("Current user exists:",rt.currentUser.email),console.log("Fetching users from Firestore...");const t=Ce(fe(),"users");console.log("Created users collection reference");const s=await De(t);console.log("Firestore query completed, snapshot size:",s.size);const a=s.docs.map(i=>{const l=i.data();return console.log("Processing user document:",{id:i.id,...l}),{id:i.id,...l,role:l.role||"user",isActive:l.isActive!==void 0?l.isActive:!0,emailVerified:l.emailVerified||!1,lastSignIn:l.lastSignIn||null,createdAt:l.createdAt||new Date().toISOString()}});if(console.log("Processed users:",a),a.length===0){console.log("No users found in Firestore, attempting to sync..."),await this.syncUsers();const l=(await De(t)).docs.map(d=>({id:d.id,...d.data(),role:d.data().role||"user",isActive:d.data().isActive!==void 0?d.data().isActive:!0,emailVerified:d.data().emailVerified||!1,lastSignIn:d.data().lastSignIn||null,createdAt:d.data().createdAt||new Date().toISOString()}));return console.log("Users after sync:",l),l}return a}catch(t){throw console.error("Error in getAllUsers:",t),console.error("Error details:",{code:t.code,message:t.message,stack:t.stack}),t.code==="permission-denied"?new Error("You do not have permission to view users"):t.code==="unauthenticated"?new Error("You must be logged in to view users"):t}},async updateUserLastSignIn(t){try{const s=Ae(fe(),"users",t);await Wt(s,{lastSignIn:new Date().toISOString()})}catch(s){console.error("Error updating last sign-in:",s)}},async updateUserRole(t,s){try{if(console.log("🔍 userService: updateUserRole called with:",{userId:t,newRole:s}),console.log("🔍 userService: auth.currentUser:",rt.currentUser),!rt.currentUser){console.log("🔍 userService: No Firebase Auth user, attempting to restore session...");try{const l=await this.restoreAuthSession();throw console.log("🔍 userService: Restored stored user:",l.email),new Error("Firebase Auth session required. Please log in again.")}catch(l){throw console.log("🔍 userService: Could not restore session:",l.message),new Error("You must be logged in to update user roles")}}console.log("🔍 userService: Current user authenticated, updating role...");const i=Ae(fe(),"users",t);await Wt(i,{role:s,updatedAt:new Date().toISOString(),updatedBy:rt.currentUser.uid}),console.log("🔍 userService: Role updated successfully")}catch(a){throw console.error("🔍 userService: Error updating user role:",a),console.error("🔍 userService: Error details:",{code:a.code,message:a.message,stack:a.stack}),a.code==="permission-denied"?new Error("You do not have permission to update user roles"):a.code==="not-found"?new Error("User not found"):a.code==="unavailable"?new Error("Service temporarily unavailable. Please try again."):a}},async deleteUser(t){try{if(console.log("🔍 userService: deleteUser called with:",{userId:t}),console.log("🔍 userService: auth.currentUser:",rt.currentUser),!rt.currentUser){console.log("🔍 userService: No Firebase Auth user, attempting to restore session...");try{const a=await this.restoreAuthSession();throw console.log("🔍 userService: Restored stored user:",a.email),new Error("Firebase Auth session required. Please log in again.")}catch(a){throw console.log("🔍 userService: Could not restore session:",a.message),new Error("You must be logged in to delete users")}}console.log("🔍 userService: Current user authenticated, deleting user..."),await us(Ae(fe(),"users",t)),console.log("🔍 userService: User deleted from Firestore successfully"),console.log("User deleted from Firestore. Note: User may still exist in Firebase Auth.")}catch(s){throw console.error("🔍 userService: Error deleting user:",s),console.error("🔍 userService: Error details:",{code:s.code,message:s.message,stack:s.stack}),s.code==="permission-denied"?new Error("You do not have permission to delete users"):s.code==="not-found"?new Error("User not found"):s}},async loginUser(t,s){try{const i=(await bl(rt,t,s)).user,l=Ae(fe(),"users",i.uid),d=await pt(l);let u=!1;if(d.exists())u=d.data().needsDisplayName===!0,await Wt(l,{lastSignIn:new Date().toISOString(),emailVerified:i.emailVerified,updatedAt:new Date().toISOString()});else{const m={uid:i.uid,email:i.email,role:"user",createdAt:new Date().toISOString(),lastSignIn:new Date().toISOString(),isActive:!0,emailVerified:i.emailVerified,displayName:i.displayName||"",updatedAt:new Date().toISOString(),needsDisplayName:!1};await gn(l,m),u=!1}return{user:i,needsDisplayName:u}}catch(a){throw console.error("Error logging in:",a),a}},async logoutUser(){try{await Uf(rt)}catch(t){throw console.error("Error logging out:",t),t}},getCurrentUser(){return rt.currentUser},async isCurrentUserAdmin(){try{if(!rt.currentUser)return!1;const t=await De(Ze(Ce(fe(),"users"),ss("uid","==",rt.currentUser.uid)));return t.empty?!1:t.docs[0].data().role==="admin"}catch(t){return console.error("Error checking admin status:",t),!1}},async updateDisplayName(t,s){try{if(!rt.currentUser)throw new Error("You must be logged in to update display name");const a=Ae(fe(),"users",t);await Wt(a,{displayName:s,needsDisplayName:!1,updatedAt:new Date().toISOString()}),await E0(rt.currentUser,{displayName:s})}catch(a){throw console.error("Error updating display name:",a),a}}},nE=()=>{const{currentUser:t}=wn(),[s,a]=y.useState([]),[i,l]=y.useState(!0),[d,u]=y.useState(null),[m,g]=y.useState(!1),[v,h]=y.useState(""),[j,w]=y.useState("all"),[D,S]=y.useState("all"),[b,C]=y.useState({email:"",password:"",confirmPassword:"",role:"user"}),[A,L]=y.useState("");y.useEffect(()=>{console.log("UserManagement mounted, currentUser:",t),t?(console.log("Current user exists, fetching users..."),N()):(console.log("No current user found"),u("You must be logged in to view users"),l(!1))},[t]);const N=async()=>{try{if(console.log("Starting fetchUsers..."),l(!0),u(null),!t){console.log("No current user in fetchUsers"),u("You must be logged in to view users"),l(!1);return}console.log("Calling userService.getAllUsers()...");const ee=await Or.getAllUsers();console.log("Fetched users:",ee),!ee||ee.length===0?(console.log("No users found in response"),u("No users found. Try creating a new user.")):(console.log(`Found ${ee.length} users`),a(ee))}catch(ee){console.error("Error in fetchUsers:",ee),console.error("Error details:",{code:ee.code,message:ee.message,stack:ee.stack}),ee.message.includes("must be logged in")?u("You must be logged in to view users"):ee.message.includes("permission-denied")?u("You do not have permission to view users. Please contact your administrator."):u(`Failed to fetch users: ${ee.message}`)}finally{l(!1)}},I=async ee=>{if(ee.preventDefault(),L(""),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)){L("Please enter a valid email address");return}if(b.password!==b.confirmPassword){L("Passwords do not match");return}if(b.password.length<6){L("Password must be at least 6 characters long");return}try{l(!0),await Or.createUser(b.email,b.password,b.role),g(!1),C({email:"",password:"",confirmPassword:"",role:"user"}),await N(),alert("User created successfully! They can now log in with their email and password.")}catch(re){console.error("Error adding user:",re),re.message.includes("must be logged in")?L("You must be logged in to create users"):re.message.includes("already registered")?L("This email is already registered"):re.message.includes("Invalid email")?L("Please enter a valid email address"):re.message.includes("Password should be")?L("Password must be at least 6 characters long"):re.message.includes("permission-denied")?L("You do not have permission to create users"):L(re.message||"Failed to create user")}finally{l(!1)}},W=async ee=>{if(window.confirm("Are you sure you want to delete this user?"))try{console.log("🔍 UserManagement: Attempting to delete user:",ee),console.log("🔍 UserManagement: Current user:",rt.currentUser),console.log("🔍 UserManagement: Stored admin user:",localStorage.getItem("adminUser")),await Or.deleteUser(ee),console.log("🔍 UserManagement: User deleted successfully"),N()}catch(oe){console.error("🔍 UserManagement: Error deleting user:",oe),console.error("🔍 UserManagement: Error details:",{code:oe.code,message:oe.message,stack:oe.stack}),oe.message.includes("must be logged in")?alert("You must be logged in to delete users"):oe.message.includes("Firebase Auth session required")?alert("Your session has expired. Please log in again to continue."):oe.message.includes("permission-denied")?alert("You do not have permission to delete users"):oe.message.includes("not found")?alert("User not found. They may have already been deleted."):alert(`Failed to delete user: ${oe.message}`)}},B=async(ee,oe)=>{try{console.log("🔍 UserManagement: Attempting to update user role:",{userId:ee,newRole:oe}),console.log("🔍 UserManagement: Current user:",rt.currentUser),console.log("🔍 UserManagement: Stored admin user:",localStorage.getItem("adminUser")),await Or.updateUserRole(ee,oe),console.log("🔍 UserManagement: User role updated successfully"),N()}catch(re){console.error("🔍 UserManagement: Error updating user role:",re),console.error("🔍 UserManagement: Error details:",{code:re.code,message:re.message,stack:re.stack}),re.message.includes("must be logged in")?alert("You must be logged in to update user roles"):re.message.includes("Firebase Auth session required")?alert("Your session has expired. Please log in again to continue."):re.message.includes("permission-denied")?alert("You do not have permission to update user roles"):re.message.includes("not found")?alert("User not found. They may have been deleted."):re.message.includes("unavailable")?alert("Service temporarily unavailable. Please try again."):alert(`Failed to update user role: ${re.message}`)}},Q=ee=>ee?new Date(ee).toLocaleString():"Never",F=ee=>ee.isActive!==!1?e.jsx("span",{className:"status-badge active",children:"Active"}):e.jsx("span",{className:"status-badge inactive",children:"Inactive"}),te=ee=>e.jsx("span",{className:`role-badge ${ee.toLowerCase()}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)}),z=s.filter(ee=>{const oe=ee.email.toLowerCase().includes(v.toLowerCase()),re=j==="all"||ee.role===j,le=D==="all"||D==="active"&&ee.isActive||D==="inactive"&&!ee.isActive;return oe&&re&&le});return i?e.jsxs("div",{className:"user-management-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading users..."})]}):d?e.jsx("div",{className:"user-management",children:e.jsxs("div",{className:"error-message",children:[e.jsx("div",{className:"error-icon",children:"⚠️"}),e.jsxs("div",{className:"error-content",children:[e.jsx("h3",{children:"Error Loading Users"}),e.jsx("p",{children:d}),e.jsxs("button",{onClick:N,className:"retry-button",children:[e.jsx("span",{children:"🔄"})," Retry"]})]})]})}):e.jsxs("div",{className:"user-management",children:[e.jsxs("div",{className:"user-management-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h2",{children:"👥 User Management"}),e.jsx("p",{className:"header-subtitle",children:"Manage user accounts and permissions"})]}),e.jsx("div",{className:"header-right",children:e.jsxs("button",{className:"add-button",onClick:()=>g(!0),children:[e.jsx("span",{children:"➕"})," Add New User"]})})]}),e.jsxs("div",{className:"filters-section",children:[e.jsx(Vr,{value:v,onChange:ee=>h(ee.target.value),onClear:()=>h(""),placeholder:"Search users by email..."}),e.jsxs("div",{className:"filter-controls",children:[e.jsxs("select",{value:j,onChange:ee=>w(ee.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"user",children:"User"})]}),e.jsxs("select",{value:D,onChange:ee=>S(ee.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"users-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:s.length}),e.jsx("span",{className:"stat-label",children:"Total Users"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:s.filter(ee=>ee.role==="admin").length}),e.jsx("span",{className:"stat-label",children:"Admins"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:s.filter(ee=>ee.isActive!==!1).length}),e.jsx("span",{className:"stat-label",children:"Active Users"})]})]}),e.jsx("div",{className:"users-list",children:z.length===0?e.jsx("div",{className:"no-users",children:e.jsxs("div",{className:"no-users-content",children:[e.jsx("div",{className:"no-users-icon",children:"👤"}),e.jsx("h3",{children:"No Users Found"}),e.jsx("p",{children:v||j!=="all"||D!=="all"?"Try adjusting your search or filters.":"Get started by creating your first user account."}),!v&&j==="all"&&D==="all"&&e.jsxs("button",{className:"add-button",onClick:()=>g(!0),children:[e.jsx("span",{children:"➕"})," Create First User"]})]})}):e.jsx("div",{className:"users-grid",children:z.map(ee=>e.jsxs("div",{className:"user-card redesigned",children:[e.jsxs("div",{className:"user-card-main",children:[e.jsx("div",{className:"user-avatar big",children:ee.email.charAt(0).toUpperCase()}),e.jsxs("div",{className:"user-main-info",children:[e.jsx("div",{className:"user-email redesigned",children:ee.email}),e.jsxs("div",{className:"user-badges redesigned",children:[F(ee),te(ee.role||"user")]})]}),e.jsxs("div",{className:"user-actions redesigned",children:[e.jsxs("button",{className:"action-button edit",onClick:()=>B(ee.id||ee.uid,ee.role==="admin"?"user":"admin"),title:ee.role==="admin"?"Remove Admin":"Make Admin",children:[ee.role==="admin"?e.jsx("span",{role:"img","aria-label":"Remove Admin",children:"👑"}):e.jsx("span",{role:"img","aria-label":"Make Admin",children:"👤"}),ee.role==="admin"?"Remove Admin":"Make Admin"]}),ee.email!=="longhome@"&&e.jsxs("button",{className:"action-button delete",onClick:()=>W(ee.id||ee.uid),title:"Delete User",children:[e.jsx("span",{role:"img","aria-label":"Delete",children:"🗑️"})," Delete"]})]})]}),e.jsx("div",{className:"user-card-divider"}),e.jsxs("div",{className:"user-card-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Created",children:"📅"}),e.jsx("span",{className:"meta-label",children:"Created:"}),e.jsx("span",{className:"meta-value",children:Q(ee.createdAt)})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Last Sign In",children:"🕒"}),e.jsx("span",{className:"meta-label",children:"Last Sign In:"}),e.jsx("span",{className:"meta-value",children:Q(ee.lastSignIn)})]})]})]},ee.id||ee.uid))})}),m&&e.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"➕ Add New User"}),e.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:"✕"})]}),A&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{children:"⚠️"})," ",A]}),e.jsxs("form",{onSubmit:I,className:"add-user-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"📧 Email Address"}),e.jsx("input",{type:"email",id:"email",value:b.email,onChange:ee=>C({...b,email:ee.target.value}),placeholder:"Enter user's email address",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"🔒 Password"}),e.jsx("input",{type:"password",id:"password",value:b.password,onChange:ee=>C({...b,password:ee.target.value}),placeholder:"Enter password",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"🔒 Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:b.confirmPassword,onChange:ee=>C({...b,confirmPassword:ee.target.value}),placeholder:"Confirm password",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"role",children:"👤 Role"}),e.jsxs("select",{id:"role",value:b.role,onChange:ee=>C({...b,role:ee.target.value}),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"create-button",disabled:i,children:i?"🔄 Creating...":"✅ Create User"})]})]})]})})]})},rE=t=>{try{if(!t||(t&&typeof t=="object"&&t.toDate&&(t=t.toDate()),t instanceof Date||(t=new Date(t)),isNaN(t.getTime())))return"Unknown";const a=Math.floor((new Date-t)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:t.toLocaleDateString()}catch(s){return console.error("Error formatting time ago:",s),"Unknown"}},Ht=t=>{if(t==null)return"";if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return String(t);if(t&&typeof t=="object"&&typeof t.toDate=="function")try{return t.toDate().toLocaleString()}catch{return"Unknown"}if(Array.isArray(t))return t.map(s=>Ht(s)).join(", ");if(typeof t=="object"){const s=t.text||t.pt1||t.pt2||t.title||t.name||t.value;if(s)return Ht(s);try{return JSON.stringify(t)}catch{return"[object]"}}try{return String(t)}catch{return""}},aE=({onGoTab:t,companyId:s})=>{const[a,i]=y.useState({totalRebuttals:0,totalCategories:0,totalDispositions:0,totalUsers:0,recentActivity:[],topCategories:[],systemHealth:"Good"}),[l,d]=y.useState(!0),[u,m]=y.useState(!1);y.useEffect(()=>{g()},[s]);const g=async()=>{try{let v=function(F){const te=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#ec4899"];let ce=0;for(let z=0;z<F.length;z++)ce=F.charCodeAt(z)+((ce<<5)-ce);return te[Math.abs(ce)%te.length]};d(!0);const h=Gs();console.log("🔍 DashboardView: Fetching dashboard data..."),console.log("🔍 DashboardView: CompanyId:",s);const j=await De(Ce(h,"rebuttals")),w=await De(Ce(h,"categories")),D=await De(Ce(h,"dispositions")),S=await De(Ce(h,"users"));console.log("🔍 DashboardView: Raw data counts:",{rebuttals:j.docs.length,categories:w.docs.length,dispositions:D.docs.length,users:S.docs.length});const b=j.docs,C=w.docs,A=s?D.docs.filter(F=>{const te=F.data();return te.companyId===s||!te.companyId}):D.docs,L=s?S.docs.filter(F=>{const te=F.data();return te.companyId===s||!te.companyId}):S.docs;console.log("🔍 DashboardView: Filtered data counts:",{rebuttals:b.length,categories:C.length,dispositions:A.length,users:L.length}),b.length>0&&console.log("🔍 Sample rebuttal:",{id:b[0].id,data:b[0].data()}),C.length>0&&console.log("🔍 Sample category:",{id:C[0].id,data:C[0].data()});const N={},I={};C.forEach(F=>{const te=F.data();I[F.id]={id:F.id,name:te.name||"Unnamed Category",description:te.description||"",color:te.color||v(F.id)}});const W=b.sort((F,te)=>{const ce=F.data().createdAt?.toDate?.()||new Date(F.data().createdAt||0);return(te.data().createdAt?.toDate?.()||new Date(te.data().createdAt||0))-ce}).slice(0,8).map(F=>{const te=F.data(),ce=te.category,z=Object.values(I).find(ee=>ee.name===ce)||{name:ce||"Uncategorized",color:"#6b7280"};return{id:F.id,type:"rebuttal",summary:Ht(te.summary||te.title||te.heading),objection:Ht(te.objection),response:Ht(te.response||te.body||te.text),category:Ht(te.category||""),categoryName:Ht(z.name||"Uncategorized"),categoryColor:Ht(z.color||"#6b7280"),timeAgo:rE(te.createdAt?.toDate?.()||new Date(te.createdAt||0)),status:Ht(te.status||"active"),priority:Ht(te.priority||"normal"),createdAt:te.createdAt}});b.forEach(F=>{const ce=F.data().category;ce&&(N[ce]=(N[ce]||0)+1)});const B=Object.entries(N).map(([F,te])=>{const ce=Object.values(I).find(z=>z.name===F)||{id:F,name:F,description:"",color:"#6b7280"};return{id:ce.id,name:ce.name,description:ce.description,color:ce.color,count:te}}).sort((F,te)=>te.count-F.count).slice(0,5),Q={totalRebuttals:Number(b.length||0),totalCategories:Number(C.length||0),totalDispositions:Number(A.length||0),totalUsers:Number(L.length||0),recentActivity:Array.isArray(W)?W:[],topCategories:Array.isArray(B)?B:[],systemHealth:"Good"};console.log("🔍 DashboardView: Final stats:",Q),console.log("🔍 DashboardView: Top categories:",B),console.log("🔍 DashboardView: Recent activity count:",W.length),i(Q)}catch(v){console.error("Error fetching dashboard data:",v),i(h=>({...h,systemHealth:"Error"}))}finally{d(!1)}};return l?e.jsxs("div",{className:"dashboard-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading dashboard data..."})]}):e.jsxs("div",{className:"dashboard-view",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Dashboard Overview"}),e.jsx("p",{children:"Welcome to your admin dashboard. Here's what's happening with your system."})]}),e.jsx("div",{className:"header-actions",children:e.jsxs("button",{className:"refresh-btn",onClick:g,children:[e.jsx("span",{children:"🔄"}),"Refresh"]})})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📚"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Rebuttals"}),e.jsx("div",{className:"stat-number",children:a.totalRebuttals}),e.jsx("div",{className:"stat-label",children:"Active responses"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🏷️"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Categories"}),e.jsx("div",{className:"stat-number",children:a.totalCategories}),e.jsx("div",{className:"stat-label",children:"Organized groups"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📋"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Dispositions"}),e.jsx("div",{className:"stat-number",children:a.totalDispositions}),e.jsx("div",{className:"stat-label",children:"Lead outcomes"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"👥"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Users"}),e.jsx("div",{className:"stat-number",children:a.totalUsers}),e.jsx("div",{className:"stat-label",children:"Registered users"})]})]})]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"recent-activity-modern",children:[e.jsxs("div",{className:"activity-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"📈 Recent Activity"}),e.jsx("p",{children:"Latest rebuttals and system updates"})]}),e.jsx("div",{className:"activity-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:a.recentActivity.length}),e.jsx("span",{className:"stat-label",children:"Recent"})]})})]}),e.jsxs("div",{className:"activity-timeline",children:[a.recentActivity.length>0?(u?a.recentActivity:a.recentActivity.slice(0,3)).map((v,h)=>e.jsxs("div",{className:"activity-card",style:{"--category-color":v.categoryColor},children:[e.jsxs("div",{className:"activity-indicator",children:[e.jsx("div",{className:"indicator-dot"}),h<a.recentActivity.length-1&&e.jsx("div",{className:"indicator-line"})]}),e.jsxs("div",{className:"activity-content",children:[e.jsxs("div",{className:"activity-header-card",children:[e.jsxs("div",{className:"activity-type",children:[e.jsx("div",{className:"type-icon",children:"📝"}),e.jsx("span",{className:"type-label",children:"Rebuttal"})]}),e.jsx("div",{className:"activity-time",children:v.timeAgo})]}),e.jsx("div",{className:"activity-title",children:Ht(v.summary||v.objection||"Untitled Rebuttal")}),e.jsxs("div",{className:"activity-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Category"}),e.jsx("span",{className:"meta-value category-badge",style:{backgroundColor:v.categoryColor},children:Ht(v.categoryName)})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Status"}),e.jsx("span",{className:`meta-value status-badge ${Ht(v.status)}`,children:Ht(v.status)})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Priority"}),e.jsx("span",{className:`meta-value priority-badge ${Ht(v.priority)}`,children:Ht(v.priority)})]})]}),v.response&&e.jsxs("div",{className:"activity-preview",children:[e.jsx("span",{className:"preview-label",children:"Preview:"}),e.jsx("span",{className:"preview-text",children:Ht(v.response).length>100?`${Ht(v.response).substring(0,100)}...`:Ht(v.response)})]})]})]},v.id)):e.jsxs("div",{className:"empty-activity",children:[e.jsx("div",{className:"empty-icon",children:"📝"}),e.jsx("h3",{children:"No Recent Activity"}),e.jsx("p",{children:"New rebuttals and updates will appear here"}),e.jsxs("button",{className:"create-rebuttal-btn",onClick:()=>t&&t("rebuttals"),children:[e.jsx("span",{children:"➕"}),"Create First Rebuttal"]})]}),a.recentActivity.length>3&&e.jsx("div",{className:"activity-toggle",children:e.jsx("button",{className:"create-rebuttal-btn",onClick:()=>m(!u),children:u?"Show less":`Show more (${a.recentActivity.length-3})`})})]})]}),e.jsxs("div",{className:"system-status-modern",children:[e.jsxs("div",{className:"status-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"⚡ System Status"}),e.jsx("p",{children:"Real-time monitoring and health metrics"})]}),e.jsxs("div",{className:"status-indicator-modern",children:[e.jsx("div",{className:"status-pulse"}),e.jsx("span",{className:"status-text-modern",children:"All Systems Operational"})]})]}),e.jsxs("div",{className:"status-grid",children:[e.jsxs("div",{className:"status-card database",children:[e.jsxs("div",{className:"status-card-header",children:[e.jsx("div",{className:"status-icon",children:"🗄️"}),e.jsxs("div",{className:"status-info",children:[e.jsx("h3",{children:"Database"}),e.jsx("span",{className:"status-badge success",children:"Connected"})]})]}),e.jsxs("div",{className:"status-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Response Time"}),e.jsx("span",{className:"metric-value",children:"12ms"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Uptime"}),e.jsx("span",{className:"metric-value",children:"99.9%"})]})]}),e.jsxs("div",{className:"status-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"95%"}})}),e.jsx("span",{className:"progress-text",children:"95% Performance"})]})]}),e.jsxs("div",{className:"status-card authentication",children:[e.jsxs("div",{className:"status-card-header",children:[e.jsx("div",{className:"status-icon",children:"🔐"}),e.jsxs("div",{className:"status-info",children:[e.jsx("h3",{children:"Authentication"}),e.jsx("span",{className:"status-badge success",children:"Active"})]})]}),e.jsxs("div",{className:"status-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Active Users"}),e.jsx("span",{className:"metric-value",children:"24"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Last Login"}),e.jsx("span",{className:"metric-value",children:"2 min ago"})]})]}),e.jsxs("div",{className:"status-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"100%"}})}),e.jsx("span",{className:"progress-text",children:"100% Secure"})]})]}),e.jsxs("div",{className:"status-card storage",children:[e.jsxs("div",{className:"status-card-header",children:[e.jsx("div",{className:"status-icon",children:"💾"}),e.jsxs("div",{className:"status-info",children:[e.jsx("h3",{children:"Storage"}),e.jsx("span",{className:"status-badge warning",children:"75% Used"})]})]}),e.jsxs("div",{className:"status-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Used Space"}),e.jsx("span",{className:"metric-value",children:"7.5 GB"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Available"}),e.jsx("span",{className:"metric-value",children:"2.5 GB"})]})]}),e.jsxs("div",{className:"status-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill warning",style:{width:"75%"}})}),e.jsx("span",{className:"progress-text",children:"75% Capacity"})]})]})]})]}),e.jsxs("div",{className:"top-categories-modern",style:{background:"linear-gradient(180deg, rgba(59,130,246,0.1) 0%, rgba(0,0,0,0.05) 60%)",borderRadius:16,padding:20,boxShadow:"0 10px 30px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:44,height:44,borderRadius:12,background:"linear-gradient(135deg, #3b82f6, #06b6d4)",display:"grid",placeItems:"center",color:"white",fontSize:22,boxShadow:"0 8px 20px rgba(59,130,246,0.35)"},children:"🏆"}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:20,color:"#ffffff"},children:"Top Categories"}),e.jsx("p",{style:{margin:0,color:"#a1a1aa"},children:"Most used categories across your rebuttals"})]})]}),e.jsx("div",{children:e.jsx("button",{className:"create-rebuttal-btn",onClick:()=>t&&t("categories"),children:"Manage"})})]}),Array.isArray(a.topCategories)&&a.topCategories.length>0?e.jsx("div",{className:"top-categories-list",style:{display:"grid",gap:12},children:(()=>{const v=Math.max(...a.topCategories.map(h=>h.count||0),1);return a.topCategories.map((h,j)=>{const w=Math.round((h.count||0)/v*100),D=j===0?"🥇":j===1?"🥈":j===2?"🥉":`${j+1}`;return e.jsxs("div",{className:"top-category-card",onClick:()=>t&&t("categories"),style:{border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:14,background:"rgba(255,255,255,0.05)",boxShadow:"0 4px 14px rgba(0,0,0,0.1)",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"rgba(255,255,255,0.1)",display:"grid",placeItems:"center",fontSize:18},children:D}),e.jsx("div",{style:{width:10,height:10,borderRadius:9999,backgroundColor:h.color||"#6b7280"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{fontWeight:600,color:"#ffffff"},children:h.name}),e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",color:"#ffffff",borderRadius:9999,padding:"2px 8px",fontSize:12},children:[h.count," uses"]})]}),h.description?e.jsx("div",{style:{color:"#a1a1aa",fontSize:13,marginTop:2},children:h.description}):null]}),e.jsxs("div",{style:{fontWeight:700,color:"#ffffff"},children:[w,"%"]})]}),e.jsx("div",{style:{width:"100%",height:10,borderRadius:9999,background:"rgba(255,255,255,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{width:`${w}%`,height:"100%",background:`linear-gradient(90deg, ${h.color||"#3b82f6"} 0%, rgba(59,130,246,0.7) 100%)`}})})]},h.id||h.name)})})()}):e.jsxs("div",{className:"empty-activity",style:{textAlign:"center"},children:[e.jsx("div",{className:"empty-icon",children:"🏷️"}),e.jsx("h3",{style:{color:"#ffffff"},children:"No Categories Found"}),e.jsx("p",{style:{color:"#a1a1aa"},children:"Create categories to organize your rebuttals"}),e.jsxs("button",{className:"create-rebuttal-btn",onClick:()=>t&&t("categories"),children:[e.jsx("span",{children:"➕"}),"Create Category"]})]})]}),e.jsxs("div",{className:"quick-actions-modern",children:[e.jsxs("div",{className:"quick-actions-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"🚀 Quick Actions"}),e.jsx("p",{children:"Streamline your workflow with these essential tools"})]}),e.jsxs("div",{className:"header-decoration",children:[e.jsx("div",{className:"decoration-dot"}),e.jsx("div",{className:"decoration-dot"}),e.jsx("div",{className:"decoration-dot"})]})]}),e.jsxs("div",{className:"actions-grid",children:[e.jsxs("div",{className:"action-card primary",onClick:()=>t&&t("rebuttals"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"➕"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"Add Rebuttal"}),e.jsx("p",{children:"Create new response templates"}),e.jsx("div",{className:"action-badge",children:"New"})]}),e.jsx("div",{className:"action-arrow",children:"→"})]}),e.jsxs("div",{className:"action-card secondary",onClick:()=>t&&t("categories"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"🏷️"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"Manage Categories"}),e.jsx("p",{children:"Organize and structure content"}),e.jsx("div",{className:"action-badge",children:"Essential"})]}),e.jsx("div",{className:"action-arrow",children:"→"})]}),e.jsxs("div",{className:"action-card tertiary",onClick:()=>t&&t("dispositions"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"📊"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"View Analytics"}),e.jsx("p",{children:"Track performance metrics"}),e.jsx("div",{className:"action-badge",children:"Insights"})]}),e.jsx("div",{className:"action-arrow",children:"→"})]}),e.jsxs("div",{className:"action-card quaternary",onClick:()=>t&&t("time-blocks"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"⚙️"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"System Settings"}),e.jsx("p",{children:"Configure preferences"}),e.jsx("div",{className:"action-badge",children:"Admin"})]}),e.jsx("div",{className:"action-arrow",children:"→"})]}),e.jsxs("div",{className:"action-card quinary",onClick:()=>t&&t("users"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"👥"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"User Management"}),e.jsx("p",{children:"Manage team members"}),e.jsx("div",{className:"action-badge",children:"Team"})]}),e.jsx("div",{className:"action-arrow",children:"→"})]}),e.jsxs("div",{className:"action-card senary",onClick:()=>t&&t("faqs"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"❓"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"FAQ Management"}),e.jsx("p",{children:"Update help content"}),e.jsx("div",{className:"action-badge",children:"Support"})]}),e.jsx("div",{className:"action-arrow",children:"→"})]})]})]})]})]})},ox=[{id:"weekday-morning",time:"10:00 AM",label:"Morning",available:!0,dayType:"weekday"},{id:"weekday-afternoon",time:"2:00 PM",label:"Afternoon",available:!0,dayType:"weekday"},{id:"weekday-evening",time:"6:00 PM",label:"Evening",available:!0,dayType:"weekday"},{id:"weekend-morning",time:"10:00 AM",label:"Morning",available:!0,dayType:"weekend"},{id:"weekend-afternoon",time:"2:00 PM",label:"Afternoon",available:!0,dayType:"weekend"}],lx=[{id:"mida",name:"MIDA",reps:["John Smith","Sarah Johnson"],color:"#3b82f6"},{id:"esde",name:"ESDE",reps:["Mike Davis","Lisa Wilson"],color:"#10b981"},{id:"nova",name:"NOVA",reps:["David Brown","Emma Taylor"],color:"#f59e0b"},{id:"neng",name:"NENG",reps:["Alex Rodriguez","Maria Garcia"],color:"#ef4444"},{id:"nhme",name:"NHME",reps:["Jennifer Lee","Robert Wilson"],color:"#8b5cf6"},{id:"ctwm",name:"CTWM",reps:["Michael Chen","Amanda Johnson"],color:"#06b6d4"},{id:"sopa",name:"SOPA",reps:["Christopher Davis","Rachel Green"],color:"#f97316"},{id:"wcfl",name:"WCFL",reps:["Daniel Martinez","Jessica Taylor"],color:"#ec4899"}],iE=async()=>{try{console.log("Initializing scheduling data...");const t=await Ul(),s=await nm();if(t.length===0){console.log("Adding default time blocks...");for(const i of ox)await mj(i)}if(s.length===0){console.log("Adding default regions...");for(const i of lx)await pj(i)}const a=new Date;for(let i=0;i<21;i++){const l=new Date(a);l.setDate(a.getDate()+i);const d=l.toISOString().split("T")[0],m=l.getDay()===0||l.getDay()===6?"weekend":"weekday",g={date:d,dayType:m,slots:{}},v=ox.filter(h=>h.dayType===m);for(const h of v){g.slots[h.id]={};for(const j of lx)g.slots[h.id][j.id]={available:!0,booked:0,capacity:3}}await fj(d,g)}console.log("Scheduling data initialized successfully!")}catch(t){console.error("Error initializing scheduling data:",t)}},oE=async()=>{try{console.log("🔧 Fixing availability data to match current time blocks...");const t=await Ul(),s=await nm();console.log("📅 Current time blocks:",t),console.log("🏢 Current regions:",s);const a={morning:"weekend-morning","late-morning":"weekend-morning","early-afternoon":"weekend-afternoon","late-afternoon":"weekend-afternoon",evening:"weekday-evening"},i=new Date;for(let l=0;l<30;l++){const d=new Date(i);d.setDate(i.getDate()+l);const u=d.toISOString().split("T")[0],g=d.getDay()===0||d.getDay()===6?"weekend":"weekday",v=await Pl(u);if(v&&v.slots){console.log(`🔄 Fixing availability for ${u} (${g})`);const h={date:u,dayType:g,slots:{}},j=t.filter(w=>w.dayType===g);for(const w of j){h.slots[w.id]={};for(const D of s){let S=null;Object.keys(v.slots).forEach(b=>{a[b]===w.id&&v.slots[b]?.[D.id]&&(S=v.slots[b][D.id])}),h.slots[w.id][D.id]=S||{available:!0,booked:0,capacity:3}}}await fj(u,h),console.log(`✅ Fixed availability for ${u}`)}}console.log("🎉 Availability data fix completed!")}catch(t){console.error("❌ Error fixing availability data:",t)}},lE=()=>{const[t,s]=y.useState({weekdays:[],weekends:[]}),[a,i]=y.useState([]),[l,d]=y.useState({}),[u,m]=y.useState(!0),[g,v]=y.useState(null),[h,j]=y.useState(null),[w,D]=y.useState(null),[S,b]=y.useState(!1),[C,A]=y.useState(!1),[L,N]=y.useState(!1),[I,W]=y.useState(!1),Q=(()=>{const T=[],R=new Date;for(let E=0;E<21;E++){const f=new Date(R);f.setDate(R.getDate()+E),T.push(f)}return T})();y.useEffect(()=>{(async()=>{try{m(!0),await iE();const R=await Ul(),E=R.filter(M=>M.dayType==="weekday"),f=R.filter(M=>M.dayType==="weekend");s({weekdays:E,weekends:f});const P=await nm();i(P),m(!1)}catch(R){console.error("Error loading data:",R),m(!1)}})()},[]),y.useEffect(()=>{const T=hj(f=>{const P=f.filter(K=>K.dayType==="weekday"),M=f.filter(K=>K.dayType==="weekend");s({weekdays:P,weekends:M})}),R=K2(f=>{i(f)});return(async()=>{const f={};for(const P of Q){const M=P.toISOString().split("T")[0],K=await Pl(M);K&&(f[M]=K)}d(f)})(),()=>{T(),R()}},[]);const F=async(T,R,E,f)=>{try{const P=t[T].find(M=>M.id===R);P&&await G2(R,{...P,[E]:f})}catch(P){console.error("Error updating time block:",P)}},te=async T=>{try{const R={id:Date.now().toString(),time:"",label:"",available:!0,dayType:T};await mj(R),j(R.id)}catch(R){console.error("Error adding time block:",R)}},ce=async(T,R)=>{try{await Q2(R)}catch(E){console.error("Error deleting time block:",E)}},z=async(T,R,E)=>{try{const f=a.find(P=>P.id===T);f&&await J2(T,{...f,[R]:E})}catch(f){console.error("Error updating region:",f)}},ee=async()=>{try{const T={id:Date.now().toString(),name:"New Region",reps:[],color:"#3b82f6"};await pj(T),D(T.id)}catch(T){console.error("Error adding region:",T)}},oe=async T=>{try{await Z2(T)}catch(R){console.error("Error deleting region:",R)}},re=async()=>{try{N(!0),await oE(),alert("Availability data has been fixed to match current time blocks!")}catch(T){console.error("Error fixing availability data:",T),alert("Error fixing availability data. Check console for details.")}finally{N(!1)}},le=async(T,R,E,f)=>{try{const P=T.toISOString().split("T")[0],M=await Pl(P)||{},K={...M,slots:{...M.slots,[R]:{...M.slots?.[R],[E]:{available:f,booked:M.slots?.[R]?.[E]?.booked||0,capacity:M.slots?.[R]?.[E]?.capacity||3}}}};await d(P,K)}catch(P){console.error("Error updating availability:",P)}},O=T=>T.getDay()===0||T.getDay()===6,q=T=>O(T)?t.weekends:t.weekdays;if(u)return e.jsx("div",{className:"time-block-management",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50vh",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:600},children:"Loading Time Block Management..."}),e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}})]})});const Y=T=>T.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return e.jsxs("div",{className:"time-block-management",children:[e.jsxs(Pe.div,{className:"tbm-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("h1",{children:"⏰ Time Block Management"}),e.jsx("p",{children:"Configure appointment time blocks, regional assignments, and availability"}),e.jsx("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"white",fontSize:"0.9rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:I,onChange:T=>W(T.target.checked),style:{width:"16px",height:"16px"}}),"🛠️ Development Mode"]})})]}),e.jsxs("div",{className:"tbm-content",children:[!I&&e.jsxs(Pe.div,{className:"tbm-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center",padding:"3rem 2rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Time Block Management"]}),e.jsx("h2",{style:{color:"#1f2937",fontSize:"2rem",fontWeight:700,marginBottom:"0.5rem"},children:"Coming Soon! 🚀"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem auto"},children:"Advanced time block management features are currently under development. Enable Development Mode to access the current functionality and help us test new features."}),e.jsxs("button",{onClick:()=>W(!0),style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Enable Development Mode"]})]}),e.jsxs(Pe.div,{className:"tbm-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},style:{display:I?"block":"none"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Qu,{className:"section-icon"}),e.jsx("h2",{children:"Time Blocks Configuration"}),e.jsx("button",{onClick:re,disabled:L,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:8,padding:"0.5rem 1rem",fontSize:"0.875rem",cursor:L?"not-allowed":"pointer",opacity:L?.6:1},children:L?"Fixing...":"🔧 Fix Availability Data"})]}),e.jsxs("div",{className:"time-blocks-grid",children:[e.jsxs("div",{className:"day-type-section",children:[e.jsx("h3",{children:"Weekday Blocks"}),e.jsxs("div",{className:"blocks-list",children:[t.weekdays.map(T=>e.jsx("div",{className:"time-block-item",children:h===T.id?e.jsxs("div",{className:"edit-block-form",children:[e.jsx("input",{type:"time",value:T.time,onChange:R=>F("weekdays",T.id,"time",R.target.value),className:"time-input"}),e.jsx("input",{type:"text",placeholder:"Label (e.g., Morning)",value:T.label,onChange:R=>F("weekdays",T.id,"label",R.target.value),className:"label-input"}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>j(null),className:"save-btn",children:e.jsx(gu,{size:16})}),e.jsx("button",{onClick:()=>ce("weekdays",T.id),className:"delete-btn",children:e.jsx(xu,{size:16})})]})]}):e.jsxs("div",{className:"block-display",children:[e.jsx("span",{className:"block-time",children:T.time}),e.jsx("span",{className:"block-label",children:T.label}),e.jsx("button",{onClick:()=>j(T.id),className:"edit-btn",children:e.jsx(vu,{size:16})})]})},T.id)),e.jsxs("button",{onClick:()=>te("weekdays"),className:"add-block-btn",children:[e.jsx(fu,{size:16}),"Add Block"]})]})]}),e.jsxs("div",{className:"day-type-section",children:[e.jsx("h3",{children:"Weekend Blocks"}),e.jsxs("div",{className:"blocks-list",children:[t.weekends.map(T=>e.jsx("div",{className:"time-block-item",children:h===T.id?e.jsxs("div",{className:"edit-block-form",children:[e.jsx("input",{type:"time",value:T.time,onChange:R=>F("weekends",T.id,"time",R.target.value),className:"time-input"}),e.jsx("input",{type:"text",placeholder:"Label (e.g., Morning)",value:T.label,onChange:R=>F("weekends",T.id,"label",R.target.value),className:"label-input"}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>j(null),className:"save-btn",children:e.jsx(gu,{size:16})}),e.jsx("button",{onClick:()=>ce("weekends",T.id),className:"delete-btn",children:e.jsx(xu,{size:16})})]})]}):e.jsxs("div",{className:"block-display",children:[e.jsx("span",{className:"block-time",children:T.time}),e.jsx("span",{className:"block-label",children:T.label}),e.jsx("button",{onClick:()=>j(T.id),className:"edit-btn",children:e.jsx(vu,{size:16})})]})},T.id)),e.jsxs("button",{onClick:()=>te("weekends"),className:"add-block-btn",children:[e.jsx(fu,{size:16}),"Add Block"]})]})]})]})]}),e.jsxs(Pe.div,{className:"tbm-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},style:{display:I?"block":"none"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx(I2,{className:"section-icon"}),e.jsx("h2",{children:"Regional Management"})]}),e.jsxs("div",{className:"regions-grid",children:[(a||[]).filter(T=>T).map(T=>e.jsx("div",{className:"region-card",children:w===T.id?e.jsxs("div",{className:"edit-region-form",children:[e.jsx("input",{type:"text",placeholder:"Region Name",value:T.name,onChange:R=>z(T.id,"name",R.target.value),className:"region-name-input"}),e.jsx("div",{className:"reps-input",children:e.jsx("input",{type:"text",placeholder:"Rep names (comma separated)",value:(T.reps||[]).join(", "),onChange:R=>z(T.id,"reps",R.target.value.split(",").map(E=>E.trim()).filter(E=>E.length>0)),className:"reps-input-field"})}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>D(null),className:"save-btn",children:e.jsx(gu,{size:16})}),e.jsx("button",{onClick:()=>oe(T.id),className:"delete-btn",children:e.jsx(xu,{size:16})})]})]}):e.jsxs("div",{className:"region-display",children:[e.jsxs("div",{className:"region-header",children:[e.jsx("div",{className:"region-color",style:{backgroundColor:T.color}}),e.jsx("h3",{children:T.name}),e.jsx("button",{onClick:()=>D(T.id),className:"edit-btn",children:e.jsx(vu,{size:16})})]}),e.jsxs("div",{className:"region-reps",children:[e.jsx(uj,{size:16}),e.jsxs("span",{children:[(T.reps||[]).length," Reps"]})]}),e.jsx("div",{className:"reps-list",children:(T.reps||[]).map((R,E)=>e.jsx("span",{className:"rep-name",children:R},E))})]})},T.id)),e.jsxs("button",{onClick:ee,className:"add-region-btn",children:[e.jsx(fu,{size:16}),"Add Region"]})]})]}),e.jsxs(Pe.div,{className:"tbm-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},style:{display:I?"block":"none"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Gu,{className:"section-icon"}),e.jsx("h2",{children:"Availability Calendar (Next 3 Weeks)"})]}),e.jsx("div",{className:"availability-calendar",children:Q.map(T=>{const R=T.toISOString().split("T")[0],E=q(T),f=T<new Date;return e.jsxs("div",{className:`calendar-day ${f?"past":""}`,children:[e.jsxs("div",{className:"day-header",children:[e.jsx("span",{className:"day-date",children:Y(T)}),O(T)&&e.jsx("span",{className:"weekend-badge",children:"Weekend"})]}),e.jsx("div",{className:"day-blocks",children:E.map(P=>e.jsxs("div",{className:"availability-block",children:[e.jsxs("div",{className:"block-info",children:[e.jsx("span",{className:"block-time",children:P.time}),e.jsx("span",{className:"block-label",children:P.label})]}),e.jsx("div",{className:"region-availability",children:a.map(M=>{const K=l[R]?.slots?.[P.id]?.[M.id],ue=K?.available!==!1,be=K?.booked||0,pe=K?.capacity||3;return e.jsxs("button",{className:`region-availability-btn ${ue?"available":"unavailable"}`,onClick:()=>!f&&le(R,P.id,M.id,!ue),disabled:f,style:{backgroundColor:ue?M.color:"#e5e7eb",opacity:f?.5:1},title:`${M.name}: ${ue?"Available":"Unavailable"} (${be}/${pe} booked)`,children:[M.name," (",be,"/",pe,")"]},M.id)})})]},P.id))})]},R)})})]})]})]})},cE="adminSettings:",dE=t=>`${cE}${t||"global"}`,cx={theme:"light",enableCustomerService:!0,enableFAQ:!0,enableRebuttals:!0,companyDisplayName:"",companyLegalName:"",companyPhone:"",companyEmail:"",companyWebsite:"",hqAddress:"",serviceAreasText:"",businessHoursNote:"",enableMaintenanceMode:!1,maintenanceMessage:"",enableSalesforce:!1,salesforceWebhookUrl:"",salesforceAuthToken:"",leadDefaultAssigneeEmail:"",leadCcEmails:""},uE=({companyId:t,companyName:s})=>{const a=y.useMemo(()=>dE(t),[t]),[i,l]=y.useState(cx),[d,u]=y.useState(""),[m,g]=y.useState(""),[v,h]=y.useState(!1),[j,w]=y.useState(""),[D,S]=y.useState(!1),[b,C]=y.useState(""),A=y.useRef(null),[L,N]=y.useState(!1),[I,W]=y.useState("");y.useEffect(()=>{try{const le=localStorage.getItem(a);if(le){const O=JSON.parse(le);l({...cx,...O})}}catch{}},[a]);const B=(le,O)=>{l(q=>({...q,[le]:O}))},Q=()=>{try{localStorage.setItem(a,JSON.stringify(i));const le=Gs(),O=Ae(le,"system","maintenance");gn(O,{enabled:!!i.enableMaintenanceMode,message:i.maintenanceMessage||"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:Ts()},{merge:!0}),u("Saved"),setTimeout(()=>u(""),1500)}catch{u("Error saving")}},F=async()=>{try{u("Backing up...");const[le,O,q]=await Promise.all([cr.getAllRebuttals(),cr.getArchivedRebuttals(),cr.getCategories()]),Y={meta:{companyId:t||null,companyName:s||null,exportedAt:new Date().toISOString()},activeRebuttals:le,archivedRebuttals:O,categories:q},T=new Blob([JSON.stringify(Y,null,2)],{type:"application/json"}),R=URL.createObjectURL(T),E=document.createElement("a");E.href=R,E.download=`rebuttals-backup-${s||"global"}-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,E.click(),URL.revokeObjectURL(R),u("Backup downloaded"),setTimeout(()=>u(""),2e3)}catch(le){console.error(le),u("Backup failed")}},te=async()=>{if(v)return;const le=(s||"DELETE").toLowerCase();if(m.trim().toLowerCase()!==le){u(`Type "${s||"DELETE"}" to confirm`),setTimeout(()=>u(""),2e3);return}try{h(!0),w("Fetching documents...");const O=Gs(),[q,Y]=await Promise.all([De(Ce(O,"rebuttals")),De(Ce(O,"archived_rebuttals"))]),T=q.size+Y.size;if(T===0){w("Nothing to delete"),h(!1);return}const R=(K,ue)=>{const be=[];for(let pe=0;pe<K.length;pe+=ue)be.push(K.slice(pe,pe+ue));return be};let E=0;const f=async K=>{const ue=qt(O);K.forEach(be=>ue.delete(be.ref)),await ue.commit(),E+=K.length,w(`Deleted ${E} / ${T}`)},P=q.docs,M=Y.docs;for(const K of R(P,450))await f(K);for(const K of R(M,450))await f(K);w("Completed"),u("All rebuttals deleted")}catch(O){console.error(O),w("Delete failed"),u("Delete failed")}finally{h(!1),setTimeout(()=>u(""),2500)}},ce=async()=>{if(v)return;const le=(s||"DELETE").toLowerCase();if(m.trim().toLowerCase()!==le){u(`Type "${s||"DELETE"}" to confirm`),setTimeout(()=>u(""),2e3);return}try{h(!0),w("Fetching archived rebuttals...");const O=Gs(),q=await De(Ce(O,"archived_rebuttals")),Y=q.size;if(Y===0){w("No archived rebuttals"),h(!1);return}const T=(E,f)=>{const P=[];for(let M=0;M<E.length;M+=f)P.push(E.slice(M,M+f));return P};let R=0;for(const E of T(q.docs,450)){const f=qt(O);E.forEach(P=>f.delete(P.ref)),await f.commit(),R+=E.length,w(`Deleted ${R} / ${Y}`)}w("Completed"),u("Archived rebuttals deleted")}catch(O){console.error(O),w("Delete failed"),u("Delete failed")}finally{h(!1),setTimeout(()=>u(""),2500)}},z=async()=>{try{u("Purging empty categories...");const le=Gs(),q=(await cr.getCategories()).filter(T=>(T.rebuttalCount||0)===0);if(q.length===0){u("No empty categories"),setTimeout(()=>u(""),1500);return}const Y=qt(le);q.forEach(T=>{const R=Ae(le,"categories",T.id);Y.delete(R)}),await Y.commit(),u(`Purged ${q.length} empty categories`),setTimeout(()=>u(""),2e3)}catch(le){console.error(le),u("Purge failed")}},ee=()=>{A.current?.click()},oe=async le=>{const O=le.target.files?.[0];if(O){S(!0),C("Reading file...");try{const q=await O.text(),Y=JSON.parse(q),T=Gs();if(C("Writing categories..."),Array.isArray(Y.categories))for(let R=0;R<Y.categories.length;R+=400){const E=qt(T);Y.categories.slice(R,R+400).forEach(P=>{const M=P.id||Ae(Ce(T,"categories")).id,{id:K,...ue}=P;E.set(Ae(T,"categories",M),ue,{merge:!0})}),await E.commit()}if(C("Writing rebuttals..."),Array.isArray(Y.activeRebuttals))for(let R=0;R<Y.activeRebuttals.length;R+=400){const E=qt(T);Y.activeRebuttals.slice(R,R+400).forEach(P=>{const M=P.id||Ae(Ce(T,"rebuttals")).id,{id:K,...ue}=P;E.set(Ae(T,"rebuttals",M),ue,{merge:!0})}),await E.commit()}if(C("Writing archived rebuttals..."),Array.isArray(Y.archivedRebuttals))for(let R=0;R<Y.archivedRebuttals.length;R+=400){const E=qt(T);Y.archivedRebuttals.slice(R,R+400).forEach(P=>{const M=P.id||Ae(Ce(T,"archived_rebuttals")).id,{id:K,...ue}=P;E.set(Ae(T,"archived_rebuttals",M),ue,{merge:!0})}),await E.commit()}C("Completed"),u("Restore completed")}catch(q){console.error(q),C("Restore failed"),u("Restore failed")}finally{S(!1),le.target.value="",setTimeout(()=>u(""),2500)}}},re=async()=>{if(L)return;const le=(s||"DELETE").toLowerCase();if(m.trim().toLowerCase()!==le){u(`Type "${s||"DELETE"}" to confirm`),setTimeout(()=>u(""),2e3);return}try{N(!0),W("Fetching archived rebuttals...");const O=Gs(),q=await De(Ce(O,"archived_rebuttals")),Y=q.size;if(Y===0){W("No archived rebuttals"),N(!1);return}const T=q.docs,R=(f,P)=>{const M=[];for(let K=0;K<f.length;K+=P)M.push(f.slice(K,K+P));return M};let E=0;for(const f of R(T,200)){const P=qt(O);f.forEach(M=>{const K=M.data(),{archivedAt:ue,archivedReason:be,originalCategory:pe,...X}=K,_=Ae(Ce(O,"rebuttals"));P.set(_,{...X,createdAt:X.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}),P.delete(M.ref)}),await P.commit(),E+=f.length,W(`Restored ${E} / ${Y}`)}W("Completed"),u("Archived rebuttals restored")}catch(O){console.error(O),W("Restore failed"),u("Restore failed")}finally{N(!1),setTimeout(()=>u(""),2500)}};return e.jsxs("div",{className:"admin-settings",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("div",{className:"settings-title",children:"⚙️ Settings"}),e.jsx("div",{className:"settings-subtitle",children:s?`Manage settings for ${s}`:"Manage admin dashboard preferences"})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"🏢"}),e.jsx("h3",{className:"settings-card-title",children:"Company"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("div",{className:"kv",children:[e.jsx("span",{className:"kv-key",children:"Company ID"}),e.jsx("span",{className:"kv-value",children:e.jsx("code",{children:t||"N/A"})})]}),e.jsxs("div",{className:"kv",children:[e.jsx("span",{className:"kv-key",children:"Company Name"}),e.jsx("span",{className:"kv-value",children:e.jsx("strong",{children:s||"N/A"})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Display name"}),e.jsx("input",{className:"field-input",value:i.companyDisplayName,onChange:le=>B("companyDisplayName",le.target.value),placeholder:"Long Home"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Legal name"}),e.jsx("input",{className:"field-input",value:i.companyLegalName,onChange:le=>B("companyLegalName",le.target.value),placeholder:"Long Home Products, Inc."})]})]})]}),e.jsxs("section",{className:"settings-card danger-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"⚠️"}),e.jsx("h3",{className:"settings-card-title",children:"Danger zone"})]}),e.jsx("div",{className:"settings-card-body",children:e.jsxs("div",{className:"danger-actions",children:[e.jsx("button",{className:"btn",onClick:F,children:"Backup all rebuttals to JSON"}),e.jsxs("div",{children:[e.jsx("input",{ref:A,type:"file",accept:"application/json",style:{display:"none"},onChange:oe}),e.jsx("button",{className:"btn",onClick:ee,disabled:D,children:D?"Restoring…":"Restore from backup JSON"}),b&&e.jsx("div",{className:"progress-text",children:b})]}),e.jsx("button",{className:"btn",onClick:z,children:"Purge empty categories"}),e.jsxs("div",{className:"danger-delete",children:[e.jsxs("div",{className:"field",children:[e.jsxs("label",{className:"field-label",children:['Type "',s||"DELETE",'" to confirm']}),e.jsx("input",{className:"field-input",value:m,onChange:le=>g(le.target.value),placeholder:s||"DELETE"})]}),e.jsx("button",{className:"btn btn-danger",onClick:te,disabled:v,children:v?"Deleting…":"Delete ALL rebuttals"}),j&&e.jsx("div",{className:"progress-text",children:j}),e.jsx("button",{className:"btn btn-danger",onClick:ce,disabled:v,children:v?"Deleting…":"Delete archived rebuttals only"}),e.jsx("button",{className:"btn",onClick:re,disabled:L,children:L?"Restoring…":"Restore all archived to active"}),I&&e.jsx("div",{className:"progress-text",children:I})]})]})})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"🧩"}),e.jsx("h3",{className:"settings-card-title",children:"Features"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:i.enableRebuttals,onChange:le=>B("enableRebuttals",le.target.checked)}),e.jsx("span",{children:"Enable Rebuttals"})]}),e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:i.enableCustomerService,onChange:le=>B("enableCustomerService",le.target.checked)}),e.jsx("span",{children:"Enable Customer Service"})]}),e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:i.enableFAQ,onChange:le=>B("enableFAQ",le.target.checked)}),e.jsx("span",{children:"Enable FAQ"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"📞"}),e.jsx("h3",{className:"settings-card-title",children:"Contact & Address"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Phone"}),e.jsx("input",{className:"field-input",value:i.companyPhone,onChange:le=>B("companyPhone",le.target.value),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Email"}),e.jsx("input",{className:"field-input",type:"email",value:i.companyEmail,onChange:le=>B("companyEmail",le.target.value),placeholder:"support@example.com"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Website"}),e.jsx("input",{className:"field-input",type:"url",value:i.companyWebsite,onChange:le=>B("companyWebsite",le.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"HQ Address"}),e.jsx("textarea",{className:"field-input",rows:"3",value:i.hqAddress,onChange:le=>B("hqAddress",le.target.value),placeholder:"123 Main St, City, ST 12345"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"🗺️"}),e.jsx("h3",{className:"settings-card-title",children:"Service Areas"})]}),e.jsx("div",{className:"settings-card-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"ZIPs/States (comma or newline separated)"}),e.jsx("textarea",{className:"field-input",rows:"4",value:i.serviceAreasText,onChange:le=>B("serviceAreasText",le.target.value),placeholder:`DC, MD, VA
20001, 20002, 22202`})]})})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"⏰"}),e.jsx("h3",{className:"settings-card-title",children:"Business Hours"})]}),e.jsx("div",{className:"settings-card-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Hours note"}),e.jsx("textarea",{className:"field-input",rows:"3",value:i.businessHoursNote,onChange:le=>B("businessHoursNote",le.target.value),placeholder:"Mon–Fri 8am–6pm, Sat 9am–1pm, Sun closed"})]})})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"🤝"}),e.jsx("h3",{className:"settings-card-title",children:"CRM & Integrations"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:i.enableSalesforce,onChange:le=>B("enableSalesforce",le.target.checked)}),e.jsx("span",{children:"Enable Salesforce sync"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Salesforce webhook URL"}),e.jsx("input",{className:"field-input",type:"url",value:i.salesforceWebhookUrl,onChange:le=>B("salesforceWebhookUrl",le.target.value),placeholder:"/api/sendToSalesforce"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Salesforce auth token"}),e.jsx("input",{className:"field-input",value:i.salesforceAuthToken,onChange:le=>B("salesforceAuthToken",le.target.value),placeholder:"token or key"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"🛠️"}),e.jsx("h3",{className:"settings-card-title",children:"Maintenance Mode"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:i.enableMaintenanceMode,onChange:le=>B("enableMaintenanceMode",le.target.checked)}),e.jsx("span",{children:"Enable maintenance mode for this company"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Maintenance message"}),e.jsx("input",{className:"field-input",value:i.maintenanceMessage,onChange:le=>B("maintenanceMessage",le.target.value),placeholder:"We'll be back soon."})]})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Save changes"}),d&&e.jsx("span",{className:"save-status",children:d})]})]})},hE=()=>{const{currentUser:t,authLoading:s}=wn(),a=ms(),[i,l]=y.useState(!0),[d,u]=y.useState(null),[m,g]=y.useState(null),[v,h]=y.useState("dashboard"),[j,w]=y.useState(""),[D,S]=y.useState(!1),[b,C]=y.useState(""),A=W=>({oLuxoJq8SHXXEWm9KSEU:"Long Home","long-home":"Long Home"})[W]||W;y.useEffect(()=>{j&&C(A(j))},[j]),y.useEffect(()=>{(async()=>{try{console.log("🔍 AdminDashboard: Starting auth check..."),console.log("🔍 AdminDashboard: Current user:",t),console.log("🔍 AdminDashboard: Auth loading:",s);const B=localStorage.getItem("adminUser");if(B){const Q=JSON.parse(B);if(console.log("🔍 AdminDashboard: Found admin user in localStorage:",Q),Q.role==="super-admin"){const te=new URL(window.location.href).searchParams.get("impersonate");let ce=null;try{ce=JSON.parse(localStorage.getItem("impersonation")||"null")}catch{}if(console.log("🔍 AdminDashboard: Super admin check:",{impersonateCompanyId:te,impersonation:ce,url:window.location.href,hasImpersonateParam:!!te,hasImpersonationData:!!ce?.enabled}),te||ce?.enabled){const z=te||ce?.companyId||"";w(z),S(!0),localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:z})),console.log("🔍 AdminDashboard: Super admin impersonating company:",z),console.log("🔍 AdminDashboard: Staying on admin dashboard for impersonation")}else{console.log("🔍 AdminDashboard: Super admin (no impersonation), redirecting to SaaS dashboard"),console.log("🔍 AdminDashboard: Redirecting to SaaS dashboard because no impersonation found"),a("/admin/saas");return}}else if(Q.role==="company-admin"){const F=Q.companyId;if(F)w(F),S(!1),console.log("🔍 AdminDashboard: Company admin accessing their company:",F);else{console.error("🔍 AdminDashboard: Company admin missing companyId"),u("Company admin missing company information");return}}g(Q),l(!1)}else{if(console.log("🔍 AdminDashboard: No admin user in localStorage, checking Firestore..."),!t){console.log("🔍 AdminDashboard: No current user from Firebase Auth, redirecting to login"),a("/admin/login");return}const Q=Ae(Gs(),"super-admins",t.uid),F=await pt(Q);if(F.exists()){const z=F.data();console.log("🔍 AdminDashboard: Found super admin in Firestore, redirecting to SaaS dashboard");const ee={uid:t.uid,email:t.email,role:"super-admin",...z};localStorage.setItem("adminUser",JSON.stringify(ee)),a("/admin/saas");return}const te=Ae(Gs(),"admins",t.uid),ce=await pt(te);if(ce.exists()){const z=ce.data();console.log("🔍 AdminDashboard: Found admin in Firestore:",z),g({...t,...z}),localStorage.setItem("adminUser",JSON.stringify({...t,...z})),l(!1)}else{console.log("🔍 AdminDashboard: User is not admin, redirecting to login"),a("/admin/login");return}}console.log("🔍 AdminDashboard: Auth check completed successfully")}catch(B){console.error("🔍 AdminDashboard: Auth check error:",B),u("Authentication error: "+B.message),l(!1)}})()},[t,s,a]);const L=()=>{localStorage.removeItem("adminUser"),a("/admin/login")},N=()=>{try{localStorage.removeItem("impersonation")}catch{}S(!1),a("/admin/saas")},I=()=>{switch(v){case"dashboard":return e.jsx(aE,{onGoTab:W=>h(W),companyId:j});case"rebuttals":return e.jsx(JT,{companyId:j});case"categories":return e.jsx(ZT,{companyId:j});case"dispositions":return e.jsx(XT,{companyId:j});case"customer-service":return e.jsx(tE,{companyId:j});case"faq":return e.jsx(sE,{companyId:j});case"users":return e.jsx(nE,{companyId:j});case"time-blocks":return e.jsx(lE,{companyId:j});case"settings":return e.jsx(uE,{companyId:j,companyName:b});default:return null}};return i?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:600},children:"Loading Admin Dashboard..."}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:"Please wait while we initialize your admin panel"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#999",marginTop:"1rem"},children:[e.jsxs("div",{children:["Current user: ",t?t.email:"None"]}),e.jsxs("div",{children:["Auth loading: ",s?"Yes":"No"]}),e.jsxs("div",{children:["Admin user in localStorage: ",localStorage.getItem("adminUser")?"Yes":"No"]})]}),e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}})]}):d?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:d}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):m?e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("header",{className:"admin-header",children:[e.jsx("h1",{children:"Admin Dashboard"}),(D||m?.role==="company-admin"&&j)&&e.jsx("div",{className:"impersonation-banner",children:e.jsxs("span",{children:[D?"🔍 Impersonating Company:":"🏢 Company Admin for:"," ",b]})}),e.jsxs("div",{className:"admin-actions",children:[m?.role==="super-admin"&&D&&e.jsx("button",{className:"admin-header-button",onClick:N,children:"Back to My Dashboard"}),b==="Long Home"&&e.jsx("button",{className:"admin-header-button training-button",onClick:()=>window.open("/app","_blank"),children:"🎓 Visit Training"}),e.jsxs("span",{children:["Welcome, ",m.email]}),e.jsx("button",{onClick:L,children:"Logout"})]})]}),e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("aside",{className:"sidebar",children:[e.jsx("button",{className:v==="dashboard"?"active":"",onClick:()=>h("dashboard"),children:"Dashboard"}),e.jsx("button",{className:v==="rebuttals"?"active":"",onClick:()=>h("rebuttals"),children:"Rebuttals"}),e.jsx("button",{className:v==="categories"?"active":"",onClick:()=>h("categories"),children:"Categories"}),e.jsx("button",{className:v==="dispositions"?"active":"",onClick:()=>h("dispositions"),children:"Lead Dispositions"}),e.jsx("button",{className:v==="customer-service"?"active":"",onClick:()=>h("customer-service"),children:"Customer Service"}),e.jsx("button",{className:v==="faq"?"active":"",onClick:()=>h("faq"),children:"FAQ"}),e.jsx("button",{className:v==="users"?"active":"",onClick:()=>h("users"),children:"Users"}),e.jsx("button",{className:v==="time-blocks"?"active":"",onClick:()=>h("time-blocks"),children:"Time Blocks"}),e.jsx("button",{className:v==="settings"?"active":"",onClick:()=>h("settings"),children:"Settings"})]}),e.jsx("main",{className:"dashboard-content",children:I()})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access the admin dashboard."}),e.jsx("button",{onClick:()=>a("/admin/login"),children:"Go to Login"})]})},mE=()=>{const[t,s]=y.useState(""),[a,i]=y.useState(""),[l,d]=y.useState(""),[u,m]=y.useState(!1),[g,v]=y.useState(!1),[h,j]=y.useState(""),[w,D]=y.useState(null),S=ms();y.useEffect(()=>{const L=localStorage.getItem("adminUser");L&&(JSON.parse(L).role==="super-admin"?S("/admin/saas"):S("/admin/dashboard"))},[S]);const b=async L=>{try{const N=Ae(fe(),"super-admins",L.uid),I=await pt(N);if(I.exists()){const ce=I.data();console.log("🔍 AdminLogin: User is a super admin, redirecting to SaaS dashboard"),console.log("🔍 AdminLogin: Super admin data:",ce);const z={uid:L.uid,email:L.email,role:"super-admin",...ce};return console.log("🔍 AdminLogin: Storing admin user in localStorage:",z),localStorage.setItem("adminUser",JSON.stringify(z)),console.log("🔍 AdminLogin: Navigating to /admin/saas"),S("/admin/saas"),"super-admin"}const W=Ae(fe(),"company-admins",L.uid),B=await pt(W);if(B.exists()){const ce=B.data();console.log("🔍 AdminLogin: User is company admin:",ce);const z={uid:L.uid,email:L.email,role:"company-admin",companyId:ce.companyId,...ce};return localStorage.setItem("adminUser",JSON.stringify(z)),console.log("🔍 AdminLogin: Navigating to /admin/company"),S("/admin/company"),"company-admin"}const Q=Ae(fe(),"admins",L.uid),F=await pt(Q);if(!F.exists())return await gn(Q,{email:L.email,role:"admin",displayName:L.displayName||"",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()}),"admin";const te=F.data();return(!te?.role||te.role!=="admin")&&await gn(Q,{role:"admin",lastLogin:new Date().toISOString()},{merge:!0}),"admin"}catch(N){throw console.error("Error verifying admin status:",N),N}},C=async L=>{L.preventDefault(),d(""),m(!0);try{const{user:N,needsDisplayName:I}=await Or.loginUser(t,a);if(I){D(N),v(!0),m(!1);return}await b(N)==="admin"&&(localStorage.setItem("adminUser",JSON.stringify({...N,role:"admin"})),S("/admin/dashboard"))}catch(N){d(N.message||"Failed to sign in. Please try again.")}finally{m(!1)}},A=async L=>{if(L.preventDefault(),!h.trim()){d("Please enter a display name");return}m(!0);try{await Or.updateDisplayName(w.uid,h.trim()),await b(w)==="admin"&&(localStorage.setItem("adminUser",JSON.stringify({...w,displayName:h.trim(),role:"admin"})),S("/admin/dashboard"))}catch(N){d(N.message||"Failed to update display name. Please try again.")}finally{m(!1)}};return g?e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("button",{className:"back-button",onClick:()=>S("/"),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back to Home"]}),e.jsxs("div",{className:"admin-login-card",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:"Set Your Display Name"}),e.jsx("p",{children:"Please enter your display name to continue"})]}),l&&e.jsx("div",{className:"error-message",children:l}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"displayName",children:"Display Name"}),e.jsx("input",{type:"text",id:"displayName",value:h,onChange:L=>j(L.target.value),placeholder:"Enter your display name",required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",disabled:u,children:u?"Saving...":"Continue"})]})]})]}):e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("button",{className:"back-button",onClick:()=>S("/"),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back to Home"]}),e.jsxs("div",{className:"admin-login-card",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:"Admin Login"}),e.jsx("p",{children:"Sign in to access the admin dashboard"})]}),l&&e.jsx("div",{className:"error-message",children:l}),e.jsxs("form",{onSubmit:C,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:L=>s(L.target.value),placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:a,onChange:L=>i(L.target.value),placeholder:"Enter your password",required:!0})]}),e.jsx("button",{type:"submit",className:"login-button",disabled:u,children:u?"Signing in...":"Sign In"})]})]})]})},pE=async(t,s={})=>{try{const a=Ae(fe(),"admins",t.uid);await gn(a,{email:t.email,role:"admin",displayName:t.displayName||"",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...s},{merge:!0})}catch(a){throw console.error("Error creating admin entry:",a),a}},fE=async(t,s)=>{try{const i=(await px(rt,t,s)).user;return await pE(i),i}catch(a){throw console.error("Error creating admin user:",a),a}},gE=()=>{const[t,s]=y.useState(""),[a,i]=y.useState(""),[l,d]=y.useState(""),[u,m]=y.useState(""),[g,v]=y.useState(""),[h,j]=y.useState(!1),w=async D=>{if(D.preventDefault(),m(""),v(""),j(!0),a!==l){m("Passwords do not match"),j(!1);return}if(a.length<6){m("Password must be at least 6 characters long"),j(!1);return}try{await fE(t,a),v("Admin user created successfully! You can now log in."),s(""),i(""),d("")}catch(S){console.error("Error creating admin:",S),S.code==="auth/email-already-in-use"?m("This email is already registered"):m(S.message||"Failed to create admin user")}finally{j(!1)}};return e.jsx("div",{className:"admin-setup-container",children:e.jsxs("div",{className:"admin-setup-card",children:[e.jsx("h1",{children:"Create Admin User"}),e.jsx("p",{children:"Set up your first admin account"}),u&&e.jsx("div",{className:"error-message",children:u}),g&&e.jsx("div",{className:"success-message",children:g}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:D=>s(D.target.value),placeholder:"Enter admin email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:a,onChange:D=>i(D.target.value),placeholder:"Enter password",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:l,onChange:D=>d(D.target.value),placeholder:"Confirm password",required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Creating Admin..."]}):"Create Admin User"})]})]})})},vE=()=>{const t=ms(),{currentUser:s,loading:a}=wn(),[i,l]=y.useState("initializing");y.useEffect(()=>{if(console.log("🔍 AdminDashboardTest: Component mounted"),console.log("🔍 AdminDashboardTest: currentUser:",s),console.log("🔍 AdminDashboardTest: authLoading:",a),a){l("auth-loading");return}if(!s){l("no-user");return}localStorage.getItem("adminUser")?(console.log("🔍 AdminDashboardTest: Found admin user in localStorage"),l("admin-found")):(console.log("🔍 AdminDashboardTest: No admin user found"),l("not-admin"))},[s,a]);const d=()=>{t("/admin/login")},u=()=>{window.location.reload()},m=()=>{switch(i){case"initializing":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Initializing..."}),e.jsx("p",{children:"Setting up test environment"})]});case"auth-loading":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Authentication Loading"}),e.jsx("p",{children:"Please wait while we check your authentication status..."}),e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"20px auto"}})]});case"no-user":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"No User Found"}),e.jsx("p",{children:"You need to be logged in to access the admin dashboard."}),e.jsx("button",{onClick:d,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Go to Login"})]});case"admin-found":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Admin Access Confirmed"}),e.jsx("p",{children:"You are logged in as an admin. The dashboard should work properly."}),e.jsxs("div",{style:{backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",padding:"15px",margin:"20px 0",color:"#155724"},children:[e.jsx("strong",{children:"Status:"})," Ready to load full dashboard"]}),e.jsx("button",{onClick:u,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Try Full Dashboard"})]});case"not-admin":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You are logged in but do not have admin privileges."}),e.jsx("button",{onClick:d,style:{padding:"10px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Go to Login"})]});default:return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Unknown State"}),e.jsxs("p",{children:["Current state: ",i]}),e.jsx("button",{onClick:u,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]})}};return e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Arial, sans-serif"},children:[e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#007bff",color:"white",padding:"20px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Admin Dashboard Test"}),e.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Debugging the white screen issue"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"15px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:[e.jsx("strong",{children:"Debug Info:"}),e.jsx("br",{}),"Auth Loading: ",a?"Yes":"No",e.jsx("br",{}),"Current User: ",s?"Yes":"No",e.jsx("br",{}),"Test State: ",i,e.jsx("br",{}),"Timestamp: ",new Date().toLocaleString()]}),m()]})]})}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},xE=()=>{const{currentUser:t,authLoading:s}=wn(),[a,i]=y.useState(!0),[l,d]=y.useState(null),[u,m]=y.useState(null),[g,v]=y.useState([]),[h,j]=y.useState([]),[w,D]=y.useState([]),[S,b]=y.useState({}),[C,A]=y.useState([]),L=async()=>{if(!s){if(i(!0),d(null),!t){d("No user logged in"),i(!1);return}try{const oe=Ae(fe(),"super-admins",t.uid),re=await pt(oe);if(re.exists()){const q=re.data();console.log("🔍 useSaasAdminData: Found super admin in Firestore:",q);const Y={uid:t.uid,email:t.email,role:"super-admin",...q};m(Y),i(!1);return}const le=await pt(Ae(fe(),"admins",t.uid));if(!le.exists()){d("Admin access not found"),i(!1);return}const O=le.data();if(O.role!=="super-admin"){d("Super admin access required"),i(!1);return}m({id:t.uid,...O})}catch(oe){console.error("Auth check error:",oe),d("Failed to verify admin access"),i(!1)}}},N=async oe=>{if(!u){console.log("⚠️ No admin user found, skipping data load");return}try{console.log("🔄 Starting data load process..."),i(!0),d(null);const re=fe(),[le,O,q]=await Promise.all([De(Ce(re,"companies")).catch(async E=>(console.log("⚠️ Error loading companies with orderBy, trying without:",E.message),await De(Ce(re,"companies")))),De(Ce(re,"platforms")).catch(async E=>(console.log("⚠️ Error loading platforms with orderBy, trying without:",E.message),await De(Ce(re,"platforms")))),De(Ce(re,"users")).catch(async E=>(console.log("⚠️ Error loading users with orderBy, trying without:",E.message),await De(Ce(re,"users"))))]),Y=le.docs.map(E=>{const f=E.data(),P={id:E.id,...f,createdAt:f.createdAt,updatedAt:f.updatedAt||f.createdAt,userCount:0,adminCount:0,status:f.status||"active"};return console.log("🔍 Loaded company:",P.name,"Status:",P.status,"Original status:",f.status),P});v(Y),console.log("✅ Loaded",Y.length,"companies");const T=O.docs.map(E=>{const f=E.data();let P=f.features;if(P){if(Array.isArray(P)){const M={};P.forEach(K=>{M[K]=!0}),P=M}}else P={"User Management":!0,"Content Library":!0,"Progress Tracking":!0,"Analytics Dashboard":!0,"Mobile Responsive":!0,"Custom Branding":!0,"Email Notifications":!0,"API Access":!0};return{id:E.id,...f,features:P}});j(T),console.log("✅ Loaded",T.length,"platforms");const R=q.docs.map(E=>({id:E.id,...E.data()}));D(R),console.log("✅ Loaded",R.length,"users"),await I(Y),await W(),console.log("🎉 Data loading completed successfully")}catch(re){console.error("❌ Critical error loading data:",re),d(`Failed to load data: ${re.message}`)}finally{i(!1)}},I=async oe=>{try{console.log("🔄 Loading company admins for",oe.length,"companies"),console.log("Companies data:",oe.map(T=>({id:T.id,name:T.name})));const re={},le=fe();console.log("🔍 Checking database collections...");const O=oe.map(async T=>{try{console.log(`🔄 Loading users for company: ${T.name} (${T.id})`),console.log("📋 Company object:",T);const R=async(pe,X)=>{console.log(`🔍 Querying ${pe} for company ID: "${X}"`);try{const _=await De(Ze(Ce(le,pe),ss("companyId","==",X)));if(console.log(`📊 Found ${_.docs.length} documents in ${pe}`),_.docs.length>0)return _.docs.forEach((V,J)=>{const ae=V.data();console.log(`  ${J+1}. ${ae.name||ae.email} (${ae.role||"No Role"})`)}),_}catch(_){console.log(`⚠️ Query failed for ${pe}:`,_.message)}return console.log(`❌ No documents found in ${pe} for company ${X}`),{docs:[]}},[E,f,P]=await Promise.all([R("admins",T.id),R("company-admins",T.id),R("users",T.id)]);console.log(`📊 Found ${E.docs.length} regular admins, ${f.docs.length} company admins, and ${P.docs.length} users for ${T.name}`);const M=E.docs.map(pe=>{const X=pe.data();return{id:pe.id,...X,type:"admin",displayRole:"Admin"}}),K=f.docs.map(pe=>{const X=pe.data();return{id:pe.id,...X,type:"admin",displayRole:"Company Admin"}}),ue=P.docs.map(pe=>{const X=pe.data();return{id:pe.id,...X,type:"user",displayRole:X.role||"User"}}),be=[...M,...K,...ue].sort((pe,X)=>{const _=pe.createdAt?.toDate?pe.createdAt.toDate():new Date(pe.createdAt||0);return(X.createdAt?.toDate?X.createdAt.toDate():new Date(X.createdAt||0))-_});return console.log(`✅ Total users for ${T.name}: ${be.length}`),{companyId:T.id,users:be}}catch(R){return console.error(`❌ Error loading users for company ${T.id} (${T.name}):`,R),{companyId:T.id,users:[]}}});(await Promise.all(O)).forEach(({companyId:T,users:R})=>{re[T]=R}),b(re);const Y=Object.values(re).reduce((T,R)=>T+R.length,0);console.log("✅ Company admins loaded successfully:",Object.keys(re).length,"companies,",Y,"total users"),console.log("📊 Final adminsData structure:",Object.entries(re).map(([T,R])=>({companyId:T,userCount:R.length,adminCount:R.filter(E=>E.type==="admin").length})))}catch(re){console.error("❌ Error loading company admins:",re),d("Failed to load company administrators")}},W=async()=>{try{console.log("🔄 Loading deleted companies...");const oe=Ze(Ce(fe(),"deletedCompanies"),It("deletedAt","desc")),le=(await De(oe)).docs.map(O=>({id:O.id,...O.data()}));A(le),console.log(`✅ Loaded ${le.length} deleted companies`)}catch(oe){oe.code==="permission-denied"||oe.message.includes("Missing or insufficient permissions")?(console.warn("⚠️ No access to deleted companies - user may not be super admin"),A([])):console.error("❌ Error loading deleted companies:",oe)}},B=async oe=>{try{const re=await Yt(Ce(fe(),"companies"),{...oe,createdAt:Ts(),status:"active"});return await N(),re.id}catch(re){throw console.error("Error creating company:",re),re}},Q=async oe=>{try{const re=await Yt(Ce(fe(),"platforms"),{...oe,createdAt:Ts()});return await N(),re.id}catch(re){throw console.error("Error creating platform:",re),re}},F=async(oe,re)=>{try{console.log("🔍 Updating company:",oe,"with data:",re),console.log("🔍 Status being saved:",re.status),await Wt(Ae(fe(),"companies",oe),re),console.log("✅ Company updated successfully"),await N()}catch(le){throw console.error("Error updating company:",le),le}},te=async(oe,re)=>{try{await Wt(Ae(fe(),"platforms",oe),re),await N()}catch(le){throw console.error("Error updating platform:",le),le}},ce=async oe=>{try{await z(oe),await us(Ae(fe(),"companies",oe)),await N()}catch(re){throw console.error("Error deleting company:",re),re}},z=async oe=>{try{const re=g.find(O=>O.id===oe);if(!re)return;const le={...re,deletedAt:Ts(),originalId:oe};await Yt(Ce(fe(),"deletedCompanies"),le)}catch(re){console.error("Error backing up company data:",re)}},ee=async oe=>{try{const re=await pt(Ae(fe(),"deletedCompanies",oe));if(!re.exists())throw new Error("Backup not found");const le=re.data(),{originalId:O,deletedAt:q,...Y}=le,T=await Yt(Ce(fe(),"companies"),{...Y,createdAt:Ts(),status:"active"});return await us(Ae(fe(),"deletedCompanies",oe)),await N(),T.id}catch(re){throw console.error("Error restoring company:",re),re}};return y.useEffect(()=>{L()},[t,s]),y.useEffect(()=>{u&&N()},[u]),{loading:a,error:l,adminUser:u,companies:g,platforms:h,users:w,companyAdmins:S,deletedCompanies:C,createCompany:B,createPlatform:Q,updateCompany:F,updatePlatform:te,deleteCompany:ce,restoreCompany:ee,loadData:N}},yE=()=>{const[t,s]=y.useState("dashboard"),[a,i]=y.useState(!1),[l,d]=y.useState(null),[u,m]=y.useState(new Set),[g,v]=y.useState(!1),[h,j]=y.useState(!1),[w,D]=y.useState(!1),[S,b]=y.useState(!1),[C,A]=y.useState(!1),[L,N]=y.useState(!1),[I,W]=y.useState(null),[B,Q]=y.useState(null),[F,te]=y.useState(null),[ce,z]=y.useState(null),[ee,oe]=y.useState(""),[re,le]=y.useState("pages"),[O,q]=y.useState("dashboard"),[Y,T]=y.useState(null),[R,E]=y.useState(!1),[f,P]=y.useState({email:"",name:"",password:"",role:"user",companyId:"",isActive:!0,permissions:[]}),[M,K]=y.useState({name:"",email:"",industry:"",plan:"starter",status:"active",maintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."}),[ue,be]=y.useState(!1),[pe,X]=y.useState(()=>{try{const He=localStorage.getItem("impersonation");return!!(He?JSON.parse(He):null)?.enabled}catch{return!1}}),[_,V]=y.useState(()=>{try{const He=localStorage.getItem("impersonation");return(He?JSON.parse(He):null)?.companyId||""}catch{return""}});return{activeTab:t,sidebarCollapsed:a,selectedCompany:l,expandedCompanies:u,showCreateCompany:g,showCreatePlatform:h,showEditCompany:w,showEditPlatform:S,showDeleteConfirm:C,showNewModal:L,editingCompany:I,editingPlatform:B,editingAdmin:F,itemToDelete:ce,modalType:ee,activePageBuilderTab:re,selectedPage:O,selectedSection:Y,showLivePreview:R,formData:f,editCompanyForm:M,showPassword:ue,impersonateMode:pe,impersonateCompanyId:_,setActiveTab:s,setSidebarCollapsed:i,setSelectedCompany:d,setExpandedCompanies:m,setShowCreateCompany:v,setShowCreatePlatform:j,setShowEditCompany:D,setShowEditPlatform:b,setShowDeleteConfirm:A,setShowNewModal:N,setEditingCompany:W,setEditingPlatform:Q,setEditingAdmin:te,setItemToDelete:z,setModalType:oe,setActivePageBuilderTab:le,setSelectedPage:q,setSelectedSection:T,setShowLivePreview:E,setFormData:P,setEditCompanyForm:K,setShowPassword:be,setImpersonateMode:X,setImpersonateCompanyId:V,toggleCompanyExpansion:He=>{const xt=new Set(u);xt.has(He)?xt.delete(He):xt.add(He),m(xt)},openDeleteConfirm:(He,xt)=>{z({item:He,type:xt}),A(!0),document.body.style.overflow="hidden"},closeDeleteConfirm:()=>{z(null),A(!1),document.body.style.overflow="auto"},openCreateUser:()=>{oe("create-user"),P({email:"",name:"",password:"",role:"user",companyId:"",isActive:!0,permissions:[]}),N(!0),document.body.style.overflow="hidden"},openEditAdmin:He=>{oe("edit-admin"),te(He),P({email:He.email||"",name:He.name||"",password:"",role:He.role||"admin",companyId:He.companyId||"",isActive:He.isActive!==!1,permissions:He.permissions||[]}),N(!0),document.body.style.overflow="hidden"},closeNewModal:()=>{N(!1),oe(""),te(null),P({email:"",name:"",password:"",role:"user",companyId:"",isActive:!0,permissions:[]}),document.body.style.overflow="auto"},openEditCompany:He=>{console.log("🔍 Opening edit company modal for:",He),console.log("🔍 Company status:",He.status),W(He),K({name:He.name||"",email:He.email||"",industry:He.industry||"",plan:He.plan||"starter",status:He.status||"active",maintenanceMode:He.maintenanceMode||!1,maintenanceMessage:He.maintenanceMessage||"We are currently performing scheduled maintenance. Please check back soon."}),D(!0),document.body.style.overflow="hidden"},closeEditCompany:()=>{D(!1),W(null),K({name:"",email:"",industry:"",plan:"starter",status:"active",maintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."}),document.body.style.overflow="auto"},openEditPlatform:He=>{Q(He),b(!0),document.body.style.overflow="hidden"},closeEditPlatform:()=>{b(!1),Q(null),le("pages"),q("dashboard"),T(null),E(!1),document.body.style.overflow="auto"},toggleImpersonation:()=>{const He=!pe;if(console.log("🔄 Toggling impersonation:",{currentMode:pe,newMode:He,companyId:_}),X(He),He&&_){const xt={enabled:!0,companyId:_};localStorage.setItem("impersonation",JSON.stringify(xt)),console.log("✅ Impersonation enabled:",xt)}else localStorage.removeItem("impersonation"),console.log("❌ Impersonation disabled")}}},jE=async t=>{try{await navigator.clipboard.writeText(t)}catch{console.warn("Copy failed, falling back to prompt"),prompt("Copy this URL:",t)}},wE=t=>{const s=new Date,a=t.toDate?t.toDate():new Date(t),i=s-a,l=Math.floor(i/(1e3*60*60)),d=Math.floor(l/24);return l<1?"Just now":l<24?`${l} hour${l>1?"s":""} ago`:d<7?`${d} day${d>1?"s":""} ago`:a.toLocaleDateString()},bE=t=>t.reduce((s,a)=>{const i=a.industry||"Other";return s[i]=(s[i]||0)+1,s},{}),NE=t=>t.reduce((s,a)=>{const i=a.plan||"starter";return s[i]=(s[i]||0)+1,s},{}),Hj=(t=null)=>{const s={name:"",companyId:"",domain:"",description:"",theme:"default",features:{rebuttals:!0,dispositions:!0,customerService:!0,faq:!0,scheduling:!0,analytics:!0,notifications:!0,gamification:!1,certificates:!1,progressTracking:!0,socialLearning:!1,mobileApp:!1},branding:{logo:"",primaryColor:"#3B82F6",secondaryColor:"#1E40AF",accentColor:"#F59E0B",fontFamily:"Inter",customCSS:""},pages:{home:{title:"Home",slug:"home",layout:"default",content:{hero:{title:"Welcome to Our Training Platform",subtitle:"Master your skills with our comprehensive training programs",backgroundImage:"",ctaText:"Get Started",ctaLink:"/training"},sections:[{type:"features",title:"Key Features",content:"Our platform offers comprehensive training solutions"},{type:"testimonials",title:"What Our Users Say",content:"Real feedback from our training participants"}]},sidebar:{enabled:!0,position:"left",widgets:["navigation","progress","quick-actions"]}}},navigation:{main:[{label:"Home",url:"/",icon:"🏠"},{label:"Training",url:"/training",icon:"🎓"},{label:"Rebuttals",url:"/rebuttals",icon:"💬"},{label:"FAQ",url:"/faq",icon:"❓"},{label:"Contact",url:"/contact",icon:"📞"}],footer:[{label:"Privacy Policy",url:"/privacy"},{label:"Terms of Service",url:"/terms"},{label:"Support",url:"/support"}]},settings:{allowRegistration:!0,requireEmailVerification:!1,enableNotifications:!0,enableAnalytics:!0,enableMaintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."}};return t?{...s,...t,features:{...s.features,...t.features},branding:{...s.branding,...t.branding},pages:{...s.pages,...t.pages},navigation:{...s.navigation,...t.navigation},settings:{...s.settings,...t.settings}}:s},kE=({companies:t,platforms:s,users:a,adminUser:i})=>{const[l,d]=y.useState(new Date),[u,m]=y.useState("companies");bE(t),NE(t),y.useEffect(()=>{const C=setInterval(()=>{d(new Date)},6e4);return()=>clearInterval(C)},[]);const g=t.reduce((C,A)=>C+({starter:29,professional:99,enterprise:299}[A.plan]||99),0),v=t.filter(C=>C.status==="active").length;t.filter(C=>C.status==="inactive").length;const h=t.length>0?Math.round(a.length/t.length):0,j=new Date;j.setDate(j.getDate()-30),t.filter(C=>(C.createdAt?.toDate?C.createdAt.toDate():new Date(C.createdAt))>j).length,a.filter(C=>(C.createdAt?.toDate?C.createdAt.toDate():new Date(C.createdAt))>j).length;const w=t.filter(C=>C.createdAt).sort((C,A)=>{const L=C.createdAt.toDate?C.createdAt.toDate():new Date(C.createdAt);return(A.createdAt.toDate?A.createdAt.toDate():new Date(A.createdAt))-L}).slice(0,5),D=a.filter(C=>C.createdAt).sort((C,A)=>{const L=C.createdAt.toDate?C.createdAt.toDate():new Date(C.createdAt);return(A.createdAt.toDate?A.createdAt.toDate():new Date(A.createdAt))-L}).slice(0,3),S=[...w.map(C=>({type:"company",title:`New company registered: ${C.name}`,time:C.createdAt,icon:"🏢",status:C.status})),...D.map(C=>({type:"user",title:`New user signup: ${C.email||C.name||"Unknown"}`,time:C.createdAt,icon:"👥",status:C.isActive?"active":"inactive"}))].sort((C,A)=>{const L=C.time.toDate?C.time.toDate():new Date(C.time);return(A.time.toDate?A.time.toDate():new Date(A.time))-L}).slice(0,8),b=t.map(C=>({...C,userCount:a.filter(A=>A.companyId===C.id).length})).sort((C,A)=>A.userCount-C.userCount).slice(0,5);return e.jsxs("div",{className:"saas-content",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{className:"dashboard-title",children:"Dashboard"}),e.jsx("p",{className:"dashboard-subtitle",children:"SaaS Platform Overview"})]}),e.jsx("div",{className:"header-right",children:e.jsxs("div",{className:"status-indicator",children:[e.jsx("div",{className:"status-dot"}),e.jsx("span",{children:"Live"})]})})]})}),e.jsxs("div",{className:"main-dashboard",children:[e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Companies"}),e.jsx("div",{className:"metric-icon",children:"🏢"})]}),e.jsx("div",{className:"metric-value",children:t.length}),e.jsxs("div",{className:"metric-detail",children:[v," active"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Platforms"}),e.jsx("div",{className:"metric-icon",children:"🎯"})]}),e.jsx("div",{className:"metric-value",children:s.length}),e.jsx("div",{className:"metric-detail",children:"All deployed"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Users"}),e.jsx("div",{className:"metric-icon",children:"👥"})]}),e.jsx("div",{className:"metric-value",children:a.length}),e.jsxs("div",{className:"metric-detail",children:["Avg ",h,"/company"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Revenue"}),e.jsx("div",{className:"metric-icon",children:"💰"})]}),e.jsxs("div",{className:"metric-value",children:["$",g.toLocaleString()]}),e.jsx("div",{className:"metric-detail",children:"Monthly MRR"})]})]}),e.jsxs("div",{className:"content-sections",children:[e.jsxs("div",{className:"content-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h3",{children:"Recent Activity"})}),e.jsx("div",{className:"activity-list",children:S.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No recent activity"})}):S.slice(0,4).map((C,A)=>e.jsxs("div",{className:"activity-item",children:[e.jsx("div",{className:"activity-icon",children:C.icon}),e.jsxs("div",{className:"activity-content",children:[e.jsx("div",{className:"activity-title",children:C.title}),e.jsx("div",{className:"activity-time",children:wE(C.time)})]})]},A))})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h3",{children:"Top Companies"})}),e.jsx("div",{className:"companies-list",children:b.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No companies yet"})}):b.slice(0,3).map((C,A)=>e.jsxs("div",{className:"company-item",children:[e.jsxs("div",{className:"company-rank",children:["#",A+1]}),e.jsxs("div",{className:"company-info",children:[e.jsx("div",{className:"company-name",children:C.name}),e.jsxs("div",{className:"company-users",children:[C.userCount," users"]})]}),e.jsx("div",{className:`company-status ${C.status}`,children:C.status})]},C.id))})]})]})]})]})},SE=({companies:t,companyAdmins:s,expandedCompanies:a,onToggleExpansion:i,onViewPlatforms:l,onEditCompany:d,onToggleStatus:u,onDeleteCompany:m,onCreateCompany:g})=>{const[v,h]=y.useState({}),j=(w,D)=>{const S=`${w}-${D}`;console.log("Toggling expansion for:",S),h(b=>{const C={...b,[S]:!b[S]};return console.log("New expanded state:",C),C})};return e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Companies"}),e.jsx("button",{className:"create-button",onClick:()=>{g(),document.body.style.overflow="hidden"},children:"+ Create Company"})]}),e.jsx("div",{className:"companies-grid",children:t.map(w=>e.jsxs("div",{className:"company-card",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("h3",{children:w.name}),e.jsx("span",{className:`status-badge ${w.status}`,children:w.status})]}),e.jsxs("div",{className:"company-details",children:[e.jsxs("div",{className:"company-info-grid",children:[e.jsxs("div",{className:`info-card clickable-info ${v[`${w.id}-email`]?"expanded":""}`,onClick:()=>j(w.id,"email"),children:[e.jsx("div",{className:"info-icon",children:"📧"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Contact"}),e.jsx("div",{className:"info-value",children:w.email||"Not specified"}),v[`${w.id}-email`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Full Email:"})," ",w.email||"Not specified"]})})]}),e.jsx("div",{className:"expand-icon",children:"🔍"})]}),e.jsxs("div",{className:`info-card clickable-info ${v[`${w.id}-industry`]?"expanded":""}`,onClick:()=>j(w.id,"industry"),children:[e.jsx("div",{className:"info-icon",children:"🏢"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Sector"}),e.jsx("div",{className:"info-value",children:w.industry||"General"}),v[`${w.id}-industry`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Industry Details:"})," ",w.industry||"General"]})})]}),e.jsx("div",{className:"expand-icon",children:"🔍"})]}),e.jsxs("div",{className:`info-card clickable-info ${v[`${w.id}-plan`]?"expanded":""}`,onClick:()=>j(w.id,"plan"),children:[e.jsx("div",{className:"info-icon",children:"💎"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Tier"}),e.jsx("div",{className:"info-value",children:w.plan||"Standard"}),v[`${w.id}-plan`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Plan Details:"})," ",w.plan||"Standard"]})})]}),e.jsx("div",{className:"expand-icon",children:"🔍"})]}),e.jsxs("div",{className:`info-card clickable-info ${v[`${w.id}-date`]?"expanded":""}`,onClick:()=>j(w.id,"date"),children:[e.jsx("div",{className:"info-icon",children:"📅"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Joined"}),e.jsx("div",{className:"info-value",children:w.createdAt?.toDate?.()?.toLocaleDateString()||"Recently"}),v[`${w.id}-date`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Join Date:"})," ",w.createdAt?.toDate?.()?.toLocaleDateString()||"Recently",e.jsx("br",{}),e.jsx("strong",{children:"Account Age:"})," ",w.createdAt?Math.floor((new Date-w.createdAt.toDate())/(1e3*60*60*24))+" days":"Unknown"]})})]}),e.jsx("div",{className:"expand-icon",children:"🔍"})]})]}),e.jsxs("div",{className:"url-section",children:[e.jsx("span",{className:"detail-label",children:"Public URL"}),e.jsx("div",{className:"url-container",children:(()=>{const D=typeof window<"u"?window.location.origin:"",S=w.slug||w.id,b=`${D}/company/${S}`;return e.jsxs(e.Fragment,{children:[e.jsx("input",{value:b,readOnly:!0,className:"url-input",title:b}),e.jsx("button",{className:"action-button primary",onClick:()=>jE(b),children:"📋 Copy"}),e.jsx("button",{className:"action-button secondary",onClick:()=>{w.slug==="long-home"||w.id==="long-home"?(localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:w.id})),window.open(`/admin/dashboard?impersonate=${w.id}`,"_blank")):window.open(b,"_blank")},children:w.slug==="long-home"||w.id==="long-home"?"🚀 Visit Admin Dashboard":"🚀 Visit Training"})]})})()})]})]}),e.jsxs("div",{className:"company-actions",children:[e.jsx("button",{className:"action-button primary",onClick:()=>l(w),children:"🎯 View Platforms"}),e.jsx("button",{className:"action-button secondary",onClick:()=>d(w),children:"✏️ Edit"}),e.jsx("button",{className:"action-button warning",onClick:()=>u(w),children:w.status==="active"?"⏸️ Disable":"▶️ Enable"}),e.jsx("button",{className:"action-button danger",onClick:()=>m(w,"company"),children:"🗑️ Delete"})]})]},w.id))})]})},CE=({platforms:t,companies:s,selectedCompany:a,onCreatePlatform:i,onEditPlatform:l,onDeletePlatform:d})=>{const u=a?t.filter(m=>m.companyId===a.id):t;return e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:a?`${a.name} - Platforms`:"All Platforms"}),e.jsx("button",{className:"create-button",onClick:()=>{i(),document.body.style.overflow="hidden"},children:"+ Create Platform"})]}),e.jsx("div",{className:"platforms-grid",children:u.map(m=>{const g=s.find(v=>v.id===m.companyId);return e.jsxs("div",{className:"platform-card",children:[e.jsxs("div",{className:"platform-header",children:[e.jsx("h3",{children:m.name}),e.jsx("span",{className:`status-badge ${m.status||"active"}`,children:m.status||"active"})]}),e.jsxs("div",{className:"platform-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",g?.name||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Domain:"})," ",e.jsx("span",{className:"domain-text",children:m.domain||"Not set"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Theme:"})," ",m.theme||"default"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",m.createdAt?.toDate?.()?.toLocaleDateString()||"N/A"]}),e.jsxs("div",{className:"features-container",children:[e.jsx("div",{className:"features-label",children:"Features:"}),e.jsx("div",{className:"features-list",children:(()=>{let v=[];return m.features&&(Array.isArray(m.features)?v=m.features.map(h=>[h,!0]):typeof m.features=="object"&&(v=Object.entries(m.features))),v.length>0?v.map(([h,j])=>e.jsxs("span",{className:`feature-item ${j?"enabled":"disabled"}`,children:[h," ",j?"✓":"✗"]},h)):e.jsx("span",{className:"feature-item disabled",children:"No features configured"})})()})]})]}),e.jsxs("div",{className:"platform-actions",children:[e.jsx("button",{className:"action-button primary",onClick:()=>l(m),children:"Edit Platform"}),e.jsx("button",{className:"action-button danger",onClick:()=>d(m,"platform"),children:"Delete"})]})]},m.id)})}),u.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"🎯"}),e.jsx("h3",{children:"No Platforms Found"}),e.jsx("p",{children:a?`${a.name} doesn't have any platforms yet.`:"No platforms have been created yet."}),e.jsx("button",{className:"create-button",onClick:()=>{i(),document.body.style.overflow="hidden"},children:"Create First Platform"})]})]})},AE=(t=[],s={})=>{const a={totalCompanies:t.length,activeCompanies:t.filter(i=>i?.status==="active").length,inactiveCompanies:t.filter(i=>i?.status==="inactive").length,totalUsers:0,totalAdmins:0,companiesWithNoUsers:0,averageUsersPerCompany:0};return s&&typeof s=="object"?(Object.values(s).forEach(i=>{Array.isArray(i)&&(a.totalUsers+=i.length,a.totalAdmins+=i.filter(l=>l?.type==="admin").length)}),a.companiesWithNoUsers=t.filter(i=>!s[i?.id]||!Array.isArray(s[i.id])||s[i.id].length===0).length):a.companiesWithNoUsers=t.length,a.averageUsersPerCompany=a.totalCompanies>0?Math.round(a.totalUsers/a.totalCompanies):0,a},TE=(t=[],s={},a="")=>{if(!a||a.trim()==="")return t;const i=a.toLowerCase().trim();return t.filter(l=>{if(!l)return!1;const d=l.name?.toLowerCase().includes(i)||l.email?.toLowerCase().includes(i)||l.industry?.toLowerCase().includes(i),u=s&&s[l.id]?s[l.id]:[],m=Array.isArray(u)&&u.some(g=>g?.name?.toLowerCase().includes(i)||g?.email?.toLowerCase().includes(i)||g?.displayRole?.toLowerCase().includes(i));return d||m})},dx=(t,s={})=>{if(!t)return"N/A";const a=t.toDate?t.toDate():new Date(t),i={year:"numeric",month:"short",day:"numeric",...s};return a.toLocaleDateString("en-US",i)},ux=t=>!t||typeof t!="string"?"?":t.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2),ku=t=>{const s="status-badge";switch(t?.toLowerCase()){case"active":return`${s} active`;case"inactive":return`${s} inactive`;case"pending":return`${s} pending`;default:return s}},hx=(t,s)=>{const a="role-badge";return t==="admin"?`${a} admin`:s==="super-admin"?`${a} super-admin`:`${a} user`},EE=({companies:t=[],companyAdmins:s={},onCreateUser:a,onEditAdmin:i,onDeleteUser:l})=>{const[d,u]=y.useState("hierarchical"),[m,g]=y.useState(new Set),[v,h]=y.useState(""),j=()=>{t&&Array.isArray(t)&&g(new Set(t.map(L=>L?.id).filter(Boolean)))},w=()=>{g(new Set)},D=L=>{const N=new Set(m);N.has(L)?N.delete(L):N.add(L),g(N)},S=y.useMemo(()=>AE(t,s),[t,s]),b=y.useMemo(()=>TE(t,s,v),[t,s,v]),C=()=>e.jsx("div",{className:"hierarchical-users",children:b.map(L=>{const N=s[L.id]||[],I=m.has(L.id),W=N.filter(Q=>Q.type==="admin").length,B=N.filter(Q=>Q.type==="user").length;return e.jsxs("div",{className:"company-section",children:[e.jsxs("div",{className:"company-header",onClick:()=>D(L.id),children:[e.jsxs("div",{className:"company-info",children:[e.jsx("span",{className:"expand-icon",children:I?"🔽":"▶️"}),e.jsxs("div",{className:"company-details",children:[e.jsx("h3",{className:"company-name",children:L.name}),e.jsxs("div",{className:"company-stats",children:[e.jsxs("span",{className:"user-count",children:["👥 ",N.length," users (",W," admins, ",B," users)"]}),e.jsx("span",{className:ku(L.status),children:L.status||"active"})]})]})]}),e.jsx("div",{className:"company-actions",children:e.jsxs("span",{className:"total-users",children:["Total: ",N.length]})})]}),I&&e.jsxs("div",{className:"company-users",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"User"}),e.jsx("div",{className:"table-cell",children:"Email"}),e.jsx("div",{className:"table-cell",children:"Role"}),e.jsx("div",{className:"table-cell",children:"Status"}),e.jsx("div",{className:"table-cell",children:"Created"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),N.length>0?N.map(Q=>e.jsxs("div",{className:"table-row user-row",children:[e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:`user-avatar ${Q.type}`,children:ux(Q.name)}),e.jsx("div",{className:"user-details",children:e.jsxs("span",{className:"user-name",children:[Q.name||"Unknown User",Q.type==="admin"&&e.jsx("span",{className:"admin-badge",children:"👑"})]})})]})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"user-email",children:Q.email})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:hx(Q.type,Q.role),children:Q.displayRole})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:ku(Q.status||"active"),children:Q.status||"active"})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"date-text",children:dx(Q.createdAt)})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-button secondary compact",onClick:()=>i&&i(Q),title:"Edit User",children:"✏️"}),e.jsx("button",{className:"action-button danger compact",onClick:()=>l&&l(Q),title:"Delete User",children:"🗑️"})]})})]},Q.id)):e.jsx("div",{className:"table-row",children:e.jsx("div",{className:"table-cell",style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem"},children:e.jsx("span",{style:{color:"#94a3b8"},children:"No users found for this company"})})})]})]},L.id)})}),A=()=>e.jsxs("div",{className:"users-table-container",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"User"}),e.jsx("div",{className:"table-cell",children:"Company"}),e.jsx("div",{className:"table-cell",children:"Role"}),e.jsx("div",{className:"table-cell",children:"Status"}),e.jsx("div",{className:"table-cell",children:"Created"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),b.flatMap(L=>(s[L.id]||[]).map(N=>e.jsxs("div",{className:"table-row",children:[e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:`user-avatar ${N.type}`,children:ux(N.name)}),e.jsxs("div",{className:"user-details",children:[e.jsxs("span",{className:"user-name",children:[N.name||"Unknown User",N.type==="admin"&&e.jsx("span",{className:"admin-badge",children:"👑"})]}),e.jsx("span",{className:"user-email",children:N.email})]})]})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"company-name",children:L.name})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:hx(N.type,N.role),children:N.displayRole})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:ku(N.status||"active"),children:N.status||"active"})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"date-text",children:dx(N.createdAt)})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-button secondary compact",onClick:()=>i&&i(N),title:"Edit User",children:"✏️"}),e.jsx("button",{className:"action-button danger compact",onClick:()=>l&&l(N),title:"Delete User",children:"🗑️"})]})})]},`${L.id}-${N.id}`)))]});return t?t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"🏢"}),e.jsx("h3",{children:"No Companies Found"}),e.jsx("p",{children:"There are no companies in the system yet."}),e.jsx("button",{className:"create-button",onClick:()=>a&&a(),children:"Create First Company"})]}):e.jsxs("div",{className:"users-management",children:[e.jsxs("div",{className:"content-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Users Management"}),e.jsx("p",{children:"Manage company administrators and users"})]}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search users, companies...",value:v,onChange:L=>h(L.target.value),className:"search-input"})})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{className:`toggle-button ${d==="hierarchical"?"active":""}`,onClick:()=>u("hierarchical"),children:"📋 Hierarchical"}),e.jsx("button",{className:`toggle-button ${d==="table"?"active":""}`,onClick:()=>u("table"),children:"📊 Table"})]}),d==="hierarchical"&&e.jsxs("div",{className:"expand-controls",children:[e.jsx("button",{className:"expand-button",onClick:j,children:"Expand All"}),e.jsx("button",{className:"expand-button",onClick:w,children:"Collapse All"})]}),e.jsx("button",{className:"create-button",onClick:()=>a&&a(),children:"➕ Add User"})]})]}),e.jsxs("div",{className:"users-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:S.totalCompanies}),e.jsx("span",{className:"stat-label",children:"Companies"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:S.activeCompanies}),e.jsx("span",{className:"stat-label",children:"Active"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:S.totalUsers}),e.jsx("span",{className:"stat-label",children:"Total Users"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:S.totalAdmins}),e.jsx("span",{className:"stat-label",children:"Admins"})]})]}),d==="hierarchical"?C():A()]}):e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner",children:"⏳"}),e.jsx("p",{children:"Loading companies and users..."})]})},PE=({deletedCompanies:t,onRestoreCompany:s})=>e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Deleted Companies"}),e.jsx("div",{className:"header-info",children:e.jsx("p",{children:"Companies that have been deleted but can be restored from backup"})})]}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"🗑️"}),e.jsx("h3",{children:"No Deleted Companies"}),e.jsx("p",{children:"No companies have been deleted yet. All deleted companies will appear here with the option to restore them."})]}):e.jsx("div",{className:"deleted-companies-grid",children:t.map(a=>e.jsxs("div",{className:"deleted-company-card",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("h3",{children:a.name}),e.jsx("span",{className:"deleted-badge",children:"Deleted"})]}),e.jsxs("div",{className:"company-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Industry:"})," ",a.industry]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plan:"})," ",a.plan]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Deleted:"})," ",a.deletedAt?.toDate?.()?.toLocaleDateString()||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Original ID:"})," ",a.originalId]})]}),e.jsx("div",{className:"company-actions",children:e.jsx("button",{className:"action-button success",onClick:()=>s(a.id),children:"Restore Company"})})]},a.id))})]}),DE=({isOpen:t,onClose:s,title:a,children:i,footer:l,size:d="medium",className:u=""})=>{if(y.useEffect(()=>(t?(document.body.classList.add("modal-open"),document.body.style.overflow="hidden"):(document.body.classList.remove("modal-open"),document.body.style.overflow="unset"),()=>{document.body.classList.remove("modal-open"),document.body.style.overflow="unset"}),[t]),y.useEffect(()=>{const g=v=>{v.key==="Escape"&&t&&s()};return t&&document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[t,s]),!t)return null;const m=()=>{switch(d){case"small":return"universal-modal-small";case"large":return"universal-modal-large";case"extra-large":return"universal-modal-extra-large";default:return"universal-modal-medium"}};return e.jsx("div",{className:"universal-modal-overlay",onClick:s,children:e.jsxs("div",{className:`universal-modal-container ${m()} ${u}`,onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"universal-modal-header",children:[e.jsx("div",{className:"universal-modal-title",children:e.jsx("h2",{children:a})}),e.jsx("button",{className:"universal-modal-close",onClick:s,"aria-label":"Close modal",children:"✕"})]}),e.jsx("div",{className:"universal-modal-body",children:i}),l&&e.jsx("div",{className:"universal-modal-footer",children:l})]})})},LE=({isOpen:t,itemToDelete:s,onConfirm:a,onCancel:i})=>{if(!t||!s)return null;const{item:l,type:d}=s,u=()=>d==="company"||d==="platform"?l.name:d==="user"?l.name||l.email:"item",m=()=>d==="company"?"company":d==="platform"?"platform":d==="user"?"user":"item",g=e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"universal-modal-button secondary",onClick:i,children:"Cancel"}),e.jsxs("button",{className:"universal-modal-button danger",onClick:a,children:["Delete ",m().charAt(0).toUpperCase()+m().slice(1)]})]});return e.jsx(DE,{isOpen:t,onClose:i,title:"⚠️ Confirm Deletion",footer:g,size:"medium",children:e.jsxs("div",{style:{textAlign:"center",padding:"1rem 0"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",filter:"drop-shadow(0 4px 8px rgba(239, 68, 68, 0.3))"},children:"⚠️"}),e.jsxs("p",{style:{fontSize:"1.1rem",color:"#374151",marginBottom:"1.5rem",lineHeight:"1.6"},children:["Are you sure you want to delete this ",e.jsx("strong",{children:m()}),"?",e.jsx("br",{}),e.jsx("span",{style:{color:"#ef4444",fontWeight:"600"},children:"This action cannot be undone."})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"2px solid rgba(239, 68, 68, 0.2)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{color:"#dc2626",margin:"0 0 1rem 0",fontSize:"1.2rem",fontWeight:"700"},children:u()}),d==="company"&&e.jsxs("div",{children:[e.jsx("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"⚠️ This will also delete:"}),e.jsxs("ul",{style:{textAlign:"left",color:"#374151",margin:"0 0 1rem 0",paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"All associated platforms"}),e.jsx("li",{children:"All users in this company"}),e.jsx("li",{children:"All training data and content"})]}),e.jsx("p",{style:{color:"#059669",fontWeight:"500",fontSize:"0.9rem",background:"rgba(5, 150, 105, 0.1)",padding:"0.75rem",borderRadius:"8px",margin:0},children:"💾 A backup will be created before deletion for recovery purposes."})]}),d==="platform"&&e.jsxs("div",{children:[e.jsx("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"⚠️ This will delete the entire platform including:"}),e.jsxs("ul",{style:{textAlign:"left",color:"#374151",margin:0,paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"All training content"}),e.jsx("li",{children:"All user progress"}),e.jsx("li",{children:"All platform settings"})]})]})]})]})})},mx=({isOpen:t,isEdit:s,company:a,formData:i,onFormChange:l,onSubmit:d,onCancel:u})=>{const[m,g]=y.useState("basic");if(!t)return null;const v=S=>{S.preventDefault(),d(S)},h=S=>{const{name:b,value:C,type:A,checked:L}=S.target,N={...i,[b]:A==="checkbox"?L:C};console.log("🔍 Form change:",b,"=",A==="checkbox"?L:C),console.log("🔍 New form data:",N),l(N)},j=[{id:"basic",label:"Company Details",icon:"🏢",description:"Basic information"},{id:"settings",label:"Configuration",icon:"⚙️",description:"Settings & status"}],w=[{value:"Technology",label:"Technology"},{value:"Healthcare",label:"Healthcare"},{value:"Finance",label:"Finance"},{value:"Education",label:"Education"},{value:"Real Estate",label:"Real Estate"},{value:"Sales",label:"Sales"},{value:"Marketing",label:"Marketing"},{value:"Home Improvement",label:"Home Improvement"},{value:"Other",label:"Other"}],D=[{value:"starter",label:"Starter",price:"$99/month",description:"Perfect for small teams getting started",features:["Up to 10 users","Basic features","Email support"],icon:"⭐"},{value:"professional",label:"Professional",price:"$199/month",description:"Advanced features for growing businesses",features:["Up to 50 users","Advanced analytics","Priority support"],icon:"🚀"},{value:"enterprise",label:"Enterprise",price:"$399/month",description:"Full features for large organizations",features:["Unlimited users","Custom integrations","24/7 support"],icon:"💎"}];return e.jsx("div",{className:"edit-admin-modal-overlay",onClick:u,children:e.jsxs("div",{className:"edit-admin-modal-container",onClick:S=>S.stopPropagation(),children:[e.jsx("div",{className:"edit-admin-modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-icon-section",children:[e.jsx("div",{className:"modal-main-icon",children:s?"✏️":"🏢"}),e.jsxs("div",{className:"modal-title-group",children:[e.jsx("h2",{children:s?"Edit Company":"Create New Company"}),e.jsx("p",{children:"Manage company information and settings"}),s&&a&&e.jsxs("div",{className:"company-status-badge",children:[e.jsx("span",{className:`status-indicator ${i.status||"active"}`}),e.jsx("span",{className:"status-text",children:i.status||"active"})]})]})]}),e.jsx("button",{className:"modal-close-btn",onClick:u,"aria-label":"Close modal",children:e.jsx("span",{children:"✕"})})]})}),e.jsx("div",{className:"modal-nav-tabs",children:j.map(S=>e.jsx("button",{className:`nav-tab ${m===S.id?"active":""}`,onClick:()=>g(S.id),children:e.jsxs("div",{className:"nav-tab-content",children:[e.jsx("span",{className:"nav-tab-icon",children:S.icon}),e.jsxs("div",{className:"nav-tab-text",children:[e.jsx("span",{className:"nav-tab-label",children:S.label}),e.jsx("span",{className:"nav-tab-description",children:S.description})]})]})},S.id))}),e.jsxs("form",{onSubmit:v,className:"edit-admin-form",children:[e.jsxs("div",{className:"modal-body",children:[m==="basic"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"🏢"}),e.jsx("h3",{children:"Company Information"}),e.jsx("p",{children:"Essential company details and identification"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"name",children:[e.jsx("span",{className:"label-icon",children:"🏢"}),e.jsx("span",{className:"label-text",children:"Company Name"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:h,required:!0,placeholder:"Enter company name",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"🏢"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx("span",{className:"label-icon",children:"📧"}),e.jsx("span",{className:"label-text",children:"Contact Email"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:h,required:!0,placeholder:"Enter contact email",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"📧"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"industry",children:[e.jsx("span",{className:"label-icon",children:"🏭"}),e.jsx("span",{className:"label-text",children:"Industry"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsxs("select",{id:"industry",name:"industry",value:i.industry,onChange:h,className:"form-select",children:[e.jsx("option",{value:"",children:"Select industry"}),w.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))]}),e.jsx("div",{className:"input-icon",children:"🏭"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"plan",children:[e.jsx("span",{className:"label-icon",children:"💎"}),e.jsx("span",{className:"label-text",children:"Subscription Plan"})]}),e.jsx("div",{className:"plan-selector",children:D.map(S=>e.jsxs("div",{className:`plan-option ${i.plan===S.value?"selected":""}`,onClick:()=>h({target:{name:"plan",value:S.value}}),children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("span",{className:"plan-icon",children:S.icon}),e.jsxs("div",{className:"plan-info",children:[e.jsx("span",{className:"plan-label",children:S.label}),e.jsx("span",{className:"plan-price",children:S.price})]}),e.jsxs("div",{className:"plan-radio",children:[e.jsx("input",{type:"radio",name:"plan",value:S.value,checked:i.plan===S.value,onChange:h,className:"radio-input"}),e.jsx("span",{className:"radio-custom"})]})]}),e.jsx("p",{className:"plan-description",children:S.description}),e.jsx("ul",{className:"plan-features",children:S.features.map((b,C)=>e.jsx("li",{children:b},C))})]},S.value))})]})]})]}),m==="settings"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"⚙️"}),e.jsx("h3",{children:"Company Settings"}),e.jsx("p",{children:"Configure company status and maintenance options"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"status",children:[e.jsx("span",{className:"label-icon",children:"📊"}),e.jsx("span",{className:"label-text",children:"Company Status"})]}),e.jsx("div",{className:"status-selector",children:[{value:"active",label:"Active",icon:"✅",color:"green",description:"Company is fully operational"},{value:"inactive",label:"Inactive",icon:"⏸️",color:"yellow",description:"Company is temporarily disabled"},{value:"suspended",label:"Suspended",icon:"🚫",color:"red",description:"Company access is suspended"}].map(S=>e.jsx("div",{className:`status-option ${i.status===S.value?"selected":""} ${S.color}`,onClick:()=>h({target:{name:"status",value:S.value}}),children:e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:"status-icon",children:S.icon}),e.jsxs("div",{className:"status-info",children:[e.jsx("span",{className:"status-label",children:S.label}),e.jsx("span",{className:"status-description",children:S.description})]}),e.jsxs("div",{className:"status-radio",children:[e.jsx("input",{type:"radio",name:"status",value:S.value,checked:i.status===S.value,onChange:h,className:"radio-input"}),e.jsx("span",{className:"radio-custom"})]})]})},S.value))})]}),e.jsx("div",{className:"form-field full-width",children:e.jsxs("div",{className:"maintenance-section",children:[e.jsxs("div",{className:"maintenance-header",children:[e.jsx("span",{className:"maintenance-icon",children:"🔧"}),e.jsxs("div",{className:"maintenance-info",children:[e.jsx("h4",{children:"Maintenance Mode"}),e.jsx("p",{children:"Control company access during maintenance periods"})]})]}),e.jsx("div",{className:"checkbox-field",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"maintenanceMode",checked:i.maintenanceMode,onChange:h,className:"checkbox-input"}),e.jsx("span",{className:"checkbox-custom"}),e.jsxs("div",{className:"checkbox-content",children:[e.jsx("span",{className:"checkbox-title",children:"Enable Maintenance Mode"}),e.jsx("span",{className:"checkbox-description",children:"Temporarily disable company access for maintenance"})]})]})}),i.maintenanceMode&&e.jsxs("div",{className:"maintenance-message-field",children:[e.jsxs("label",{htmlFor:"maintenanceMessage",children:[e.jsx("span",{className:"label-icon",children:"📝"}),e.jsx("span",{className:"label-text",children:"Maintenance Message"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"maintenanceMessage",name:"maintenanceMessage",value:i.maintenanceMessage,onChange:h,rows:"3",placeholder:"Enter maintenance message for users",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"📝"})]}),e.jsxs("div",{className:"field-help",children:[e.jsx("span",{className:"help-icon",children:"💡"}),e.jsx("span",{className:"help-text",children:"This message will be displayed to users when they try to access the company platform"})]})]})]})})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"footer-actions",children:[e.jsxs("button",{type:"button",className:"modal-btn secondary",onClick:u,children:[e.jsx("span",{className:"btn-icon",children:"❌"}),e.jsx("span",{className:"btn-text",children:"Cancel"})]}),e.jsxs("button",{type:"submit",className:"modal-btn primary",children:[e.jsx("span",{className:"btn-icon",children:s?"💾":"✨"}),e.jsx("span",{className:"btn-text",children:s?"Update Company":"Create Company"})]})]}),s&&e.jsxs("div",{className:"footer-info",children:[e.jsx("span",{className:"info-icon",children:"ℹ️"}),e.jsx("span",{className:"info-text",children:"Changes will be applied immediately"})]})]})]})]})})},RE=({isOpen:t,onClose:s,onSuccess:a,companies:i=[]})=>{const[l,d]=y.useState(1),[u,m]=y.useState(!1),[g,v]=y.useState(null),[h,j]=y.useState({companyId:"",companyName:"",platformName:"",platformSlug:"",description:"",industry:"",primaryColor:"#1e40af",secondaryColor:"#3b82f6",accentColor:"#10b981",logo:"",favicon:"",fontFamily:"Inter",layout:"modern",template:"training",features:[],pages:[{id:"home",name:"Home",slug:"home",type:"home",template:"hero-with-features",content:{hero:{title:"Welcome to Your Training Platform",subtitle:"Master your skills with our comprehensive training programs",backgroundImage:"",ctaText:"Get Started",ctaLink:"/training"},features:[{title:"Interactive Courses",description:"Engaging learning experiences",icon:"🎓"},{title:"Progress Tracking",description:"Monitor your learning journey",icon:"📊"},{title:"Expert Instructors",description:"Learn from industry professionals",icon:"👨‍🏫"}]}},{id:"training",name:"Training",slug:"training",type:"training",template:"course-grid",content:{title:"Training Programs",description:"Choose from our comprehensive training programs",courses:[]}},{id:"courses",name:"Courses",slug:"courses",type:"courses",template:"course-listing",content:{title:"All Courses",description:"Browse our complete course catalog",categories:[]}},{id:"about",name:"About",slug:"about",type:"about",template:"about-page",content:{title:"About Us",description:"Learn more about our training platform",team:[],mission:""}}],heroTitle:"",heroSubtitle:"",categories:[],rebuttals:[],faqs:[],features:{userRegistration:!0,progressTracking:!0,certificates:!0,discussionForums:!1,liveChat:!1,mobileApp:!1,analytics:!0,customDomain:!1},isPublic:!0,allowRegistration:!0,requireApproval:!1,maxUsers:100,seo:{metaTitle:"",metaDescription:"",keywords:[]}}),[w,D]=y.useState(!1),[S,b]=y.useState({}),C=8,A=[{id:"training",name:"Training Platform",description:"Complete training platform with courses, assessments, and progress tracking",icon:"🎓",features:["Courses","Assessments","Progress Tracking","Certificates","Discussion Forums"]},{id:"sales",name:"Sales Training",description:"Sales-focused training with scripts, rebuttals, and role-playing",icon:"💼",features:["Sales Scripts","Rebuttals","Role Playing","Performance Metrics","Leaderboards"]},{id:"onboarding",name:"Employee Onboarding",description:"Structured onboarding program for new employees",icon:"👥",features:["Welcome Modules","Company Policies","Team Introductions","Checklists","Feedback Forms"]},{id:"compliance",name:"Compliance Training",description:"Compliance and regulatory training platform",icon:"📋",features:["Compliance Modules","Certifications","Audit Trails","Reporting","Renewal Tracking"]}],L=["Home Improvement","Real Estate","Insurance","Financial Services","Healthcare","Technology","Retail","Manufacturing","Education","Other"],N=["User Management","Content Library","Progress Tracking","Analytics Dashboard","Mobile Responsive","Custom Branding","Email Notifications","API Access"],I=[{id:"hero-with-features",name:"Hero with Features",description:"Landing page with hero section and feature highlights",icon:"🏠",preview:"hero-features-preview"},{id:"course-grid",name:"Course Grid",description:"Grid layout for displaying courses and programs",icon:"📚",preview:"course-grid-preview"},{id:"course-listing",name:"Course Listing",description:"List view for courses with filters and search",icon:"📋",preview:"course-listing-preview"},{id:"about-page",name:"About Page",description:"About page with team, mission, and company info",icon:"👥",preview:"about-page-preview"},{id:"contact-page",name:"Contact Page",description:"Contact form and company information",icon:"📞",preview:"contact-page-preview"},{id:"blog-page",name:"Blog Page",description:"Blog listing with articles and posts",icon:"📝",preview:"blog-page-preview"}],W=[{id:"hero",name:"Hero Section",description:"Main banner with title, subtitle, and CTA",icon:"🎯",category:"layout"},{id:"features",name:"Features Grid",description:"Grid of features with icons and descriptions",icon:"⭐",category:"content"},{id:"courses",name:"Course Grid",description:"Display courses in a grid layout",icon:"📚",category:"content"},{id:"testimonials",name:"Testimonials",description:"Customer testimonials and reviews",icon:"💬",category:"social"},{id:"team",name:"Team Section",description:"Team members with photos and bios",icon:"👥",category:"content"},{id:"contact-form",name:"Contact Form",description:"Contact form with fields and validation",icon:"📧",category:"forms"},{id:"faq",name:"FAQ Section",description:"Frequently asked questions with answers",icon:"❓",category:"content"},{id:"pricing",name:"Pricing Table",description:"Pricing plans and packages",icon:"💰",category:"commerce"}],B=[{name:"Inter",value:"Inter"},{name:"Roboto",value:"Roboto"},{name:"Open Sans",value:"Open Sans"},{name:"Lato",value:"Lato"},{name:"Montserrat",value:"Montserrat"},{name:"Poppins",value:"Poppins"},{name:"Source Sans Pro",value:"Source Sans Pro"},{name:"Nunito",value:"Nunito"}],Q=[{name:"Modern",value:"modern",description:"Clean, modern design with lots of white space"},{name:"Classic",value:"classic",description:"Traditional business layout"},{name:"Creative",value:"creative",description:"Bold, creative design with unique elements"},{name:"Minimal",value:"minimal",description:"Minimalist design focusing on content"}];y.useEffect(()=>{t&&!u?(d(1),j({companyId:"",companyName:"",platformName:"",platformSlug:"",description:"",industry:"",primaryColor:"#1e40af",secondaryColor:"#3b82f6",accentColor:"#10b981",logo:"",favicon:"",fontFamily:"Inter",layout:"modern",template:"training",features:N,pages:[{id:"home",name:"Home",slug:"home",type:"home",template:"hero-with-features",content:{hero:{title:"Welcome to Your Training Platform",subtitle:"Master your skills with our comprehensive training programs",backgroundImage:"",ctaText:"Get Started",ctaLink:"/training"},features:[{title:"Interactive Courses",description:"Engaging learning experiences",icon:"🎓"},{title:"Progress Tracking",description:"Monitor your learning journey",icon:"📊"},{title:"Expert Instructors",description:"Learn from industry professionals",icon:"👨‍🏫"}]}},{id:"training",name:"Training",slug:"training",type:"training",template:"course-grid",content:{title:"Training Programs",description:"Choose from our comprehensive training programs",courses:[]}},{id:"courses",name:"Courses",slug:"courses",type:"courses",template:"course-listing",content:{title:"All Courses",description:"Browse our complete course catalog",categories:[]}},{id:"about",name:"About",slug:"about",type:"about",template:"about-page",content:{title:"About Us",description:"Learn more about our training platform",team:[],mission:""}}],heroTitle:"",heroSubtitle:"",categories:[],rebuttals:[],faqs:[],features:{userRegistration:!0,progressTracking:!0,certificates:!0,discussionForums:!1,liveChat:!1,mobileApp:!1,analytics:!0,customDomain:!1},isPublic:!0,allowRegistration:!0,requireApproval:!1,maxUsers:100,seo:{metaTitle:"",metaDescription:"",keywords:[]}}),b({}),m(!0)):t||(m(!1),g&&!g.closed&&(g.close(),v(null)))},[t,u,g]);const F=(f,P)=>{if(j(M=>({...M,[f]:P})),f==="platformName"){const M=P.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();j(K=>({...K,platformSlug:M}))}S[f]&&b(M=>({...M,[f]:null}))},te=f=>({home:"🏠",training:"🎓",courses:"📚",about:"👥",contact:"📞",blog:"📝",faq:"❓",pricing:"💰"})[f]||"📄",ce=()=>{const f={id:`page-${Date.now()}`,name:"New Page",slug:"new-page",type:"content",template:"hero-with-features",content:{hero:{title:"New Page",subtitle:"Add your content here",backgroundImage:"",ctaText:"Learn More",ctaLink:"#"}}};j(P=>({...P,pages:[...P.pages,f]}))},z=f=>{console.log("Edit page:",h.pages[f])},ee=f=>{j(P=>({...P,pages:P.pages.filter((M,K)=>K!==f)}))},oe=f=>({userRegistration:"User Registration",progressTracking:"Progress Tracking",certificates:"Certificates",discussionForums:"Discussion Forums",liveChat:"Live Chat",mobileApp:"Mobile App",analytics:"Analytics",customDomain:"Custom Domain"})[f]||f,re=f=>({userRegistration:"Allow users to create accounts and register",progressTracking:"Track user progress through courses and modules",certificates:"Generate completion certificates for users",discussionForums:"Enable community discussions and forums",liveChat:"Real-time chat support for users",mobileApp:"Native mobile app for iOS and Android",analytics:"Detailed analytics and reporting dashboard",customDomain:"Use your own custom domain name"})[f]||"Feature description",le=f=>{const P={};switch(f){case 1:h.companyId||(P.companyId="Please select a company");break;case 2:h.platformName||(P.platformName="Platform name is required"),h.platformSlug||(P.platformSlug="Platform slug is required"),h.description||(P.description="Description is required"),h.industry||(P.industry="Industry is required");break;case 3:break;case 4:h.template||(P.template="Please select a template");break;case 5:h.heroTitle||(P.heroTitle="Hero title is required"),h.heroSubtitle||(P.heroSubtitle="Hero subtitle is required");break}return b(P),Object.keys(P).length===0},O=()=>{le(l)&&d(f=>Math.min(f+1,C))},q=()=>{d(f=>Math.max(f-1,1))},Y=()=>{const f=h.platformSlug||(h.platformName?h.platformName.toLowerCase().replace(/[^a-z0-9]/g,"-"):"preview-platform"),M=`${window.location.origin}/company/${f}`,K=window.open(M,"_blank","noopener,noreferrer");v(K),K&&K.addEventListener("load",()=>{T(K)})},T=f=>{if(!f||f.closed)return;const P=h.platformSlug||(h.platformName?h.platformName.toLowerCase().replace(/[^a-z0-9]/g,"-"):"preview-platform");f.postMessage({type:"LIVE_PREVIEW_DATA",data:{platformName:h.platformName,platformSlug:P,description:h.description,heroTitle:h.heroTitle,heroSubtitle:h.heroSubtitle,primaryColor:h.primaryColor,secondaryColor:h.secondaryColor,accentColor:h.accentColor,logo:h.logo,favicon:h.favicon,fontFamily:h.fontFamily,template:h.template,features:h.features,pages:h.pages,branding:{primaryColor:h.primaryColor,secondaryColor:h.secondaryColor,accentColor:h.accentColor,logo:h.logo,favicon:h.favicon,fontFamily:h.fontFamily}}},"*")};y.useEffect(()=>{if(g&&!g.closed){const f=setTimeout(()=>{T(g)},500);return()=>clearTimeout(f)}},[h,g]);const R=async()=>{if(le(l)){D(!0);try{const f=fe(),P={};Array.isArray(h.features)?h.features.forEach(pe=>{P[pe]=!0}):typeof h.features=="object"&&Object.assign(P,h.features);const M={name:h.platformName,slug:h.platformSlug,description:h.description,companyId:h.companyId,industry:h.industry,branding:{primaryColor:h.primaryColor,secondaryColor:h.secondaryColor,logo:h.logo,favicon:h.favicon},template:h.template,features:P,content:{hero:{title:h.heroTitle,subtitle:h.heroSubtitle}},settings:{isPublic:h.isPublic,allowRegistration:h.allowRegistration,requireApproval:h.requireApproval,maxUsers:h.maxUsers},status:"active",createdAt:new Date,updatedAt:new Date},K=await Yt(Ce(f,"platforms"),M),ue=Hj({...M,id:K.id});await Wt(K,{form:ue});const be=Ae(f,"companies",h.companyId);await Wt(be,{platformId:K.id,updatedAt:new Date}),a({id:K.id,...M,form:ue}),s()}catch(f){console.error("Error creating platform:",f),b({submit:"Failed to create platform. Please try again."})}finally{D(!1)}}},E=()=>{switch(l){case 1:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Select Company"}),e.jsx("p",{children:"Choose which company this platform will belong to"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Company *"}),e.jsxs("select",{value:h.companyId,onChange:f=>{const P=i.find(M=>M.id===f.target.value);F("companyId",f.target.value),F("companyName",P?.name||"")},className:`form-input ${S.companyId?"error":""}`,children:[e.jsx("option",{value:"",children:"Select a company..."}),i.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.email,")"]},f.id))]}),S.companyId&&e.jsx("span",{className:"error-message",children:S.companyId})]})]});case 2:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Platform Details"}),e.jsx("p",{children:"Configure the basic information and settings for your training platform"})]}),e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Name *"}),e.jsx("input",{type:"text",value:h.platformName,onChange:f=>F("platformName",f.target.value),className:`form-input ${S.platformName?"error":""}`,placeholder:"e.g., Sales Training Academy"}),e.jsx("small",{className:"form-help",children:"This will be displayed as the main title of your platform"}),S.platformName&&e.jsx("span",{className:"error-message",children:S.platformName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Slug *"}),e.jsx("input",{type:"text",value:h.platformSlug,onChange:f=>F("platformSlug",f.target.value),className:`form-input ${S.platformSlug?"error":""}`,placeholder:"e.g., sales-training-academy"}),e.jsxs("small",{className:"form-help",children:["Used in URLs: yoursite.com/",h.platformSlug||"platform-slug"]}),S.platformSlug&&e.jsx("span",{className:"error-message",children:S.platformSlug})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Description *"}),e.jsx("textarea",{value:h.description,onChange:f=>F("description",f.target.value),className:`form-textarea ${S.description?"error":""}`,rows:"4",placeholder:"Describe what this platform will be used for, who it's for, and what makes it special..."}),e.jsx("small",{className:"form-help",children:"This description will be used for SEO and platform overview"}),S.description&&e.jsx("span",{className:"error-message",children:S.description})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Industry *"}),e.jsxs("select",{value:h.industry,onChange:f=>F("industry",f.target.value),className:`form-input ${S.industry?"error":""}`,children:[e.jsx("option",{value:"",children:"Select industry..."}),L.map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsx("small",{className:"form-help",children:"Helps customize templates and content"}),S.industry&&e.jsx("span",{className:"error-message",children:S.industry})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Type"}),e.jsxs("select",{value:h.platformType||"training",onChange:f=>F("platformType",f.target.value),className:"form-input",children:[e.jsx("option",{value:"training",children:"Training Platform"}),e.jsx("option",{value:"education",children:"Educational Platform"}),e.jsx("option",{value:"certification",children:"Certification Platform"}),e.jsx("option",{value:"onboarding",children:"Employee Onboarding"}),e.jsx("option",{value:"compliance",children:"Compliance Training"}),e.jsx("option",{value:"sales",children:"Sales Training"}),e.jsx("option",{value:"custom",children:"Custom Platform"})]}),e.jsx("small",{className:"form-help",children:"Determines default features and templates"})]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Target Audience"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Audience"}),e.jsxs("select",{value:h.primaryAudience||"employees",onChange:f=>F("primaryAudience",f.target.value),className:"form-input",children:[e.jsx("option",{value:"employees",children:"Company Employees"}),e.jsx("option",{value:"customers",children:"Customers"}),e.jsx("option",{value:"partners",children:"Business Partners"}),e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"public",children:"General Public"}),e.jsx("option",{value:"members",children:"Members Only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Skill Level"}),e.jsxs("select",{value:h.skillLevel||"beginner",onChange:f=>F("skillLevel",f.target.value),className:"form-input",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"}),e.jsx("option",{value:"mixed",children:"Mixed Levels"})]})]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Platform Goals"}),e.jsx("div",{className:"goals-grid",children:[{id:"skill-development",label:"Skill Development",description:"Help users develop new skills"},{id:"certification",label:"Certification",description:"Provide certification programs"},{id:"compliance",label:"Compliance",description:"Ensure regulatory compliance"},{id:"onboarding",label:"Onboarding",description:"New employee orientation"},{id:"performance",label:"Performance",description:"Improve job performance"},{id:"engagement",label:"Engagement",description:"Increase employee engagement"}].map(f=>e.jsxs("label",{className:"goal-option",children:[e.jsx("input",{type:"checkbox",checked:h.goals?.includes(f.id)||!1,onChange:P=>{const M=h.goals||[],K=P.target.checked?[...M,f.id]:M.filter(ue=>ue!==f.id);F("goals",K)}}),e.jsxs("div",{className:"goal-content",children:[e.jsx("strong",{children:f.label}),e.jsx("small",{children:f.description})]})]},f.id))})]})]});case 3:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Branding & Design"}),e.jsx("p",{children:"Customize the visual identity and design system for your platform"})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Color Scheme"}),e.jsxs("div",{className:"color-palette",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Color"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:h.primaryColor,onChange:f=>F("primaryColor",f.target.value),className:"color-input"}),e.jsx("input",{type:"text",value:h.primaryColor,onChange:f=>F("primaryColor",f.target.value),className:"form-input color-text"})]}),e.jsx("small",{className:"form-help",children:"Main brand color for headers, buttons, and accents"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Secondary Color"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:h.secondaryColor,onChange:f=>F("secondaryColor",f.target.value),className:"color-input"}),e.jsx("input",{type:"text",value:h.secondaryColor,onChange:f=>F("secondaryColor",f.target.value),className:"form-input color-text"})]}),e.jsx("small",{className:"form-help",children:"Supporting color for backgrounds and secondary elements"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accent Color"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:h.accentColor,onChange:f=>F("accentColor",f.target.value),className:"color-input"}),e.jsx("input",{type:"text",value:h.accentColor,onChange:f=>F("accentColor",f.target.value),className:"form-input color-text"})]}),e.jsx("small",{className:"form-help",children:"Highlight color for CTAs and important elements"})]})]}),e.jsxs("div",{className:"color-presets",children:[e.jsx("h5",{children:"Color Presets"}),e.jsx("div",{className:"preset-grid",children:[{name:"Professional Blue",primary:"#1e40af",secondary:"#3b82f6",accent:"#10b981"},{name:"Corporate Green",primary:"#059669",secondary:"#10b981",accent:"#f59e0b"},{name:"Modern Purple",primary:"#7c3aed",secondary:"#a855f7",accent:"#ec4899"},{name:"Warm Orange",primary:"#ea580c",secondary:"#f97316",accent:"#eab308"},{name:"Cool Gray",primary:"#374151",secondary:"#6b7280",accent:"#3b82f6"},{name:"Bold Red",primary:"#dc2626",secondary:"#ef4444",accent:"#f59e0b"}].map(f=>e.jsxs("div",{className:"preset-option",onClick:()=>{F("primaryColor",f.primary),F("secondaryColor",f.secondary),F("accentColor",f.accent)},children:[e.jsxs("div",{className:"preset-colors",children:[e.jsx("div",{className:"preset-color",style:{backgroundColor:f.primary}}),e.jsx("div",{className:"preset-color",style:{backgroundColor:f.secondary}}),e.jsx("div",{className:"preset-color",style:{backgroundColor:f.accent}})]}),e.jsx("span",{className:"preset-name",children:f.name})]},f.name))})]})]})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Typography"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Font Family"}),e.jsx("select",{value:h.fontFamily,onChange:f=>F("fontFamily",f.target.value),className:"form-input",children:B.map(f=>e.jsx("option",{value:f.value,children:f.name},f.value))}),e.jsx("small",{className:"form-help",children:"Choose a font that matches your brand personality"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Font Weight"}),e.jsxs("select",{value:h.fontWeight||"normal",onChange:f=>F("fontWeight",f.target.value),className:"form-input",children:[e.jsx("option",{value:"light",children:"Light (300)"}),e.jsx("option",{value:"normal",children:"Normal (400)"}),e.jsx("option",{value:"medium",children:"Medium (500)"}),e.jsx("option",{value:"semibold",children:"Semibold (600)"}),e.jsx("option",{value:"bold",children:"Bold (700)"})]})]})]}),e.jsxs("div",{className:"typography-preview",children:[e.jsx("h5",{children:"Typography Preview"}),e.jsxs("div",{className:"preview-text",style:{fontFamily:h.fontFamily,fontWeight:h.fontWeight||"normal"},children:[e.jsx("h1",{children:"Heading 1 - Main Title"}),e.jsx("h2",{children:"Heading 2 - Section Title"}),e.jsx("h3",{children:"Heading 3 - Subsection"}),e.jsx("p",{children:"This is a sample paragraph showing how your text will look with the selected font family and weight. It should be easy to read and professional."})]})]})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Layout & Style"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Style"}),e.jsx("select",{value:h.layout,onChange:f=>F("layout",f.target.value),className:"form-input",children:Q.map(f=>e.jsx("option",{value:f.value,children:f.name},f.value))}),e.jsx("small",{className:"form-help",children:Q.find(f=>f.value===h.layout)?.description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content Width"}),e.jsxs("select",{value:h.contentWidth||"standard",onChange:f=>F("contentWidth",f.target.value),className:"form-input",children:[e.jsx("option",{value:"narrow",children:"Narrow (800px)"}),e.jsx("option",{value:"standard",children:"Standard (1200px)"}),e.jsx("option",{value:"wide",children:"Wide (1400px)"}),e.jsx("option",{value:"full",children:"Full Width"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Header Style"}),e.jsxs("select",{value:h.headerStyle||"standard",onChange:f=>F("headerStyle",f.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Header"}),e.jsx("option",{value:"minimal",children:"Minimal Header"}),e.jsx("option",{value:"centered",children:"Centered Header"}),e.jsx("option",{value:"sidebar",children:"Sidebar Navigation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Footer Style"}),e.jsxs("select",{value:h.footerStyle||"standard",onChange:f=>F("footerStyle",f.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Footer"}),e.jsx("option",{value:"minimal",children:"Minimal Footer"}),e.jsx("option",{value:"extended",children:"Extended Footer"}),e.jsx("option",{value:"none",children:"No Footer"})]})]})]})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Brand Assets"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Logo URL"}),e.jsx("input",{type:"url",value:h.logo,onChange:f=>F("logo",f.target.value),className:"form-input",placeholder:"https://example.com/logo.png"}),e.jsx("small",{className:"form-help",children:"Recommended size: 200x60px or similar aspect ratio"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Favicon URL"}),e.jsx("input",{type:"url",value:h.favicon,onChange:f=>F("favicon",f.target.value),className:"form-input",placeholder:"https://example.com/favicon.ico"}),e.jsx("small",{className:"form-help",children:"Recommended size: 32x32px or 16x16px"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Background Image URL"}),e.jsx("input",{type:"url",value:h.backgroundImage||"",onChange:f=>F("backgroundImage",f.target.value),className:"form-input",placeholder:"https://example.com/background.jpg"}),e.jsx("small",{className:"form-help",children:"Optional background image for hero sections"})]})]}),e.jsxs("div",{className:"branding-preview",children:[e.jsx("h4",{children:"Live Design Preview"}),e.jsxs("div",{className:"preview-card",style:{"--primary-color":h.primaryColor,"--secondary-color":h.secondaryColor,"--accent-color":h.accentColor,"font-family":h.fontFamily,"font-weight":h.fontWeight||"normal"},children:[e.jsxs("div",{className:"preview-header",children:[h.logo&&e.jsx("img",{src:h.logo,alt:"Logo",className:"preview-logo"}),e.jsx("h3",{children:h.platformName||"Your Platform"})]}),e.jsx("p",{children:h.description||"Platform description will appear here"}),e.jsxs("div",{className:"preview-actions",children:[e.jsx("button",{className:"preview-btn primary",children:"Primary Button"}),e.jsx("button",{className:"preview-btn secondary",children:"Secondary Button"})]}),e.jsxs("div",{className:"preview-colors",children:[e.jsx("div",{className:"color-swatch",style:{backgroundColor:h.primaryColor}}),e.jsx("div",{className:"color-swatch",style:{backgroundColor:h.secondaryColor}}),e.jsx("div",{className:"color-swatch",style:{backgroundColor:h.accentColor}})]})]})]})]});case 4:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Template Selection"}),e.jsx("p",{children:"Choose a professional template that matches your training platform needs"})]}),e.jsx("div",{className:"template-categories",children:e.jsx("div",{className:"category-tabs",children:["all","training","education","corporate","modern"].map(f=>e.jsx("button",{className:`category-tab ${h.templateCategory===f?"active":""}`,onClick:()=>F("templateCategory",f),children:f.charAt(0).toUpperCase()+f.slice(1)},f))})}),e.jsx("div",{className:"templates-grid",children:A.map(f=>e.jsxs("div",{className:`template-card ${h.template===f.id?"selected":""}`,onClick:()=>F("template",f.id),children:[e.jsxs("div",{className:"template-preview",children:[e.jsx("div",{className:"template-icon",children:f.icon}),e.jsx("h4",{children:f.name}),e.jsx("p",{children:f.description}),e.jsx("div",{className:"template-badge",children:e.jsx("span",{className:"badge-text",children:f.category||"Professional"})})]}),e.jsx("div",{className:"template-features",children:f.features.map((P,M)=>e.jsx("span",{className:"feature-tag",children:P},M))}),e.jsxs("div",{className:"template-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Pages:"}),e.jsx("span",{className:"stat-value",children:f.pageCount||"5"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Sections:"}),e.jsx("span",{className:"stat-value",children:f.sectionCount||"12"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Features:"}),e.jsx("span",{className:"stat-value",children:f.features.length})]})]})]},f.id))}),e.jsxs("div",{className:"template-customization",children:[e.jsx("h4",{children:"Template Customization"}),e.jsxs("div",{className:"customization-options",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Style"}),e.jsxs("select",{value:h.templateLayout||"standard",onChange:f=>F("templateLayout",f.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Layout"}),e.jsx("option",{value:"sidebar",children:"Sidebar Navigation"}),e.jsx("option",{value:"centered",children:"Centered Content"}),e.jsx("option",{value:"dashboard",children:"Dashboard Style"})]}),e.jsx("small",{className:"form-help",children:"Choose how your content will be organized"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Navigation Style"}),e.jsxs("select",{value:h.navigationStyle||"top",onChange:f=>F("navigationStyle",f.target.value),className:"form-input",children:[e.jsx("option",{value:"top",children:"Top Navigation"}),e.jsx("option",{value:"sidebar",children:"Sidebar Navigation"}),e.jsx("option",{value:"tabs",children:"Tab Navigation"}),e.jsx("option",{value:"breadcrumb",children:"Breadcrumb Navigation"})]}),e.jsx("small",{className:"form-help",children:"How users will navigate your platform"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content Density"}),e.jsxs("select",{value:h.contentDensity||"balanced",onChange:f=>F("contentDensity",f.target.value),className:"form-input",children:[e.jsx("option",{value:"spacious",children:"Spacious (More whitespace)"}),e.jsx("option",{value:"balanced",children:"Balanced (Standard spacing)"}),e.jsx("option",{value:"compact",children:"Compact (Dense content)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Visual Style"}),e.jsxs("select",{value:h.visualStyle||"modern",onChange:f=>F("visualStyle",f.target.value),className:"form-input",children:[e.jsx("option",{value:"minimal",children:"Minimal & Clean"}),e.jsx("option",{value:"modern",children:"Modern & Bold"}),e.jsx("option",{value:"classic",children:"Classic & Professional"}),e.jsx("option",{value:"creative",children:"Creative & Dynamic"})]})]})]})]})]}),e.jsxs("div",{className:"template-preview-section",children:[e.jsx("h4",{children:"Template Preview"}),e.jsx("div",{className:"preview-container",children:e.jsxs("div",{className:"preview-mockup",children:[e.jsxs("div",{className:"mockup-header",children:[e.jsx("div",{className:"mockup-logo"}),e.jsxs("div",{className:"mockup-nav",children:[e.jsx("div",{className:"nav-item"}),e.jsx("div",{className:"nav-item"}),e.jsx("div",{className:"nav-item"})]})]}),e.jsxs("div",{className:"mockup-content",children:[e.jsxs("div",{className:"mockup-hero",children:[e.jsx("div",{className:"hero-title"}),e.jsx("div",{className:"hero-subtitle"}),e.jsx("div",{className:"hero-button"})]}),e.jsx("div",{className:"mockup-sections",children:e.jsxs("div",{className:"section-row",children:[e.jsx("div",{className:"section-card"}),e.jsx("div",{className:"section-card"}),e.jsx("div",{className:"section-card"})]})})]})]})})]}),S.template&&e.jsx("span",{className:"error-message",children:S.template})]});case 5:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Page Builder"}),e.jsx("p",{children:"Create and customize your platform pages with drag-and-drop functionality"})]}),e.jsxs("div",{className:"page-builder",children:[e.jsxs("div",{className:"pages-section",children:[e.jsxs("div",{className:"pages-header",children:[e.jsxs("h4",{children:["Your Pages (",h.pages.length,")"]}),e.jsxs("div",{className:"pages-actions",children:[e.jsx("button",{className:"add-page-btn",onClick:ce,children:"➕ Add New Page"}),e.jsx("button",{className:"import-pages-btn",children:"📁 Import Pages"})]})]}),e.jsx("div",{className:"pages-grid",children:h.pages.map((f,P)=>e.jsxs("div",{className:"page-card",draggable:"true",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("div",{className:"page-icon",children:te(f.type)}),e.jsx("div",{className:"page-status",children:e.jsx("span",{className:`status-badge ${f.status||"active"}`,children:f.status||"Active"})})]}),e.jsxs("div",{className:"page-info",children:[e.jsx("h5",{children:f.name}),e.jsxs("p",{className:"page-url",children:["/",f.slug]}),e.jsx("span",{className:"page-template",children:I.find(M=>M.id===f.template)?.name||"Custom"}),e.jsxs("div",{className:"page-meta",children:[e.jsxs("span",{className:"meta-item",children:["📄 ",f.sections?.length||0," sections"]}),e.jsxs("span",{className:"meta-item",children:["👁️ ",f.views||0," views"]})]})]}),e.jsxs("div",{className:"page-actions",children:[e.jsx("button",{className:"page-action-btn",onClick:()=>z(P),title:"Edit Page",children:"✏️"}),e.jsx("button",{className:"page-action-btn",onClick:()=>duplicatePage(P),title:"Duplicate Page",children:"📋"}),e.jsx("button",{className:"page-action-btn",title:"Preview Page",children:"👁️"}),f.id!=="home"&&e.jsx("button",{className:"page-action-btn delete",onClick:()=>ee(P),title:"Delete Page",children:"🗑️"})]})]},f.id))})]}),e.jsxs("div",{className:"content-blocks-section",children:[e.jsxs("div",{className:"blocks-header",children:[e.jsx("h4",{children:"Content Blocks"}),e.jsx("p",{children:"Drag and drop these blocks to build your pages"})]}),e.jsxs("div",{className:"blocks-categories",children:[e.jsxs("div",{className:"category-section",children:[e.jsx("h5",{children:"📐 Layout Blocks"}),e.jsx("div",{className:"blocks-grid",children:W.filter(f=>f.category==="layout").map(f=>e.jsxs("div",{className:"block-card",draggable:"true",children:[e.jsx("div",{className:"block-icon",children:f.icon}),e.jsxs("div",{className:"block-info",children:[e.jsx("h6",{children:f.name}),e.jsx("p",{children:f.description}),e.jsx("span",{className:"block-category",children:f.category})]})]},f.id))})]}),e.jsxs("div",{className:"category-section",children:[e.jsx("h5",{children:"📝 Content Blocks"}),e.jsx("div",{className:"blocks-grid",children:W.filter(f=>f.category==="content").map(f=>e.jsxs("div",{className:"block-card",draggable:"true",children:[e.jsx("div",{className:"block-icon",children:f.icon}),e.jsxs("div",{className:"block-info",children:[e.jsx("h6",{children:f.name}),e.jsx("p",{children:f.description}),e.jsx("span",{className:"block-category",children:f.category})]})]},f.id))})]}),e.jsxs("div",{className:"category-section",children:[e.jsx("h5",{children:"🎯 Interactive Blocks"}),e.jsx("div",{className:"blocks-grid",children:W.filter(f=>["forms","social","commerce"].includes(f.category)).map(f=>e.jsxs("div",{className:"block-card",draggable:"true",children:[e.jsx("div",{className:"block-icon",children:f.icon}),e.jsxs("div",{className:"block-info",children:[e.jsx("h6",{children:f.name}),e.jsx("p",{children:f.description}),e.jsx("span",{className:"block-category",children:f.category})]})]},f.id))})]})]})]})]}),e.jsxs("div",{className:"page-settings",children:[e.jsx("h4",{children:"Page Settings"}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default Page Template"}),e.jsxs("select",{value:h.defaultPageTemplate||"standard",onChange:f=>F("defaultPageTemplate",f.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Page"}),e.jsx("option",{value:"landing",children:"Landing Page"}),e.jsx("option",{value:"dashboard",children:"Dashboard Page"}),e.jsx("option",{value:"course",children:"Course Page"}),e.jsx("option",{value:"blog",children:"Blog Page"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Page Navigation"}),e.jsxs("select",{value:h.pageNavigation||"auto",onChange:f=>F("pageNavigation",f.target.value),className:"form-input",children:[e.jsx("option",{value:"auto",children:"Auto-generate from pages"}),e.jsx("option",{value:"manual",children:"Manual navigation setup"}),e.jsx("option",{value:"hidden",children:"Hidden navigation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"SEO Settings"}),e.jsxs("div",{className:"checkbox-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:h.autoSeo||!1,onChange:f=>F("autoSeo",f.target.checked)}),"Auto-generate SEO meta tags"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:h.sitemap||!1,onChange:f=>F("sitemap",f.target.checked)}),"Include in sitemap"]})]})]})]})]})]});case 6:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Content Setup"}),e.jsx("p",{children:"Create compelling content that engages your audience and drives results"})]}),e.jsxs("div",{className:"content-sections",children:[e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"Hero Section"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Title *"}),e.jsx("input",{type:"text",value:h.heroTitle,onChange:f=>F("heroTitle",f.target.value),className:`form-input ${S.heroTitle?"error":""}`,placeholder:"Welcome to Your Training Platform"}),e.jsx("small",{className:"form-help",children:"Main headline that captures attention"}),S.heroTitle&&e.jsx("span",{className:"error-message",children:S.heroTitle})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Subtitle *"}),e.jsx("textarea",{value:h.heroSubtitle,onChange:f=>F("heroSubtitle",f.target.value),className:`form-textarea ${S.heroSubtitle?"error":""}`,rows:"3",placeholder:"Start your learning journey with our comprehensive training programs"}),e.jsx("small",{className:"form-help",children:"Supporting text that explains your value proposition"}),S.heroSubtitle&&e.jsx("span",{className:"error-message",children:S.heroSubtitle})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Call-to-Action Button Text"}),e.jsx("input",{type:"text",value:h.ctaText||"Get Started",onChange:f=>F("ctaText",f.target.value),className:"form-input",placeholder:"Get Started"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Background Image URL"}),e.jsx("input",{type:"url",value:h.heroBackground||"",onChange:f=>F("heroBackground",f.target.value),className:"form-input",placeholder:"https://example.com/hero-bg.jpg"})]})]})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"About Section"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"About Title"}),e.jsx("input",{type:"text",value:h.aboutTitle||"About Our Platform",onChange:f=>F("aboutTitle",f.target.value),className:"form-input",placeholder:"About Our Platform"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"About Description"}),e.jsx("textarea",{value:h.aboutDescription||"",onChange:f=>F("aboutDescription",f.target.value),className:"form-textarea",rows:"4",placeholder:"Tell your audience what makes your platform special..."})]})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"Features Section"}),e.jsxs("div",{className:"features-builder",children:[e.jsxs("div",{className:"features-header",children:[e.jsx("h5",{children:"Platform Features"}),e.jsx("button",{className:"add-feature-btn",onClick:()=>addFeature(),children:"➕ Add Feature"})]}),e.jsx("div",{className:"features-list",children:(h.features||[]).map((f,P)=>e.jsxs("div",{className:"feature-item",children:[e.jsxs("div",{className:"feature-inputs",children:[e.jsx("input",{type:"text",value:f.title,onChange:M=>updateFeature(P,"title",M.target.value),className:"form-input",placeholder:"Feature title"}),e.jsx("textarea",{value:f.description,onChange:M=>updateFeature(P,"description",M.target.value),className:"form-textarea",rows:"2",placeholder:"Feature description"})]}),e.jsx("button",{className:"remove-feature-btn",onClick:()=>removeFeature(P),children:"🗑️"})]},P))})]})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"Contact Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contact Email"}),e.jsx("input",{type:"email",value:h.contactEmail||"",onChange:f=>F("contactEmail",f.target.value),className:"form-input",placeholder:"contact@yourcompany.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"tel",value:h.contactPhone||"",onChange:f=>F("contactPhone",f.target.value),className:"form-input",placeholder:"+1 (555) 123-4567"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{value:h.contactAddress||"",onChange:f=>F("contactAddress",f.target.value),className:"form-textarea",rows:"2",placeholder:"Your company address"})]})]})]}),e.jsxs("div",{className:"content-preview",children:[e.jsx("h4",{children:"Live Preview"}),e.jsx("div",{className:"preview-hero",children:e.jsxs("div",{className:"preview-bg",style:{backgroundImage:h.heroBackground?`url(${h.heroBackground})`:"none"},children:[e.jsx("h1",{children:h.heroTitle||"Welcome to Your Training Platform"}),e.jsx("p",{children:h.heroSubtitle||"Start your learning journey with our comprehensive training programs"}),e.jsx("button",{className:"preview-cta",children:h.ctaText||"Get Started"})]})}),h.aboutTitle&&e.jsxs("div",{className:"preview-about",children:[e.jsx("h2",{children:h.aboutTitle}),e.jsx("p",{children:h.aboutDescription})]}),(h.features||[]).length>0&&e.jsxs("div",{className:"preview-features",children:[e.jsx("h2",{children:"Features"}),e.jsx("div",{className:"features-grid",children:(h.features||[]).map((f,P)=>e.jsxs("div",{className:"feature-card",children:[e.jsx("h3",{children:f.title}),e.jsx("p",{children:f.description})]},P))})]})]})]});case 7:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Advanced Features"}),e.jsx("p",{children:"Enable powerful features to enhance your training platform"})]}),e.jsxs("div",{className:"features-categories",children:[e.jsxs("div",{className:"feature-category",children:[e.jsx("h4",{children:"🎓 Learning & Training"}),e.jsx("div",{className:"features-grid",children:Object.entries(h.features).filter(([f])=>["userRegistration","progressTracking","certificates","quizzes"].includes(f)).map(([f,P])=>e.jsx("div",{className:"feature-setting",children:e.jsxs("label",{className:"feature-label",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:M=>{j(K=>({...K,features:{...K.features,[f]:M.target.checked}}))}}),e.jsxs("div",{className:"feature-content",children:[e.jsxs("div",{className:"feature-icon",children:[f==="userRegistration"&&"👤",f==="progressTracking"&&"📊",f==="certificates"&&"🏆",f==="quizzes"&&"❓"]}),e.jsxs("div",{className:"feature-text",children:[e.jsx("strong",{children:oe(f)}),e.jsx("small",{children:re(f)})]})]})]})},f))})]}),e.jsxs("div",{className:"feature-category",children:[e.jsx("h4",{children:"🔧 Platform Management"}),e.jsx("div",{className:"features-grid",children:Object.entries(h.features).filter(([f])=>["analytics","notifications","userManagement","contentManagement"].includes(f)).map(([f,P])=>e.jsx("div",{className:"feature-setting",children:e.jsxs("label",{className:"feature-label",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:M=>{j(K=>({...K,features:{...K.features,[f]:M.target.checked}}))}}),e.jsxs("div",{className:"feature-content",children:[e.jsxs("div",{className:"feature-icon",children:[f==="analytics"&&"📈",f==="notifications"&&"🔔",f==="userManagement"&&"👥",f==="contentManagement"&&"📝"]}),e.jsxs("div",{className:"feature-text",children:[e.jsx("strong",{children:oe(f)}),e.jsx("small",{children:re(f)})]})]})]})},f))})]}),e.jsxs("div",{className:"feature-category",children:[e.jsx("h4",{children:"🌐 Integration & API"}),e.jsx("div",{className:"features-grid",children:Object.entries(h.features).filter(([f])=>["apiAccess","webhooks","sso","thirdPartyIntegrations"].includes(f)).map(([f,P])=>e.jsx("div",{className:"feature-setting",children:e.jsxs("label",{className:"feature-label",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:M=>{j(K=>({...K,features:{...K.features,[f]:M.target.checked}}))}}),e.jsxs("div",{className:"feature-content",children:[e.jsxs("div",{className:"feature-icon",children:[f==="apiAccess"&&"🔌",f==="webhooks"&&"🪝",f==="sso"&&"🔐",f==="thirdPartyIntegrations"&&"🔗"]}),e.jsxs("div",{className:"feature-text",children:[e.jsx("strong",{children:oe(f)}),e.jsx("small",{children:re(f)})]})]})]})},f))})]})]}),e.jsxs("div",{className:"feature-settings",children:[e.jsx("h4",{children:"Feature Configuration"}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default User Role"}),e.jsxs("select",{value:h.defaultUserRole||"student",onChange:f=>F("defaultUserRole",f.target.value),className:"form-input",children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"instructor",children:"Instructor"}),e.jsx("option",{value:"admin",children:"Administrator"}),e.jsx("option",{value:"viewer",children:"Viewer Only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content Access Level"}),e.jsxs("select",{value:h.contentAccess||"authenticated",onChange:f=>F("contentAccess",f.target.value),className:"form-input",children:[e.jsx("option",{value:"public",children:"Public (No login required)"}),e.jsx("option",{value:"authenticated",children:"Authenticated Users Only"}),e.jsx("option",{value:"enrolled",children:"Enrolled Students Only"}),e.jsx("option",{value:"premium",children:"Premium Users Only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Progress Tracking Granularity"}),e.jsxs("select",{value:h.progressGranularity||"course",onChange:f=>F("progressGranularity",f.target.value),className:"form-input",children:[e.jsx("option",{value:"course",children:"Course Level"}),e.jsx("option",{value:"lesson",children:"Lesson Level"}),e.jsx("option",{value:"activity",children:"Activity Level"}),e.jsx("option",{value:"detailed",children:"Detailed Tracking"})]})]})]})]}),e.jsxs("div",{className:"feature-preview",children:[e.jsx("h4",{children:"Enabled Features Summary"}),e.jsx("div",{className:"enabled-features",children:Object.entries(h.features).filter(([f,P])=>P).map(([f,P])=>e.jsxs("div",{className:"enabled-feature",children:[e.jsxs("span",{className:"feature-icon",children:[f==="userRegistration"&&"👤",f==="progressTracking"&&"📊",f==="certificates"&&"🏆",f==="quizzes"&&"❓",f==="analytics"&&"📈",f==="notifications"&&"🔔",f==="userManagement"&&"👥",f==="contentManagement"&&"📝",f==="apiAccess"&&"🔌",f==="webhooks"&&"🪝",f==="sso"&&"🔐",f==="thirdPartyIntegrations"&&"🔗"]}),e.jsx("span",{className:"feature-name",children:oe(f)})]},f))})]})]});case 8:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Platform Settings"}),e.jsx("p",{children:"Configure access, security, and final platform settings"})]}),e.jsxs("div",{className:"settings-sections",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"🔐 Access & Security"}),e.jsxs("div",{className:"settings-grid",children:[e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:h.isPublic,onChange:f=>F("isPublic",f.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"🌐"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Public Platform"}),e.jsx("small",{children:"Allow public access to the platform"})]})]})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:h.allowRegistration,onChange:f=>F("allowRegistration",f.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"👤"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Allow Registration"}),e.jsx("small",{children:"Users can register themselves"})]})]})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:h.requireApproval,onChange:f=>F("requireApproval",f.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"✅"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Require Approval"}),e.jsx("small",{children:"New users need admin approval"})]})]})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:h.enableTwoFactor||!1,onChange:f=>F("enableTwoFactor",f.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"🔒"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Two-Factor Authentication"}),e.jsx("small",{children:"Enhanced security for user accounts"})]})]})]})})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"👥 User Management"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Maximum Users"}),e.jsx("input",{type:"number",value:h.maxUsers,onChange:f=>F("maxUsers",parseInt(f.target.value)),className:"form-input",min:"1",max:"10000"}),e.jsx("small",{className:"form-help",children:"Set a limit on total platform users"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"User Session Timeout"}),e.jsxs("select",{value:h.sessionTimeout||"24",onChange:f=>F("sessionTimeout",f.target.value),className:"form-input",children:[e.jsx("option",{value:"1",children:"1 Hour"}),e.jsx("option",{value:"8",children:"8 Hours"}),e.jsx("option",{value:"24",children:"24 Hours"}),e.jsx("option",{value:"168",children:"7 Days"}),e.jsx("option",{value:"720",children:"30 Days"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default User Permissions"}),e.jsxs("select",{value:h.defaultPermissions||"read",onChange:f=>F("defaultPermissions",f.target.value),className:"form-input",children:[e.jsx("option",{value:"read",children:"Read Only"}),e.jsx("option",{value:"participate",children:"Participate in Courses"}),e.jsx("option",{value:"create",children:"Create Content"}),e.jsx("option",{value:"moderate",children:"Moderate Platform"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"User Data Retention"}),e.jsxs("select",{value:h.dataRetention||"indefinite",onChange:f=>F("dataRetention",f.target.value),className:"form-input",children:[e.jsx("option",{value:"indefinite",children:"Indefinite"}),e.jsx("option",{value:"1year",children:"1 Year"}),e.jsx("option",{value:"2years",children:"2 Years"}),e.jsx("option",{value:"5years",children:"5 Years"})]})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"🌐 SEO & Analytics"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Meta Title"}),e.jsx("input",{type:"text",value:h.seo.metaTitle,onChange:f=>F("seo",{...h.seo,metaTitle:f.target.value}),className:"form-input",placeholder:"Your Platform - Training & Education"}),e.jsx("small",{className:"form-help",children:"Appears in search engine results (50-60 characters)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Meta Description"}),e.jsx("textarea",{value:h.seo.metaDescription,onChange:f=>F("seo",{...h.seo,metaDescription:f.target.value}),className:"form-textarea",rows:"3",placeholder:"Learn new skills with our comprehensive training platform..."}),e.jsx("small",{className:"form-help",children:"Brief description for search engines (150-160 characters)"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Google Analytics ID"}),e.jsx("input",{type:"text",value:h.analytics?.googleAnalytics||"",onChange:f=>F("analytics",{...h.analytics,googleAnalytics:f.target.value}),className:"form-input",placeholder:"GA-XXXXXXXXX-X"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Google Tag Manager ID"}),e.jsx("input",{type:"text",value:h.analytics?.gtm||"",onChange:f=>F("analytics",{...h.analytics,gtm:f.target.value}),className:"form-input",placeholder:"GTM-XXXXXXX"})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"⚙️ Advanced Settings"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Timezone"}),e.jsxs("select",{value:h.timezone||"UTC",onChange:f=>F("timezone",f.target.value),className:"form-input",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default Language"}),e.jsxs("select",{value:h.defaultLanguage||"en",onChange:f=>F("defaultLanguage",f.target.value),className:"form-input",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"it",children:"Italian"}),e.jsx("option",{value:"pt",children:"Portuguese"}),e.jsx("option",{value:"zh",children:"Chinese"}),e.jsx("option",{value:"ja",children:"Japanese"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Custom CSS"}),e.jsx("textarea",{value:h.customCSS||"",onChange:f=>F("customCSS",f.target.value),className:"form-textarea",rows:"4",placeholder:"/* Add custom CSS styles here */"}),e.jsx("small",{className:"form-help",children:"Add custom styling to override default themes"})]})]})]}),e.jsxs("div",{className:"platform-summary",children:[e.jsx("h4",{children:"Platform Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Platform Name:"}),e.jsx("span",{className:"summary-value",children:h.platformName})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"URL Slug:"}),e.jsxs("span",{className:"summary-value",children:["/",h.platformSlug]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Template:"}),e.jsx("span",{className:"summary-value",children:A.find(f=>f.id===h.template)?.name})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Pages:"}),e.jsx("span",{className:"summary-value",children:h.pages.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Features:"}),e.jsx("span",{className:"summary-value",children:Object.values(h.features).filter(Boolean).length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Max Users:"}),e.jsx("span",{className:"summary-value",children:h.maxUsers})]})]})]})]});default:return null}};return t?e.jsx("div",{className:"create-platform-modal-overlay",children:e.jsxs("div",{className:"create-platform-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"Create New Platform"}),e.jsx("p",{children:"Set up a new training platform for your company"})]}),e.jsx("button",{className:"modal-close",onClick:s,children:"×"})]}),e.jsxs("div",{className:"modal-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${l/C*100}%`}})}),e.jsx("div",{className:"progress-steps",children:[{number:1,label:"Company"},{number:2,label:"Details"},{number:3,label:"Design"},{number:4,label:"Template"},{number:5,label:"Pages"},{number:6,label:"Content"},{number:7,label:"Features"},{number:8,label:"Settings"}].map((f,P)=>e.jsxs("div",{className:"progress-step-container",children:[e.jsx("div",{className:`progress-step ${l>f.number?"completed":l===f.number?"active":""}`,children:l>f.number?"":f.number}),e.jsx("span",{className:"progress-label",children:f.label})]},f.number))})]}),E(),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"footer-left",children:[l>1&&e.jsx("button",{className:"btn-secondary",onClick:q,children:"← Previous"}),l>=2&&e.jsx("button",{className:`btn-preview ${g&&!g.closed?"preview-open":""}`,onClick:Y,title:g&&!g.closed?"Preview is live - changes update automatically":"Open platform preview in new tab",children:g&&!g.closed?"🔄 Live Preview":"👁️ Preview"})]}),e.jsx("div",{className:"footer-center"}),e.jsxs("div",{className:"footer-right",children:[e.jsx("button",{className:"btn-secondary",onClick:s,children:"Cancel"}),l<C?e.jsx("button",{className:"btn-primary",onClick:O,children:"Next →"}):e.jsx("button",{className:"btn-primary",onClick:R,disabled:w,children:w?"Creating...":"Create Platform"})]})]}),S.submit&&e.jsx("div",{className:"error-banner",children:S.submit})]})}):null},ME=({isOpen:t,isEdit:s,companies:a,formData:i,showPassword:l,onFormChange:d,onTogglePassword:u,onSubmit:m,onCancel:g})=>{const[v,h]=y.useState("basic");if(!t)return null;const j=A=>{A.preventDefault(),m(A)},w=A=>{const{name:L,value:N,type:I,checked:W}=A.target;d({...i,[L]:I==="checkbox"?W:N})},D=A=>{const L=i.permissions.includes(A)?i.permissions.filter(N=>N!==A):[...i.permissions,A];d({...i,permissions:L})},S=[{id:"manage_users",label:"Manage Users",icon:"👥",description:"Create, edit, and delete users"},{id:"manage_content",label:"Manage Content",icon:"📝",description:"Edit rebuttals, FAQs, and categories"},{id:"view_analytics",label:"View Analytics",icon:"📊",description:"Access reports and analytics"},{id:"manage_settings",label:"Manage Settings",icon:"⚙️",description:"Configure system settings"},{id:"manage_billing",label:"Manage Billing",icon:"💳",description:"Handle billing and subscriptions"}],b=[{value:"user",label:"User",icon:"👤",description:"Basic access level"},{value:"admin",label:"Company Admin",icon:"🛡️",description:"Administrative privileges"},{value:"super-admin",label:"Super Admin",icon:"👑",description:"Full system access"}],C=[{id:"basic",label:"Basic Info",icon:"👤"},{id:"security",label:"Security",icon:"🔒"},{id:"permissions",label:"Permissions",icon:"🛡️"}];return e.jsx("div",{className:"edit-admin-modal-overlay",onClick:g,children:e.jsxs("div",{className:"edit-admin-modal-container",onClick:A=>A.stopPropagation(),children:[e.jsx("div",{className:"edit-admin-modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-icon-section",children:[e.jsx("div",{className:"modal-main-icon",children:"✏️"}),e.jsxs("div",{className:"modal-title-group",children:[e.jsx("h2",{children:s?"Edit Administrator":"Create New User"}),e.jsx("p",{children:"Manage user information and permissions"})]})]}),e.jsx("button",{className:"modal-close-btn",onClick:g,"aria-label":"Close modal",children:e.jsx("span",{children:"✕"})})]})}),e.jsx("div",{className:"modal-nav-tabs",children:C.map(A=>e.jsxs("button",{className:`nav-tab ${v===A.id?"active":""}`,onClick:()=>h(A.id),children:[e.jsx("span",{className:"nav-tab-icon",children:A.icon}),e.jsx("span",{className:"nav-tab-label",children:A.label})]},A.id))}),e.jsxs("form",{onSubmit:j,className:"edit-admin-form",children:[e.jsxs("div",{className:"modal-body",children:[v==="basic"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"👤 Basic Information"}),e.jsx("p",{children:"Essential user details and identification"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"name",children:[e.jsx("span",{className:"label-icon",children:"👤"}),"Full Name *"]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:w,required:!0,placeholder:"Enter full name",className:"form-input"})})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx("span",{className:"label-icon",children:"📧"}),"Email Address *"]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:w,required:!0,placeholder:"Enter email address",className:"form-input"})})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"companyId",children:[e.jsx("span",{className:"label-icon",children:"🏢"}),"Company *"]}),e.jsx("div",{className:"select-wrapper",children:e.jsxs("select",{id:"companyId",name:"companyId",value:i.companyId,onChange:w,required:!0,className:"form-select",children:[e.jsx("option",{value:"",children:"Select company"}),a.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"role",children:[e.jsx("span",{className:"label-icon",children:"🛡️"}),"User Role *"]}),e.jsx("div",{className:"role-selector",children:b.map(A=>e.jsxs("div",{className:`role-option ${i.role===A.value?"selected":""}`,onClick:()=>w({target:{name:"role",value:A.value}}),children:[e.jsx("div",{className:"role-icon",children:A.icon}),e.jsxs("div",{className:"role-info",children:[e.jsx("div",{className:"role-label",children:A.label}),e.jsx("div",{className:"role-description",children:A.description})]})]},A.value))})]})]}),e.jsx("div",{className:"status-section",children:e.jsx("div",{className:"status-toggle",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:w,className:"toggle-input"}),e.jsx("span",{className:"toggle-slider"}),e.jsxs("span",{className:"toggle-text",children:[e.jsx("span",{className:"toggle-icon",children:i.isActive?"✅":"❌"}),i.isActive?"Active User":"Inactive User"]})]})})})]}),v==="security"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"🔒 Security Settings"}),e.jsx("p",{children:"Password and authentication configuration"})]}),e.jsxs("div",{className:"security-card",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"password",children:[e.jsx("span",{className:"label-icon",children:"🔑"}),"Password ",s?"(leave blank to keep current)":"*"]}),e.jsxs("div",{className:"password-wrapper",children:[e.jsx("input",{type:l?"text":"password",id:"password",name:"password",value:i.password,onChange:w,required:!s,placeholder:s?"Enter new password to change":"Enter password",className:"form-input password-input"}),e.jsx("button",{type:"button",onClick:u,className:"password-toggle",children:l?"🙈":"👁️"})]})]}),e.jsxs("div",{className:"security-tips",children:[e.jsxs("div",{className:"tips-header",children:[e.jsx("span",{className:"tips-icon",children:"💡"}),e.jsx("span",{children:"Password Requirements"})]}),e.jsxs("ul",{className:"tips-list",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Include uppercase and lowercase letters"}),e.jsx("li",{children:"Include at least one number"}),e.jsx("li",{children:"Include at least one special character"})]})]})]})]}),v==="permissions"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"🛡️ Permissions & Access"}),e.jsx("p",{children:"Configure what this user can access and modify"})]}),i.role==="admin"?e.jsx("div",{className:"permissions-grid",children:S.map(A=>e.jsxs("div",{className:`permission-card ${i.permissions.includes(A.id)?"selected":""}`,onClick:()=>D(A.id),children:[e.jsxs("div",{className:"permission-header",children:[e.jsx("span",{className:"permission-icon",children:A.icon}),e.jsxs("div",{className:"permission-checkbox",children:[e.jsx("input",{type:"checkbox",checked:i.permissions.includes(A.id),onChange:()=>D(A.id),className:"checkbox-input"}),e.jsx("span",{className:"checkbox-custom"})]})]}),e.jsxs("div",{className:"permission-content",children:[e.jsx("h4",{children:A.label}),e.jsx("p",{children:A.description})]})]},A.id))}):e.jsxs("div",{className:"permissions-notice",children:[e.jsx("div",{className:"notice-icon",children:"ℹ️"}),e.jsxs("div",{className:"notice-content",children:[e.jsx("h4",{children:"Role-Based Permissions"}),e.jsx("p",{children:i.role==="super-admin"?"Super Administrators have full access to all features and settings.":"Regular users have limited access based on their assigned role."})]})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"footer-actions",children:[e.jsxs("button",{type:"button",className:"btn-secondary",onClick:g,children:[e.jsx("span",{className:"btn-icon",children:"❌"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[e.jsx("span",{className:"btn-icon",children:s?"💾":"➕"}),s?"Update Administrator":"Create User"]})]})})]})]})})},IE=({isOpen:t,platform:s,platformForm:a,setPlatformForm:i,activePageBuilderTab:l,setActivePageBuilderTab:d,selectedPage:u,setSelectedPage:m,selectedSection:g,setSelectedSection:v,showLivePreview:h,setShowLivePreview:j,onSave:w,onCancel:D,companies:S=[]})=>{const[b,C]=y.useState(null),[A,L]=y.useState(""),[N,I]=y.useState(!1),[W,B]=y.useState(!1),[Q,F]=y.useState(null),[te,ce]=y.useState([]),[z,ee]=y.useState([]),[oe,re]=y.useState([]),[le,O]=y.useState([]),[q,Y]=y.useState({});if(!t)return null;y.useEffect(()=>{if(s&&s.companyId&&S.length>0){I(!0),B(!0);const _=S.find(V=>V.id===s.companyId);if(_){C(_);const V=typeof window<"u"?window.location.origin:"",J=_.slug||_.id;L(J==="long-home"?`${V}/app`:`${V}/company/${J}`)}T(s.companyId),I(!1)}},[s,S]);const T=async _=>{try{const V=fe(),[J,ae,ge,We]=await Promise.all([De(Ce(V,"categories")),De(Ce(V,"rebuttals")),De(Ce(V,"faqs")),De(Ce(V,"serviceTopics"))]),ze=J.docs.map(et=>({id:et.id,...et.data()}));ce(ze);const Ge=ae.docs.map(et=>({id:et.id,...et.data()}));ee(Ge);const vt=ge.docs.map(et=>({id:et.id,...et.data()}));re(vt);const Ve=We.docs.map(et=>({id:et.id,...et.data()}));O(Ve),Y({heroTitle:"Long Home Products Training Platform",heroSubtitle:"Master your sales skills with our comprehensive training programs",categories:ze.slice(0,8),rebuttals:Ge.slice(0,4),faqs:vt.slice(0,3),topics:Ve.slice(0,4)});const Ke={...a,pages:{dashboard:{title:"Dashboard",slug:"dashboard",layout:"training",content:{hero:{title:"Long Home Products Training Dashboard",subtitle:"Welcome to your sales training platform",backgroundImage:"",ctaText:"Start Training",ctaLink:"/training"},sections:[{type:"sidebar",title:"Navigation Sidebar",content:[{icon:"📊",label:"Dashboard",active:!0},{icon:"🎯",label:"Rebuttals",active:!1},{icon:"❓",label:"FAQ",active:!1},{icon:"📈",label:"Progress",active:!1}],description:"Main navigation sidebar"},{type:"stats",title:"Training Statistics",content:[{label:"Rebuttals Mastered",value:"24",icon:"🎯"},{label:"Training Hours",value:"12.5",icon:"⏱️"},{label:"Progress Score",value:"85%",icon:"📊"}],description:"Your training progress overview"}]}},rebuttals:{title:"Rebuttal Library",slug:"rebuttals",layout:"rebuttals",content:{hero:{title:"Call Center Rebuttals",subtitle:"Master effective responses to common objections",backgroundImage:"",ctaText:"Browse Categories",ctaLink:"/rebuttals"},sections:[{type:"sidebar",title:"Category Sidebar",content:ze,description:"Browse rebuttals by category"},{type:"rebuttals",title:"Featured Rebuttals",content:Ge.slice(0,6),description:"Essential rebuttals for home improvement sales"}]}},faq:{title:"Frequently Asked Questions",slug:"faq",layout:"faq",content:{hero:{title:"Frequently Asked Questions",subtitle:"Find answers to common questions about our training platform and sales techniques",backgroundImage:"",ctaText:"Browse All FAQs",ctaLink:"/faq"},sections:[{type:"faqs",title:"All Questions",content:vt,description:"Complete FAQ library"}]}},customerService:{title:"Customer Service Training",slug:"customer-service",layout:"customer-service",content:{hero:{title:"Customer Service Excellence",subtitle:"Learn effective customer service techniques for home improvement professionals",backgroundImage:"",ctaText:"Start Training",ctaLink:"/customer-service"},sections:[{type:"topics",title:"Training Topics",content:Ve,description:"Customer service training modules"}]}}}};i(Ke),F(Ke),B(!1)}catch(V){console.error("Error fetching platform data:",V),B(!1)}},R=(_,V)=>{Y(ae=>({...ae,[_]:V}));const J=document.querySelector(".real-site-iframe");if(J&&J.contentWindow)try{J.contentWindow.postMessage({type:"UPDATE_CONTENT",field:_,value:V},"*")}catch(ae){console.log("Could not update iframe content:",ae)}},E=(_,V)=>{R(_,V)},f=async()=>{try{const _=fe(),V=Ae(_,"companies",s.companyId);await Wt(V,{heroTitle:q.heroTitle,heroSubtitle:q.heroSubtitle,lastUpdated:new Date}),console.log("✅ Changes saved to database")}catch(_){console.error("❌ Error saving changes:",_)}};y.useEffect(()=>{const _=V=>{V.data.type==="IFRAME_READY"&&console.log("✅ Iframe is ready for content updates")};return window.addEventListener("message",_),()=>window.removeEventListener("message",_)},[]);const P=(_,V)=>{const J=_.split("."),ae={...a};let ge=ae;for(let We=0;We<J.length-1;We++)ge[J[We]]||(ge[J[We]]={}),ge=ge[J[We]];ge[J[J.length-1]]=V,i(ae)},M=()=>{const _=`page_${Date.now()}`,V={title:"New Page",slug:_,layout:"default",content:{hero:{title:"New Page Title",subtitle:"New page content",backgroundImage:"",ctaText:"Get Started",ctaLink:"/"},sections:[]}};i({...a,pages:{...a.pages,[_]:V}})},K=_=>{const V={...a.pages};delete V[_],i({...a,pages:V}),u===_&&m(Object.keys(V)[0]||"home")},ue=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"📄 Page Management"}),W?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading platform content..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-list",children:[Object.entries(a.pages||{}).map(([_,V])=>e.jsxs("div",{className:`page-item ${u===_?"active":""}`,onClick:()=>m(_),children:[e.jsx("span",{className:"page-icon",children:"📄"}),e.jsxs("div",{className:"page-info",children:[e.jsxs("div",{className:"page-title",children:[V.title,V.content?.sections&&e.jsxs("span",{className:"sections-count",children:["(",V.content.sections.length," sections)"]})]}),e.jsxs("div",{className:"page-slug",children:["/",V.slug]}),V.content?.sections&&V.content.sections.length>0&&e.jsx("div",{className:"page-sections",children:V.content.sections.map((J,ae)=>e.jsx("span",{className:"section-tag",children:J.type},ae))})]}),e.jsx("div",{className:"page-actions",children:e.jsx("button",{className:"page-action-btn",onClick:J=>{J.stopPropagation(),K(_)},children:"🗑️"})})]},_)),e.jsx("button",{className:"add-page-btn",onClick:M,children:"➕ Add Page"})]}),e.jsxs("div",{className:"data-summary",children:[e.jsx("h4",{children:"📊 Content Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"📄"}),e.jsx("span",{className:"summary-label",children:"Pages"}),e.jsx("span",{className:"summary-value",children:Object.keys(a.pages||{}).length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"💬"}),e.jsx("span",{className:"summary-label",children:"Rebuttals"}),e.jsx("span",{className:"summary-value",children:z.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"📋"}),e.jsx("span",{className:"summary-label",children:"Categories"}),e.jsx("span",{className:"summary-value",children:te.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"❓"}),e.jsx("span",{className:"summary-label",children:"FAQs"}),e.jsx("span",{className:"summary-value",children:oe.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"🎧"}),e.jsx("span",{className:"summary-label",children:"Service Topics"}),e.jsx("span",{className:"summary-value",children:le.length})]})]})]})]})]}),be=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"🧭 Navigation"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Navigation"}),e.jsx("div",{className:"navigation-items",children:(a.navigation?.main||[]).map((_,V)=>e.jsxs("div",{className:"navigation-item",children:[e.jsx("input",{type:"text",value:_.label,onChange:J=>{const ae=[...a.navigation?.main||[]];ae[V].label=J.target.value,P("navigation.main",ae)},placeholder:"Label"}),e.jsx("input",{type:"text",value:_.url,onChange:J=>{const ae=[...a.navigation?.main||[]];ae[V].url=J.target.value,P("navigation.main",ae)},placeholder:"URL"}),e.jsx("input",{type:"text",value:_.icon,onChange:J=>{const ae=[...a.navigation?.main||[]];ae[V].icon=J.target.value,P("navigation.main",ae)},placeholder:"Icon"})]},V))})]})]}),pe=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"🎨 Branding"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Color"}),e.jsx("input",{type:"color",value:a.branding?.primaryColor||"#3B82F6",onChange:_=>P("branding.primaryColor",_.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Secondary Color"}),e.jsx("input",{type:"color",value:a.branding?.secondaryColor||"#1E40AF",onChange:_=>P("branding.secondaryColor",_.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accent Color"}),e.jsx("input",{type:"color",value:a.branding?.accentColor||"#F59E0B",onChange:_=>P("branding.accentColor",_.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Font Family"}),e.jsxs("select",{value:a.branding?.fontFamily||"Inter",onChange:_=>P("branding.fontFamily",_.target.value),children:[e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"Open Sans",children:"Open Sans"}),e.jsx("option",{value:"Lato",children:"Lato"})]})]})]}),X=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"⚙️ Settings"}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.settings?.allowRegistration!==!1,onChange:_=>P("settings.allowRegistration",_.target.checked)}),"Allow Registration"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.settings?.requireEmailVerification||!1,onChange:_=>P("settings.requireEmailVerification",_.target.checked)}),"Require Email Verification"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.settings?.enableNotifications!==!1,onChange:_=>P("settings.enableNotifications",_.target.checked)}),"Enable Notifications"]})})]});return e.jsx("div",{className:"new-modal-overlay",children:e.jsxs("div",{className:"platform-builder-container",children:[e.jsxs("div",{className:"platform-builder-header",children:[e.jsxs("div",{className:"platform-builder-title",children:[e.jsx("span",{className:"platform-builder-icon",children:"🎯"}),e.jsxs("div",{className:"title-content",children:[e.jsx("h2",{children:"Platform Page Builder"}),e.jsxs("span",{className:"platform-builder-subtitle",children:["Edit ",a.name," - Visual Page Editor"]}),b&&e.jsxs("div",{className:"company-info-header",children:[e.jsxs("div",{className:"company-badge",children:[e.jsx("span",{className:"company-icon",children:"🏢"}),e.jsx("span",{className:"company-name",children:b.name}),e.jsx("span",{className:`company-status ${b.status}`,children:b.status})]}),e.jsxs("div",{className:"company-details-mini",children:[e.jsxs("span",{className:"company-email",children:["📧 ",b.email]}),e.jsxs("span",{className:"company-industry",children:["🏭 ",b.industry]}),e.jsxs("span",{className:"company-plan",children:["💎 ",b.plan]})]})]})]})]}),e.jsxs("div",{className:"platform-builder-actions",children:[A&&e.jsx("button",{className:"preview-btn",onClick:()=>j(!h),children:h?"📝 Edit Mode":"👁️ Live Preview"}),e.jsx("button",{className:"new-modal-close",onClick:D,children:"×"})]})]}),e.jsxs("div",{className:"platform-builder-body",children:[e.jsxs("div",{className:"platform-builder-sidebar",children:[e.jsxs("div",{className:"builder-tabs",children:[e.jsx("button",{className:`builder-tab ${l==="pages"?"active":""}`,onClick:()=>d("pages"),children:"📄 Pages"}),e.jsx("button",{className:`builder-tab ${l==="navigation"?"active":""}`,onClick:()=>d("navigation"),children:"🧭 Navigation"}),e.jsx("button",{className:`builder-tab ${l==="branding"?"active":""}`,onClick:()=>d("branding"),children:"🎨 Branding"}),e.jsx("button",{className:`builder-tab ${l==="settings"?"active":""}`,onClick:()=>d("settings"),children:"⚙️ Settings"})]}),l==="pages"&&ue(),l==="navigation"&&be(),l==="branding"&&pe(),l==="settings"&&X()]}),e.jsx("div",{className:"platform-builder-main",children:e.jsxs("div",{className:"wordpress-style-editor",children:[e.jsxs("div",{className:"wp-toolbar",children:[e.jsxs("div",{className:"toolbar-left",children:[e.jsxs("button",{className:`toolbar-btn ${h?"":"active"}`,onClick:()=>j(!1),children:[e.jsx("span",{className:"btn-icon",children:"✏️"}),e.jsx("span",{className:"btn-label",children:"Edit"})]}),e.jsxs("button",{className:`toolbar-btn ${h?"active":""}`,onClick:()=>j(!0),children:[e.jsx("span",{className:"btn-icon",children:"👁️"}),e.jsx("span",{className:"btn-label",children:"Preview"})]})]}),e.jsx("div",{className:"toolbar-center",children:e.jsx("div",{className:"page-selector",children:e.jsx("select",{value:u,onChange:_=>m(_.target.value),className:"page-select",children:Object.entries(a.pages||{}).map(([_,V])=>e.jsx("option",{value:_,children:V.title},_))})})}),e.jsxs("div",{className:"toolbar-right",children:[e.jsxs("button",{className:"toolbar-btn secondary",onClick:f,children:[e.jsx("span",{className:"btn-icon",children:"💾"}),e.jsx("span",{className:"btn-label",children:"Save Draft"})]}),e.jsxs("button",{className:"toolbar-btn primary",onClick:async()=>{await f(),w()},children:[e.jsx("span",{className:"btn-icon",children:"🚀"}),e.jsx("span",{className:"btn-label",children:"Publish"})]}),e.jsxs("button",{className:"toolbar-btn",onClick:()=>j(!h),children:[e.jsx("span",{className:"btn-icon",children:h?"📝":"👁️"}),e.jsx("span",{className:"btn-label",children:h?"Edit Mode":"Live Preview"})]})]})]}),e.jsx("div",{className:"wp-content-area",children:h?e.jsxs("div",{className:"real-site-preview",children:[e.jsxs("div",{className:"preview-header",children:[e.jsxs("div",{className:"preview-info",children:[e.jsx("span",{className:"preview-label",children:"🏠 Long Home Products Training Platform"}),e.jsx("span",{className:"preview-url-text",children:A})]}),e.jsxs("div",{className:"preview-controls",children:[e.jsx("button",{className:"preview-control-btn",onClick:()=>j(!1),children:"📝 Edit Mode"}),e.jsx("button",{className:"copy-url-btn",onClick:()=>navigator.clipboard.writeText(A),children:"📋 Copy URL"})]})]}),e.jsx("div",{className:"real-site-iframe-container",children:e.jsx("iframe",{src:A,className:"real-site-iframe",title:"Long Home Products Real Site",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})})]}):e.jsxs("div",{className:"wp-editor-container",children:[e.jsxs("div",{className:"wp-editor-sidebar",children:[e.jsxs("div",{className:"editor-panel",children:[e.jsx("h4",{children:"📄 Page Settings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Page Title"}),e.jsx("input",{type:"text",value:a.pages?.[u]?.title||"",onChange:_=>P(`pages.${u}.title`,_.target.value),className:"wp-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Page Slug"}),e.jsx("input",{type:"text",value:a.pages?.[u]?.slug||"",onChange:_=>P(`pages.${u}.slug`,_.target.value),className:"wp-input"})]})]}),e.jsxs("div",{className:"editor-panel",children:[e.jsx("h4",{children:"🎨 Hero Section"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Title"}),e.jsx("input",{type:"text",value:q.heroTitle||"",onChange:_=>R("heroTitle",_.target.value),className:"wp-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Subtitle"}),e.jsx("textarea",{value:q.heroSubtitle||"",onChange:_=>R("heroSubtitle",_.target.value),rows:"3",className:"wp-textarea"})]})]}),e.jsxs("div",{className:"editor-panel",children:[e.jsx("h4",{children:"📋 Content Sections"}),e.jsx("div",{className:"sections-list",children:a.pages?.[u]?.content?.sections?.map((_,V)=>e.jsxs("div",{className:"section-item",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("span",{className:"section-type",children:_.type}),e.jsx("span",{className:"section-title",children:_.title})]}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"section-btn edit",onClick:()=>v(V),children:"✏️"}),e.jsx("button",{className:"section-btn delete",onClick:()=>{const J=a.pages[u].content.sections.filter((ae,ge)=>ge!==V);P(`pages.${u}.content.sections`,J)},children:"🗑️"})]})]},V))}),e.jsx("button",{className:"add-section-btn",onClick:()=>{const _={type:"content",title:"New Section",content:"Section content",description:"Section description"},V=a.pages[u]?.content?.sections||[];P(`pages.${u}.content.sections`,[...V,_])},children:"➕ Add Section"})]})]}),e.jsx("div",{className:"wp-editor-main",children:e.jsx("div",{className:"wp-canvas",children:e.jsxs("div",{className:"page-preview",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"editable-title",contentEditable:"true",onBlur:_=>E("heroTitle",_.target.textContent),suppressContentEditableWarning:!0,children:q.heroTitle||"Long Home Products Training Platform"}),e.jsx("p",{className:"editable-subtitle",contentEditable:"true",onBlur:_=>E("heroSubtitle",_.target.textContent),suppressContentEditableWarning:!0,children:q.heroSubtitle||"Master your sales skills with our comprehensive training programs"})]}),e.jsx("div",{className:"page-content",children:a.pages?.[u]?.content?.sections?.map((_,V)=>e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{className:"editable-section-title",contentEditable:"true",children:_.title}),e.jsxs("div",{className:"section-controls",children:[e.jsx("button",{className:"section-control-btn",children:"⚙️"}),e.jsx("button",{className:"section-control-btn",children:"📋"}),e.jsx("button",{className:"section-control-btn",children:"🗑️"})]})]}),e.jsxs("div",{className:"section-content",children:[_.type==="sidebar"&&_.content&&e.jsx("div",{className:"sidebar-preview",children:e.jsx("div",{className:"sidebar-nav",children:_.content.map((J,ae)=>e.jsxs("div",{className:`sidebar-item ${J.active?"active":""}`,children:[e.jsx("span",{className:"sidebar-icon",children:J.icon}),e.jsx("span",{className:"sidebar-label",children:J.label})]},ae))})}),_.type==="stats"&&_.content&&e.jsx("div",{className:"stats-grid",children:_.content.map((J,ae)=>e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:J.icon}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:J.value}),e.jsx("div",{className:"stat-label",children:J.label})]})]},ae))}),_.type==="features"&&_.content&&e.jsx("div",{className:"features-grid",children:_.content.map((J,ae)=>e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:J.icon}),e.jsx("h4",{className:"feature-title",children:J.title}),e.jsx("p",{className:"feature-description",children:J.description})]},ae))}),_.type==="categories"&&e.jsx("div",{className:"categories-grid",children:(q.categories||[]).slice(0,6).map((J,ae)=>e.jsxs("div",{className:"category-card",children:[e.jsx("span",{className:"category-icon",children:J.icon||"📁"}),e.jsx("span",{className:"category-name",children:J.name})]},ae))}),_.type==="rebuttals"&&e.jsx("div",{className:"rebuttals-list",children:(q.rebuttals||[]).slice(0,4).map((J,ae)=>e.jsxs("div",{className:"rebuttal-card",children:[e.jsx("h4",{children:J.title}),e.jsx("p",{children:J.content})]},ae))}),_.type==="faqs"&&e.jsx("div",{className:"faqs-list",children:(q.faqs||[]).slice(0,3).map((J,ae)=>e.jsxs("div",{className:"faq-item",children:[e.jsx("h4",{children:J.question}),e.jsx("p",{children:J.answer})]},ae))}),_.type==="topics"&&e.jsx("div",{className:"topics-list",children:(q.topics||[]).slice(0,4).map((J,ae)=>e.jsxs("div",{className:"topic-card",children:[e.jsx("h4",{children:J.title}),e.jsx("p",{children:J.description})]},ae))})]})]},V))})]})})})]})})]})})]})]})})},OE=()=>{const{currentUser:t,authLoading:s,logout:a}=wn(),i=ms(),{loading:l,error:d,adminUser:u,companies:m,platforms:g,users:v,companyAdmins:h,deletedCompanies:j,createCompany:w,updateCompany:D,updatePlatform:S,deleteCompany:b,restoreCompany:C,loadData:A}=xE(),{activeTab:L,sidebarCollapsed:N,selectedCompany:I,expandedCompanies:W,showCreateCompany:B,showCreatePlatform:Q,showEditCompany:F,showEditPlatform:te,showDeleteConfirm:ce,showNewModal:z,editingCompany:ee,editingPlatform:oe,itemToDelete:re,modalType:le,activePageBuilderTab:O,selectedPage:q,selectedSection:Y,showLivePreview:T,formData:R,editCompanyForm:E,showPassword:f,impersonateMode:P,impersonateCompanyId:M,setActiveTab:K,setSidebarCollapsed:ue,setSelectedCompany:be,setShowCreateCompany:pe,setShowCreatePlatform:X,setActivePageBuilderTab:_,setSelectedPage:V,setSelectedSection:J,setShowLivePreview:ae,setFormData:ge,setEditCompanyForm:We,setShowPassword:ze,setImpersonateCompanyId:Ge,toggleCompanyExpansion:vt,openDeleteConfirm:Ve,closeDeleteConfirm:Ke,openCreateUser:et,openEditAdmin:rs,closeNewModal:He,openEditCompany:xt,closeEditCompany:Jt,openEditPlatform:Ps,closeEditPlatform:Us,toggleImpersonation:Dt}=yE(),[Lt,Vt]=y.useState(Hj()),xs=async()=>{if(re)try{const{item:Te,type:Ee}=re;Ee==="company"?await b(Te.id):Ee==="platform"?console.log("Delete platform:",Te.id):Ee==="user"&&await bn(Te),Ke()}catch(Te){console.error("Delete error:",Te)}},bn=async Te=>{try{console.log("🔍 SaasAdminDashboard: Attempting to delete user:",Te),await Or.deleteUser(Te.id),console.log("🔍 SaasAdminDashboard: User deleted successfully"),await A()}catch(Ee){console.error("🔍 SaasAdminDashboard: Error deleting user:",Ee),Ee.message.includes("must be logged in")?alert("You must be logged in to delete users"):Ee.message.includes("Firebase Auth session required")?alert("Your session has expired. Please log in again to continue."):Ee.message.includes("permission-denied")?alert("You do not have permission to delete users"):Ee.message.includes("not found")?alert("User not found. They may have already been deleted."):alert(`Failed to delete user: ${Ee.message}`)}},Ds=Te=>{window.confirm(`Are you sure you want to delete user "${Te.name||Te.email}"?`)&&Ve({item:Te,type:"user"})},Ks=async Te=>{Te.preventDefault();try{await w(E),pe(!1),We({name:"",email:"",industry:"",plan:"starter",status:"active",maintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."})}catch(Ee){console.error("Create company error:",Ee)}},me=async Te=>{Te.preventDefault();try{console.log("🔍 Editing company with form data:",E),console.log("🔍 Status in form:",E.status),await D(ee.id,E),Jt()}catch(Ee){console.error("Edit company error:",Ee)}},ve=async Te=>{Te.preventDefault();try{await S(oe.id,Lt),Us()}catch(Ee){console.error("Edit platform error:",Ee)}},Me=async Te=>{Te.preventDefault();try{console.log("Form submit:",R),He()}catch(Ee){console.error("Form submit error:",Ee)}},je=async Te=>{try{const Ee=Te.status==="active"?"inactive":"active";await D(Te.id,{status:Ee})}catch(Ee){console.error("Toggle status error:",Ee)}},Qe=()=>{localStorage.removeItem("impersonation"),a(),i("/admin/login")},it=()=>{if(console.log("🚀 Impersonation navigation:",{impersonateMode:P,impersonateCompanyId:M}),P&&M){const Te=m.find(Ee=>Ee.id===M);if(Te){const Ee=Te.slug||Te.id;let Xe;Ee==="long-home"?Xe=`/admin/dashboard?impersonate=${M}`:Xe=`/company/${Ee}`,console.log("🚀 Navigating to company dashboard:",Xe),localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:M})),i(Xe)}else console.warn("🚀 Company not found for impersonation:",M)}else console.warn("🚀 Impersonation navigation failed:",{impersonateMode:P,impersonateCompanyId:M})},Ie=()=>{switch(L){case"dashboard":return e.jsx(kE,{companies:m,platforms:g,users:v,adminUser:u});case"companies":return e.jsx(SE,{companies:m,companyAdmins:h,expandedCompanies:W,onToggleExpansion:vt,onViewPlatforms:Te=>{be(Te),K("platforms")},onEditCompany:xt,onToggleStatus:je,onDeleteCompany:Ve,onCreateCompany:()=>pe(!0)});case"platforms":return e.jsx(CE,{platforms:g,companies:m,selectedCompany:I,onCreatePlatform:()=>X(!0),onEditPlatform:Ps,onDeletePlatform:Ve});case"users":return e.jsx(EE,{users:v,companies:m,companyAdmins:h,onCreateUser:et,onEditAdmin:rs,onDeleteUser:Ds});case"deleted":return e.jsx(PE,{deletedCompanies:j,onRestoreCompany:C});default:return e.jsx("div",{children:"Unknown tab"})}};return s||l?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}):d?e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:d}),e.jsx("button",{onClick:()=>i("/admin/login"),children:"Go to Login"})]}):u?e.jsxs("div",{className:"saas-admin-dashboard dark-mode",children:[e.jsxs("header",{className:"saas-admin-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"🚀 SaaS Admin Dashboard"}),e.jsx("span",{className:"subtitle",children:"Multi-Tenant Training Platform Management"})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("span",{className:"welcome-user",children:["Welcome, ",u.email]}),u.role==="super-admin"&&e.jsxs("div",{className:"impersonate-controls",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{type:"checkbox",checked:P,onChange:Dt}),e.jsx("span",{children:"Impersonator Mode"})]}),e.jsxs("select",{value:M,onChange:Te=>{Ge(Te.target.value),P&&localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:Te.target.value}))},disabled:!P,style:{padding:"6px 10px",borderRadius:6},children:[e.jsx("option",{value:"",children:"Select company"}),m.map(Te=>e.jsx("option",{value:Te.id,children:Te.name||Te.id},Te.id))]}),e.jsx("button",{className:"header-button",onClick:it,disabled:!P||!M,children:M&&m.find(Te=>Te.id===M)?.slug==="long-home"?"Visit Admin Dashboard":"Visit Training"})]}),e.jsx("button",{className:"header-button",onClick:()=>i("/"),children:"SaaS Landing"}),e.jsx("button",{className:"header-button",onClick:Qe,children:"Logout"})]})]}),e.jsxs("div",{className:"saas-admin-layout",children:[e.jsxs("aside",{className:`saas-sidebar ${N?"collapsed":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[!N&&e.jsx("h3",{children:"🚀 SaaS Admin"}),e.jsx("button",{className:"sidebar-toggle",onClick:()=>ue(!N),children:N?"→":"←"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("button",{className:`sidebar-item ${L==="dashboard"?"active":""}`,onClick:()=>K("dashboard"),children:[e.jsx("span",{className:"sidebar-icon",children:"🏠"}),!N&&e.jsx("span",{children:"Dashboard"})]}),e.jsxs("button",{className:`sidebar-item ${L==="companies"?"active":""}`,onClick:()=>K("companies"),children:[e.jsx("span",{className:"sidebar-icon",children:"🏢"}),!N&&e.jsx("span",{children:"Companies"})]}),e.jsxs("button",{className:`sidebar-item ${L==="platforms"?"active":""}`,onClick:()=>K("platforms"),children:[e.jsx("span",{className:"sidebar-icon",children:"🎯"}),!N&&e.jsx("span",{children:"Platforms"})]}),e.jsxs("button",{className:`sidebar-item ${L==="users"?"active":""}`,onClick:()=>K("users"),children:[e.jsx("span",{className:"sidebar-icon",children:"👥"}),!N&&e.jsx("span",{children:"Users"})]}),e.jsxs("button",{className:`sidebar-item ${L==="deleted"?"active":""}`,onClick:()=>K("deleted"),children:[e.jsx("span",{className:"sidebar-icon",children:"🗑️"}),!N&&e.jsx("span",{children:"Deleted"})]})]})]}),e.jsx("main",{className:"saas-main",children:Ie()})]}),e.jsx(LE,{isOpen:ce,itemToDelete:re,onConfirm:xs,onCancel:Ke}),e.jsx(mx,{isOpen:B,isEdit:!1,formData:E,onFormChange:We,onSubmit:Ks,onCancel:()=>pe(!1)}),e.jsx(mx,{isOpen:F,isEdit:!0,company:ee,formData:E,onFormChange:We,onSubmit:me,onCancel:Jt}),e.jsx(RE,{isOpen:Q,companies:m,onClose:()=>X(!1),onSuccess:Te=>{console.log("Platform created successfully:",Te),X(!1),A()}}),e.jsx(ME,{isOpen:z,isEdit:le==="edit-admin",companies:m,formData:R,showPassword:f,onFormChange:ge,onTogglePassword:()=>ze(!f),onSubmit:Me,onCancel:He}),te&&e.jsx(IE,{isOpen:te,platform:oe,platformForm:Lt,setPlatformForm:Vt,activePageBuilderTab:O,setActivePageBuilderTab:_,selectedPage:q,setSelectedPage:V,selectedSection:Y,setSelectedSection:J,showLivePreview:T,setShowLivePreview:ae,onSave:ve,onCancel:Us,companies:m})]}):e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access the SaaS admin dashboard."}),e.jsx("button",{onClick:()=>i("/admin/login"),children:"Go to Login"})]})},FE=()=>{const t=ms(),[s,a]=y.useState({email:"",password:""}),[i,l]=y.useState(!1),[d,u]=y.useState(""),m=v=>{const{name:h,value:j}=v.target;a(w=>({...w,[h]:j}))},g=async v=>{v.preventDefault(),l(!0),u("");try{const j=(await bl(rt,s.email,s.password)).user,w=fe(),D=await pt(Ae(w,"super-admins",j.uid));if(D.exists()){const b=D.data(),C={uid:j.uid,email:j.email,role:"super-admin",...b};localStorage.setItem("adminUser",JSON.stringify(C)),t("/admin/saas");return}const S=await pt(Ae(w,"company-admins",j.uid));if(S.exists()){const b=S.data(),C={uid:j.uid,email:j.email,role:"company-admin",companyId:b.companyId,...b};localStorage.setItem("adminUser",JSON.stringify(C)),t("/admin/dashboard");return}u("Access denied. Super admin or company admin privileges required."),await rt.signOut()}catch(h){switch(console.error("Login error:",h),h.code){case"auth/user-not-found":u("No account found with this email address.");break;case"auth/wrong-password":u("Incorrect password.");break;case"auth/invalid-email":u("Invalid email address.");break;case"auth/too-many-requests":u("Too many failed attempts. Please try again later.");break;default:u("Login failed. Please check your credentials.")}}finally{l(!1)}};return e.jsx("div",{className:"saas-admin-login",children:e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{children:"🚀 Admin Login"}),e.jsx("p",{children:"Super Admin & Company Admin Access"})]}),e.jsxs("form",{onSubmit:g,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:m,required:!0,placeholder:"Enter your admin email",disabled:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:m,required:!0,placeholder:"Enter your password",disabled:i})]}),d&&e.jsx("div",{className:"error-message",children:d}),e.jsx("button",{type:"submit",className:"login-button",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Signing In..."]}):"Sign In to Admin Panel"})]}),e.jsxs("div",{className:"login-footer",children:[e.jsx("p",{children:"Need access? Contact the system administrator."}),e.jsx("button",{className:"back-button",onClick:()=>t("/admin/login"),children:"← Back to Regular Admin"})]})]})})},UE=()=>{const[t,s]=y.useState([]),[a,i]=y.useState(null),[l,d]=y.useState(!1),[u,m]=y.useState(!1),[g,v]=y.useState({title:"",description:"",icon:"",keySteps:[""],quickTips:[""],tags:[""]});y.useEffect(()=>{h()},[]);const h=async()=>{try{const N=Ce(fe(),"customerServiceCategories"),W=(await De(N)).docs.map(B=>({id:B.id,...B.data()}));s(W)}catch(N){console.error("Error loading categories:",N)}},j=async()=>{try{const N=Ce(fe(),"customerServiceCategories");await Yt(N,{...g,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),d(!1),S(),h()}catch(N){console.error("Error adding category:",N)}},w=async()=>{try{if(!a)return;const N=Ae(fe(),"customerServiceCategories",a.id);await Wt(N,{...g,updatedAt:new Date().toISOString()}),m(!1),S(),h()}catch(N){console.error("Error updating category:",N)}},D=async N=>{if(window.confirm("Are you sure you want to delete this category?"))try{const I=Ae(fe(),"customerServiceCategories",N);await us(I),h()}catch(I){console.error("Error deleting category:",I)}},S=()=>{v({title:"",description:"",icon:"",keySteps:[""],quickTips:[""],tags:[""]}),i(null)},b=(N,I)=>{v(W=>({...W,[I]:N.target.value}))},C=(N,I,W)=>{v(B=>({...B,[W]:B[W].map((Q,F)=>F===N?I:Q)}))},A=N=>{v(I=>({...I,[N]:[...I[N],""]}))},L=(N,I)=>{v(W=>({...W,[I]:W[I].filter((B,Q)=>Q!==N)}))};return e.jsxs("div",{className:"customer-service-manager",children:[e.jsxs("div",{className:"manager-header",children:[e.jsx("h1",{children:"Customer Service Content Manager"}),e.jsx("button",{className:"add-button",onClick:()=>{S(),d(!0)},children:"Add New Category"})]}),e.jsx("div",{className:"categories-grid",children:t.map(N=>e.jsxs("div",{className:"category-card",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:"category-icon",children:N.icon}),e.jsx("h3",{children:N.title})]}),e.jsx("p",{className:"category-description",children:N.description}),e.jsxs("div",{className:"category-actions",children:[e.jsx("button",{onClick:()=>{i(N),v(N),m(!0)},className:"edit-button",children:"Edit"}),e.jsx("button",{onClick:()=>D(N.id),className:"delete-button",children:"Delete"})]})]},N.id))}),l&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Add New Category"}),e.jsxs("form",{onSubmit:N=>{N.preventDefault(),j()},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",value:g.title,onChange:N=>b(N,"title"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:g.description,onChange:N=>b(N,"description"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:g.icon,onChange:N=>b(N,"icon"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Key Steps"}),g.keySteps.map((N,I)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:N,onChange:W=>C(I,W.target.value,"keySteps"),required:!0}),e.jsx("button",{type:"button",onClick:()=>L(I,"keySteps"),className:"remove-button",children:"Remove"})]},I)),e.jsx("button",{type:"button",onClick:()=>A("keySteps"),className:"add-item-button",children:"Add Step"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Tips"}),g.quickTips.map((N,I)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:N,onChange:W=>C(I,W.target.value,"quickTips"),required:!0}),e.jsx("button",{type:"button",onClick:()=>L(I,"quickTips"),className:"remove-button",children:"Remove"})]},I)),e.jsx("button",{type:"button",onClick:()=>A("quickTips"),className:"add-item-button",children:"Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags"}),g.tags.map((N,I)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:N,onChange:W=>C(I,W.target.value,"tags"),required:!0}),e.jsx("button",{type:"button",onClick:()=>L(I,"tags"),className:"remove-button",children:"Remove"})]},I)),e.jsx("button",{type:"button",onClick:()=>A("tags"),className:"add-item-button",children:"Add Tag"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"save-button",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{d(!1),S()},className:"cancel-button",children:"Cancel"})]})]})]})}),u&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Edit Category"}),e.jsxs("form",{onSubmit:N=>{N.preventDefault(),w()},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",value:g.title,onChange:N=>b(N,"title"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:g.description,onChange:N=>b(N,"description"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:g.icon,onChange:N=>b(N,"icon"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Key Steps"}),g.keySteps.map((N,I)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:N,onChange:W=>C(I,W.target.value,"keySteps"),required:!0}),e.jsx("button",{type:"button",onClick:()=>L(I,"keySteps"),className:"remove-button",children:"Remove"})]},I)),e.jsx("button",{type:"button",onClick:()=>A("keySteps"),className:"add-item-button",children:"Add Step"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Tips"}),g.quickTips.map((N,I)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:N,onChange:W=>C(I,W.target.value,"quickTips"),required:!0}),e.jsx("button",{type:"button",onClick:()=>L(I,"quickTips"),className:"remove-button",children:"Remove"})]},I)),e.jsx("button",{type:"button",onClick:()=>A("quickTips"),className:"add-item-button",children:"Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags"}),g.tags.map((N,I)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:N,onChange:W=>C(I,W.target.value,"tags"),required:!0}),e.jsx("button",{type:"button",onClick:()=>L(I,"tags"),className:"remove-button",children:"Remove"})]},I)),e.jsx("button",{type:"button",onClick:()=>A("tags"),className:"add-item-button",children:"Add Tag"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>{m(!1),S()},className:"cancel-button",children:"Cancel"})]})]})]})})]})},BE=()=>{const[t,s]=y.useState({firebaseInit:"pending",auth:"pending",firestore:"pending",collections:"pending"}),[a,i]=y.useState(null);y.useEffect(()=>{(async()=>{try{console.log("🔍 FirebaseTest: Starting Firebase tests...");try{console.log("🔍 FirebaseTest: Testing Firebase initialization..."),await mh(),s(m=>({...m,firebaseInit:"success"})),console.log("✅ FirebaseTest: Firebase initialized successfully")}catch(m){console.error("❌ FirebaseTest: Firebase initialization failed:",m),s(g=>({...g,firebaseInit:"error"})),i(`Firebase initialization failed: ${m.message}`);return}try{if(console.log("🔍 FirebaseTest: Testing Auth..."),rt)console.log("✅ FirebaseTest: Auth is available"),s(m=>({...m,auth:"success"}));else throw new Error("Auth is not available")}catch(m){console.error("❌ FirebaseTest: Auth test failed:",m),s(g=>({...g,auth:"error"}))}try{if(console.log("🔍 FirebaseTest: Testing Firestore..."),fe())console.log("✅ FirebaseTest: Firestore is available"),s(m=>({...m,firestore:"success"}));else throw new Error("Firestore is not available")}catch(m){console.error("❌ FirebaseTest: Firestore test failed:",m),s(g=>({...g,firestore:"error"}))}try{console.log("🔍 FirebaseTest: Testing Firestore collections...");const m=["rebuttals","categories","admins","users"];let g=[];for(const v of m)try{const h=await De(Ce(fe(),v));console.log(`✅ FirebaseTest: Collection '${v}' is accessible (${h.size} documents)`),g.push(v)}catch(h){console.log(`⚠️ FirebaseTest: Collection '${v}' is not accessible:`,h.message)}g.length>0?s(v=>({...v,collections:"success",accessibleCollections:g})):s(v=>({...v,collections:"error"}))}catch(m){console.error("❌ FirebaseTest: Collections test failed:",m),s(g=>({...g,collections:"error"}))}console.log("🔍 FirebaseTest: All tests completed")}catch(m){console.error("❌ FirebaseTest: Test suite failed:",m),i(`Test suite failed: ${m.message}`)}})()},[]);const l=u=>{switch(u){case"success":return"#28a745";case"error":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}},d=u=>{switch(u){case"success":return"✅ Success";case"error":return"❌ Error";case"pending":return"⏳ Pending";default:return"❓ Unknown"}};return e.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Arial, sans-serif",padding:"20px"},children:e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#007bff",color:"white",padding:"20px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Firebase Connection Test"}),e.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Testing Firebase configuration and connectivity"})]}),e.jsxs("div",{style:{padding:"20px"},children:[a&&e.jsxs("div",{style:{backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",padding:"15px",marginBottom:"20px",color:"#721c24"},children:[e.jsx("strong",{children:"Error:"})," ",a]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{children:"Test Results"}),Object.entries(t).map(([u,m])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",borderBottom:"1px solid #e9ecef",backgroundColor:m==="pending"?"#f8f9fa":"white"},children:[e.jsx("span",{style:{fontWeight:"bold",textTransform:"capitalize"},children:u.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{style:{color:l(m),fontWeight:"bold"},children:d(m)})]},u))]}),t.collections==="success"&&t.accessibleCollections&&e.jsxs("div",{style:{backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",padding:"15px",marginBottom:"20px"},children:[e.jsx("strong",{children:"Accessible Collections:"}),e.jsx("ul",{style:{margin:"10px 0 0 0"},children:t.accessibleCollections.map(u=>e.jsx("li",{children:u},u))})]}),e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"15px",borderRadius:"4px",fontSize:"14px"},children:[e.jsx("strong",{children:"Environment Info:"}),e.jsx("br",{}),"Environment: ","production",e.jsx("br",{}),"Firebase API Key: ","Set",e.jsx("br",{}),"Firebase Project ID: ","Set",e.jsx("br",{}),"Timestamp: ",new Date().toLocaleString()]}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"Run Tests Again"}),e.jsx("button",{onClick:()=>window.history.back(),style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go Back"})]})]})]})})})},WE=()=>{throw new Error("This is a test error")};class VE extends Ll.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("Test ErrorBoundary caught error:",s,a)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"red",textAlign:"center",maxWidth:"600px",margin:"40px auto",border:"1px solid red",borderRadius:"4px"},children:[e.jsx("h2",{children:"Error Boundary Test - Working!"}),e.jsxs("p",{children:["Error: ",this.state.error?.message]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}const _E=()=>e.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Arial, sans-serif",padding:"20px"},children:e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#007bff",color:"white",padding:"20px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Error Boundary Test"}),e.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Testing if error boundaries work correctly"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"15px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:[e.jsx("strong",{children:"Test Info:"}),e.jsx("br",{}),"This page tests if the ErrorBoundary component is working correctly.",e.jsx("br",{}),"If you see an error message below, the ErrorBoundary is working.",e.jsx("br",{}),"If you see a white screen or the app crashes, there's an issue."]}),e.jsx(VE,{children:e.jsx(WE,{})})]})]})})}),$E=()=>{const t=ms(),[s,a]=y.useState(""),[i,l]=y.useState([]),[d,u]=y.useState(!1),[m,g]=y.useState(null),[v,h]=y.useState(!1),[j,w]=y.useState(!1),[D,S]=y.useState(!1),[b,C]=y.useState(null),[A,L]=y.useState(null),[N,I]=y.useState(!1),[W,B]=y.useState(!1),[Q,F]=y.useState(!1),[te,ce]=y.useState([]),[z,ee]=y.useState(0),[oe,re]=y.useState([]),[le,O]=y.useState(!0),[q,Y]=y.useState([]),[T,R]=y.useState(null),[E,f]=y.useState([]),[P,M]=y.useState(null),[K,ue]=y.useState(null),[be,pe]=y.useState(!1),[X,_]=y.useState(!0),[V,J]=y.useState(0);y.useEffect(()=>{if(N||v||j)return document.body.style.overflow="hidden",setTimeout(()=>{const me=document.querySelector(".modal-content");me&&(me.scrollTop=0)},50),()=>{document.body.style.overflow=""}},[N,v,j,A]),y.useEffect(()=>{N&&A&&setTimeout(()=>{const me=document.querySelector(".modal-content");me&&(me.scrollTop=0)},100)},[A,N]);const ae=[{name:"Busy",keywords:["busy","time","rushed","quick"],category:"time-concern"},{name:"Call Back",keywords:["call back","callback","later","another time"],category:"callback"},{name:"No Interest",keywords:["not interested","no interest","dont want","not buying"],category:"not-interested"},{name:"Speak to Spouse",keywords:["spouse","husband","wife","talk to","discuss"],category:"spouse-consultation"},{name:"Price Over Phone",keywords:["price","cost","how much","ballpark","estimate"],category:"price-phone"},{name:"One Leg",keywords:["one leg","decision maker","alone","by myself"],category:"one-legger"},{name:"Repair Only",keywords:["repair","fix","liner","just repair"],category:"repair"},{name:"Gov/Free",keywords:["government","free","grant","assistance"],category:"government-grants"}],ge={"how to":["how do i","how can i","how do you","how to","how can","how should","how would"],"when can":["when can i","when is","when will","when should","when do","when to","when are"],"where to":["where can i","where do i","where is","where to","where are","where should"],"what is":["whats","what is","what are","what do","what will","what should","what can"],"why do":["why does","why is","why are","why do","why should","why would","why can"],"can i":["can you","is it possible","is there a way","can i","could i","would you","may i"],"need to":["want to","have to","should i","need to","looking to","trying to","planning to"],"looking for":["searching for","trying to find","want to find","looking for","need to find","seeking"]},We={hoem:"home",paeg:"page",serach:"search",ebveythgin:"everything",arch:"search",shoudl:"should",eveythung:"everything",rebuttals:"rebuttals",disposition:"disposition",customer:"customer",service:"service",price:"price",cost:"cost",schedule:"schedule",appointment:"appointment",cancel:"cancel",reschedule:"reschedule",urgent:"urgent",help:"help",support:"support",question:"question",answer:"answer",problem:"problem",issue:"issue",concern:"concern",complaint:"complaint",feedback:"feedback",review:"review",rating:"rating",quality:"quality",product:"product",installation:"installation",warranty:"warranty",guarantee:"guarantee",payment:"payment",financing:"financing",discount:"discount",offer:"offer",deal:"deal",promotion:"promotion",special:"special",limited:"limited",time:"time",date:"date",availability:"availability",location:"location",address:"address",contact:"contact",phone:"phone",email:"email",message:"message",chat:"chat",call:"call",text:"text",sms:"sms",voicemail:"voicemail",callback:"callback",followup:"follow up","follow-up":"follow up",reminder:"reminder",notification:"notification",alert:"alert",warning:"warning",error:"error",fix:"fix",repair:"repair",maintenance:"maintenance",upgrade:"upgrade",update:"update",change:"change",modify:"modify",postpone:"postpone",delay:"delay",late:"late",early:"early","on-time":"on time",ontime:"on time"},ze=me=>me.toLowerCase().split(" ").map(Me=>We[Me]||Me).join(" "),Ge=me=>{let ve=me.toLowerCase();return Object.entries(ge).forEach(([Me,je])=>{je.forEach(Qe=>{ve.includes(Qe)&&(ve=ve.replace(Qe,Me))})}),ve=ze(ve),ve},vt=(me,ve)=>{const Me=Array(ve.length+1).fill(null).map(()=>Array(me.length+1).fill(null));for(let je=0;je<=me.length;je+=1)Me[0][je]=je;for(let je=0;je<=ve.length;je+=1)Me[je][0]=je;for(let je=1;je<=ve.length;je+=1)for(let Qe=1;Qe<=me.length;Qe+=1){const it=me[Qe-1]===ve[je-1]?0:1;Me[je][Qe]=Math.min(Me[je][Qe-1]+1,Me[je-1][Qe]+1,Me[je-1][Qe-1]+it)}return Me[ve.length][me.length]},Ve=(me,ve)=>{const Me=Math.max(me.length,ve.length);return Me===0?1:1-vt(me,ve)/Me},Ke=me=>{if(!me)return[];const ve=me.toLowerCase().split(/\s+/),Me=new Set(["the","a","an","and","or","but","in","on","at","to","for","with","by","about","as","of","from","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","shall","should","may","might","must","can","could","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","mine","yours","hers","ours","theirs"]);return ve.filter(je=>!Me.has(je)&&je.length>2)},et=(me,ve)=>{if(!me||!ve)return 0;const Me=Ke(me),je=Ke(ve);let Qe=0;return Me.forEach(it=>{je.forEach(Ie=>{const Te=Ve(it,Ie);Te>.8&&(Qe+=Te)})}),Qe/Math.max(Me.length,1)},rs=me=>{if(!me.trim()){l([]);return}const ve=Ge(me),Me=[],je=new Set,Qe=/^(what|how|why|when|where|can|could|would|should|may|do|does|is|are|will)/i.test(ve),it=/(call\s*back|callback|call\s*later|call\s*me\s*back|call\s*you\s*back)/i.test(ve);E.forEach(Ie=>{if(je.has(Ie.title))return;const Te=Ie.title.toLowerCase().includes(ve),Ee=Ie.category.toLowerCase().includes(ve);let Xe=!1,nt=0;typeof Ie.content=="string"?(Xe=Ie.content.toLowerCase().includes(ve),nt=et(ve,Ie.content)):Ie.content&&typeof Ie.content=="object"&&(Xe=Ie.content.pt1&&Ie.content.pt1.toLowerCase().includes(ve)||Ie.content.pt2&&Ie.content.pt2.toLowerCase().includes(ve),nt=Math.max(et(ve,Ie.content.pt1||""),et(ve,Ie.content.pt2||"")));const Re=Ie.tags?.some(ys=>ys.toLowerCase().includes(ve)),ct=Ie.tags?.reduce((ys,Nt)=>Math.max(ys,et(ve,Nt)),0)||0,Zt=(Te?1:0)*.4+(Ee?1:0)*.2+(Xe?1:0)*.2+(Re?1:0)*.1+nt*.1+ct*.1;it&&(Ie.category==="callback"||Ie.title.toLowerCase().includes("callback"))?(Me.push({type:"rebuttal",title:Ie.title,category:Ie.category,icon:"📞",relevance:"high",score:Zt+.5,data:Ie}),je.add(Ie.title)):Qe&&(Xe||nt>.3)?(Me.push({type:"modal",title:Ie.title,category:Ie.category,icon:He(Ie.category),relevance:"high",score:Zt+.3,data:Ie}),je.add(Ie.title)):Zt>.2&&(Me.push({type:"rebuttal",title:Ie.title,category:Ie.category,icon:He(Ie.category),relevance:Zt>.6?"high":Zt>.4?"medium":"low",score:Zt,data:Ie}),je.add(Ie.title))}),ae.forEach(Ie=>{const Te=Ie.name.toLowerCase().includes(ve),Ee=Ie.keywords.some(Re=>Re.toLowerCase().includes(ve)),Xe=Math.max(et(ve,Ie.name),...Ie.keywords.map(Re=>et(ve,Re))),nt=(Te?1:0)*.6+(Ee?1:0)*.3+Xe*.1;nt>.2&&Me.push({type:"disposition",title:Ie.name,category:Ie.category,icon:"📋",relevance:nt>.6?"high":nt>.4?"medium":"low",score:nt,data:Ie})}),Me.sort((Ie,Te)=>Te.score-Ie.score),l(Me.slice(0,10))},He=me=>({"not-interested":"❌","spouse-consultation":"💑","one-legger":"👤","not-ready":"⏳",curious:"🤔","time-concern":"⏰","cant-afford":"💰",spouse:"👫","price-phone":"📞",repair:"🔧","government-grants":"🏛️","reset-appt":"🔄","no-request":"🚫","bad-reviews":"⭐"})[me]||"📞";y.useCallback(xt(me=>{rs(me)},300),[]);function xt(me,ve){let Me;return function(...Qe){const it=()=>{clearTimeout(Me),me(...Qe)};clearTimeout(Me),Me=setTimeout(it,ve)}}y.useEffect(()=>{rs(s),u(s.length>0)},[s]);const Jt=()=>{h(!1),w(!1),I(!1),L(null),B(!1),ce([])},Ps=()=>{if(P&&P.items){const me=(V+1)%P.items.length;J(me);const ve=P.items[me];Lt(ve);const Me=()=>{const je=document.querySelector(".modal-body"),Qe=document.querySelector(".modal-content"),it=document.querySelector(".modal-overlay"),Ie=document.querySelectorAll('.modal-body, .modal-content, .modal-overlay, [class*="modal"]');je&&(je.scrollTop=0,je.scrollLeft=0),Qe&&(Qe.scrollTop=0,Qe.scrollLeft=0),it&&(it.scrollTop=0,it.scrollLeft=0),Ie.forEach(Ee=>{Ee.scrollTop=0,Ee.scrollLeft=0});const Te=je?.querySelector("*");Te&&Te.scrollIntoView({behavior:"instant",block:"start"}),window.scrollTo(0,0)};Me(),setTimeout(Me,50),setTimeout(Me,200),setTimeout(Me,500)}},Us=()=>v?e.jsx("div",{className:"modal-overlay",onClick:Jt,children:e.jsxs("div",{className:"modal-content",onClick:me=>me.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{children:"Common Objections & Responses"})}),e.jsxs("div",{className:"modal-header-buttons",children:[e.jsx("button",{className:"modal-expand",onClick:me=>{me.stopPropagation(),F(!Q)},title:Q?"Collapse":"Expand",children:Q?e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 3V5C8 5.53043 7.78929 6.03914 7.41421 6.41421C7.03914 6.78929 6.53043 7 6 7H4M4 7H8M4 7V3M16 3V5C16 5.53043 16.2107 6.03914 16.5858 6.41421C16.9609 6.78929 17.4696 7 18 7H20M20 7H16M20 7V3M8 21V19C8 18.4696 7.78929 17.9609 7.41421 17.5858C7.03914 17.2107 6.53043 17 6 17H4M4 17H8M4 17V21M16 21V19C16 18.4696 16.2107 17.9609 16.5858 17.5858C16.9609 17.2107 17.4696 17 18 17H20M20 17H16M20 17V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 8V4M4 4H8M4 4L9 9M20 8V4M20 4H16M20 4L15 9M4 16V20M4 20H8M4 20L9 15M20 16V20M20 20H16M20 20L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("button",{className:"modal-close",onClick:Jt,children:"×"})]})]}),e.jsx("div",{className:`modal-body ${Q?"expanded":""}`,children:e.jsxs("div",{className:"objection-list",children:[e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Need to Think About It"}),e.jsx("p",{children:'"I need to think about it"'}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"That's completely understandable. Making home improvement decisions requires careful consideration. What specific aspects would you like to think about? I'd be happy to provide more information to help with your decision."`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:`"We're currently offering a special discount for customers who make a decision this week. Would you like to hear more about this limited-time offer?"`})]})]}),e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Need to Consult Spouse"}),e.jsx("p",{children:'"I need to talk to my spouse"'}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"That's a great point. It's important to make this decision together. Would it be helpful if I scheduled a time when both of you can be present to discuss the options?"`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:'"I can prepare a detailed proposal that you can review together. This will include all the information your spouse might need to make an informed decision."'})]})]}),e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Not Ready to Buy"}),e.jsx("p",{children:`"I'm not ready to buy right now"`}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"I understand. When are you planning to make this improvement? We can schedule a consultation for when you're ready to move forward."`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:`"We offer free consultations and estimates with no obligation. This can help you plan for when you're ready to proceed. Would you like to schedule one?"`})]})]}),e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Looking for Cheaper Option"}),e.jsx("p",{children:'"I can get it cheaper elsewhere"'}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"I appreciate you sharing that. While price is important, it's also crucial to consider the quality, warranty, and service that comes with your purchase. Our products come with a lifetime warranty and professional installation."`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:`"Let me show you a comparison of what's included in our price versus what you might be getting elsewhere. This will help you make a more informed decision."`})]})]})]})})]})}):j?e.jsx("div",{className:"modal-overlay",onClick:Jt,children:e.jsxs("div",{className:"modal-content",onClick:me=>me.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{children:"Smart Tips for Success"})}),e.jsx("button",{className:"modal-close",onClick:Jt,children:"×"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"tips-list",children:[e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"🎯 Active Listening"}),e.jsx("p",{children:"Always acknowledge the customer's concerns before presenting your rebuttal"})]}),e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"💡 Question-Based Approach"}),e.jsx("p",{children:"Use open-ended questions to understand the customer's needs better"})]}),e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"⚡ Quick Response Strategy"}),e.jsx("p",{children:"Start with Part 1 of the rebuttal, then escalate to Part 2 if needed"})]}),e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"🤝 Building Rapport"}),e.jsx("p",{children:"Establish trust by showing empathy and understanding"})]})]})})]})}):N&&A?e.jsx("div",{className:"modal-overlay",onClick:Jt,children:e.jsxs("div",{className:`modal-content ${Q?"expanded":""}`,onClick:me=>me.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{children:A.title})}),e.jsx("div",{className:"modal-header-buttons",children:e.jsx("button",{className:"modal-close",onClick:Jt,children:"×"})})]}),e.jsx("div",{className:`modal-body ${Q?"expanded":""}`,children:W?e.jsxs("div",{className:"more-options-view",children:[e.jsxs("div",{className:"more-options-header",children:[e.jsx("h3",{children:"More Options"}),e.jsxs("p",{children:["Related rebuttals and options for ",A.category]})]}),e.jsx("div",{className:"category-navigation",children:e.jsxs("button",{className:"view-all-category-button",onClick:()=>{const me=q.find(ve=>ve.items.some(Me=>Me.category===A.category));if(me){L(me.items.find(Me=>Me.category===A.category)),I(!1);const ve=document.querySelector(`[data-category="${me.id}"]`);ve&&ve.scrollIntoView({behavior:"smooth"})}},children:["View All ",A.category," Options"]})}),e.jsxs("div",{className:"related-rebuttals",children:[e.jsx("h4",{children:"Related Rebuttals:"}),e.jsx("div",{className:"related-rebuttals-list",children:te.map((me,ve)=>e.jsxs("div",{className:"related-rebuttal-item",onClick:()=>{L({...me,content:{pt1:typeof me.content=="string"?me.content:me.content?.pt1||me.response?.pt1||me.objection||"",pt2:typeof me.content=="string"?"":me.content?.pt2||me.response?.pt2||me.followUpResponse||""}}),B(!1)},children:[e.jsx("h5",{children:me.title}),e.jsx("p",{children:typeof me.content=="string"?me.content:me.content?.pt1||me.response?.pt1||me.objection||""})]},ve))})]})]}):e.jsxs("div",{className:"objection-item",children:[e.jsx("div",{className:"objection-header"}),e.jsxs("div",{className:"rebuttal-content",children:[e.jsx("div",{className:"modal-tags",children:A.tags?.map(me=>e.jsxs("span",{className:"modal-tag",children:["#",me]},me))}),e.jsx("div",{className:"modal-summary",children:e.jsx("p",{className:"modal-summary-text",children:A.situationOverview||A.summary||A.objection||A.description||"No situation overview available."})})]}),e.jsxs("div",{className:"modal-rebuttal-content",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("h3",{children:"Rebuttal Responses"})]}),A.content&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:"Initial Response"}),e.jsx("p",{className:"modal-content-text",children:(console.log("Rendering content:",A.content),typeof A.content=="string"?A.content:A.content.pt1||"")})]}),e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:"Follow-up Response"}),e.jsx("p",{className:"modal-content-text",children:(console.log("Rendering pt2:",A.content?.pt2),typeof A.content=="string"?"":A.content.pt2||"")})]}),e.jsx("div",{className:"rebuttal-actions",children:e.jsxs("button",{className:"next-button",onClick:()=>Ps(),disabled:!P||!P.items||P.items.length<=1,children:["Next Response",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]}),A.tips&&A.tips.length>0&&e.jsxs("div",{className:"modal-tips",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 16v.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M12 8v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("h3",{children:"Tips"})]}),e.jsx("div",{className:"tips-list",children:A.tips.map((me,ve)=>e.jsxs("div",{className:"tip-item",children:[e.jsx("div",{className:"tip-icon",children:"💡"}),e.jsx("p",{className:"tip-text",children:me})]},ve))})]}),e.jsxs("div",{className:"modal-situations",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 8v4l3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("h3",{children:"Situations Used"})]}),e.jsxs("div",{className:"situations-list",children:[e.jsxs("div",{className:"situation-item",children:[e.jsx("div",{className:"situation-icon",children:"🎯"}),e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:"Initial Contact"}),e.jsx("p",{className:"situation-description",children:"When first addressing the customer's concern about pricing or budget constraints"})]})]}),e.jsxs("div",{className:"situation-item",children:[e.jsx("div",{className:"situation-icon",children:"💬"}),e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:"Follow-up Discussion"}),e.jsx("p",{className:"situation-description",children:"When customer needs more information about payment options or financing"})]})]}),e.jsxs("div",{className:"situation-item",children:[e.jsx("div",{className:"situation-icon",children:"🤝"}),e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:"Negotiation Phase"}),e.jsx("p",{className:"situation-description",children:"During price discussions or when presenting alternative solutions"})]})]})]})]})]})})]})}):null;y.useEffect(()=>{N&&(setTimeout(()=>{const me=document.querySelector(".modal-content");me&&(me.scrollTop=0)},0),setTimeout(()=>{const me=document.querySelector(".modal-content");me&&(me.scrollTop=0)},200))},[N,A]),y.useEffect(()=>{(async()=>{try{O(!0),console.log("Starting to load data...");const ve=await lr.getAllCategories();console.log("Fetched categories:",ve);const Me=Ze(Ce(fe(),"rebuttals"),It("createdAt","desc")),je=Yi(Me,Qe=>{const it=Qe.docs.map(Ee=>({id:Ee.id,...Ee.data()})),Ie=ve.reduce((Ee,Xe)=>(Ee[Xe.id]=Xe.name,Ee),{}),Te=ve.map(Ee=>{const Xe=it.filter(Re=>{const ct=Re.category||"",Zt=Ee.name||"",ys=Ee.id||"";return ct===Zt||ct===ys||ct.toLowerCase()===Zt.toLowerCase()});console.log(`Category ${Ee.name} (ID: ${Ee.id}) has ${Xe.length} rebuttals`),Xe.length>0&&console.log(`  Rebuttals in ${Ee.name}:`,Xe.map(Re=>({id:Re.id,title:Re.title,category:Re.category})));let nt="";switch(Ee.name){case"Not Interested":nt="Handle objections from customers who are not interested in the service";break;case"Spouse Consultation":nt="Manage situations where spouse approval is needed";break;case"One Legger":nt="Handle single decision-maker scenarios";break;case"Not Ready":nt="Address customers who need more time to decide";break;case"Curious":nt="Engage with customers who are interested but have questions";break;case"Time Concern":nt="Handle scheduling and timing-related objections";break;case"Can't Afford":nt="Address budget and pricing concerns";break;case"Spouse":nt="Manage situations requiring spouse involvement";break;case"Price Phone":nt="Handle price-related phone inquiries";break;case"Repair":nt="Address repair and maintenance concerns";break;case"Government Grants":nt="Information about government assistance programs";break;case"Reset Appointment":nt="Handle appointment rescheduling requests";break;case"No Request":nt="Manage situations with no specific request";break;case"Bad Reviews":nt="Address concerns about negative reviews";break;default:nt=`Handle ${Ee.name.toLowerCase()} related inquiries`}return{id:Ee.id,name:Ee.name,description:nt,icon:Ee.icon||"📋",color:Ee.color||"#808080",items:Xe.map(Re=>{let ct={pt1:"",pt2:""};return typeof Re.content=="string"?ct.pt1=Re.content:Re.content&&typeof Re.content=="object"?ct={pt1:Re.content.pt1||Re.content.initial||Re.content.part1||"",pt2:Re.content.pt2||Re.content.followup||Re.content.part2||""}:typeof Re.response=="string"?ct.pt1=Re.response:Re.response&&typeof Re.response=="object"&&(ct={pt1:Re.response.pt1||Re.response.initial||Re.response.part1||"",pt2:Re.response.pt2||Re.response.followup||Re.response.part2||""}),ct.pt1||(ct.pt1=Re.objection||""),{id:Re.id,title:Re.title,description:Re.description||Re.objection||Re.summary||"",category:Ee.id,content:ct,steps:Re.steps||["Listen to customer concerns","Address specific needs","Present solution","Follow up as needed"],tips:Re.tips||["Be professional and courteous","Focus on customer needs","Provide clear information"]}})}});console.log("Transformed categories:",Te),console.log("Sample rebuttal content:",Te[0]?.items[0]?.content),re(Te),Y(Te)});return O(!1),()=>je()}catch(ve){console.error("Error loading data:",ve),O(!1)}})()},[]);const Dt=me=>{if(M(me),B(!1),me.items&&me.items.length>0){const ve=me.items[0];L({...ve,content:{pt1:typeof ve.content=="string"?ve.content:ve.content.pt1||"",pt2:typeof ve.content=="string"?"":ve.content.pt2||""}}),I(!0),F(!0);const Me=()=>{const je=document.querySelector(".modal-body"),Qe=document.querySelector(".modal-content"),it=document.querySelector(".modal-overlay"),Ie=document.querySelectorAll('.modal-body, .modal-content, .modal-overlay, [class*="modal"]');je&&(je.scrollTop=0,je.scrollLeft=0),Qe&&(Qe.scrollTop=0,Qe.scrollLeft=0),it&&(it.scrollTop=0,it.scrollLeft=0),Ie.forEach(Ee=>{Ee.scrollTop=0,Ee.scrollLeft=0});const Te=je?.querySelector("*");Te&&Te.scrollIntoView({behavior:"instant",block:"start"}),window.scrollTo(0,0)};Me(),setTimeout(Me,50),setTimeout(Me,200),setTimeout(Me,500)}},Lt=me=>{L({...me,content:{pt1:typeof me.content=="string"?me.content:me.content.pt1||"",pt2:typeof me.content=="string"?"":me.content.pt2||""}}),I(!0),F(!0);const ve=()=>{const Me=document.querySelector(".modal-body"),je=document.querySelector(".modal-content"),Qe=document.querySelector(".modal-overlay"),it=document.querySelectorAll('.modal-body, .modal-content, .modal-overlay, [class*="modal"]');Me&&(Me.scrollTop=0,Me.scrollLeft=0),je&&(je.scrollTop=0,je.scrollLeft=0),Qe&&(Qe.scrollTop=0,Qe.scrollLeft=0),it.forEach(Te=>{Te.scrollTop=0,Te.scrollLeft=0});const Ie=Me?.querySelector("*");Ie&&Ie.scrollIntoView({behavior:"instant",block:"start"}),window.scrollTo(0,0)};ve(),setTimeout(ve,50),setTimeout(ve,200),setTimeout(ve,500)},Vt=()=>P?e.jsxs("div",{className:"category-content active",children:[e.jsxs("div",{className:"category-header",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"category-icon",children:P.icon}),P.name]}),e.jsx("p",{className:"category-description",children:P.description})]}),e.jsx("div",{className:"category-items",children:P.items.map(me=>e.jsxs("div",{className:"category-item",onClick:()=>Lt(me),children:[e.jsx("h3",{children:me.title}),e.jsx("p",{children:me.description})]},me.id))})]}):e.jsxs("div",{className:"no-categories",children:[e.jsx("div",{className:"main-title",children:e.jsx("h1",{className:"longhome-title",children:"Long Home Rebuttal"})}),e.jsx("div",{className:"no-categories-icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 9H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 21V9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h3",{children:"No Category Selected"}),e.jsx("p",{children:"Please select a category from the list to view its contents"})]}),xs=()=>e.jsxs("div",{className:"simple-mode-container",children:[e.jsxs("div",{className:"quick-navigation",children:[e.jsx("div",{className:"quick-nav-header",children:e.jsx("h2",{children:"Categories"})}),e.jsx("div",{className:"quick-nav-grid",children:oe.map(me=>e.jsx("div",{className:`quick-nav-card ${P?.id===me.id?"active":""}`,"data-category":me.id,onClick:()=>Dt(me),children:e.jsxs("div",{className:"quick-nav-card-content",children:[e.jsx("div",{className:"quick-nav-icon",children:me.icon}),e.jsxs("div",{className:"quick-nav-info",children:[e.jsx("h3",{children:me.name}),e.jsx("p",{className:"quick-nav-description",children:me.description})]})]})},me.id))})]}),e.jsx("div",{className:"simple-mode-grid",children:Vt()})]});y.useEffect(()=>{const me=ve=>{const Me=document.querySelector(".search-container");Me&&!Me.contains(ve.target)&&(S(!1),u(!1))};return document.addEventListener("mousedown",me),()=>{document.removeEventListener("mousedown",me)}},[]),y.useEffect(()=>{const me=JSON.parse(localStorage.getItem("adminUser"));R(me),localStorage.getItem("currentCompanySlug")||(localStorage.setItem("currentCompanySlug","long-home"),console.log("🚀 Set currentCompanySlug to long-home for Home component"))},[]);const bn=()=>{localStorage.removeItem("adminUser"),R(null),t("/")},Ds=()=>{T?.role==="super-admin"?t("/admin/saas"):t("/admin/dashboard")},Ks=()=>{const me=localStorage.getItem("currentCompanySlug")||"long-home";let ve=me;me==="long-home"&&(ve="oLuxoJq8SHXXEWm9KSEU"),console.log("🚀 Company Dashboard clicked:",{currentCompanySlug:me,companyId:ve}),console.log("🚀 Navigating to:",`/admin/dashboard?impersonate=${ve}`),console.log("🚀 Current URL before navigation:",window.location.href),localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:ve})),setTimeout(()=>{console.log("🚀 Navigating after delay..."),t(`/admin/dashboard?impersonate=${ve}`,{replace:!0})},100)};return y.useEffect(()=>{(async()=>{try{const ve=await cr.getAllRebuttals();f(ve)}catch(ve){console.error("Error loading rebuttals:",ve)}})()},[]),y.useEffect(()=>{const me=ve=>{(ve.ctrlKey||ve.metaKey)&&ve.shiftKey&&ve.key.toLowerCase()==="l"&&(ve.preventDefault(),t("/admin/login"))};return window.addEventListener("keydown",me),()=>{window.removeEventListener("keydown",me)}},[t]),e.jsxs("div",{className:"home-container",children:[T?e.jsxs("div",{className:"admin-controls",children:[e.jsxs("button",{onClick:Ds,className:"admin-dashboard-btn",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 13H11V3H3V13ZM3 21H11V15H3V21ZM13 21H21V11H13V21ZM13 3V9H21V3H13Z",fill:"currentColor"})}),T?.role==="super-admin"?"Super Admin":"Dashboard"]}),T?.role==="super-admin"&&localStorage.getItem("currentCompanySlug")&&e.jsxs("button",{onClick:Ks,className:"admin-company-dashboard-btn",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Company Dashboard"]}),e.jsxs("button",{onClick:bn,className:"admin-logout-btn",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Logout"]})]}):null,Us(),e.jsx("div",{className:"home-content",children:e.jsxs("div",{className:"hero-wrapper",children:[e.jsx("div",{className:"home-hero",children:e.jsx("div",{className:"hero-content"})}),xs()]})})]})},zE=()=>{const t=ms(),{hasPersistentSession:s,getUserType:a}=wn(),[i,l]=y.useState(""),[d,u]=y.useState(!1),[m,g]=y.useState(!1),[v,h]=y.useState(!1),[j,w]=y.useState("/admin/login");y.useEffect(()=>{if(console.log("🔄 SaaSLandingPage: Checking for persistent session..."),s()){const I=a();if(console.log("🔄 SaaSLandingPage: Found user type:",I),I){if(h(!0),I.type==="admin")switch(I.role){case"super-admin":console.log("🔄 SaaSLandingPage: Super admin detected, setting dashboard path to SaaS dashboard"),w("/admin/saas");break;case"company-admin":console.log("🔄 SaaSLandingPage: Company admin detected, setting dashboard path to admin dashboard"),w("/admin/dashboard");break;default:console.log("🔄 SaaSLandingPage: Regular admin detected, setting dashboard path to admin dashboard"),w("/admin/dashboard");break}else if(I.type==="company-user"){const W=localStorage.getItem("currentCompanySlug");W?(console.log("🔄 SaaSLandingPage: Company user detected, setting dashboard path to company landing page:",W),w(`/company/${W}`)):w("/")}}}else console.log("🔄 SaaSLandingPage: No persistent session found"),h(!1)},[s,a]);const D=async I=>{I.preventDefault(),i&&(u(!0),setTimeout(()=>{u(!1),t("/contact")},1e3))},S=()=>{g(!0)},b=()=>{t("/admin/login"),g(!1)},C=()=>{g(!1)},A=()=>{t("/admin/saas-login"),g(!1)},L=[{icon:"🎯",title:"Smart Rebuttal System",description:"AI-powered rebuttal suggestions that help your team handle objections effectively and close more deals."},{icon:"📊",title:"Advanced Analytics",description:"Track performance, conversion rates, and objection handling to continuously improve your sales outcomes."},{icon:"🤝",title:"Team Collaboration",description:"Share best responses across your team and maintain consistent messaging with shared rebuttal libraries."},{icon:"⚙️",title:"Easy Integration",description:"Works with your existing tools and processes with minimal setup."}],N=[{name:"Alex Johnson",role:"Sales Director",company:"GrowthLabs",content:"This platform transformed our team's objection handling. Our close rates improved within weeks.",avatar:"🧑‍💼"},{name:"Maria Garcia",role:"Head of Sales Enablement",company:"RevBoost",content:"The structured rebuttal library and analytics helped us standardize our approach and train faster.",avatar:"👩‍💼"},{name:"Sam Patel",role:"VP of Operations",company:"ScaleUp Inc",content:"The analytics and insights helped us optimize our entire customer journey. Highly recommended!",avatar:"👩‍💼"}];return e.jsxs("div",{className:"saas-landing-page",children:[e.jsx("nav",{className:"landing-nav",children:e.jsxs("div",{className:"nav-container",children:[e.jsx("div",{className:"nav-logo",children:e.jsx("span",{className:"logo-icon",children:"🚀"})}),e.jsxs("div",{className:"nav-links",children:[e.jsx("a",{href:"#features",children:"Features"}),e.jsx("a",{href:"#pricing",children:"Pricing"}),e.jsx("a",{href:"#testimonials",children:"Testimonials"})]}),e.jsx("div",{className:"nav-actions",children:v?e.jsx("button",{className:"nav-cta",onClick:()=>t(j),children:"Go to Dashboard"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"nav-login",onClick:S,children:"Login"}),e.jsx("button",{className:"nav-cta",onClick:()=>t("/admin/login"),children:"Get Started"})]})})]})}),e.jsx("section",{className:"hero-section",children:e.jsxs("div",{className:"hero-container",children:[e.jsxs("div",{className:"hero-content",children:[e.jsx("div",{className:"hero-title-wrapper",children:e.jsxs("h1",{className:"hero-title",children:["Master Sales Training with",e.jsx("span",{className:"gradient-text",children:" Smart Rebuttals"})]})}),e.jsx("div",{className:"hero-description-wrapper",children:e.jsx("p",{className:"hero-description",children:"Empower your sales team with our comprehensive training platform featuring intelligent rebuttal responses, objection handling techniques, customer service scripts, and performance tracking."})}),e.jsxs("div",{className:"hero-cta",children:[e.jsxs("form",{onSubmit:D,className:"email-form",children:[e.jsx("input",{type:"email",placeholder:"Enter your email address",value:i,onChange:I=>l(I.target.value),required:!0}),e.jsx("button",{type:"submit",disabled:d,children:d?"Getting Started...":"Start Free Trial"})]}),e.jsx("p",{className:"cta-note",children:"No credit card required • 14-day free trial"})]}),e.jsxs("div",{className:"hero-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"500+"}),e.jsx("span",{className:"stat-label",children:"Companies"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"40%"}),e.jsx("span",{className:"stat-label",children:"Avg. Close Rate Increase"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"99.9%"}),e.jsx("span",{className:"stat-label",children:"Uptime"})]})]})]}),e.jsx("div",{className:"hero-visual",children:e.jsxs("div",{className:"mini-dashboard",children:[e.jsxs("div",{className:"mini-header",children:[e.jsx("span",{className:"mini-title",children:"Dashboard"}),e.jsxs("div",{className:"mini-icons",children:[e.jsx("span",{children:"⚙️"}),e.jsx("span",{children:"👤"})]}),e.jsxs("div",{className:"mini-status",children:[e.jsx("span",{className:"live",children:"Live"}),e.jsx("span",{className:"sync",children:"Sync On"})]})]}),e.jsxs("div",{className:"mini-nav",children:[e.jsx("span",{className:"nav active",children:"📊 Overview"}),e.jsx("span",{className:"nav",children:"🎯 Rebuttals"}),e.jsx("span",{className:"nav",children:"📈 Analytics"}),e.jsx("span",{className:"nav",children:"💬 Support"})]}),e.jsxs("div",{className:"mini-content",children:[e.jsxs("div",{className:"mini-title-bar",children:[e.jsx("span",{children:"Weekly Overview"}),e.jsx("span",{className:"date",children:"Aug 1-7"})]}),e.jsxs("div",{className:"mini-stats",children:[e.jsxs("div",{className:"mini-stat",children:[e.jsx("span",{className:"icon",children:"📈"}),e.jsx("span",{className:"value",children:"1,284"}),e.jsx("span",{className:"label",children:"Leads"}),e.jsx("span",{className:"trend",children:"+12%"})]}),e.jsxs("div",{className:"mini-stat",children:[e.jsx("span",{className:"icon",children:"🤝"}),e.jsx("span",{className:"value",children:"431"}),e.jsx("span",{className:"label",children:"Meetings"}),e.jsx("span",{className:"trend",children:"+9%"})]})]}),e.jsxs("div",{className:"mini-chart",children:[e.jsx("div",{className:"chart-title",children:"Performance"}),e.jsxs("div",{className:"mini-bars",children:[e.jsx("div",{className:"bar",style:{height:"60%"}}),e.jsx("div",{className:"bar",style:{height:"75%"}}),e.jsx("div",{className:"bar",style:{height:"50%"}})]})]}),e.jsxs("div",{className:"mini-footer",children:[e.jsx("span",{children:"🧑‍💼👩‍💻🧑‍🔧"}),e.jsx("span",{children:"Synced 2m ago"})]})]})]})})]})}),e.jsx("section",{id:"features",className:"features-section",children:e.jsxs("div",{className:"features-container",children:[e.jsx("h2",{className:"section-title",children:"Powerful Features"}),e.jsx("p",{className:"section-subtitle",children:"Everything you need to empower your sales team and close more deals"}),e.jsx("div",{className:"features-grid",children:L.map((I,W)=>e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:I.icon}),e.jsx("h3",{className:"feature-title",children:I.title}),e.jsx("p",{className:"feature-description",children:I.description})]},W))})]})}),e.jsx("section",{id:"pricing",className:"pricing-section",children:e.jsxs("div",{className:"pricing-container",children:[e.jsx("h2",{className:"section-title",children:"Simple, Transparent Pricing"}),e.jsx("p",{className:"section-subtitle",children:"Choose a plan that fits your team's needs"}),e.jsxs("div",{className:"pricing-grid",children:[e.jsxs("div",{className:"pricing-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("div",{className:"plan-name",children:"Starter"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:"$199"}),e.jsx("span",{className:"period",children:"/mo"})]}),e.jsx("div",{className:"plan-description",children:"Perfect for small teams getting started"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Up to 10 users"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Basic training modules"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Email support"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Basic analytics"]})]}),e.jsx("button",{className:"plan-button",onClick:()=>t("/admin/login?plan=starter"),children:"Get Started"})]}),e.jsxs("div",{className:"pricing-card popular",children:[e.jsx("div",{className:"popular-badge",children:"Most Popular"}),e.jsxs("div",{className:"plan-header",children:[e.jsx("div",{className:"plan-name",children:"Professional"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:"$499"}),e.jsx("span",{className:"period",children:"/mo"})]}),e.jsx("div",{className:"plan-description",children:"Best for growing teams that need advanced features"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Up to 50 users"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Advanced training modules"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Priority support"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Custom branding"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Advanced analytics"]})]}),e.jsx("button",{className:"plan-button",onClick:()=>t("/admin/login?plan=pro"),children:"Start Free Trial"})]}),e.jsxs("div",{className:"pricing-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("div",{className:"plan-name",children:"Enterprise"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:"$1,299"}),e.jsx("span",{className:"period",children:"/mo"})]}),e.jsx("div",{className:"plan-description",children:"For larger orgs with advanced requirements"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Up to 200 users"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," All training modules"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," 24/7 support"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," White-label solution"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," API access"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"✓"})," Dedicated success manager"]})]}),e.jsx("button",{className:"plan-button",onClick:()=>window.location.href="mailto:sales@longhome.com?subject=Enterprise%20Plan%20Inquiry",children:"Contact Sales"})]})]})]})}),e.jsx("section",{id:"testimonials",className:"testimonials-section",children:e.jsxs("div",{className:"testimonials-container",children:[e.jsx("h2",{className:"section-title",children:"What Our Customers Say"}),e.jsx("p",{className:"section-subtitle",children:"Trusted by teams across industries"}),e.jsx("div",{className:"testimonials-grid",children:N.map((I,W)=>e.jsxs("div",{className:"testimonial-card",children:[e.jsx("div",{className:"testimonial-avatar",children:I.avatar}),e.jsxs("div",{className:"testimonial-content",children:[e.jsx("p",{className:"testimonial-text",children:I.content}),e.jsxs("div",{className:"testimonial-author",children:[e.jsx("span",{className:"author-name",children:I.name}),e.jsxs("span",{className:"author-meta",children:[I.role," • ",I.company]})]})]})]},W))})]})}),e.jsx("footer",{className:"landing-footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section",children:[e.jsx("div",{className:"footer-logo",children:e.jsx("span",{className:"logo-icon",children:"🚀"})}),e.jsx("p",{className:"footer-description",children:"The complete SaaS platform for modern sales teams"})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Product"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",children:"Pricing"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Integrations"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"API"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Company"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Blog"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Careers"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Contact"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Support"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Help Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Documentation"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Status"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Security"})})]})]})]}),e.jsx("div",{className:"footer-bottom",children:e.jsx("p",{className:"footer-copyright",children:"© 2024. All rights reserved."})})]})}),m&&e.jsx("div",{className:"enhanced-login-modal-overlay",onClick:C,children:e.jsxs("div",{className:"enhanced-login-modal",onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{className:"enhanced-modal-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("div",{className:"header-icon",children:"🔐"}),e.jsxs("div",{className:"header-text",children:[e.jsx("h2",{children:"Choose Your Access Level"}),e.jsx("p",{children:"Select the appropriate login type for your role"})]})]}),e.jsx("button",{className:"enhanced-modal-close",onClick:C,children:e.jsx("span",{children:"✕"})})]}),e.jsxs("div",{className:"enhanced-modal-content",children:[e.jsxs("div",{className:"login-options-grid",children:[e.jsxs("div",{className:"enhanced-login-option admin",onClick:b,children:[e.jsx("div",{className:"option-background"}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("div",{className:"option-icon",children:"👨‍💼"}),e.jsx("div",{className:"option-badge admin-badge",children:"Admin"})]}),e.jsxs("div",{className:"option-body",children:[e.jsx("h3",{children:"Regular Admin"}),e.jsx("p",{children:"Access your company's admin dashboard and manage your team's training materials, rebuttals, and user settings. Handles all admin types automatically."})]}),e.jsx("div",{className:"option-footer",children:e.jsx("span",{className:"option-arrow",children:"→"})})]})]}),e.jsxs("div",{className:"enhanced-login-option company",onClick:A,children:[e.jsx("div",{className:"option-background"}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("div",{className:"option-icon",children:"🏢"}),e.jsx("div",{className:"option-badge company-badge",children:"Company"})]}),e.jsxs("div",{className:"option-body",children:[e.jsx("h3",{children:"Company Admin"}),e.jsx("p",{children:"Manage your entire company's settings, users, training platform, and oversee all administrative functions. For company admins and super admins."})]}),e.jsx("div",{className:"option-footer",children:e.jsx("span",{className:"option-arrow",children:"→"})})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"help-text",children:[e.jsx("span",{className:"help-icon",children:"💡"}),e.jsx("span",{children:"Not sure which option to choose? Contact your system administrator for guidance."})]})})]})]})})]})},HE=({onInstall:t,isCollapsed:s=!1})=>{const[a,i]=y.useState(null),[l,d]=y.useState(!1),[u,m]=y.useState(!1),[g,v]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){m(!0);return}const b=L=>{L.preventDefault(),i(L),d(!0),console.log("Install prompt available")},C=()=>{m(!0),d(!1),i(null),console.log("PWA was installed"),D(),setTimeout(()=>{h()},1e3)},A=()=>{if("serviceWorker"in navigator&&"PushManager"in window){const L=document.querySelector('link[rel="manifest"]'),N=navigator.serviceWorker.controller;L&&N&&(console.log("App is installable"),d(!0))}};return window.addEventListener("beforeinstallprompt",b),window.addEventListener("appinstalled",C),setTimeout(A,1e3),()=>{window.removeEventListener("beforeinstallprompt",b),window.removeEventListener("appinstalled",C)}},[]);const h=async()=>{if("Notification"in window&&Notification.permission==="default")try{await Notification.requestPermission()==="granted"&&j("App Installed!",{body:"You can now receive notifications for updates and new features.",icon:"/icons/icon-192x192.png"})}catch{console.log("Notification permission denied")}},j=(b,C={})=>{if("Notification"in window&&Notification.permission==="granted"){const A={icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",vibrate:[100,50,100],...C};return new Notification(b,A)}},w=async()=>{if(a)try{a.prompt();const{outcome:b}=await a.userChoice;b==="accepted"?(console.log("User accepted the install prompt"),m(!0),d(!1),D()):(console.log("User dismissed the install prompt"),S()),i(null),t&&t(b);return}catch(b){console.error("Deferred prompt failed:",b)}try{if("serviceWorker"in navigator&&"PushManager"in window){const b=new Event("beforeinstallprompt");window.dispatchEvent(b),setTimeout(()=>{a||S()},1e3)}else S()}catch(b){console.error("Programmatic install failed:",b),S()}},D=()=>{"Notification"in window&&Notification.permission==="granted"?new Notification("App Installed!",{body:"The app has been successfully installed on your device.",icon:"/icons/icon-192x192.png"}):alert(`✅ App has been successfully installed on your device!

You can now:
• Use the app offline
• Access it from your Start Menu/Home Screen
• Enjoy faster loading times`)},S=()=>{const b=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),C=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),A=/Edg/.test(navigator.userAgent),L=/Firefox/.test(navigator.userAgent),N=/iPad|iPhone|iPod/.test(navigator.userAgent);let I=`📱 Install App

`;b?N?I+=`📱 iPhone/iPad Installation:
1. Tap the share button (📤) in Safari
2. Scroll down and tap "Add to Home Screen"
3. Tap "Add" to install the app

The app will appear on your home screen like a native app!`:I+=`📱 Android Installation:
1. Tap the menu (⋮) in Chrome
2. Tap "Install app" or "Add to Home screen"
3. Tap "Install" to confirm

The app will appear on your home screen!`:C?I+=`💻 Chrome Desktop Installation:
1. Look for the install icon (📱) in the address bar
2. Click the install icon
3. Click "Install" in the popup

The app will install and appear in your Start Menu!`:A?I+=`💻 Edge Desktop Installation:
1. Look for the install icon (📱) in the address bar
2. Click the install icon
3. Click "Install" in the popup

The app will install and appear in your Start Menu!`:L?I+=`💻 Firefox Desktop Installation:
1. Look for the install icon (📱) in the address bar
2. Click the install icon
3. Click "Install" in the popup

The app will install and appear in your Start Menu!`:I+=`💻 Desktop Installation:
• Chrome/Edge: Look for install icon (📱) in address bar
• Firefox: Look for install icon (📱) in address bar
• Safari: Not supported for PWA installation

The app will install and appear in your Start Menu!`,I+=`

✨ Once installed, the app will work offline and feel like a native app!`,alert(I)};return u?e.jsxs("div",{className:"pwa-installed",style:{display:"flex",alignItems:"center",gap:"0.5em",background:"#22c55e",color:"white",borderRadius:"8px",padding:s?"0.25em 0.75em":"0.5em 1em",fontWeight:600,fontSize:s?"0.95em":"1.1em",justifyContent:"center"},children:[e.jsx("span",{className:"pwa-installed-icon",style:{fontSize:s?"1.1em":"1.2em"},children:"✅"}),e.jsx("span",{className:"pwa-installed-text",children:"Installed"})]}):!l&&!u?e.jsxs("button",{className:"pwa-loading",onClick:S,title:"Install App",children:[e.jsx("span",{className:"pwa-icon",children:"⏳"}),!s&&e.jsx("span",{className:"pwa-text",children:"Checking..."})]}):l?e.jsxs("button",{className:"pwa-install-button",onClick:w,title:"Install App",children:[e.jsx("span",{className:"pwa-icon",children:"⬇️"}),!s&&e.jsx("span",{className:"pwa-text",children:"Install App"})]}):e.jsxs("button",{className:"pwa-manual-install",onClick:S,title:"Install App",children:[e.jsx("span",{className:"pwa-icon",children:"📱"}),!s&&e.jsx("span",{className:"pwa-text",children:"Install App"})]})},qE=()=>{const[t,s]=y.useState(!1),[a,i]=y.useState(null);y.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(u=>{i(u),u.addEventListener("updatefound",()=>{const m=u.installing;m.addEventListener("statechange",()=>{m.state==="installed"&&navigator.serviceWorker.controller&&s(!0)})})})},[]);const l=()=>{a&&a.waiting&&(a.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())},d=()=>{s(!1)};return t?e.jsx("div",{className:"pwa-update-notification",children:e.jsxs("div",{className:"pwa-update-content",children:[e.jsx("div",{className:"pwa-update-icon",children:"🔄"}),e.jsxs("div",{className:"pwa-update-text",children:[e.jsx("h3",{children:"New Version Available!"}),e.jsx("p",{children:"A new version is ready to install."})]}),e.jsxs("div",{className:"pwa-update-actions",children:[e.jsx("button",{className:"pwa-update-button",onClick:l,children:"Update Now"}),e.jsx("button",{className:"pwa-dismiss-button",onClick:d,children:"Later"})]})]})}):null},YE=({isCollapsed:t=!1})=>{const[s,a]=y.useState({isInstalled:!1,isStandalone:!1,hasServiceWorker:!1,isOnline:navigator.onLine,cacheSize:"0 MB",swRegistered:!1,swActive:!1,swError:null,isLoading:!0});y.useEffect(()=>{(async()=>{console.log("Checking PWA status...");const v={isInstalled:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,isStandalone:window.matchMedia("(display-mode: standalone)").matches,hasServiceWorker:"serviceWorker"in navigator&&navigator.serviceWorker.controller,isOnline:navigator.onLine,swRegistered:!1,swActive:!1,swError:null,cacheSize:"0 MB",isLoading:!0};a(v);try{const h=sg(),j=new Promise((D,S)=>setTimeout(()=>S(new Error("Service worker check timeout")),3e3)),w=await Promise.race([h,j]);console.log("Service worker status:",w),a(D=>({...D,swRegistered:w.registered||!1,swActive:w.active||!1,swError:w.error||null,isLoading:!1}))}catch(h){console.log("Service worker check failed:",h.message),a(j=>({...j,swError:h.message,isLoading:!1}))}if("caches"in window)try{const h=(async()=>{const D=await caches.keys();let S=0;for(const b of D){const A=await(await caches.open(b)).keys();S+=A.length}return`${Math.round(S/10)} MB`})(),j=new Promise((D,S)=>setTimeout(()=>S(new Error("Cache check timeout")),2e3)),w=await Promise.race([h,j]);a(D=>({...D,cacheSize:w,isLoading:!1}))}catch(h){console.log("Cache check failed:",h.message),a(j=>({...j,cacheSize:"Unknown",isLoading:!1}))}})();const g=()=>{a(v=>({...v,isOnline:navigator.onLine}))};return window.addEventListener("online",g),window.addEventListener("offline",g),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",g)}},[]);const i=()=>s.isLoading?"⏳":s.isInstalled?"✅":s.swActive?"⚡":s.swRegistered?"🔄":s.swError?"❌":"📱",l=()=>s.isLoading?"Checking...":s.isInstalled?"App Installed":s.swActive?"SW Active":s.swRegistered?"SW Registered":s.swError?"SW Error":"Install Available",d=()=>s.isLoading?"#F59E0B":s.isInstalled?"#10B981":s.swActive?"#3B82F6":s.swRegistered?"#F59E0B":s.swError?"#EF4444":"#6B7280",u=async()=>{console.log("Refreshing PWA status...");const m=await sg();console.log("Updated SW Status:",m),m.error&&(console.log("Service worker error detected, reloading page..."),window.location.reload())};return t?e.jsx("div",{className:"pwa-status-collapsed-center",style:{color:d()},children:e.jsx("span",{className:"pwa-status-icon",style:{fontSize:"2rem",display:"block",textAlign:"center"},children:i()})}):e.jsxs("div",{className:"pwa-status",style:{color:d()},children:[e.jsx("span",{className:"pwa-status-icon",children:i()}),!t&&e.jsx("span",{className:"pwa-status-text",children:l()}),e.jsx("div",{className:"pwa-status-tooltip",children:e.jsxs("div",{className:"tooltip-content",children:[e.jsx("h4",{children:"PWA Status"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Installed: ",s.isInstalled?"Yes":"No"]}),e.jsxs("li",{children:["Standalone: ",s.isStandalone?"Yes":"No"]}),e.jsxs("li",{children:["Service Worker: ",s.swActive?"Active":s.swRegistered?"Registered":"Inactive"]}),e.jsxs("li",{children:["Online: ",s.isOnline?"Yes":"No"]}),e.jsxs("li",{children:["Cache: ",s.cacheSize]}),s.swError&&e.jsxs("li",{style:{color:"red"},children:["Error: ",s.swError]})]}),e.jsx("button",{onClick:u,style:{marginTop:"10px",padding:"5px 10px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Refresh Status"})]})})]})},xa=({children:t})=>{const s=ms(),a=jn(),[i,l]=y.useState(!1),[d,u]=y.useState(!1),[m,g]=y.useState(!1);$b(),y.useEffect(()=>{const A=L=>{(L.ctrlKey||L.metaKey)&&L.shiftKey&&L.key.toLowerCase()==="h"&&(L.preventDefault(),g(!0)),(L.ctrlKey||L.metaKey)&&L.shiftKey&&L.key.toLowerCase()==="r"&&(L.preventDefault(),v())};return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[]);const v=()=>{console.log("🧹 Clearing company token and returning to SaaS landing page..."),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug"),localStorage.removeItem("adminUser"),window.location.href="/"},h=a.pathname.startsWith("/company/")?a.pathname.split("/")[2]:localStorage.getItem("currentCompanySlug")||null,w=[{path:h?h==="long-home"?"/app":`/company/${h}`:"/",label:"Home",icon:"🏠"},{path:"/rebuttals",label:"Rebuttals",icon:"💬"},{path:"/disposition",label:"Disposition",icon:"📋"},{path:"/customerService",label:"Customer Service",icon:"👥"},{path:"/faq",label:"FAQ",icon:"❓"},{path:"/scheduleScript",label:"Schedule Script",icon:"📅"}],D=A=>{A==="accepted"&&console.log("PWA installed successfully!")},S=()=>{l(!i)},b=()=>{u(!d)},C=A=>{s(A),setTimeout(Ea,0),setTimeout(Ea,200)};return e.jsxs("div",{className:"layout",children:[e.jsx("main",{className:`main-content ${i?"expanded":""}`,children:t}),!d&&e.jsxs("nav",{className:`side-nav ${i?"collapsed":""}`,children:[e.jsxs("div",{className:"nav-header",children:[!i&&e.jsx("h2",{className:"nav-title",children:"Navigation"}),e.jsxs("div",{className:"nav-buttons",children:[e.jsx("button",{className:"nav-toggle",onClick:S,"aria-label":i?"Expand navigation":"Collapse navigation",children:i?"→":"←"}),i&&e.jsx("button",{className:"nav-hide",onClick:b,"aria-label":"Hide navigation",children:"✕"})]})]}),e.jsx("ul",{className:"nav-items",children:w.map(A=>e.jsxs("li",{className:`nav-item ${a.pathname===A.path?"active":""}`,onClick:()=>C(A.path),children:[e.jsx("span",{className:"nav-icon",children:A.icon}),!i&&e.jsx("span",{className:"nav-label",children:A.label})]},A.path))}),e.jsx("div",{className:"help-me-section",children:e.jsxs("button",{className:"help-me-button",onClick:()=>g(!0),title:"How to access login page (Ctrl/Cmd + Shift + H)",children:[e.jsx("span",{className:"help-icon",children:"🆘"}),!i&&e.jsx("span",{className:"help-label",children:"Help Me"})]})}),e.jsxs("div",{className:"nav-footer",children:[e.jsx(HE,{onInstall:D,isCollapsed:i}),e.jsx(YE,{isCollapsed:i})]})]}),d&&e.jsx("button",{className:"show-nav-button",onClick:b,"aria-label":"Show navigation",children:"→"}),e.jsx(qE,{}),m&&e.jsx("div",{className:"help-modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"help-modal-content",onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"help-modal-header",children:[e.jsx("h3",{children:"How to Access Login Page"}),e.jsx("button",{className:"help-modal-close",onClick:()=>g(!1),children:"×"})]}),e.jsxs("div",{className:"help-modal-body",children:[e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Step 1: Navigate to Admin"}),e.jsxs("p",{children:["Add ",e.jsx("code",{children:"/admin"})," to the end of your current URL"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Example:"})," ",e.jsx("code",{children:"https://longhome-rebuttal-hub.netlify.app/admin"})]})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Step 2: Login"}),e.jsx("p",{children:"Use your admin credentials to access the admin dashboard"})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Alternative Method"}),e.jsx("p",{children:"You can also bookmark the admin URL for quick access"})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Keyboard Shortcuts"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Help Modal:"})," Press ",e.jsx("code",{children:"Ctrl + Shift + H"})," (or ",e.jsx("code",{children:"Cmd + Shift + H"})," on Mac)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Admin Login:"})," Press ",e.jsx("code",{children:"Ctrl + Shift + L"})," (or ",e.jsx("code",{children:"Cmd + Shift + L"})," on Mac)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset Company Token:"})," Press ",e.jsx("code",{children:"Ctrl + Shift + R"})," (or ",e.jsx("code",{children:"Cmd + Shift + R"})," on Mac)"]}),e.jsx("p",{style:{fontSize:"0.9em",color:"#666",marginTop:"8px"},children:e.jsx("em",{children:'Use "Reset Company Token" to clear your company association and return to the SaaS landing page'})})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"For Company Users"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset Company Association:"})," If you're trained to a specific company and want to return to the main SaaS landing page, use the keyboard shortcut above."]}),e.jsx("p",{children:"This will clear your company token and take you back to the main landing page where you can access different company training platforms."})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"SaaS Admin Dashboard"}),e.jsxs("p",{children:["For managing multiple companies and platforms, visit: ",e.jsx("code",{children:"/admin/saas"})]}),e.jsx("p",{children:"This allows you to create and manage training platforms for different companies."})]})]})]})})]})},qj=({variant:t="landing"})=>{const s=t==="company",a=`loading-screen ${s?"company":"landing"}`;return e.jsx("div",{className:a,children:e.jsxs("div",{className:"loading-container",children:[e.jsxs("div",{className:"logo-container",children:[e.jsx("div",{className:"logo-circle"}),e.jsx("div",{className:"logo-text",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"L"}),e.jsx("span",{children:"H"}),e.jsx("span",{children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"S"}),e.jsx("span",{children:"O"}),e.jsx("span",{children:"S"})]})}),e.jsx("div",{className:"logo-subtext",children:s?"Long Home Products":""})]}),e.jsxs("div",{className:"loading-animation",children:[e.jsx("div",{className:"loading-bar",children:e.jsx("div",{className:"loading-progress"})}),e.jsxs("div",{className:"loading-dots",children:[e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"})]})]}),e.jsxs("div",{className:"loading-text",children:[e.jsx("span",{children:"L"}),e.jsx("span",{children:"o"}),e.jsx("span",{children:"a"}),e.jsx("span",{children:"d"}),e.jsx("span",{children:"i"}),e.jsx("span",{children:"n"}),e.jsx("span",{children:"g"}),e.jsx("span",{className:"dot-1",children:"."}),e.jsx("span",{className:"dot-2",children:"."}),e.jsx("span",{className:"dot-3",children:"."})]})]})})},Fs=({children:t,requiredRole:s=null,requiredPermissions:a=[],fallbackPath:i="/admin/login",allowImpersonation:l=!1})=>{const{currentUser:d,authLoading:u}=wn(),m=jn(),[g,v]=y.useState(null),[h,j]=y.useState([]),[w,D]=y.useState(!0),[S,b]=y.useState(null);if(y.useEffect(()=>{(async()=>{try{if(console.log("🔒 SecureRoute: Starting access check",{path:m.pathname,requiredRole:s,allowImpersonation:l}),D(!0),b(null),u)return;if(!d){D(!1);return}let A=null;if(l)try{A=JSON.parse(localStorage.getItem("impersonation")||"null")}catch{console.warn("Invalid impersonation data in localStorage")}const L=localStorage.getItem("adminUser");if(L)try{const F=JSON.parse(L);v(F.role),j(F.permissions||[]),D(!1);return}catch{console.warn("Invalid admin data in localStorage")}const N=Gs();let I=null,W=[];const B=Ae(N,"super-admins",d.uid),Q=await pt(B);if(Q.exists()){const F=Q.data();I="super-admin",W=F.permissions||["create-companies","delete-companies","create-platforms","delete-platforms","manage-users","view-analytics","system-settings","impersonate-companies"];const te={uid:d.uid,email:d.email,role:"super-admin",permissions:W,...F};localStorage.setItem("adminUser",JSON.stringify(te))}else{const F=Ae(N,"company-admins",d.uid),te=await pt(F);if(te.exists()){const ce=te.data();I="company-admin",W=ce.permissions||["manage-rebuttals","manage-categories","manage-users","view-analytics"];const z={uid:d.uid,email:d.email,role:"company-admin",companyId:ce.companyId,permissions:W,...ce};localStorage.setItem("adminUser",JSON.stringify(z))}else{const ce=Ae(N,"admins",d.uid),z=await pt(ce);if(z.exists()){const ee=z.data();I="admin",W=ee.permissions||["manage-rebuttals","manage-categories"];const oe={uid:d.uid,email:d.email,role:"admin",companyId:ee.companyId,permissions:W,...ee};localStorage.setItem("adminUser",JSON.stringify(oe))}else{const ee=Ae(N,"users",d.uid),oe=await pt(ee);if(oe.exists()){const re=oe.data();I=re.role||"user",W=re.permissions||[]}}}}v(I),j(W),D(!1)}catch(A){console.error("Error checking user access:",A),b(A.message),D(!1)}})()},[d,u,l]),u||w){const C=m.pathname,A=C.startsWith("/company")||C.startsWith("/app")||C.startsWith("/rebuttals")||C.startsWith("/disposition")||C.startsWith("/customerService")||C.startsWith("/faq")||C.startsWith("/scheduleScript");return e.jsx(qj,{variant:A?"company":"landing"})}if(S)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Access Error"}),e.jsx("p",{children:S}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]});if(!d)return e.jsx(Pi,{to:i,state:{from:m},replace:!0});if(!g)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access this area."}),e.jsx("button",{onClick:()=>window.location.href="/",children:"Go Home"})]});if(s&&g!==s){if(console.log("🔒 SecureRoute: Role check failed",{userRole:g,requiredRole:s,allowImpersonation:l,path:m.pathname}),g==="company-admin"&&s==="admin")return console.log("🔒 SecureRoute: Company admin accessing admin route, allowing access"),t;if(g==="super-admin"&&(s==="admin"||s==="company-admin")&&l){const A=JSON.parse(localStorage.getItem("impersonation")||"null");if(console.log("🔒 SecureRoute: Checking impersonation",{impersonation:A}),A?.enabled)return console.log("🔒 SecureRoute: Impersonation allowed, rendering children"),t}let C="/";return g==="super-admin"?C="/admin/saas":(g==="company-admin"||g==="admin")&&(C="/admin/dashboard"),e.jsx(Pi,{to:C,replace:!0})}return a.length>0&&!a.every(A=>h.includes(A))?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Insufficient Permissions"}),e.jsx("p",{children:"You don't have the required permissions to access this area."}),e.jsxs("p",{children:["Required: ",a.join(", ")]}),e.jsxs("p",{children:["Your permissions: ",h.join(", ")]}),e.jsx("button",{onClick:()=>window.history.back(),children:"Go Back"})]}):t},GE=({children:t})=>{const s=ms(),a=jn(),{hasPersistentSession:i,getUserType:l,loading:d}=wn();return y.useEffect(()=>{if(console.log("🔄 PersistentRoute: useEffect triggered",{loading:d,pathname:a.pathname}),d){console.log("🔄 PersistentRoute: Still loading, skipping");return}if(["/admin"].some(g=>a.pathname.startsWith(g))){console.log("🔄 PersistentRoute: On admin route, skipping");return}if(i()){const g=l();if(g){console.log("🔄 PersistentRoute: Found persistent session, user type:",g);const v=a.pathname.startsWith("/company/"),h=a.pathname.startsWith("/app"),j=v||h||a.pathname.startsWith("/rebuttals")||a.pathname.startsWith("/disposition")||a.pathname.startsWith("/customerService")||a.pathname.startsWith("/faq")||a.pathname.startsWith("/scheduleScript");if(console.log("🔄 PersistentRoute: Route analysis",{isCompanyRoute:v,isAppRoute:h,isCompanyRelatedRoute:j,pathname:a.pathname}),g.type==="admin"){if(g.role==="super-admin"&&v){const w=a.pathname.split("/")[2];if(console.log("🔄 Checking company route:",{companySlug:w,userRole:g.role}),w==="long-home"||w==="oLuxoJq8SHXXEWm9KSEU"){console.log("🔄 Super admin accessing Long Home, redirecting to /app"),s("/app",{replace:!0});return}}if(g.role==="super-admin"&&j){console.log("🔄 Super admin accessing company route, allowing access");return}switch(g.role){case"super-admin":console.log("🔄 Redirecting super admin to SaaS dashboard"),s("/admin/saas",{replace:!0});break;case"company-admin":console.log("🔄 Redirecting company admin to company dashboard"),s("/admin/dashboard",{replace:!0});break;default:console.log("🔄 Redirecting regular admin to admin dashboard"),s("/admin/dashboard",{replace:!0});break}}else if(g.type==="company-user"){const w=localStorage.getItem("currentCompanySlug");w?(console.log("🔄 Redirecting company user to company landing page:",w),s(`/company/${w}`,{replace:!0})):console.log("🔄 No company slug found, staying on current page")}}}else console.log("🔄 PersistentRoute: No persistent session found, user can stay on current page")},[d,i,l,s,a.pathname]),t},QE=()=>{const[t,s]=y.useState({enabled:!1,message:"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:null}),[a,i]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const d=fe(),u=Ae(d,"system","maintenance"),m=await pt(u);if(m.exists()){const g=m.data();s({enabled:g.enabled||!1,message:g.message||"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:g.updatedAt})}i(!1)}catch(d){d.code==="permission-denied"?s({enabled:!1,message:"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:null}):console.error("❌ Error checking maintenance mode:",d),i(!1)}})()},[]),a?e.jsx("div",{className:"maintenance-container",children:e.jsx("div",{className:"maintenance-content",children:e.jsxs("div",{className:"maintenance-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Checking system status..."})]})})}):t.enabled?e.jsxs("div",{className:"maintenance-container",children:[e.jsxs("div",{className:"maintenance-content",children:[e.jsx("div",{className:"maintenance-icon",children:"🔧"}),e.jsx("h1",{className:"maintenance-title",children:"System Maintenance"}),e.jsx("p",{className:"maintenance-message",children:t.message}),e.jsx("div",{className:"maintenance-details",children:e.jsxs("div",{className:"maintenance-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Status:"}),e.jsx("span",{className:"info-value maintenance",children:"Under Maintenance"})]}),t.updatedAt&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Started:"}),e.jsx("span",{className:"info-value",children:t.updatedAt.toDate?t.updatedAt.toDate().toLocaleString():"Recently"})]})]})}),e.jsx("div",{className:"maintenance-actions",children:e.jsx("button",{className:"refresh-button",onClick:()=>window.location.reload(),children:"🔄 Refresh Page"})}),e.jsxs("div",{className:"maintenance-footer",children:[e.jsx("p",{children:"We apologize for any inconvenience. Please check back soon."}),e.jsx("p",{className:"contact-info",children:"For urgent matters, please contact support."})]})]}),e.jsxs("div",{className:"maintenance-background",children:[e.jsx("div",{className:"bg-shape shape-1"}),e.jsx("div",{className:"bg-shape shape-2"}),e.jsx("div",{className:"bg-shape shape-3"})]})]}):null},KE=({Component:t})=>{const s=ms(),a=i=>{if(i==="home"){const l=window.location.pathname.match(/^\/company\/([^/]+)/),d=localStorage.getItem("currentCompanySlug"),u=l&&l[1]||d;if(u){s(`/company/${u}`),Ea();return}}s(`/${i}`),Ea()};return e.jsx(t,{onNavigate:a})};function JE(){const[t,s]=y.useState(!0),{loading:a}=wn();if(y.useEffect(()=>(document.body.classList.add("dark"),()=>{document.body.classList.remove("dark")})),y.useEffect(()=>{(async()=>{try{console.log("Initializing PWA..."),await zb(),qb(),console.log("PWA initialized successfully")}catch(l){console.error("Failed to initialize PWA:",l)}})()},[]),y.useEffect(()=>{const i=setTimeout(()=>{s(!1)},1e3);return()=>clearTimeout(i)},[]),t||a){const i=typeof window<"u"?window.location.pathname:"/",l=i.startsWith("/company")||i.startsWith("/app")||i.startsWith("/rebuttals")||i.startsWith("/disposition")||i.startsWith("/customerService")||i.startsWith("/faq")||i.startsWith("/scheduleScript");return e.jsx(qj,{variant:l?"company":"landing"})}return e.jsxs(e.Fragment,{children:[e.jsx(QE,{}),e.jsx(Ub,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(Db,{children:[e.jsx(At,{path:"/admin",element:e.jsx(Pi,{to:"/admin/dashboard",replace:!0})}),e.jsx(At,{path:"/admin/setup",element:e.jsx(gE,{})}),e.jsx(At,{path:"/admin/login",element:e.jsx(mE,{})}),e.jsx(At,{path:"/admin/saas-login",element:e.jsx(FE,{})}),e.jsx(At,{path:"/admin/dashboard",element:e.jsx(Fs,{requiredRole:"admin",allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(hE,{})})}),e.jsx(At,{path:"/admin/saas",element:e.jsx(Fs,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(OE,{})})}),e.jsx(At,{path:"/admin/company",element:e.jsx(Pi,{to:"/admin/dashboard",replace:!0})}),e.jsx(At,{path:"/admin/test",element:e.jsx(Fs,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(vE,{})})}),e.jsx(At,{path:"/admin/firebase-test",element:e.jsx(Fs,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(BE,{})})}),e.jsx(At,{path:"/admin/error-test",element:e.jsx(Fs,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(_E,{})})}),e.jsx(At,{path:"/admin/rebuttals/new",element:e.jsx(Fs,{requiredRole:"admin",requiredPermissions:["manage-rebuttals"],allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(hh,{})})}),e.jsx(At,{path:"/admin/rebuttals/edit/:id",element:e.jsx(Fs,{requiredRole:"admin",requiredPermissions:["manage-rebuttals"],allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(hh,{})})}),e.jsx(At,{path:"/admin/customer-service",element:e.jsx(Fs,{requiredRole:"admin",requiredPermissions:["manage-customer-service"],allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(UE,{})})}),e.jsx(At,{path:"/",element:e.jsx(zE,{})}),e.jsx(At,{path:"/company/:companySlug",element:e.jsx(GE,{children:e.jsx(iN,{})})}),e.jsx(At,{path:"/app",element:e.jsx(xa,{children:e.jsx(KE,{Component:$E})})}),e.jsx(At,{path:"/rebuttals",element:e.jsx(Fs,{fallbackPath:"/",children:e.jsx(xa,{children:e.jsx(lN,{})})})}),e.jsx(At,{path:"/disposition",element:e.jsx(Fs,{fallbackPath:"/",children:e.jsx(xa,{children:e.jsx(hN,{})})})}),e.jsx(At,{path:"/customerService",element:e.jsx(Fs,{fallbackPath:"/",children:e.jsx(xa,{children:e.jsx(YT,{})})})}),e.jsx(At,{path:"/faq",element:e.jsx(Fs,{fallbackPath:"/",children:e.jsx(xa,{children:e.jsx(IT,{})})})}),e.jsx(At,{path:"/scheduleScript",element:e.jsx(Fs,{fallbackPath:"/",children:e.jsx(xa,{children:e.jsx(MT,{})})})}),e.jsx(At,{path:"*",element:e.jsx(Pi,{to:"/",replace:!0})})]})})]})}const ZE=()=>{const t=console.warn,s=console.error,a=console.log;console.log=(...i)=>{const l=i.join(" ");!l.includes("res 65.246.84.74")&&!l.includes("got ip")&&!l.includes("timeDifference")&&!l.includes("firebase mounted")&&!l.includes("should call")&&!l.includes("called")&&!l.includes("Firebase apps")&&!l.includes("Initializing Firebase")&&!l.includes("Firebase initialized")&&!l.includes("Firebase Messaging initialized")&&!l.includes("req token")&&!l.includes("Requesting permission")&&!l.includes("firebase")&&!l.includes("worker init")&&!l.includes("worker messaging")&&!l.includes("loadAppData is resolved")&&!l.includes("Click is in the middle bottom")&&!l.includes("Click is in the bottom-right corner")&&!l.includes("Basemap iframe loaded successfully")&&a(...i)},console.warn=(...i)=>{const l=i.join(" ");!l.includes("mapContainer")&&!l.includes("Google Maps JavaScript API")&&!l.includes("Permissions policy violation")&&!l.includes("getNotifications")&&!l.includes("Invalid DOM property")&&!l.includes("componentWillMount")&&!l.includes("componentWillReceiveProps")&&!l.includes("ReactDOM.render is no longer supported")&&!l.includes("string ref")&&!l.includes("strict-mode-string-ref")&&!l.includes("mapTypeId_changed")&&!l.includes("styles_changed")&&!l.includes("google.maps.places.AutocompleteService")&&!l.includes("google.maps.places.PlacesService")&&!l.includes("google.maps.Marker")&&!l.includes("mapId is present")&&!l.includes("map styles are controlled via the cloud console")&&!l.includes("deprecated")&&!l.includes("not available to new customers")&&!l.includes("not scheduled to be discontinued")&&!l.includes("will continue to receive bug fixes")&&!l.includes("at least 12 months notice")&&!l.includes("migration guide")&&!l.includes("As of March 1st, 2025")&&!l.includes("As of February 21st, 2024")&&t(...i)},console.error=(...i)=>{const l=i.join(" ");!l.includes("getNotifications")&&!l.includes("Geolocation access has been blocked")&&!l.includes("InvalidValueError: in property address")&&!l.includes("Failed to decode downloaded font")&&!l.includes("OTS parsing error")&&!l.includes("Failed to load resource")&&!l.includes("Uncaught SyntaxError")&&!l.includes("InvalidAccessError: Failed to execute")&&!l.includes("applicationServerKey is not valid")&&!l.includes("Initialization error")&&!l.includes("Error while retrieving token")&&!l.includes("subscribe on PushManager")&&!l.includes("Error getting location")&&!l.includes("Geolocation has been disabled")&&!l.includes("worker init")&&!l.includes("worker messaging")&&!l.includes("ReferenceError: getNotifications")&&!l.includes("Geolocation has been disabled in this document")&&!l.includes("The notification permission was not granted and blocked instead")&&!l.includes("messaging/permission-blocked")&&s(...i)}};ZE();Y2();window.addEventListener("error",t=>{const s=t.message||"";if(s.includes("getNotifications")||s.includes("Geolocation")||s.includes("applicationServerKey")||s.includes("PushManager")||s.includes("mapContainer")||s.includes("InvalidValueError")||s.includes("ReferenceError")||s.includes("Failed to decode downloaded font")||s.includes("OTS parsing error")||s.includes("The notification permission was not granted and blocked instead")||s.includes("messaging/permission-blocked")||s.includes("Geolocation has been disabled in this document by permissions policy"))return t.preventDefault(),!1});window.addEventListener("unhandledrejection",t=>{const s=t.reason?.toString()||"";if(s.includes("Firebase")||s.includes("auth")||s.includes("firestore")||s.includes("messaging")||s.includes("ServiceWorker")||s.includes("Cache")||s.includes("fetch")||s.includes("getNotifications")||s.includes("PushManager")||s.includes("applicationServerKey")){console.log("Handled promise rejection:",s),t.preventDefault();return}console.warn("Unhandled promise rejection:",t.reason)});const XE={...console};console=new Proxy(console,{get(t,s){return s==="warn"||s==="error"||s==="log"?(...a)=>{const i=a.join(" ");i.includes("mapContainer")||i.includes("Google Maps JavaScript API")||i.includes("Permissions policy violation")||i.includes("getNotifications")||i.includes("Invalid DOM property")||i.includes("componentWillMount")||i.includes("componentWillReceiveProps")||i.includes("ReactDOM.render is no longer supported")||i.includes("string ref")||i.includes("strict-mode-string-ref")||i.includes("mapTypeId_changed")||i.includes("styles_changed")||i.includes("Geolocation access has been blocked")||i.includes("InvalidValueError: in property address")||i.includes("Failed to decode downloaded font")||i.includes("OTS parsing error")||i.includes("Failed to load resource")||i.includes("Uncaught SyntaxError")||i.includes("InvalidAccessError: Failed to execute")||i.includes("applicationServerKey is not valid")||i.includes("Initialization error")||i.includes("Error while retrieving token")||i.includes("subscribe on PushManager")||i.includes("Error getting location")||i.includes("Geolocation has been disabled")||i.includes("worker init")||i.includes("worker messaging")||i.includes("res 65.246.84.74")||i.includes("got ip")||i.includes("timeDifference")||i.includes("firebase mounted")||i.includes("should call")||i.includes("called")||i.includes("Firebase apps")||i.includes("Initializing Firebase")||i.includes("Firebase initialized")||i.includes("Firebase Messaging initialized")||i.includes("req token")||i.includes("Requesting permission")||i.includes("firebase")||i.includes("loadAppData is resolved")||i.includes("Click is in the middle bottom")||i.includes("Click is in the bottom-right corner")||i.includes("google.maps.places.AutocompleteService")||i.includes("google.maps.places.PlacesService")||i.includes("google.maps.Marker")||i.includes("mapId is present")||i.includes("map styles are controlled via the cloud console")||i.includes("deprecated")||i.includes("not available to new customers")||i.includes("not scheduled to be discontinued")||i.includes("will continue to receive bug fixes")||i.includes("at least 12 months notice")||i.includes("migration guide")||i.includes("ReferenceError: getNotifications")||i.includes("Geolocation has been disabled in this document")||i.includes("The notification permission was not granted and blocked instead")||i.includes("messaging/permission-blocked")||i.includes("Geolocation has been disabled in this document by permissions policy")||XE[s](...a)}:t[s]}});const eP=async()=>{try{console.log("Starting app initialization...");const t=document.getElementById("root");if(!t)throw new Error("Root element not found");console.log("Root element found, creating React root...");const s=W0.createRoot(t);console.log("Rendering app..."),s.render(e.jsx(Ll.StrictMode,{children:e.jsx(_b,{children:e.jsx(JE,{})})})),console.log("App rendered successfully")}catch(t){console.error("Failed to initialize app:",t);const s=document.getElementById("root");s&&(s.innerHTML=`
        <div style="color: red; padding: 20px; font-family: Arial, sans-serif;">
          <h2>Failed to initialize application</h2>
          <p>Please try refreshing the page.</p>
          <p><strong>Error:</strong> ${t.message}</p>
          <p><strong>Stack:</strong> ${t.stack}</p>
        </div>
      `)}};console.log("main.jsx loaded, starting initialization...");eP();
