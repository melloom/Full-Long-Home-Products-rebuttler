const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nodeConfig-CYnQWZpH.js","assets/index.esm2017-BZkcafvK.js","assets/config-Dar2JuxW.js"])))=>i.map(i=>d[i]);
import{r as Yc,g as br,a as Kc}from"./react-vendor-DDxydHEc.js";import{o as Lh,c as ne,q as je,g as ue,a as Ge,b as Qe,d as ie,u as _e,w as et,e as Te,f as Ke,h as kt,i as Ih,j as ot,k as Mh,s as en,l as ja,m as Ie,n as wt,p as Oh,r as Co,t as Qc}from"./index.esm2017-BZkcafvK.js";import{initializeFirebase as wr,auth as we,getDb as J,checkFirebaseConnection as ys}from"./config-Dar2JuxW.js";function Fh(t,s){for(var a=0;a<s.length;a++){const n=s[a];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const r=Object.getOwnPropertyDescriptor(n,i);r&&Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var In={exports:{}},Js={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko;function Uh(){if(ko)return Js;ko=1;var t=Yc(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,u){var l,p={},g=null,b=null;u!==void 0&&(g=""+u),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(b=d.ref);for(l in d)n.call(d,l)&&!r.hasOwnProperty(l)&&(p[l]=d[l]);if(c&&c.defaultProps)for(l in d=c.defaultProps,d)p[l]===void 0&&(p[l]=d[l]);return{$$typeof:s,type:c,key:g,ref:b,props:p,_owner:i.current}}return Js.Fragment=a,Js.jsx=o,Js.jsxs=o,Js}var Ao;function Bh(){return Ao||(Ao=1,In.exports=Uh()),In.exports}var e=Bh(),h=Yc();const Nr=br(h),Wh=Fh({__proto__:null,default:Nr},[h]);var Fa={},To;function Vh(){if(To)return Fa;To=1;var t=Kc();return Fa.createRoot=t.createRoot,Fa.hydrateRoot=t.hydrateRoot,Fa}var $h=Vh();const qh=br($h);var Sr=Kc();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ua(){return ua=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ua.apply(this,arguments)}var Qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qt||(Qt={}));const Do="popstate";function _h(t){t===void 0&&(t={});function s(n,i){let{pathname:r,search:o,hash:c}=n.location;return Ri("",{pathname:r,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function a(n,i){return typeof i=="string"?i:Jc(i)}return zh(s,a,null,t)}function Je(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Cr(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Hh(){return Math.random().toString(36).substr(2,8)}function Po(t,s){return{usr:t.state,key:t.key,idx:s}}function Ri(t,s,a,n){return a===void 0&&(a=null),ua({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Vs(s):s,{state:a,key:s&&s.key||n||Hh()})}function Jc(t){let{pathname:s="/",search:a="",hash:n=""}=t;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Vs(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substr(a),t=t.substr(0,a));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function zh(t,s,a,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:r=!1}=n,o=i.history,c=Qt.Pop,d=null,u=l();u==null&&(u=0,o.replaceState(ua({},o.state,{idx:u}),""));function l(){return(o.state||{idx:null}).idx}function p(){c=Qt.Pop;let v=l(),j=v==null?null:v-u;u=v,d&&d({action:c,location:f.location,delta:j})}function g(v,j){c=Qt.Push;let C=Ri(f.location,v,j);u=l()+1;let x=Po(C,u),N=f.createHref(C);try{o.pushState(x,"",N)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(N)}r&&d&&d({action:c,location:f.location,delta:1})}function b(v,j){c=Qt.Replace;let C=Ri(f.location,v,j);u=l();let x=Po(C,u),N=f.createHref(C);o.replaceState(x,"",N),r&&d&&d({action:c,location:f.location,delta:0})}function y(v){let j=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof v=="string"?v:Jc(v);return C=C.replace(/ $/,"%20"),Je(j,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,j)}let f={get action(){return c},get location(){return t(i,o)},listen(v){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Do,p),d=v,()=>{i.removeEventListener(Do,p),d=null}},createHref(v){return s(i,v)},createURL:y,encodeLocation(v){let j=y(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:b,go(v){return o.go(v)}};return f}var Eo;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Eo||(Eo={}));function Gh(t,s,a){return a===void 0&&(a="/"),Yh(t,s,a)}function Yh(t,s,a,n){let i=typeof s=="string"?Vs(s):s,r=ed(i.pathname||"/",a);if(r==null)return null;let o=Xc(t);Kh(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=om(r);c=nm(o[d],u)}return c}function Xc(t,s,a,n){s===void 0&&(s=[]),a===void 0&&(a=[]),n===void 0&&(n="");let i=(r,o,c)=>{let d={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};d.relativePath.startsWith("/")&&(Je(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let u=gs([n,d.relativePath]),l=a.concat(d);r.children&&r.children.length>0&&(Je(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Xc(r.children,s,l,u)),!(r.path==null&&!r.index)&&s.push({path:u,score:sm(u,r.index),routesMeta:l})};return t.forEach((r,o)=>{var c;if(r.path===""||!((c=r.path)!=null&&c.includes("?")))i(r,o);else for(let d of Zc(r.path))i(r,o,d)}),s}function Zc(t){let s=t.split("/");if(s.length===0)return[];let[a,...n]=s,i=a.endsWith("?"),r=a.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let o=Zc(n.join("/")),c=[];return c.push(...o.map(d=>d===""?r:[r,d].join("/"))),i&&c.push(...o),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Kh(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:am(s.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}const Qh=/^:[\w-]+$/,Jh=3,Xh=2,Zh=1,em=10,tm=-2,Ro=t=>t==="*";function sm(t,s){let a=t.split("/"),n=a.length;return a.some(Ro)&&(n+=tm),s&&(n+=Xh),a.filter(i=>!Ro(i)).reduce((i,r)=>i+(Qh.test(r)?Jh:r===""?Zh:em),n)}function am(t,s){return t.length===s.length&&t.slice(0,-1).every((n,i)=>n===s[i])?t[t.length-1]-s[s.length-1]:0}function nm(t,s,a){let{routesMeta:n}=t,i={},r="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],u=c===n.length-1,l=r==="/"?s:s.slice(r.length)||"/",p=im({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},l),g=d.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:gs([r,p.pathname]),pathnameBase:hm(gs([r,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(r=gs([r,p.pathnameBase]))}return o}function im(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,n]=rm(t.path,t.caseSensitive,t.end),i=s.match(a);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((u,l,p)=>{let{paramName:g,isOptional:b}=l;if(g==="*"){let f=c[p]||"";o=r.slice(0,r.length-f.length).replace(/(.)\/+$/,"$1")}const y=c[p];return b&&!y?u[g]=void 0:u[g]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:t}}function rm(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),Cr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,s?void 0:"i"),n]}function om(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Cr(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function ed(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,n=t.charAt(a);return n&&n!=="/"?null:t.slice(a)||"/"}const lm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cm=t=>lm.test(t);function dm(t,s){s===void 0&&(s="/");let{pathname:a,search:n="",hash:i=""}=typeof t=="string"?Vs(t):t,r;if(a)if(cm(a))r=a;else{if(a.includes("//")){let o=a;a=a.replace(/\/\/+/g,"/"),Cr(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+a))}a.startsWith("/")?r=Lo(a.substring(1),"/"):r=Lo(a,s)}else r=s;return{pathname:r,search:mm(n),hash:pm(i)}}function Lo(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?a.length>1&&a.pop():i!=="."&&a.push(i)}),a.length>1?a.join("/"):"/"}function Mn(t,s,a,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function um(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function td(t,s){let a=um(t);return s?a.map((n,i)=>i===a.length-1?n.pathname:n.pathnameBase):a.map(n=>n.pathnameBase)}function sd(t,s,a,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Vs(t):(i=ua({},t),Je(!i.pathname||!i.pathname.includes("?"),Mn("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),Mn("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),Mn("#","search","hash",i)));let r=t===""||i.pathname==="",o=r?"/":i.pathname,c;if(o==null)c=a;else{let p=s.length-1;if(!n&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?s[p]:"/"}let d=dm(i,c),u=o&&o!=="/"&&o.endsWith("/"),l=(r||o===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(u||l)&&(d.pathname+="/"),d}const gs=t=>t.join("/").replace(/\/\/+/g,"/"),hm=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mm=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pm=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gm(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ad=["post","put","patch","delete"];new Set(ad);const fm=["get",...ad];new Set(fm);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ha.apply(this,arguments)}const kr=h.createContext(null),xm=h.createContext(null),ba=h.createContext(null),hn=h.createContext(null),ts=h.createContext({outlet:null,matches:[],isDataRoute:!1}),nd=h.createContext(null);function wa(){return h.useContext(hn)!=null}function ss(){return wa()||Je(!1),h.useContext(hn).location}function id(t){h.useContext(ba).static||h.useLayoutEffect(t)}function tt(){let{isDataRoute:t}=h.useContext(ts);return t?Pm():vm()}function vm(){wa()||Je(!1);let t=h.useContext(kr),{basename:s,future:a,navigator:n}=h.useContext(ba),{matches:i}=h.useContext(ts),{pathname:r}=ss(),o=JSON.stringify(td(i,a.v7_relativeSplatPath)),c=h.useRef(!1);return id(()=>{c.current=!0}),h.useCallback(function(u,l){if(l===void 0&&(l={}),!c.current)return;if(typeof u=="number"){n.go(u);return}let p=sd(u,JSON.parse(o),r,l.relative==="path");t==null&&s!=="/"&&(p.pathname=p.pathname==="/"?s:gs([s,p.pathname])),(l.replace?n.replace:n.push)(p,l.state,l)},[s,n,o,r,t])}function Ar(){let{matches:t}=h.useContext(ts),s=t[t.length-1];return s?s.params:{}}function ym(t,s){return jm(t,s)}function jm(t,s,a,n){wa()||Je(!1);let{navigator:i}=h.useContext(ba),{matches:r}=h.useContext(ts),o=r[r.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=ss(),l;if(s){var p;let v=typeof s=="string"?Vs(s):s;d==="/"||(p=v.pathname)!=null&&p.startsWith(d)||Je(!1),l=v}else l=u;let g=l.pathname||"/",b=g;if(d!=="/"){let v=d.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=Gh(t,{pathname:b}),f=Cm(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:gs([d,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:gs([d,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,a,n);return s&&f?h.createElement(hn.Provider,{value:{location:ha({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Qt.Pop}},f):f}function bm(){let t=Dm(),s=gm(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},s),a?h.createElement("pre",{style:i},a):null,null)}const wm=h.createElement(bm,null);class Nm extends h.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?h.createElement(ts.Provider,{value:this.props.routeContext},h.createElement(nd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sm(t){let{routeContext:s,match:a,children:n}=t,i=h.useContext(kr);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),h.createElement(ts.Provider,{value:s},n)}function Cm(t,s,a,n){var i;if(s===void 0&&(s=[]),a===void 0&&(a=null),n===void 0&&(n=null),t==null){var r;if(!a)return null;if(a.errors)t=a.matches;else if((r=n)!=null&&r.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let o=t,c=(i=a)==null?void 0:i.errors;if(c!=null){let l=o.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);l>=0||Je(!1),o=o.slice(0,Math.min(o.length,l+1))}let d=!1,u=-1;if(a&&n&&n.v7_partialHydration)for(let l=0;l<o.length;l++){let p=o[l];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=l),p.route.id){let{loaderData:g,errors:b}=a,y=p.route.loader&&g[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||y){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((l,p,g)=>{let b,y=!1,f=null,v=null;a&&(b=c&&p.route.id?c[p.route.id]:void 0,f=p.route.errorElement||wm,d&&(u<0&&g===0?(Em("route-fallback"),y=!0,v=null):u===g&&(y=!0,v=p.route.hydrateFallbackElement||null)));let j=s.concat(o.slice(0,g+1)),C=()=>{let x;return b?x=f:y?x=v:p.route.Component?x=h.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=l,h.createElement(Sm,{match:p,routeContext:{outlet:l,matches:j,isDataRoute:a!=null},children:x})};return a&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?h.createElement(Nm,{location:a.location,revalidation:a.revalidation,component:f,error:b,children:C(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):C()},null)}var rd=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(rd||{}),od=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(od||{});function km(t){let s=h.useContext(kr);return s||Je(!1),s}function Am(t){let s=h.useContext(xm);return s||Je(!1),s}function Tm(t){let s=h.useContext(ts);return s||Je(!1),s}function ld(t){let s=Tm(),a=s.matches[s.matches.length-1];return a.route.id||Je(!1),a.route.id}function Dm(){var t;let s=h.useContext(nd),a=Am(),n=ld();return s!==void 0?s:(t=a.errors)==null?void 0:t[n]}function Pm(){let{router:t}=km(rd.UseNavigateStable),s=ld(od.UseNavigateStable),a=h.useRef(!1);return id(()=>{a.current=!0}),h.useCallback(function(i,r){r===void 0&&(r={}),a.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ha({fromRouteId:s},r)))},[t,s])}const Io={};function Em(t,s,a){Io[t]||(Io[t]=!0)}function Rm(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function ra(t){let{to:s,replace:a,state:n,relative:i}=t;wa()||Je(!1);let{future:r,static:o}=h.useContext(ba),{matches:c}=h.useContext(ts),{pathname:d}=ss(),u=tt(),l=sd(s,td(c,r.v7_relativeSplatPath),d,i==="path"),p=JSON.stringify(l);return h.useEffect(()=>u(JSON.parse(p),{replace:a,state:n,relative:i}),[u,p,i,a,n]),null}function Re(t){Je(!1)}function Lm(t){let{basename:s="/",children:a=null,location:n,navigationType:i=Qt.Pop,navigator:r,static:o=!1,future:c}=t;wa()&&Je(!1);let d=s.replace(/^\/*/,"/"),u=h.useMemo(()=>({basename:d,navigator:r,static:o,future:ha({v7_relativeSplatPath:!1},c)}),[d,c,r,o]);typeof n=="string"&&(n=Vs(n));let{pathname:l="/",search:p="",hash:g="",state:b=null,key:y="default"}=n,f=h.useMemo(()=>{let v=ed(l,d);return v==null?null:{location:{pathname:v,search:p,hash:g,state:b,key:y},navigationType:i}},[d,l,p,g,b,y,i]);return f==null?null:h.createElement(ba.Provider,{value:u},h.createElement(hn.Provider,{children:a,value:f}))}function Im(t){let{children:s,location:a}=t;return ym(Li(s),a)}new Promise(()=>{});function Li(t,s){s===void 0&&(s=[]);let a=[];return h.Children.forEach(t,(n,i)=>{if(!h.isValidElement(n))return;let r=[...s,i];if(n.type===h.Fragment){a.push.apply(a,Li(n.props.children,r));return}n.type!==Re&&Je(!1),!n.props.index||!n.props.children||Je(!1);let o={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Li(n.props.children,r)),a.push(o)}),a}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Mm="6";try{window.__reactRouterVersion=Mm}catch{}const Om="startTransition",Mo=Wh[Om];function Fm(t){let{basename:s,children:a,future:n,window:i}=t,r=h.useRef();r.current==null&&(r.current=_h({window:i,v5Compat:!0}));let o=r.current,[c,d]=h.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},l=h.useCallback(p=>{u&&Mo?Mo(()=>d(p)):d(p)},[d,u]);return h.useLayoutEffect(()=>o.listen(l),[o,l]),h.useEffect(()=>Rm(n),[n]),h.createElement(Lm,{basename:s,children:a,location:c.location,navigationType:c.action,navigator:o,future:n})}var Oo;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Oo||(Oo={}));var Fo;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fo||(Fo={}));const cd=h.createContext();function Rt(){return h.useContext(cd)}function Um({children:t}){const[s,a]=h.useState(null),[n,i]=h.useState(!0),[r,o]=h.useState(null);h.useEffect(()=>{const b=async()=>{try{console.log("üîç AuthContext: Starting Firebase initialization..."),await wr(),console.log("üîç AuthContext: Firebase initialized, setting up auth listener...");const f=localStorage.getItem("adminUser");return console.log("üîç AuthContext: Stored admin user:",f?JSON.parse(f):"None"),Lh(we,async j=>{if(console.log("üîç AuthContext: Auth state changed:",j?`User logged in (${j.email})`:"No user"),console.log("üîç AuthContext: User details:",j?{uid:j.uid,email:j.email,emailVerified:j.emailVerified,displayName:j.displayName}:"No user"),j)console.log("üîç AuthContext: User authenticated via Firebase Auth"),a(j),i(!1);else{if(f){console.log("üîç AuthContext: No Firebase Auth user, but found stored admin user"),console.log("üîç AuthContext: Attempting to restore session from localStorage");try{const C=JSON.parse(f);console.log("üîç AuthContext: Restoring user from localStorage:",C.email),a({uid:C.uid,email:C.email,displayName:C.displayName,emailVerified:C.emailVerified||!1,fromLocalStorage:!0})}catch(C){console.error("üîç AuthContext: Error parsing stored user:",C),localStorage.removeItem("adminUser"),a(null)}}else console.log("üîç AuthContext: No user found in Firebase Auth or localStorage - this is normal for new users"),a(null);i(!1)}},j=>{console.error("üîç AuthContext: Auth state change error:",j),o(j),i(!1)})}catch(f){console.error("üîç AuthContext: Firebase initialization error:",f),console.log("üîç AuthContext: Continuing without Firebase authentication"),a(null),i(!1)}},y=setTimeout(()=>{n&&(console.log("üîç AuthContext: Initialization timeout, continuing without Firebase"),i(!1))},1e4);return b(),()=>clearTimeout(y)},[]);const g={currentUser:s,loading:n,error:r,logout:()=>{a(null),localStorage.removeItem("adminUser"),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug")},clearAllAuthData:()=>{console.log("üßπ Clearing all authentication data..."),localStorage.removeItem("adminUser"),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug"),a(null),console.log("üßπ All authentication data cleared")},attemptSessionRestoration:async b=>{try{return console.log("üîç AuthContext: Attempting to restore Firebase Auth session..."),console.log("üîç AuthContext: Using localStorage for session persistence"),!0}catch(y){return console.error("üîç AuthContext: Session restoration failed:",y),!1}},hasPersistentSession:()=>{const b=localStorage.getItem("adminUser"),y=localStorage.getItem("companyUser");return!!(b||y)},getUserType:()=>{const b=localStorage.getItem("adminUser"),y=localStorage.getItem("companyUser");if(b)try{const f=JSON.parse(b);return console.log("üîç AuthContext: Found admin user:",f),y&&(console.log("üîç AuthContext: Clearing conflicting company user data"),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug")),{type:"admin",role:f.role,email:f.email}}catch(f){return console.error("üîç AuthContext: Error parsing admin user:",f),null}if(y)try{const f=JSON.parse(y);return console.log("üîç AuthContext: Found company user:",f),{type:"company-user",companyId:f.companyId,email:f.email}}catch(f){return console.error("üîç AuthContext: Error parsing company user:",f),null}return console.log("üîç AuthContext: No user found in localStorage"),null}};return n?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{children:"Loading application..."}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"Please wait while we initialize the application"})]}):e.jsx(cd.Provider,{value:g,children:t})}const Bm=()=>{const t=ss();h.useEffect(()=>{setTimeout(Fs,0),setTimeout(Fs,200)},[t.pathname])},Fs=()=>{window.scrollTo(0,0),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0);const t=document.querySelector(".main-content");t&&(t.scrollTop=0),document.querySelectorAll('[data-scrollable], [style*="overflow"]').forEach(s=>{s.scrollTop!==void 0&&(s.scrollTop=0)})},Wm=async()=>{if("serviceWorker"in navigator)try{console.log("Registering service worker...");const t=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1";console.log("Environment:",t?"Production":"Development"),console.log("Current URL:",window.location.href);const s=await navigator.serviceWorker.getRegistration();if(s)return console.log("Service worker already registered:",s),s;try{const n=await fetch("/sw.js",{method:"HEAD"});if(!n.ok)throw new Error(`Service worker file not found: ${n.status} ${n.statusText}`)}catch(n){console.warn("Could not check service worker file:",n.message)}const a=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});return console.log("SW registered successfully:",a),a.addEventListener("updatefound",()=>{console.log("Service worker update found");const n=a.installing;n.addEventListener("statechange",()=>{console.log("Service worker state changed:",n.state),n.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New service worker installed, showing update notification"),Vm(a))})}),a.addEventListener("error",n=>{console.error("Service worker registration error:",n)}),a}catch(t){throw console.error("SW registration failed:",t),t.name==="SecurityError"?console.error("Security error - service worker must be served over HTTPS in production"):t.name==="NetworkError"?console.error("Network error - service worker file not found"):t.name==="TypeError"?(console.error("Type error - service worker script has syntax errors"),console.error("Error details:",t.message)):t.name==="InvalidStateError"&&console.error("Invalid state error - service worker already registered"),t.message&&console.error("Error message:",t.message),t.stack&&console.error("Error stack:",t.stack),t}else console.log("Service Worker not supported in this browser or not in production")},Vm=t=>{confirm("New version available! Reload to update?")?(console.log("User accepted update, skipping waiting and reloading"),t.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()):console.log("User dismissed update notification")},$m=()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("New service worker activated")}),navigator.serviceWorker.addEventListener("message",t=>{console.log("Message from service worker:",t.data),t.data&&t.data.type==="SKIP_WAITING"&&(console.log("Skipping waiting and reloading"),window.location.reload())}),navigator.serviceWorker.addEventListener("error",t=>{console.error("Service worker error:",t)}))},Uo=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistration();return t?(console.log("Service worker registration found:",t),console.log("Service worker state:",t.active?"active":"inactive"),{registered:!0,active:!!t.active,waiting:!!t.waiting,installing:!!t.installing}):(console.log("No service worker registration found"),{registered:!1})}catch(t){return console.error("Error checking service worker status:",t),{registered:!1,error:t.message}}return{registered:!1,supported:!1}},qm="categories",_m="rebuttals",Hm="archived_rebuttals",zm=[{name:"Not Interested",icon:"‚ùå",color:"#FF6B6B"},{name:"Spouse Consultation",icon:"üíë",color:"#4ECDC4"},{name:"One Legger",icon:"üë§",color:"#45B7D1"},{name:"Not Ready",icon:"‚è≥",color:"#96CEB4"},{name:"Curious",icon:"ü§î",color:"#FFEEAD"},{name:"Time Concern",icon:"‚è∞",color:"#D4A5A5"},{name:"Can't Afford",icon:"üí∞",color:"#9B59B6"},{name:"Spouse",icon:"üë´",color:"#3498DB"},{name:"Price Phone",icon:"üìû",color:"#E67E22"},{name:"Repair",icon:"üîß",color:"#2ECC71"},{name:"Government Grants",icon:"üèõÔ∏è",color:"#34495E"},{name:"Reset Appointment",icon:"üîÑ",color:"#F1C40F"},{name:"No Request",icon:"üö´",color:"#E74C3C"},{name:"Bad Reviews",icon:"‚≠ê",color:"#F39C12"}],Gm=[{title:"Can't Afford",category:"Can't Afford",objection:"I can't afford this right now",response:{pt1:"I completely understand your concern about the cost. Many of our customers felt the same way initially, but they found that our solution actually saves them money in the long run. Let me explain how...",pt2:"If cost is still a concern, we have several flexible payment options and financing solutions that might work better for your budget. Would you like to hear about those?"},icon:"üí∞",color:"#9B59B6",tags:["cost","budget","payment"]},{title:"Reset Appointment",category:"Reset Appointment",objection:"I need to reschedule my appointment",response:{pt1:"I understand that things come up and schedules need to change. I'd be happy to help you find a new time that works better for you.",pt2:"What days and times would work better for your schedule? I'll make sure to find a slot that's convenient for you."},icon:"üîÑ",color:"#F1C40F",tags:["schedule","reschedule","appointment"]}];class Ym{constructor(){this.categoriesCollection=ne(J(),qm),this.rebuttalsCollection=ne(J(),_m),this.archivedRebuttalsCollection=ne(J(),Hm)}async initializeDefaultCategories(){try{const s=je(this.categoriesCollection);if(!(await ue(s)).empty){console.log("Categories already exist, skipping initialization");return}console.log("Creating default categories...");for(const n of zm)await this.addCategory(n);console.log("Default categories created successfully")}catch(s){throw console.error("Error initializing default categories:",s),s}}async getAllCategories(){try{await this.initializeDefaultCategories();const s=je(this.categoriesCollection,Ge("name","asc"));return(await ue(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){throw console.error("Error fetching categories:",s),s}}async addCategory(s){try{return(await Qe(this.categoriesCollection,{name:s.name,icon:s.icon||"üìã",color:s.color||"#808080",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}catch(a){throw console.error("Error adding category:",a),a}}async updateCategory(s,a){try{const n=ie(this.categoriesCollection,s);return await _e(n,{...a,updatedAt:new Date().toISOString()}),s}catch(n){throw console.error("Error updating category:",n),n}}async deleteCategory(s){try{const a=et(J()),n=ie(this.categoriesCollection,s),i=await Te(n);if(!i.exists())throw new Error("Category not found");const r=i.data(),o=je(this.rebuttalsCollection,Ke("category","==",r.name)),c=await ue(o);return c.forEach(d=>{const u=d.data(),l=ie(this.archivedRebuttalsCollection);a.set(l,{...u,originalCategory:r.name,archivedAt:new Date().toISOString(),archivedReason:"Category deleted",originalId:d.id}),a.delete(ie(this.rebuttalsCollection,d.id))}),a.delete(n),await a.commit(),{categoryId:s,archivedRebuttalsCount:c.size}}catch(a){throw console.error("Error deleting category:",a),a}}async restoreArchivedRebuttals(s){try{const a=et(J()),n=je(this.archivedRebuttalsCollection,Ke("archivedReason","==","Category deleted")),i=await ue(n);return i.forEach(r=>{const o=r.data(),c=ie(this.rebuttalsCollection);a.set(c,{...o,category:s,archivedAt:null,archivedReason:null,originalCategory:null,updatedAt:new Date().toISOString()}),a.delete(ie(this.archivedRebuttalsCollection,r.id))}),await a.commit(),{restoredCount:i.size}}catch(a){throw console.error("Error restoring archived rebuttals:",a),a}}async getArchivedRebuttals(){try{return(await ue(this.archivedRebuttalsCollection)).docs.map(a=>({id:a.id,...a.data()}))}catch(s){throw console.error("Error fetching archived rebuttals:",s),s}}async updateRebuttalCategory(s,a){try{const n=ie(this.rebuttalsCollection,s);return await _e(n,{category:a,updatedAt:new Date().toISOString()}),s}catch(n){throw console.error("Error updating rebuttal category:",n),n}}async resetAllRebuttals(){try{const s=je(this.rebuttalsCollection),a=await ue(s),n=et(J());a.docs.forEach(i=>{n.delete(i.ref)}),await n.commit(),console.log("Creating default rebuttals...");for(const i of Gm)await Qe(this.rebuttalsCollection,{...i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0});console.log("Default rebuttals created successfully")}catch(s){throw console.error("Error resetting rebuttals:",s),s}}}const Jt=new Ym,Km="rebuttals",Ua=()=>{if(!J())throw new Error("Firebase is not properly initialized. Please check your Firebase configuration.")};class Qm{constructor(){this.db=J()||kt(),this.rebuttalsCollection=ne(this.db,Km),this.archivedCollection=ne(this.db,"archived_rebuttals"),this.categoriesCollection=ne(this.db,"categories"),this.isOnline=navigator.onLine,this.pendingOperations=[],this.setupConnectionListeners()}setupConnectionListeners(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),Ih(this.db,()=>{this.processPendingOperations()})}handleOnline(){this.isOnline=!0,this.processPendingOperations()}handleOffline(){this.isOnline=!1}async processPendingOperations(){if(!this.isOnline)return;const s=[...this.pendingOperations];this.pendingOperations=[];for(const a of s)try{switch(a.type){case"add":await this.addRebuttal(a.data);break;case"update":await this.updateRebuttal(a.id,a.data);break;case"delete":await this.deleteRebuttal(a.id);break;case"archive":await this.archiveRebuttal(a.id);break;case"unarchive":await this.unarchiveRebuttal(a.id,a.category);break;case"addCategory":await this.addCategory(a.data);break;case"updateCategory":await this.updateCategory(a.id,a.data);break;case"deleteCategory":await this.deleteCategory(a.id);break}}catch(n){console.error("Error processing pending operation:",n),this.pendingOperations.push(a)}}async checkAndFixDocumentMismatches(){try{console.log("Checking for document ID mismatches...");const s=je(this.rebuttalsCollection,Ge("createdAt","desc")),n=(await ue(s)).docs.map(r=>({id:r.id,...r.data()}));console.log(`Found ${n.length} rebuttals in Firestore`);const i=n.map(r=>r.id);return console.log("Available document IDs:",i),{totalRebuttals:n.length,documentIds:i,rebuttals:n}}catch(s){throw console.error("Error checking document mismatches:",s),s}}async getAllRebuttals(){try{Ua(),console.log("Fetching all rebuttals...");const s=je(this.rebuttalsCollection,Ge("createdAt","desc")),n=(await ue(s)).docs.map(r=>({id:r.id,...r.data()})),i=n.reduce((r,o)=>{const c=o.category||"uncategorized";return r[c]=(r[c]||0)+1,r},{});return console.log("Rebuttals by category:",i),console.log(`Successfully fetched ${n.length} rebuttals`),n}catch(s){throw console.error("Error fetching rebuttals:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch rebuttals: ${s.message}`)}}async getActiveRebuttals(){try{Ua(),console.log("Fetching active rebuttals...");const s=je(this.rebuttalsCollection,Ke("archived","==",!1),Ge("createdAt","desc")),n=(await ue(s)).docs.map(i=>({id:i.id,...i.data()}));return console.log(`Successfully fetched ${n.length} active rebuttals`),n}catch(s){throw console.error("Error fetching active rebuttals:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch active rebuttals: ${s.message}`)}}async getArchivedRebuttals(){try{Ua(),console.log("Fetching archived rebuttals...");const s=je(this.archivedCollection,Ge("archivedAt","desc")),n=(await ue(s)).docs.map(i=>({id:i.id,...i.data()}));return console.log(`Successfully fetched ${n.length} archived rebuttals`),n}catch(s){throw console.error("Error fetching archived rebuttals:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch archived rebuttals: ${s.message}`)}}async getRebuttalsByCategory(s){try{const a=je(this.rebuttalsCollection,Ke("category","==",s),Ke("archived","==",!1),Ge("createdAt","desc"));return(await ue(a)).docs.map(i=>({id:i.id,...i.data()}))}catch(a){throw console.error("Error fetching rebuttals by category:",a),a}}async searchRebuttals(s){try{const a=je(this.rebuttalsCollection,Ke("archived","==",!1),Ge("createdAt","desc"));return(await ue(a)).docs.map(r=>({id:r.id,...r.data()})).filter(r=>{const o=s.toLowerCase();return r.title?.toLowerCase().includes(o)||r.objection?.toLowerCase().includes(o)||r.response?.toLowerCase().includes(o)||r.tags?.some(c=>c.toLowerCase().includes(o))})}catch(a){throw console.error("Error searching rebuttals:",a),a}}async getCategories(){try{Ua(),console.log("Fetching categories...");const s=je(this.categoriesCollection,Ge("name","asc")),n=(await ue(s)).docs.map(l=>({id:l.id,name:l.data().name,icon:l.data().icon||"üìã",slug:l.data().name.toLowerCase().replace(/\s+/g,"-")})),i=je(this.rebuttalsCollection),r=await ue(i),o=n.reduce((l,p)=>(l[p.slug]=p.id,l),{}),c=n.reduce((l,p)=>(l[p.id]=p.name,l),{}),d=n.reduce((l,p)=>(l[p.id]={rebuttalCount:0,lastUpdated:null,tags:new Set,rebuttals:[]},l),{});r.docs.forEach(l=>{const p=l.data();let g=p.category;if(g&&!g.match(/^[a-zA-Z0-9_-]{20}$/)&&(g=o[g.toLowerCase().replace(/\s+/g,"-")]),g&&d[g]&&(d[g].rebuttalCount++,d[g].rebuttals.push({id:l.id,title:p.title}),p.tags&&Array.isArray(p.tags)&&p.tags.forEach(b=>d[g].tags.add(b)),p.updatedAt)){const b=new Date(p.updatedAt);(!d[g].lastUpdated||b>new Date(d[g].lastUpdated))&&(d[g].lastUpdated=p.updatedAt)}});const u=n.map(l=>({...l,rebuttalCount:d[l.id].rebuttalCount,lastUpdated:d[l.id].lastUpdated,tags:Array.from(d[l.id].tags),rebuttals:d[l.id].rebuttals}));return console.log("Categories with stats:",{categories:u.map(l=>({id:l.id,name:l.name,rebuttalCount:l.rebuttalCount,rebuttals:l.rebuttals.map(p=>p.title)}))}),u}catch(s){throw console.error("Error fetching categories:",s),s.code&&console.error("Firebase error code:",s.code),new Error(`Failed to fetch categories: ${s.message}`)}}async addRebuttal(s){try{const a=we.currentUser;if(!a)throw new Error("User must be authenticated to add rebuttals");const n=ie(J(),"admins",a.uid);if(!(await Te(n)).exists())throw new Error("Only admins can add rebuttals");if(!this.isOnline)return this.pendingOperations.push({type:"add",data:s}),"pending";const r=je(this.categoriesCollection),c=(await ue(r)).docs.map(l=>({id:l.id,name:l.data().name,slug:l.data().name.toLowerCase().replace(/\s+/g,"-")})),d=c.reduce((l,p)=>(l[p.slug]=p.id,l),{});if(s.category){let l=s.category;if(!l.match(/^[a-zA-Z0-9_-]{20}$/)&&(l=d[l.toLowerCase().replace(/\s+/g,"-")],!l))throw new Error(`Category ${s.category} does not exist`);if(!c.some(g=>g.id===l))throw new Error(`Category ID ${l} does not exist`);s.category=l}if(!s.title||!s.category)throw new Error("Title and category are required fields");return(await Qe(this.rebuttalsCollection,{...s,archived:!1,createdBy:a.uid,createdAt:serverTimestamp(),updatedAt:serverTimestamp()})).id}catch(a){throw console.error("Error adding rebuttal:",a),a.code==="permission-denied"?new Error("You do not have permission to add rebuttals. Please make sure you are logged in as an admin."):a}}async updateRebuttal(s,a){try{if(!this.isOnline)return this.pendingOperations.push({type:"update",id:s,data:a}),"pending";const n=ie(this.rebuttalsCollection,s);if(!(await Te(n)).exists()){const r=ie(this.archivedCollection,s);throw(await Te(r)).exists()?new Error(`Rebuttal with ID ${s} has been archived and cannot be updated. Please unarchive it first.`):new Error(`Rebuttal with ID ${s} does not exist. It may have been deleted or the ID is incorrect.`)}if(a.category){const r=ie(this.categoriesCollection,a.category);if(!(await Te(r)).exists())throw new Error(`Category ${a.category} does not exist`)}return await _e(n,{...a,updatedAt:new Date().toISOString()}),s}catch(n){throw console.error("Error updating rebuttal:",n),n}}async archiveRebuttal(s){try{if(!this.isOnline)return this.pendingOperations.push({type:"archive",id:s}),"pending";const a=ie(this.rebuttalsCollection,s),n=await ue(je(this.rebuttalsCollection,Ke("__name__","==",s)));if(!n.empty){const i=n.docs[0].data();await Qe(this.archivedCollection,{...i,archivedAt:new Date().toISOString()}),await ot(a)}return s}catch(a){throw console.error("Error archiving rebuttal:",a),a}}async unarchiveRebuttal(s,a){try{const n=we.currentUser;if(!n)throw new Error("User must be authenticated to unarchive rebuttals");const i=ie(J(),"admins",n.uid);if(!(await Te(i)).exists())throw new Error("Only admins can unarchive rebuttals");if(!this.isOnline)return this.pendingOperations.push({type:"unarchive",id:s,category:a}),"pending";const o=ie(this.archivedCollection,s),c=await Te(o);if(!c.exists())throw new Error("Archived rebuttal not found");const d=c.data(),{archivedAt:u,archivedReason:l,originalCategory:p,...g}=d,b=await Qe(this.rebuttalsCollection,{...g,category:a||g.category,updatedAt:serverTimestamp(),createdAt:serverTimestamp()});return await ot(o),b.id}catch(n){throw console.error("Error unarchiving rebuttal:",n),n}}async deleteRebuttal(s){try{if(!this.isOnline)return this.pendingOperations.push({type:"delete",id:s}),"pending";const a=ie(this.rebuttalsCollection,s);return await ot(a),s}catch(a){throw console.error("Error deleting rebuttal:",a),a}}async retryConnection(){try{return await Mh(this.db),!0}catch(s){return console.error("Error retrying connection:",s),!1}}cleanup(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline)}async addCategory(s){try{return this.isOnline?{id:(await Qe(this.categoriesCollection,{...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...s}:(this.pendingOperations.push({type:"addCategory",data:s}),"pending")}catch(a){throw console.error("Error adding category:",a),a}}async updateCategory(s,a){try{if(!this.isOnline)return this.pendingOperations.push({type:"updateCategory",id:s,data:a}),"pending";const n=ie(this.categoriesCollection,s);return await _e(n,{...a,updatedAt:new Date().toISOString()}),{id:s,...a}}catch(n){throw console.error("Error updating category:",n),n}}async deleteCategory(s){try{if(!this.isOnline)return this.pendingOperations.push({type:"deleteCategory",id:s}),"pending";const a=je(this.rebuttalsCollection,Ke("category","==",s));if(!(await ue(a)).empty)throw new Error("Cannot delete category that is in use by rebuttals");const i=ie(this.categoriesCollection,s);return await ot(i),s}catch(a){throw console.error("Error deleting category:",a),a}}async resetAllRebuttals(){try{console.log("Starting to reset all rebuttals...");const s=[{name:"Can't Afford",icon:"üí∞",slug:"cant-afford"},{name:"Reset Appointment",icon:"üîÑ",slug:"reset-appt"},{name:"Not Interested",icon:"‚ùå",slug:"not-interested"},{name:"Spouse Consultation",icon:"üíë",slug:"spouse-consultation"},{name:"One Decision Maker",icon:"üë§",slug:"one-legger"},{name:"Not Ready",icon:"‚è≥",slug:"not-ready"},{name:"Just Curious",icon:"ü§î",slug:"curious"},{name:"Time Concern",icon:"‚è∞",slug:"time-concern"},{name:"Spouse Issues",icon:"üë´",slug:"spouse"},{name:"Price Over Phone",icon:"üìû",slug:"price-phone"},{name:"Repair Only",icon:"üîß",slug:"repair"},{name:"Government Grants",icon:"üèõÔ∏è",slug:"government-grants"},{name:"No Request",icon:"üö´",slug:"no-request"},{name:"Bad Reviews",icon:"‚≠ê",slug:"bad-reviews"}],a=je(this.categoriesCollection),i=(await ue(a)).docs.map(l=>({id:l.id,...l.data()})),r=i.reduce((l,p)=>{const g=p.slug||p.name.toLowerCase().replace(/\s+/g,"-");return l[g]=p.id,l},{}),o=et(this.db);for(const l of s)if(!i.find(g=>g.slug===l.slug||g.name.toLowerCase()===l.name.toLowerCase())){const g=ie(ne(this.db,"categories"));o.set(g,{...l,createdAt:serverTimestamp(),updatedAt:serverTimestamp()}),r[l.slug]=g.id}await o.commit(),console.log("Categories updated successfully");const c=await this.getAllRebuttals();console.log(`Found ${c.length} existing rebuttals to delete`);const d=et(this.db);c.forEach(l=>{const p=ie(this.db,"rebuttals",l.id);d.delete(p)});for(const l of Jm){const p=r[l.category];if(!p){console.warn(`Category ${l.category} not found in mapping, skipping rebuttal`);continue}const g=ie(ne(this.db,"rebuttals"));d.set(g,{...l,category:p,createdAt:serverTimestamp(),updatedAt:serverTimestamp(),archived:!1})}await d.commit(),console.log("Successfully reset all rebuttals");const u=await this.getAllRebuttals();return console.log(`Verified ${u.length} rebuttals after reset`),!0}catch(s){throw console.error("Error resetting rebuttals:",s),s}}}const us=new Qm,Jm=[{title:"Can't Afford Right Now",category:"cant-afford",objection:"I can't afford this right now",response:{pt1:"I understand that cost is an important consideration. We actually have a special 12-month promotion that makes this more affordable than you might think. Would you like to hear about our current offer?",pt2:"Our current promotion includes flexible payment options and no obligation. Would you be available for a quick consultation to discuss how we can make this work for your budget?"},icon:"üí∞",color:"#9B59B6",tags:["price","budget","payment","affordability"],steps:["Acknowledge concern","Present value","Mention promotion","Ask for availability"],tips:["Focus on value","Emphasize flexibility","Highlight current promotion"]},{title:"Need to Reset Appointment",category:"reset-appt",objection:"I need to reschedule my appointment",response:{pt1:"I understand that schedules can change. I'd be happy to help you find a new time that works better for you. What's a good time for you?",pt2:"We have several convenient time slots available. Would you prefer morning, afternoon, or evening? I can help you find the perfect time."},icon:"üîÑ",color:"#F1C40F",tags:["schedule","reschedule","appointment","timing"],steps:["Acknowledge request","Offer assistance","Suggest alternatives","Confirm new time"],tips:["Be flexible","Offer multiple options","Confirm availability"]},{title:"Not Interested",category:"not-interested",objection:"I'm not interested",response:{pt1:"I understand. Before you go, I'd like to share a quick overview of what makes our service unique. Many of our customers were initially hesitant but found great value in our approach.",pt2:"Would you be open to hearing about our current promotion? It's a limited-time offer that many of our customers have found compelling."},icon:"‚ùå",color:"#FF6B6B",tags:["disinterest","value","promotion","benefits"],steps:["Acknowledge position","Present value","Mention promotion","Ask for consideration"],tips:["Stay positive","Focus on benefits","Respect decision"]},{title:"Need to Consult Spouse",category:"spouse-consultation",objection:"I need to talk to my spouse first",response:{pt1:"That's completely understandable. Making decisions together is important. Would it be helpful if I provided some information you could share with your spouse?",pt2:"I can also schedule a time when you're both available to discuss this together. What would work better for you?"},icon:"üíë",color:"#4ECDC4",tags:["spouse","decision","consultation","family"],steps:["Acknowledge concern","Offer information","Suggest joint meeting","Find convenient time"],tips:["Be supportive","Provide materials","Offer flexibility"]},{title:"One Decision Maker",category:"one-legger",objection:"I'm the only one making this decision",response:{pt1:"I understand you're the decision maker. That actually makes this process more straightforward. Would you like to hear about our current promotion?",pt2:"Since you're making the decision, I can focus on addressing your specific needs and concerns. What aspects are most important to you?"},icon:"üë§",color:"#45B7D1",tags:["decision","authority","promotion","needs"],steps:["Acknowledge authority","Present value","Focus on needs","Ask for input"],tips:["Respect authority","Be direct","Focus on benefits"]},{title:"Not Ready to Start",category:"not-ready",objection:"I'm not ready to start yet",response:{pt1:"I understand you want to take your time with this decision. That's completely reasonable. Would you like to learn more about our current promotion?",pt2:"Our promotion is time-sensitive, but I can help you understand what's involved so you can make an informed decision when you're ready."},icon:"‚è≥",color:"#96CEB4",tags:["timing","decision","promotion","information"],steps:["Acknowledge position","Present value","Mention timing","Offer information"],tips:["Be patient","Provide information","Respect timeline"]},{title:"Just Curious",category:"curious",objection:"I was just curious",response:{pt1:"That's great! Curiosity often leads to great opportunities. Would you like to learn more about what makes our service unique?",pt2:"Many of our best customers started out just like you - curious about what we offer. I'd be happy to share more details about our current promotion."},icon:"ü§î",color:"#FFEEAD",tags:["interest","information","promotion","opportunity"],steps:["Acknowledge interest","Present value","Share information","Suggest next steps"],tips:["Be informative","Highlight benefits","Create interest"]},{title:"Time Concern",category:"time-concern",objection:"I don't have time for this",response:{pt1:"I understand time is valuable. Our process is actually quite efficient, and I can give you a quick overview of what's involved.",pt2:"Would you be open to a brief 15-minute consultation? I can help you understand if this is worth your time."},icon:"‚è∞",color:"#D4A5A5",tags:["time","efficiency","consultation","value"],steps:["Acknowledge concern","Present efficiency","Offer quick overview","Suggest brief meeting"],tips:["Be concise","Respect time","Focus on value"]},{title:"Spouse Issues",category:"spouse",objection:"My spouse won't agree to this",response:{pt1:"I understand that getting your spouse's agreement is important. Would it help if I provided some information you could share with them?",pt2:"Many couples find our approach appealing because of its flexibility and benefits. I can explain how it might work for your specific situation."},icon:"üë´",color:"#3498DB",tags:["spouse","agreement","information","benefits"],steps:["Acknowledge concern","Offer information","Present benefits","Suggest discussion"],tips:["Be supportive","Provide materials","Focus on benefits"]},{title:"Price Over Phone",category:"price-phone",objection:"I need the price over the phone",response:{pt1:"I understand you want to know the price. To provide you with the most accurate quote, I need to understand your specific needs.",pt2:"Would you be open to a quick 15-minute consultation? This will help me give you the most accurate price for your situation."},icon:"üìû",color:"#E67E22",tags:["price","quote","consultation","needs"],steps:["Acknowledge request","Explain process","Offer consultation","Emphasize accuracy"],tips:["Be transparent","Focus on value","Request consultation"]},{title:"Repair Only",category:"repair",objection:"I only need repairs",response:{pt1:"I understand you're focused on repairs. We actually offer comprehensive solutions that can prevent future issues and save you money in the long run.",pt2:"Would you like to hear about how our approach can address both your immediate repair needs and prevent future problems?"},icon:"üîß",color:"#2ECC71",tags:["repair","prevention","savings","solution"],steps:["Acknowledge need","Present value","Explain benefits","Offer information"],tips:["Focus on prevention","Highlight savings","Present value"]},{title:"Government Grants",category:"government-grants",objection:"I'm waiting for government grants",response:{pt1:"I understand you're interested in government grants. We can help you understand what's available and how our service can complement any grants you receive.",pt2:"Would you like to learn more about how our current promotion can work alongside government assistance programs?"},icon:"üèõÔ∏è",color:"#34495E",tags:["grants","government","assistance","promotion"],steps:["Acknowledge interest","Present options","Explain benefits","Offer information"],tips:["Be informative","Focus on compatibility","Highlight benefits"]},{title:"No Request",category:"no-request",objection:"I didn't request this information",response:{pt1:"I apologize if this contact was unexpected. I'm reaching out because we have a special promotion that might interest you.",pt2:"Would you like to hear about our current offer? If not, I'll be happy to remove you from our contact list."},icon:"üö´",color:"#E74C3C",tags:["unexpected","promotion","respect","choice"],steps:["Apologize","Present value","Offer choice","Respect decision"],tips:["Be respectful","Offer value","Provide choice"]},{title:"Bad Reviews",category:"bad-reviews",objection:"I've heard bad reviews about your service",response:{pt1:"I appreciate you sharing that concern. We take feedback seriously and have made significant improvements based on customer input.",pt2:"Would you be open to hearing about our current standards and how we've addressed past concerns? Many of our recent customers have been very satisfied."},icon:"‚≠ê",color:"#1ABC9C",tags:["reviews","improvement","satisfaction","standards"],steps:["Acknowledge concern","Present improvements","Share recent feedback","Offer information"],tips:["Be honest","Focus on improvements","Share success stories"]},{title:"Competitor Comparison",category:"not-interested",objection:"I'm going with a competitor",response:{pt1:"I understand you're considering other options. Before you make your final decision, I'd like to share what makes our service unique and how we might better meet your needs.",pt2:"Would you be open to a quick comparison of our services? I can highlight the key differences that might make us a better choice for you."},icon:"üîÑ",color:"#FF6B6B",tags:["competition","comparison","value","benefits"],steps:["Acknowledge choice","Present value","Offer comparison","Highlight differences"],tips:["Stay professional","Focus on strengths","Respect competition"]},{title:"Bad Experience",category:"bad-reviews",objection:"I had a bad experience before",response:{pt1:"I'm sorry to hear about your previous experience. We've made significant improvements to our service based on customer feedback.",pt2:"Would you be open to hearing about how we've addressed those issues? Many customers who had concerns in the past have been pleasantly surprised by our current service."},icon:"‚≠ê",color:"#1ABC9C",tags:["experience","improvement","service","feedback"],steps:["Acknowledge experience","Present improvements","Share success stories","Offer information"],tips:["Be empathetic","Focus on improvements","Share positive outcomes"]},{title:"Price Negotiation",category:"cant-afford",objection:"Can you lower the price?",response:{pt1:"I understand you're looking for the best value. While our prices are set to reflect the quality of our service, we do have a current promotion that offers significant savings.",pt2:"Would you like to hear about our current offer? It includes additional benefits that make it an even better value."},icon:"üí∞",color:"#9B59B6",tags:["price","negotiation","value","promotion"],steps:["Acknowledge request","Present value","Mention promotion","Highlight benefits"],tips:["Stay firm on value","Focus on benefits","Present promotion"]},{title:"Need to Research",category:"not-ready",objection:"I need to do more research",response:{pt1:"That's a wise approach. I'd be happy to provide you with more information to help with your research. What specific aspects would you like to know more about?",pt2:"We also have customer testimonials and case studies that might be helpful. Would you like me to share those with you?"},icon:"üìö",color:"#96CEB4",tags:["research","information","education","decision"],steps:["Support decision","Offer information","Provide resources","Suggest next steps"],tips:["Be helpful","Provide value","Respect process"]},{title:"Too Busy",category:"time-concern",objection:"I'm too busy right now",response:{pt1:"I understand you're busy. Our process is designed to be efficient and convenient. I can give you a quick overview of what's involved.",pt2:"Would you be open to a brief 15-minute consultation? I can help you determine if this is worth your time."},icon:"‚è∞",color:"#D4A5A5",tags:["time","efficiency","convenience","value"],steps:["Acknowledge concern","Present efficiency","Offer quick overview","Suggest brief meeting"],tips:["Be concise","Respect time","Focus on value"]},{title:"Need to Compare",category:"not-ready",objection:"I need to compare options",response:{pt1:"That's a smart approach. I'd be happy to provide you with a detailed comparison of our services versus other options.",pt2:"Would you like me to share our comparison guide? It highlights the key differences and benefits of our approach."},icon:"üìä",color:"#96CEB4",tags:["comparison","information","education","decision"],steps:["Support decision","Offer comparison","Provide information","Suggest next steps"],tips:["Be informative","Focus on strengths","Provide value"]},{title:"Not Priority",category:"not-ready",objection:"This isn't a priority right now",response:{pt1:"I understand this might not be your top priority. However, addressing this now could prevent more urgent issues in the future.",pt2:"Would you like to hear about how our service can help you avoid potential problems down the line?"},icon:"‚è≥",color:"#96CEB4",tags:["priority","prevention","value","timing"],steps:["Acknowledge position","Present value","Explain benefits","Offer information"],tips:["Focus on prevention","Highlight urgency","Present value"]},{title:"Need to Budget",category:"cant-afford",objection:"I need to budget for this",response:{pt1:"I understand the importance of budgeting. We offer flexible payment options that can help you plan your expenses.",pt2:"Would you like to hear about our current promotion and payment plans? They're designed to make this more manageable for your budget."},icon:"üí∞",color:"#9B59B6",tags:["budget","payment","planning","options"],steps:["Acknowledge concern","Present options","Explain benefits","Offer information"],tips:["Be flexible","Focus on planning","Present options"]},{title:"Need to Save",category:"cant-afford",objection:"I need to save up for this",response:{pt1:"I understand you want to save up. We actually have a special promotion that can help you get started sooner while still being budget-friendly.",pt2:"Would you like to hear about our current offer? It includes flexible payment options that might work better for your savings plan."},icon:"üí∞",color:"#9B59B6",tags:["savings","budget","payment","promotion"],steps:["Acknowledge concern","Present value","Mention promotion","Offer options"],tips:["Be flexible","Focus on savings","Present options"]},{title:"Need More Information",category:"curious",objection:"I need more information before deciding",response:{pt1:"I'd be happy to provide you with more detailed information. What specific aspects would you like to know more about?",pt2:"We have comprehensive guides and case studies that might help you make an informed decision. Would you like me to share those with you?"},icon:"üìö",color:"#FFEEAD",tags:["information","education","decision","details"],steps:["Acknowledge need","Offer information","Ask for specifics","Provide resources"],tips:["Be informative","Focus on details","Provide value"]},{title:"Want to Learn More",category:"curious",objection:"I want to learn more about your service",response:{pt1:"I'd be happy to walk you through our service in detail. What aspects are you most interested in learning about?",pt2:"We have a special presentation that highlights our unique approach and benefits. Would you like me to share that with you?"},icon:"üéì",color:"#FFEEAD",tags:["education","information","benefits","details"],steps:["Acknowledge interest","Offer details","Present value","Suggest next steps"],tips:["Be thorough","Focus on benefits","Create interest"]},{title:"Need to Check Schedule",category:"reset-appt",objection:"I need to check my schedule first",response:{pt1:"I understand you need to check your availability. I can hold a few time slots for you while you check your schedule.",pt2:"What time of day typically works best for you? I can help you find a convenient time that fits your schedule."},icon:"üìÖ",color:"#F1C40F",tags:["schedule","availability","timing","convenience"],steps:["Acknowledge need","Offer flexibility","Suggest times","Confirm availability"],tips:["Be flexible","Offer options","Respect schedule"]},{title:"Need to Check Calendar",category:"reset-appt",objection:"I need to check my calendar",response:{pt1:"I understand you need to check your calendar. I can help you find a time that works with your schedule.",pt2:"Would you prefer morning, afternoon, or evening appointments? I can hold some slots for you while you check."},icon:"üìÜ",color:"#F1C40F",tags:["calendar","scheduling","availability","convenience"],steps:["Acknowledge need","Offer options","Suggest times","Confirm preference"],tips:["Be flexible","Offer choices","Respect schedule"]},{title:"Need to Check with Team",category:"one-legger",objection:"I need to check with my team first",response:{pt1:"I understand you need to consult with your team. Would it be helpful if I provided some information you could share with them?",pt2:"I can also schedule a time when your team can be present to discuss this together. What would work better for you?"},icon:"üë•",color:"#45B7D1",tags:["team","consultation","decision","meeting"],steps:["Acknowledge need","Offer information","Suggest meeting","Find convenient time"],tips:["Be supportive","Provide materials","Offer flexibility"]},{title:"Need Team Approval",category:"one-legger",objection:"I need team approval for this",response:{pt1:"I understand you need team approval. I can provide you with a comprehensive proposal that addresses all the key points your team will need to consider.",pt2:"Would you like me to prepare a presentation that you can share with your team? It includes all the benefits and ROI calculations they'll need."},icon:"‚úÖ",color:"#45B7D1",tags:["approval","team","proposal","benefits"],steps:["Acknowledge need","Offer proposal","Present benefits","Suggest next steps"],tips:["Be thorough","Focus on ROI","Provide materials"]},{title:"Need to Check Budget",category:"cant-afford",objection:"I need to check my budget first",response:{pt1:"I understand you need to review your budget. We offer flexible payment options that can work with various budget constraints.",pt2:"Would you like to hear about our current promotion? It includes payment plans designed to fit different budget situations."},icon:"üí∞",color:"#9B59B6",tags:["budget","payment","options","promotion"],steps:["Acknowledge need","Present options","Mention promotion","Offer flexibility"],tips:["Be flexible","Focus on options","Present value"]},{title:"Need to Check Finances",category:"cant-afford",objection:"I need to check my finances",response:{pt1:"I understand you need to review your finances. We have several payment options that can accommodate different financial situations.",pt2:"Would you like to hear about our current promotion? It includes flexible payment terms that might work better for your financial situation."},icon:"üí≥",color:"#9B59B6",tags:["finances","payment","options","promotion"],steps:["Acknowledge need","Present options","Mention promotion","Offer flexibility"],tips:["Be flexible","Focus on options","Present value"]},{title:"Need to Check Reviews",category:"bad-reviews",objection:"I need to check your reviews first",response:{pt1:"I understand you want to check our reviews. We're proud of our recent customer feedback and would be happy to share some recent testimonials.",pt2:"Would you like to hear about some recent success stories? Many of our customers have shared their positive experiences."},icon:"‚≠ê",color:"#1ABC9C",tags:["reviews","testimonials","feedback","success"],steps:["Acknowledge need","Share testimonials","Present success stories","Offer information"],tips:["Be honest","Share recent feedback","Focus on improvements"]},{title:"Need to Check References",category:"bad-reviews",objection:"I need to check your references",response:{pt1:"I understand you want to check our references. We have several satisfied customers who would be happy to share their experiences.",pt2:"Would you like me to connect you with some of our recent customers? They can provide firsthand feedback about our service."},icon:"üìû",color:"#1ABC9C",tags:["references","testimonials","feedback","success"],steps:["Acknowledge need","Offer references","Share success stories","Connect with customers"],tips:["Be transparent","Share references","Focus on satisfaction"]}],Xm=({company:t,onLogin:s,onStartTraining:a})=>e.jsxs("div",{className:"company-landing",children:[e.jsx("header",{className:"company-header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"company-logo",children:[e.jsx("div",{className:"logo-icon",children:"üè¢"}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h1",{children:t.name}),e.jsx("span",{className:"tagline",children:"Training Platform"})]})]}),e.jsxs("nav",{className:"header-nav",children:[e.jsx("button",{className:"nav-btn",onClick:s,children:"Login"}),e.jsx("button",{className:"nav-btn primary",onClick:a,children:"Start Training"})]})]})}),e.jsx("section",{className:"hero-section",children:e.jsxs("div",{className:"hero-container",children:[e.jsxs("div",{className:"hero-content",children:[e.jsxs("h2",{className:"hero-title",children:["Welcome to ",t.name,"'s",e.jsx("span",{className:"gradient-text",children:" Training Platform"})]}),e.jsxs("p",{className:"hero-description",children:["Access your personalized training materials, rebuttals, and resources designed specifically for ",t.name," team members."]}),e.jsxs("div",{className:"hero-actions",children:[e.jsx("button",{className:"cta-primary",onClick:a,children:"Start Training Now"}),e.jsx("button",{className:"cta-secondary",onClick:s,children:"Login to Continue"})]})]}),e.jsx("div",{className:"hero-visual",children:e.jsxs("div",{className:"training-preview",children:[e.jsxs("div",{className:"preview-header",children:[e.jsxs("div",{className:"preview-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("div",{className:"preview-title",children:[t.name," Training"]})]}),e.jsxs("div",{className:"preview-content",children:[e.jsxs("div",{className:"preview-sidebar",children:[e.jsx("div",{className:"sidebar-item active",children:"üìö Training"}),e.jsx("div",{className:"sidebar-item",children:"üéØ Rebuttals"}),e.jsx("div",{className:"sidebar-item",children:"üìä Progress"}),e.jsx("div",{className:"sidebar-item",children:"‚ùì FAQ"})]}),e.jsxs("div",{className:"preview-main",children:[e.jsxs("div",{className:"preview-cards",children:[e.jsxs("div",{className:"preview-card",children:[e.jsx("div",{className:"card-icon",children:"üìà"}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-title",children:"Your Progress"}),e.jsx("div",{className:"card-value",children:"85%"})]})]}),e.jsxs("div",{className:"preview-card",children:[e.jsx("div",{className:"card-icon",children:"üéØ"}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-title",children:"Rebuttals"}),e.jsx("div",{className:"card-value",children:"24"})]})]})]}),e.jsx("div",{className:"preview-chart",children:e.jsxs("div",{className:"chart-bars",children:[e.jsx("div",{className:"bar",style:{height:"60%"}}),e.jsx("div",{className:"bar",style:{height:"80%"}}),e.jsx("div",{className:"bar",style:{height:"45%"}}),e.jsx("div",{className:"bar",style:{height:"90%"}})]})})]})]})]})})]})}),e.jsx("section",{className:"features-section",children:e.jsxs("div",{className:"features-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"What You'll Learn"}),e.jsxs("p",{className:"section-description",children:["Comprehensive training designed for ",t.name," team members"]})]}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"üéØ"}),e.jsx("h3",{className:"feature-title",children:"Smart Rebuttals"}),e.jsx("p",{className:"feature-description",children:"Learn effective responses to common objections and customer concerns."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"üìä"}),e.jsx("h3",{className:"feature-title",children:"Lead Management"}),e.jsx("p",{className:"feature-description",children:"Master lead disposition tracking and follow-up strategies."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"üí¨"}),e.jsx("h3",{className:"feature-title",children:"Customer Service"}),e.jsx("p",{className:"feature-description",children:"Develop excellent customer service skills and problem-solving techniques."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"‚ùì"}),e.jsx("h3",{className:"feature-title",children:"FAQ Knowledge"}),e.jsx("p",{className:"feature-description",children:"Access comprehensive answers to frequently asked questions."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"üìÖ"}),e.jsx("h3",{className:"feature-title",children:"Scheduling"}),e.jsx("p",{className:"feature-description",children:"Learn efficient scheduling and appointment management techniques."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"üìà"}),e.jsx("h3",{className:"feature-title",children:"Analytics"}),e.jsx("p",{className:"feature-description",children:"Track your progress and performance with detailed analytics."})]})]})]})}),e.jsx("section",{className:"cta-section",children:e.jsxs("div",{className:"cta-container",children:[e.jsx("h2",{className:"cta-title",children:"Ready to Start Your Training?"}),e.jsxs("p",{className:"cta-description",children:["Join your ",t.name," teammates and start improving your skills today."]}),e.jsxs("div",{className:"cta-buttons",children:[e.jsx("button",{className:"cta-primary",onClick:a,children:"Start Training Now"}),e.jsx("button",{className:"cta-secondary",onClick:s,children:"Login to Continue"})]})]})}),e.jsx("footer",{className:"company-footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section footer-brand",children:[e.jsxs("div",{className:"footer-logo",children:[e.jsx("span",{className:"logo-icon",children:"üè¢"}),e.jsx("span",{className:"logo-text",children:t.name})]}),e.jsxs("p",{className:"footer-description",children:["Professional training platform for ",t.name," team members"]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Training"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"#features",children:[e.jsx("span",{className:"link-icon",children:"‚ú®"})," Features"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#training",children:[e.jsx("span",{className:"link-icon",children:"üìö"})," Training Modules"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#rebuttals",children:[e.jsx("span",{className:"link-icon",children:"üí¨"})," Rebuttals"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#support",children:[e.jsx("span",{className:"link-icon",children:"üÜò"})," Support"]})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Resources"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"#help",children:[e.jsx("span",{className:"link-icon",children:"‚ùì"})," Help Center"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#contact",children:[e.jsx("span",{className:"link-icon",children:"üìß"})," Contact"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#privacy",children:[e.jsx("span",{className:"link-icon",children:"üîí"})," Privacy"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#terms",children:[e.jsx("span",{className:"link-icon",children:"üìÑ"})," Terms"]})})]})]})]}),e.jsxs("div",{className:"footer-bottom",children:[e.jsx("div",{className:"footer-divider"}),e.jsxs("p",{className:"footer-copyright",children:["¬© 2024 ",t.name,". All rights reserved."]})]})]})})]}),Zm=({company:t,onLogout:s})=>{const a=tt(),[n,i]=h.useState("dashboard"),[r,o]=h.useState([]),[c,d]=h.useState([]),[u,l]=h.useState([]),[p,g]=h.useState(!0),[b,y]=h.useState(null);h.useEffect(()=>{const j=()=>{const x=localStorage.getItem("companyUser");x&&y(JSON.parse(x))},C=async()=>{try{const x=J(),N=je(ne(x,"rebuttals"),Ke("companyId","==",t.id),Ge("createdAt","desc")),E=(await ue(N)).docs.map(O=>({id:O.id,...O.data()}));o(E);const z=je(ne(x,"categories"),Ke("companyId","==",t.id),Ge("createdAt","desc")),V=(await ue(z)).docs.map(O=>({id:O.id,...O.data()}));d(V);const $=je(ne(x,"faqs"),Ke("companyId","==",t.id),Ge("createdAt","desc")),_=(await ue($)).docs.map(O=>({id:O.id,...O.data()}));l(_)}catch(x){console.error("Error loading company data:",x)}finally{g(!1)}};j(),C()},[t.id]);const f=()=>{s(),a(`/company/${t.slug||t.id}`)},v=()=>{switch(n){case"rebuttals":return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Rebuttals"}),e.jsx("p",{children:"Learn effective responses to common objections"})]}),e.jsx("div",{className:"rebuttals-grid",children:r.map(j=>e.jsxs("div",{className:"rebuttal-card",children:[e.jsxs("div",{className:"rebuttal-header",children:[e.jsx("h3",{children:j.summary}),e.jsx("span",{className:"category-badge",children:j.category})]}),e.jsx("div",{className:"rebuttal-content",children:e.jsx("p",{children:j.content})})]},j.id))})]});case"faq":return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Frequently Asked Questions"}),e.jsx("p",{children:"Find answers to common questions"})]}),e.jsx("div",{className:"faq-list",children:u.map(j=>e.jsxs("div",{className:"faq-item",children:[e.jsx("h3",{className:"faq-question",children:j.question}),e.jsx("p",{className:"faq-answer",children:j.answer})]},j.id))})]});case"progress":return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Your Progress"}),e.jsx("p",{children:"Track your training progress and achievements"})]}),e.jsxs("div",{className:"progress-cards",children:[e.jsxs("div",{className:"progress-card",children:[e.jsx("div",{className:"progress-icon",children:"üìö"}),e.jsxs("div",{className:"progress-content",children:[e.jsx("h3",{children:"Training Modules"}),e.jsx("div",{className:"progress-value",children:"8/10"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"80%"}})})]})]}),e.jsxs("div",{className:"progress-card",children:[e.jsx("div",{className:"progress-icon",children:"üéØ"}),e.jsxs("div",{className:"progress-content",children:[e.jsx("h3",{children:"Rebuttals Mastered"}),e.jsx("div",{className:"progress-value",children:"24/30"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"80%"}})})]})]}),e.jsxs("div",{className:"progress-card",children:[e.jsx("div",{className:"progress-icon",children:"‚≠ê"}),e.jsxs("div",{className:"progress-content",children:[e.jsx("h3",{children:"Overall Score"}),e.jsx("div",{className:"progress-value",children:"85%"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"85%"}})})]})]})]})]});default:return e.jsxs("div",{className:"training-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsxs("h2",{children:["Welcome to ",t.name," Training"]}),e.jsx("p",{children:"Your personalized learning dashboard"})]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"dashboard-card",children:[e.jsx("div",{className:"card-icon",children:"üéØ"}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Rebuttals"}),e.jsxs("p",{children:[r.length," available"]}),e.jsx("button",{onClick:()=>i("rebuttals"),children:"View Rebuttals"})]})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("div",{className:"card-icon",children:"‚ùì"}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"FAQ"}),e.jsxs("p",{children:[u.length," questions"]}),e.jsx("button",{onClick:()=>i("faq"),children:"View FAQ"})]})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("div",{className:"card-icon",children:"üìä"}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Progress"}),e.jsx("p",{children:"Track your learning"}),e.jsx("button",{onClick:()=>i("progress"),children:"View Progress"})]})]})]})]})}};return p?e.jsx("div",{className:"company-training loading",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})}):e.jsxs("div",{className:"company-training",children:[e.jsx("header",{className:"training-header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"company-info",children:[e.jsxs("div",{className:"company-logo",children:[e.jsx("span",{className:"logo-icon",children:"üè¢"}),e.jsx("span",{className:"company-name",children:t.name})]}),e.jsx("span",{className:"training-badge",children:"Training Platform"})]}),e.jsxs("div",{className:"user-info",children:[e.jsxs("span",{className:"welcome-text",children:["Welcome, ",b?.name||b?.email]}),e.jsx("button",{className:"logout-btn",onClick:f,children:"Logout"})]})]})}),e.jsxs("div",{className:"training-layout",children:[e.jsx("nav",{className:"training-sidebar",children:e.jsxs("div",{className:"sidebar-nav",children:[e.jsxs("button",{className:`nav-item ${n==="dashboard"?"active":""}`,onClick:()=>i("dashboard"),children:[e.jsx("span",{className:"nav-icon",children:"üìä"}),e.jsx("span",{className:"nav-text",children:"Dashboard"})]}),e.jsxs("button",{className:`nav-item ${n==="rebuttals"?"active":""}`,onClick:()=>i("rebuttals"),children:[e.jsx("span",{className:"nav-icon",children:"üéØ"}),e.jsx("span",{className:"nav-text",children:"Rebuttals"})]}),e.jsxs("button",{className:`nav-item ${n==="faq"?"active":""}`,onClick:()=>i("faq"),children:[e.jsx("span",{className:"nav-icon",children:"‚ùì"}),e.jsx("span",{className:"nav-text",children:"FAQ"})]}),e.jsxs("button",{className:`nav-item ${n==="progress"?"active":""}`,onClick:()=>i("progress"),children:[e.jsx("span",{className:"nav-icon",children:"üìà"}),e.jsx("span",{className:"nav-text",children:"Progress"})]})]})}),e.jsx("main",{className:"training-main",children:v()})]})]})},ep=({company:t,onLogin:s,onBack:a})=>{const[n,i]=h.useState(""),[r,o]=h.useState(""),[c,d]=h.useState(!1),[u,l]=h.useState(""),p=async g=>{g.preventDefault(),d(!0),l("");try{const b=J(),y=je(ne(b,"company-registration-requests"),Ke("email","==",n.toLowerCase().trim())),f=await ue(y);if(!f.empty){const V=f.docs[0].data().status;if(V==="pending"){l("Your account is still being reviewed. Please wait to be contacted, or contact us at contact@mellowsites.com for assistance."),d(!1);return}if(V==="rejected"){l("Your registration request has been rejected. Please contact contact@mellowsites.com for more information."),d(!1);return}}const j=(await en(we,n,r)).user,C=ie(J(),"super-admins",j.uid),x=await Te(C);if(x.exists()){const k=x.data(),V={uid:j.uid,email:j.email,role:"super-admin",...k};localStorage.setItem("adminUser",JSON.stringify(V)),window.location.href="/admin/saas";return}const N=ie(J(),"company-admins",j.uid),R=await Te(N);if(R.exists()){const k=R.data();if(k.companyId===t.id){s({uid:j.uid,email:j.email,name:k.name||j.displayName,role:"company-admin",companyId:t.id});return}}const E=ie(J(),"users",j.uid),z=await Te(E);if(z.exists()){const k=z.data();k.companyId===t.id?s({uid:j.uid,email:j.email,name:k.name||j.displayName,role:k.role||"user",companyId:t.id}):l("You are not authorized to access this company's training platform.")}else l("User account not found. Please contact your administrator.")}catch(b){console.error("Login error:",b);try{await we.signOut()}catch{}switch(b.code){case"auth/user-not-found":l("No account found with this email address.");break;case"auth/wrong-password":l("Incorrect password.");break;case"auth/invalid-email":l("Invalid email address.");break;case"auth/too-many-requests":l("Too many failed attempts. Please try again later.");break;default:l("Login failed. Please try again.")}}finally{d(!1)}};return e.jsxs("div",{className:"company-login",children:[e.jsx("button",{className:"back-to-home-btn",onClick:a,children:"‚Üê Back to Home"}),e.jsxs("div",{className:"login-container",children:[e.jsx("div",{className:"login-header",children:e.jsxs("div",{className:"company-info",children:[e.jsxs("div",{className:"company-logo",children:[e.jsx("span",{className:"logo-icon",children:"üè¢"}),e.jsx("span",{className:"company-name",children:t.name})]}),e.jsx("h1",{className:"login-title",children:"Welcome Back"}),e.jsx("p",{className:"login-subtitle",children:"Sign in to access your training platform"})]})}),e.jsxs("div",{className:"login-form-container",children:[e.jsxs("form",{className:"login-form",onSubmit:p,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:n,onChange:g=>i(g.target.value),placeholder:"Enter your email",required:!0,disabled:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:g=>o(g.target.value),placeholder:"Enter your password",required:!0,disabled:c})]}),u&&e.jsx("div",{className:"error-message",children:u}),e.jsx("button",{type:"submit",className:"login-btn",disabled:c,children:c?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"login-footer",children:[e.jsxs("p",{className:"help-text",children:["Need help? Contact your ",t.name," administrator."]}),e.jsxs("div",{className:"login-links",children:[e.jsx("a",{href:"#forgot-password",children:"Forgot Password?"}),e.jsx("a",{href:"#contact-support",children:"Contact Support"})]})]})]})]})]})},tp=({company:t,children:s})=>{if(!t||t.status==="active")return s;const n=(i=>{switch(i){case"inactive":return{icon:"‚è∏Ô∏è",title:"Service Temporarily Unavailable",message:t.maintenanceMessage||"This service is currently inactive. Please check back later.",color:"yellow"};case"suspended":return{icon:"üö´",title:"Access Suspended",message:t.maintenanceMessage||"Access to this service has been suspended. Please contact support for assistance.",color:"red"};default:return{icon:"‚ö†Ô∏è",title:"Service Unavailable",message:"This service is currently unavailable. Please check back later.",color:"gray"}}})(t.status);return e.jsx("div",{className:"company-status-check",children:e.jsxs("div",{className:"status-container",children:[e.jsxs("div",{className:"status-content",children:[e.jsx("div",{className:`status-icon ${n.color}`,children:n.icon}),e.jsx("h1",{className:"status-title",children:n.title}),e.jsx("p",{className:"status-message",children:n.message}),e.jsx("div",{className:"status-details",children:e.jsxs("div",{className:"status-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Company:"}),e.jsx("span",{className:"info-value",children:t.name})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Status:"}),e.jsx("span",{className:`info-value status-${t.status}`,children:t.status?.charAt(0).toUpperCase()+t.status?.slice(1)})]})]})}),e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{className:"refresh-button",onClick:()=>window.location.reload(),children:"üîÑ Refresh Page"}),e.jsx("button",{className:"contact-button",onClick:()=>window.open("mailto:support@example.com","_blank"),children:"üìß Contact Support"})]}),e.jsxs("div",{className:"status-footer",children:[e.jsx("p",{children:"We apologize for any inconvenience."}),t.status==="suspended"&&e.jsx("p",{className:"suspended-note",children:"If you believe this is an error, please contact our support team."})]})]}),e.jsxs("div",{className:"status-background",children:[e.jsx("div",{className:"bg-shape shape-1"}),e.jsx("div",{className:"bg-shape shape-2"}),e.jsx("div",{className:"bg-shape shape-3"})]})]})})},sp=()=>{const{companySlug:t}=Ar(),s=tt(),[a,n]=h.useState(null),[i,r]=h.useState(!0),[o,c]=h.useState(null),[d,u]=h.useState("landing"),[l,p]=h.useState(!1);h.useEffect(()=>{if(t==="long-home"||t==="oLuxoJq8SHXXEWm9KSEU"){try{localStorage.setItem("currentCompanySlug","long-home")}catch{}s("/app",{replace:!0});return}(async()=>{try{console.log("üîç Loading company for slug:",t);const v=J();t&&localStorage.setItem("currentCompanySlug",t);const j=je(ne(v,"companies"),Ke("slug","==",t)),C=await ue(j);if(C.empty){const x=ie(v,"companies",t),N=await Te(x);if(N.exists()){const R={id:N.id,...N.data()};n(R),console.log("‚úÖ Company found by ID:",R)}else{const R={id:t,name:t.replace(/[-_]/g," ").replace(/\b\w/g,E=>E.toUpperCase())};console.warn("‚ö†Ô∏è Company not found in Firestore. Using fallback:",R),n(R)}}else{const x=C.docs[0],N={id:x.id,...x.data()};n(N),console.log("‚úÖ Company found:",N)}}catch(v){console.error("‚ùå Error loading company:",v);const j={id:t,name:t.replace(/[-_]/g," ").replace(/\b\w/g,C=>C.toUpperCase())};n(j)}finally{r(!1)}})()},[t]),h.useEffect(()=>{a&&(()=>{const v=localStorage.getItem("companyUser");v&&JSON.parse(v).companyId===a?.id&&p(!0)})()},[a]);const g=f=>{localStorage.setItem("companyUser",JSON.stringify({...f,companyId:a.id})),localStorage.setItem("currentCompanySlug",t),p(!0),u("training")},b=()=>{localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug"),p(!1),u("landing")},y=()=>i?e.jsx("div",{className:"company-platform loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsxs("p",{children:["Loading ",t,"..."]})]})}):o||!a?e.jsx("div",{className:"company-platform error",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{children:"Company Not Found"}),e.jsxs("p",{children:['The company "',t,'" could not be found.']}),e.jsx("button",{onClick:()=>s("/rebuttals"),children:"Go to Rebuttals"})]})}):e.jsx(tp,{company:a,children:(()=>{switch(d){case"login":return e.jsx(ep,{company:a,onLogin:g,onBack:()=>u("landing")});case"training":return e.jsx(Zm,{company:a,onLogout:b});default:return e.jsx(Xm,{company:a,onLogin:()=>u("login"),onStartTraining:()=>{u(l?"training":"login")}})}})()});return e.jsx("div",{className:"company-platform",children:y()})},ap=({onNavigate:t,searchQuery:s})=>{tt();const[a,n]=h.useState("all"),[i,r]=h.useState(s||""),[o,c]=h.useState(null),[d,u]=h.useState(!1),[l,p]=h.useState([]),[g,b]=h.useState(!0),[y,f]=h.useState([]),[v,j]=h.useState(30),C=h.useCallback(A=>{if(!A)return null;const _=(T,W)=>{if(!T)return"";for(const P of W)if(T[P])return T[P];return""},O=A.content&&typeof A.content=="object"?A.content:{},Y=A.response&&typeof A.response=="object"?A.response:{},U=typeof A.content=="string"?A.content:_(O,["pt1","initial","part1","content1","first","opening"])||_(Y,["pt1","initial","part1","content1","first","opening"])||A.summary||A.objection||"",w=_(O,["pt2","followup","followUp","part2","content2","second","closing"])||_(Y,["pt2","followup","followUp","part2","content2","second","closing"])||"";return{...A,content:{pt1:U,pt2:w}}},[]);h.useEffect(()=>{(async()=>{try{const _=await us.getCategories(),O=[{id:"all",name:"All Categories",icon:"üìã",color:"#6b7280"},..._.map(Y=>({id:Y.id,name:Y.name,icon:Y.icon||"üìã",color:"#3b82f6"}))];f(O)}catch(_){console.error("Error fetching categories:",_)}})()},[]),h.useEffect(()=>{const A=je(ne(J(),"rebuttals"),Ge("createdAt","desc")),_=ja(A,O=>{const Y=O.docs.map(U=>C({id:U.id,...U.data()}));p(Y),b(!1)},O=>{console.error("Error listening to rebuttals:",O),b(!1)});return()=>_()},[C]);const x=h.useMemo(()=>{let A=l;if(a!=="all"&&(A=A.filter(_=>{const O=_.category;if(!O)return!1;if(O===a)return!0;const Y=y.find(U=>U.id===a);return!!(Y&&O===Y.name||typeof O=="string"&&typeof a=="string"&&(O.toLowerCase()===a.toLowerCase()||Y&&O.toLowerCase()===Y.name.toLowerCase()))})),i.trim()){const _=i.toLowerCase();A=A.filter(O=>{const Y=O.title?.toLowerCase().includes(_),U=O.summary?.toLowerCase().includes(_),w=O.tags?.some(W=>W.toLowerCase().includes(_)),T=O.content?.pt1?.toLowerCase().includes(_)||O.content?.pt2?.toLowerCase().includes(_);return Y||U||w||T})}return A},[l,a,i,y]),N=h.useCallback(A=>{let _="";if(A.summary&&A.summary.trim())_=A.summary.trim();else if(A.situationOverview&&A.situationOverview.trim())_=A.situationOverview.trim();else if(A.description&&A.description.trim())_=A.description.trim();else if(A.objection&&A.objection.trim())_=A.objection.trim();else if(A.content?.pt1){const O=typeof A.content.pt1=="string"?A.content.pt1.trim():"";O&&(_=O.length>150?O.substring(0,150)+"...":O)}return _=_.replace(/\s+/g," ").trim(),_||"Click to view details"},[]),R=h.useMemo(()=>x.slice(0,v),[x,v]),E=h.useCallback(()=>{j(A=>A+30)},[]);h.useEffect(()=>{j(30)},[a,i]);const z=A=>{c(A),u(!0),document.body.style.overflow="hidden"},k=()=>{u(!1),c(null),document.body.style.overflow=""},V=A=>{if(!A)return null;const _=A.pt1||"",O=A.pt2||"";return e.jsxs("div",{className:"rebuttal-content-sections",children:[_&&e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:"üéØ Initial Response"}),e.jsx("p",{className:"modal-content-text",children:_})]}),O&&e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:"üîÑ Follow-up Response"}),e.jsx("p",{className:"modal-content-text",children:O})]}),!_&&!O&&e.jsx("p",{className:"modal-content-text",children:"No content available."})]})},$=A=>{if(A==="all")return l.length;const _=y.find(O=>O.id===A);return l.filter(O=>O.category?!!(O.category===A||_&&O.category===_.name||typeof O.category=="string"&&typeof A=="string"&&(O.category.toLowerCase()===A.toLowerCase()||_&&O.category.toLowerCase()===_.name.toLowerCase())):!1).length};return g?e.jsx("div",{className:"rebuttal-library-page",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading rebuttals..."})]})}):e.jsxs("div",{className:"rebuttal-library-page",children:[e.jsxs("div",{className:"library-page-header",children:[e.jsx("div",{className:"header-top",children:e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{className:"page-title",children:"Rebuttal Library"}),e.jsx("p",{className:"page-subtitle",children:"Access and manage your collection of rebuttals"})]})}),e.jsxs("div",{className:"search-wrapper",children:[e.jsxs("div",{className:"search-input-container",children:[e.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("input",{type:"text",className:"search-input",placeholder:"Search rebuttals by title, summary, or tags...",value:i,onChange:A=>r(A.target.value)}),i&&e.jsx("button",{className:"clear-search-button",onClick:()=>r(""),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),i&&e.jsxs("div",{className:"search-results-count",children:[x.length," result",x.length!==1?"s":""," found"]})]})]}),e.jsxs("div",{className:"library-main-content",children:[e.jsxs("aside",{className:"library-sidebar",children:[e.jsx("h2",{className:"sidebar-title",children:"Categories"}),e.jsx("div",{className:"categories-list",children:y.map(A=>e.jsxs("button",{className:`category-item ${a===A.id?"active":""}`,onClick:()=>n(A.id),children:[e.jsx("span",{className:"category-icon",children:A.icon}),e.jsx("span",{className:"category-name",children:A.name}),e.jsxs("span",{className:"category-count",children:["(",$(A.id),")"]})]},A.id))})]}),e.jsx("main",{className:"library-content-area",children:x.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìö"}),e.jsx("h3",{children:"No rebuttals found"}),e.jsx("p",{children:i?`No rebuttals match your search "${i}". Try a different search term.`:a!=="all"?"No rebuttals found in this category.":"No rebuttals available."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rebuttals-grid",children:R.map(A=>e.jsxs("div",{className:"rebuttal-card",onClick:()=>z(A),children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:A.title||"Untitled Rebuttal"})}),e.jsx("p",{className:"card-summary",children:N(A)}),A.tags&&Array.isArray(A.tags)&&A.tags.length>0&&e.jsxs("div",{className:"card-tags",children:[A.tags.slice(0,3).map(_=>e.jsxs("span",{className:"tag",children:["#",_]},_)),A.tags.length>3&&e.jsxs("span",{className:"tag-more",children:["+",A.tags.length-3," more"]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("span",{className:"view-button",children:"View Details ‚Üí"})})]},A.id))}),x.length>v&&e.jsx("div",{className:"load-more-container",children:e.jsxs("button",{className:"load-more-button",onClick:E,children:["Load More (",x.length-v," remaining)"]})})]})})]}),d&&o&&Sr.createPortal(e.jsx("div",{className:"rebuttal-modal-overlay",onClick:k,children:e.jsxs("div",{className:"rebuttal-modal-content",onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"rebuttal-modal-header",children:[e.jsx("h2",{className:"rebuttal-modal-title",children:o.title}),e.jsx("button",{className:"rebuttal-modal-close",onClick:k,children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("div",{className:"rebuttal-modal-body",children:[o.tags&&Array.isArray(o.tags)&&o.tags.length>0&&e.jsx("div",{className:"rebuttal-modal-tags",children:o.tags.map(A=>e.jsxs("span",{className:"rebuttal-modal-tag",children:["#",A]},A))}),e.jsxs("div",{className:"rebuttal-modal-summary",children:[e.jsx("h4",{className:"rebuttal-summary-title",children:"Situation Overview"}),e.jsx("p",{className:"rebuttal-summary-text",children:o.situationOverview||o.summary||o.objection||"No situation overview available."})]}),e.jsx("div",{className:"rebuttal-modal-content-section",children:V(o.content||o.response)})]}),e.jsx("div",{className:"rebuttal-modal-footer",children:e.jsx("button",{className:"rebuttal-close-button",onClick:k,children:"Close"})})]})}),document.body)]})},np=["Listen actively and acknowledge the customer's concerns","Stay calm and professional throughout the conversation","Use positive language and focus on solutions","Be prepared with relevant information and examples","Follow up appropriately if needed"],ip=({collapsed:t,onCollapseChange:s})=>{const[a,n]=h.useState([]),[i,r]=h.useState(null),[o,c]=h.useState(!1),[d,u]=h.useState(null),[l,p]=h.useState(!1),[g,b]=h.useState(!0),[y,f]=h.useState(t||!1),[v,j]=h.useState(!0);h.useEffect(()=>{typeof t=="boolean"&&f(t)},[t]),h.useEffect(()=>{(o||l)&&y&&(f(!1),s&&s(!1))},[o,l,y,s]),h.useEffect(()=>{(async()=>{b(!0);const E=await Jt.getAllCategories(),z=await us.getAllRebuttals(),k=E.map(V=>{const $=z.filter(A=>{const _=A.category||"",O=V.name||"",Y=V.id||"";return _===O||_===Y||_.toLowerCase()===O.toLowerCase()});return{id:V.id,name:V.name,description:V.description||"",icon:V.icon||"üìã",color:V.color||"#808080",items:$.map(A=>{let _={pt1:"",pt2:""};return typeof A.content=="string"?_.pt1=A.content:A.content&&typeof A.content=="object"?_={pt1:A.content.pt1||A.content.initial||A.content.part1||"",pt2:A.content.pt2||A.content.followup||A.content.part2||""}:typeof A.response=="string"?_.pt1=A.response:A.response&&typeof A.response=="object"&&(_={pt1:A.response.pt1||A.response.initial||A.response.part1||"",pt2:A.response.pt2||A.response.followup||A.response.part2||""}),_.pt1||(_.pt1=A.objection||""),{id:A.id,title:A.title,description:A.description||A.objection||A.summary||"",category:V.id,content:_,steps:A.steps||["Listen to customer concerns","Address specific needs","Present solution","Follow up as needed"],tips:A.tips||["Be professional and courteous","Focus on customer needs","Provide clear information"],tags:A.tags||[],situationOverview:A.situationOverview||"",summary:A.summary||"",objection:A.objection||"",situations:A.situations||[]}})}});n(k),b(!1)})()},[]);const C=R=>{u(R),p(!0),c(!1),y&&(f(!1),s&&s(!1))},x=()=>{c(!1),r(null)},N=()=>{p(!1),u(null)};return e.jsxs(e.Fragment,{children:[o&&i&&e.jsx("div",{className:"modal-overlay",onClick:x,children:e.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),style:{maxWidth:400,width:"95%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsxs("h2",{className:"modal-title",children:[i.name," Rebuttals"]})}),e.jsx("button",{onClick:x,className:"modal-close-button",children:"√ó"})]}),e.jsx("div",{className:"modal-body",children:i.items.length===0?e.jsx("div",{style:{color:"#888",fontSize:14},children:"No rebuttals in this category."}):i.items.map(R=>e.jsx("div",{className:"library-rebuttal-card",style:{cursor:"pointer",marginBottom:8,background:"#fff",borderRadius:6,boxShadow:"0 1px 3px rgba(0,0,0,0.04)",padding:8},onClick:()=>C(R),children:e.jsx("div",{className:"library-rebuttal-content",children:e.jsxs("div",{className:"library-rebuttal-info",children:[e.jsx("h4",{className:"library-rebuttal-title",style:{fontSize:15,margin:0},children:R.title}),e.jsx("p",{className:"library-rebuttal-summary",style:{fontSize:13,color:"#666",margin:0},children:R.summary})]})})},R.id))})]})}),l&&d&&e.jsx("div",{className:"modal-overlay",onClick:N,children:e.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),style:{maxWidth:480,width:"95%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{className:"modal-title",children:d.title})}),e.jsx("button",{onClick:N,className:"modal-close-button",children:"√ó"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"modal-tags",children:d.tags&&d.tags.map(R=>e.jsxs("span",{className:"modal-tag",children:["#",R]},R))}),e.jsx("div",{className:"modal-summary",children:e.jsx("p",{className:"modal-summary-text",children:d.situationOverview||d.summary||d.objection||"No situation overview available."})}),e.jsx("div",{className:"modal-rebuttal-content",children:d.content&&e.jsxs(e.Fragment,{children:[d.content.pt1&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("b",{children:"Initial Response:"})," ",d.content.pt1]}),d.content.pt2&&e.jsxs("div",{children:[e.jsx("b",{children:"Follow-up Response:"})," ",d.content.pt2]})]})}),e.jsxs("div",{className:"modal-tips",children:[e.jsx("div",{className:"modal-section-header",children:e.jsx("h3",{children:"Pro Tips & Best Practices"})}),e.jsx("div",{className:"tips-grid",children:(d.tips&&d.tips.length>0?d.tips:np).map((R,E)=>e.jsxs("div",{className:"tip-card",children:[e.jsxs("div",{className:"tip-card-header",children:[e.jsx("span",{className:"tip-icon",children:["üéØ","üí°","‚ö°","‚ú®","üåü"][E]||"üí°"}),e.jsxs("span",{className:"tip-number",children:["Tip ",E+1]})]}),e.jsx("div",{className:"tip-content",children:e.jsx("p",{className:"tip-text",children:R})})]},E))}),(!d.tips||d.tips.length===0)&&e.jsxs("div",{className:"default-tips-note",children:[e.jsx("span",{className:"default-tips-icon",children:"‚ÑπÔ∏è"}),e.jsxs("div",{className:"default-tips-content",children:[e.jsx("p",{className:"default-tips-title",children:"General Best Practices"}),e.jsx("p",{className:"default-tips-text",children:"These are general best practice tips. Consider adding specific tips for this rebuttal."})]})]})]})]}),d.situations&&d.situations.length>0&&e.jsxs("div",{className:"modal-situations",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsx("span",{style:{fontSize:18,marginRight:8},children:"üéØ"}),e.jsx("h3",{children:"Situations Used"})]}),e.jsx("div",{className:"situations-list",children:d.situations.map((R,E)=>e.jsx("div",{className:"situation-item",children:e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:R.title}),e.jsx("p",{className:"situation-description",children:R.description})]})},E))})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("div",{className:"modal-footer-note",children:"üí° Pro Tip: Start with the Initial Response. If customer still objects, use the Follow-up Response"}),e.jsx("button",{onClick:N,className:"modal-close-footer-button",children:"Close"})]})]})})]})},Ns=[{id:1,name:"Set Lead",category:"scheduled",description:"Lead has been set and scheduled for an appointment. This is a confirmed appointment where the customer has agreed to meet with a sales representative.",icon:"‚úÖ",color:"green",nextSteps:"Confirm appointment details and prepare for visit",tips:["Verify appointment time and date","Confirm customer contact information","Prepare necessary materials","Review customer history","Check for any special requirements"],examples:["Customer agreed to meet on Tuesday at 2 PM","Appointment confirmed for Saturday morning","Customer scheduled for evening consultation"],subcategories:["New Appointment","Rescheduled Appointment","Follow-up Appointment"]},{id:2,name:"Busy",category:"scheduled",description:"Customer is currently too busy to meet but has expressed interest in scheduling for a later time. This indicates potential interest but requires follow-up.",icon:"‚è∞",color:"yellow",nextSteps:"Schedule follow-up call in 1-2 weeks",tips:["Ask for specific timeframe when they might be available","Note their preferred contact times","Document their current busy period","Suggest alternative meeting times","Offer flexible scheduling options"],examples:["Customer in middle of home renovation","Customer traveling for next two weeks","Customer has family visiting"],subcategories:["Temporarily Busy","Seasonal Busy","Work Schedule Conflict"]},{id:3,name:"Call Back",category:"scheduled",description:"Customer has requested a callback at a specific time. This is a direct request for follow-up communication.",icon:"üìû",color:"blue",nextSteps:"Schedule callback within 24-48 hours",tips:["Get specific time preference","Confirm phone number","Note reason for callback","Set reminder for callback time","Prepare relevant information for callback"],examples:["Customer will be home after 6 PM","Customer needs to check schedule first","Customer requested weekend callback"],subcategories:["Time-Specific Callback","Information Gathering Callback","Decision Maker Callback"]},{id:4,name:"Closing Home Soon",category:"scheduled",description:"Customer is in the process of closing on their new home and wants to schedule after the closing is complete. This indicates high potential as they are actively in the home buying process.",icon:"üè°",color:"orange",nextSteps:"Follow up after closing date",tips:["Get expected closing date","Set reminder for post-closing contact","Document new home details","Prepare post-closing follow-up plan","Note any specific requirements for new home"],examples:["Closing scheduled for next month","Waiting for final loan approval","Home inspection pending"],subcategories:["Pending Closing","Post-Closing Follow-up","New Home Owner"]},{id:5,name:"Speak to Spouse",category:"scheduled",description:"Customer needs to consult with their spouse or partner before making a decision. This is common for major home improvement decisions.",icon:"üíë",color:"pink",nextSteps:"Follow up in 24-48 hours",tips:["Encourage scheduling when both can attend","Offer evening/weekend times","Prepare information for both decision makers","Document spouse's availability","Note any specific concerns to address"],examples:["Spouse out of town until weekend","Need to discuss budget together","Waiting for partner's input on style"],subcategories:["Joint Decision Required","Spouse Consultation","Family Decision"]},{id:6,name:"Not Set",category:"scheduled",description:"Initial contact made but no appointment set. This requires follow-up with a different approach or timing.",icon:"üîÑ",color:"gray",nextSteps:"Standard follow-up protocol",tips:["Note reason for no appointment","Try different approach next call","Document best contact times","Identify potential objections","Plan alternative presentation"],examples:["Customer needs to think about it","Timing not right","Need more information"],subcategories:["Initial Contact","Pending Decision","Information Gathering"]},{id:7,name:"Cancelled",category:"cancelled",description:"Appointment was cancelled",icon:"üö´",color:"red",nextSteps:"Document cancellation reason and reschedule if possible",tips:["Record cancellation reason","Offer alternative dates","Update scheduling system"]},{id:8,name:"Rescheduled",category:"rescheduled",description:"Appointment has been rescheduled",icon:"üîÑ",color:"orange",nextSteps:"Confirm new appointment details",tips:["Verify new date and time","Update all systems","Send confirmation to customer"]},{id:9,name:"Gov/Free",category:"not-qualified",description:"Only interested in free products/government aid",icon:"üèõÔ∏è",color:"cyan",nextSteps:"Mark as not qualified",tips:["Explain our services are not government funded","Offer information about financing options"]},{id:10,name:"No Interest/Time",category:"not-qualified",description:"Not interested or too busy",icon:"‚ùå",color:"red",nextSteps:"Mark as not interested, possible future contact",tips:["Try to understand their specific concerns","Leave door open for future needs"]},{id:11,name:"One Leg",category:"not-qualified",description:"Refuses to involve spouse or decision-maker",icon:"üë§",color:"indigo",nextSteps:"Attempt spouse inclusion or mark not qualified",tips:["Explain importance of joint decisions","Offer to speak with both parties"]},{id:12,name:"Price Over Phone",category:"not-qualified",description:"Wants a ballpark price only",icon:"üí∞",color:"green",nextSteps:"Explain need for in-home estimate",tips:["Emphasize accuracy of in-person quote","Mention free consultation value"]},{id:13,name:"Repair Only",category:"not-qualified",description:"Customer is only interested in repair services or tub liner installation, not a full replacement. This may indicate a need for education about full replacement benefits.",icon:"üîß",color:"brown",nextSteps:"Explain full replacement benefits or refer to repair services",tips:["Compare repair vs replacement costs","Highlight long-term value","Address common misconceptions","Provide repair service information","Document repair requirements"],examples:["Only wants to fix current issues","Budget constraints","Temporary solution needed"],subcategories:["Repair Service","Tub Liner","Partial Solution"]},{id:14,name:"Unqualified",category:"not-qualified",description:"Lead does not meet basic qualification criteria for our services. This could be due to various factors such as location, property type, or budget constraints.",icon:"üö´",color:"red",nextSteps:"Mark as unqualified, no further contact",tips:["Document reason for disqualification","Ensure proper categorization","Note any potential future qualification","Update CRM records","Remove from active leads"],examples:["Outside service area","Property type not suitable","Budget below minimum threshold"],subcategories:["Location Unqualified","Property Unqualified","Budget Unqualified"]},{id:15,name:"Already Completed",category:"not-qualified",description:"Customer has already completed the project with another provider or has no need for our services.",icon:"‚úÖ",color:"green",nextSteps:"Remove from active leads",tips:["Confirm completion details","Ask about other potential projects","Document competitor information","Note any future needs","Update customer status"],examples:["Project completed last month","Using different solution","No longer interested"],subcategories:["Project Completed","Alternative Solution","No Longer Interested"]},{id:16,name:"Commercial",category:"not-qualified",description:"Lead is for a commercial property or church, which may require different services or pricing structures.",icon:"üè¢",color:"blue",nextSteps:"Refer to commercial division if available",tips:["Confirm property type","Get decision maker contact info","Document commercial requirements","Note any special considerations","Prepare commercial service information"],examples:["Church property","Office building","Retail location"],subcategories:["Religious Property","Business Property","Institutional Property"]},{id:17,name:"DNC",category:"not-qualified",description:"Customer has requested to be placed on the Do Not Call list. This must be respected immediately and documented properly.",icon:"üîá",color:"red",nextSteps:"Add to do not call list immediately",tips:["Respect request immediately","Update all systems accordingly","Document DNC request","Remove from all marketing lists","Note reason if provided"],examples:["Explicit DNC request","Legal requirement","Customer preference"],subcategories:["Explicit DNC","Legal DNC","Temporary DNC"]},{id:18,name:"Insurance",category:"external",description:"Customer has an open insurance claim that needs to be resolved before proceeding with our services.",icon:"üõ°Ô∏è",color:"blue",nextSteps:"Follow up after claim resolution",tips:["Get claim timeline","Offer to work with insurance if applicable","Document claim details","Note insurance company information","Prepare insurance-related materials"],examples:["Water damage claim","Property damage claim","Insurance inspection pending"],subcategories:["Active Claim","Pending Approval","Claim Resolution"]},{id:19,name:"Job Inquiry",category:"not-qualified",description:"Looking for work, not a lead",icon:"üíº",color:"purple",nextSteps:"Refer to HR or mark as not qualified",tips:["Direct to appropriate department","Be polite but clear about purpose"]},{id:20,name:"Language Barrier",category:"technical",description:"Unable to communicate",icon:"üó£Ô∏è",color:"orange",nextSteps:"Attempt translator or bilingual rep",tips:["Try scheduling bilingual representative","Use translation services if available"]},{id:21,name:"Did Not Submit",category:"not-qualified",description:"Claims they didn't request info",icon:"‚ùì",color:"yellow",nextSteps:"Verify lead source and remove if confirmed",tips:["Explain where info came from","Apologize and remove if legitimate"]},{id:22,name:"Out of Area",category:"not-qualified",description:"Outside our market",icon:"üìç",color:"red",nextSteps:"Confirm location and mark not serviceable",tips:["Verify exact address","Apologize and explain service area"]},{id:23,name:"Out of Scope",category:"not-qualified",description:"Mobile home or similar we can't service",icon:"üèïÔ∏è",color:"brown",nextSteps:"Explain service limitations",tips:["Clarify property type","Refer to specialists if possible"]},{id:24,name:"Renter",category:"not-qualified",description:"Can't give landlord info",icon:"üè†",color:"gray",nextSteps:"Attempt to get landlord contact or mark not qualified",tips:["Explain need for owner permission","Offer to contact landlord directly"]},{id:25,name:"Wrong Number",category:"technical",description:"Lead confirmed number is incorrect",icon:"üìû",color:"red",nextSteps:"Update contact info or mark as bad lead",tips:["Try to get correct number","Verify lead source accuracy"]}],jt="dispositions",Wt=()=>{if(!J())throw new Error("Firebase is not properly initialized. Please check your Firebase configuration.")},On=()=>{if(!we.currentUser)throw new Error("User must be authenticated to perform this action");return we.currentUser},ks={getAllDispositions:async()=>{try{Wt();const t=je(ne(J(),jt),Ge("createdAt","desc")),s=await ue(t);return s.empty?(console.log("No dispositions found, initializing defaults..."),await ks.initializeDefaultDispositions(),(await ue(t)).docs.map(n=>({id:n.id,...n.data()}))):s.docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error fetching dispositions:",t),t}},getDispositionsByCategory:async t=>{try{Wt(),console.log(`Fetching dispositions for category: ${t}`);const s=je(ne(J(),jt),Ke("category","==",t),Ge("createdAt","desc")),n=(await ue(s)).docs.map(i=>({id:i.id,...i.data()}));return console.log(`Successfully fetched ${n.length} dispositions for category ${t}`),n}catch(s){throw console.error("Error fetching dispositions by category:",s),s}},searchDispositions:async t=>{try{Wt(),console.log("Searching dispositions...");const s=je(ne(J(),jt),Ge("createdAt","desc"));return(await ue(s)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>{const r=t.toLowerCase();return i.name?.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r)||i.category?.toLowerCase().includes(r)||i.nextSteps?.toLowerCase().includes(r)||i.tips?.some(o=>o.toLowerCase().includes(r))})}catch(s){throw console.error("Error searching dispositions:",s),s}},addDisposition:async t=>{try{Wt();const s=On();return(await Qe(ne(J(),jt),{...t,createdBy:s.uid,createdAt:Ie(),updatedAt:Ie()})).id}catch(s){throw console.error("Error adding disposition:",s),s}},updateDisposition:async(t,s)=>{try{Wt();const a=On(),n=ie(J(),jt,t);await _e(n,{...s,updatedBy:a.uid,updatedAt:Ie()})}catch(a){throw console.error("Error updating disposition:",a),a}},deleteDisposition:async t=>{try{Wt(),On();const s=ie(J(),jt,t);await ot(s)}catch(s){throw console.error("Error deleting disposition:",s),s}},debugListDispositions:async()=>{try{console.log("Debug: Listing all dispositions...");const t=je(ne(J(),jt)),s=await ue(t);return console.log(`Debug: Found ${s.size} dispositions in database:`),s.docs.forEach(a=>{console.log(`- ${a.data().name} (${a.data().category})`)}),s.docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Debug: Error listing dispositions:",t),t}},initializeDefaultDispositions:async()=>{try{if(console.log("Starting to initialize default dispositions..."),Wt(),!we.currentUser)throw new Error("User must be authenticated to initialize dispositions");const s=await ue(ne(J(),jt));if(console.log(`Found ${s.size} existing dispositions`),s.size>0){console.log("Deleting existing dispositions...");const n=et(J());s.docs.forEach(i=>{n.delete(i.ref)}),await n.commit(),console.log("Successfully deleted existing dispositions")}console.log("Adding all default dispositions...");const a=et(J());return Ns.forEach(n=>{const i=ie(ne(J(),jt));a.set(i,{...n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await a.commit(),console.log(`Successfully added ${Ns.length} default dispositions`),Ns.length}catch(t){throw console.error("Error initializing default dispositions:",t),t}},forceReinitializeDispositions:async()=>{try{if(console.log("Force reinitializing all dispositions..."),Wt(),!we.currentUser)throw new Error("User must be authenticated to initialize dispositions");const s=je(ne(J(),jt)),a=await ue(s);if(console.log(`Found ${a.size} existing dispositions to delete`),a.size>0){const o=et(J());a.docs.forEach(c=>{o.delete(c.ref)}),await o.commit(),console.log("Successfully deleted all existing dispositions")}console.log("Adding all dispositions from dispositions.js...");const n=et(J());Ns.forEach(o=>{const c=ie(ne(J(),jt));n.set(c,{...o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await n.commit(),console.log(`Successfully added ${Ns.length} dispositions`);const i=je(ne(J(),jt)),r=await ue(i);return console.log(`Verification: Found ${r.size} dispositions in database`),r.size}catch(t){throw console.error("Error force reinitializing dispositions:",t),t}},getDispositionCategories:async()=>{try{Wt();const t=je(ne(J(),jt)),s=await ue(t),a=new Set;s.docs.forEach(i=>{const r=i.data().category;r&&a.add(r)});const n=Array.from(a).map(i=>{const r=Ns.find(o=>o.category===i);return{id:i,name:i.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),icon:r?.icon||"üìã",color:r?.color||"gray"}});return[{id:"all",name:"All Categories",icon:"üìã",color:"gray"},...n]}catch(t){throw console.error("Error fetching disposition categories:",t),t}}},rp=({disposition:t,onClose:s})=>{if(!t)return null;const a=n=>{n.stopPropagation()};return Sr.createPortal(e.jsx("div",{className:"lead-disposition-modal-overlay",onClick:s,children:e.jsxs("div",{className:"lead-disposition-modal-content",onClick:a,children:[e.jsxs("div",{className:"lead-disposition-modal-header",children:[e.jsxs("div",{className:"lead-disposition-modal-title-wrapper",children:[e.jsx("span",{className:"lead-disposition-modal-icon",children:t.icon}),e.jsx("h2",{className:"lead-disposition-modal-title",children:t.name}),e.jsx("span",{className:"lead-disposition-modal-category",children:t.category})]}),e.jsx("button",{className:"lead-disposition-modal-close",onClick:s,children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("div",{className:"lead-disposition-modal-body",children:[e.jsxs("div",{className:"lead-disposition-modal-section lead-disposition-description-section",children:[e.jsx("h3",{className:"lead-disposition-section-title",children:"Description"}),e.jsx("p",{className:"lead-disposition-expanded-description",children:t.description})]}),t.examples&&t.examples.length>0&&e.jsxs("div",{className:"lead-disposition-modal-section lead-disposition-examples-section",children:[e.jsx("h3",{className:"lead-disposition-section-title",children:"Common Examples"}),e.jsx("div",{className:"lead-disposition-examples-grid",children:t.examples.map((n,i)=>e.jsxs("div",{className:"lead-disposition-example-card",children:[e.jsxs("div",{className:"lead-disposition-example-header",children:[e.jsx("span",{className:"lead-disposition-example-icon",children:"üìã"}),e.jsxs("span",{className:"lead-disposition-example-number",children:["Example ",i+1]})]}),e.jsx("p",{className:"lead-disposition-example-text",children:n})]},i))})]}),e.jsxs("div",{className:"lead-disposition-modal-section lead-disposition-next-steps-section",children:[e.jsx("h3",{className:"lead-disposition-section-title",children:"Next Steps"}),e.jsx("p",{className:"lead-disposition-next-steps-text",children:t.nextSteps})]}),t.tips&&t.tips.length>0&&e.jsxs("div",{className:"lead-disposition-modal-section lead-disposition-tips-section",children:[e.jsx("h3",{className:"lead-disposition-section-title",children:"Tips & Best Practices"}),e.jsx("ul",{className:"lead-disposition-tips-list",children:t.tips.map((n,i)=>e.jsxs("li",{className:"lead-disposition-tip-item",children:[e.jsx("span",{className:"lead-disposition-tip-icon",children:"üí°"}),e.jsx("span",{className:"lead-disposition-tip-text",children:n})]},i))})]}),t.subcategories&&t.subcategories.length>0&&e.jsxs("div",{className:"lead-disposition-modal-section lead-disposition-subcategories-section",children:[e.jsx("h3",{className:"lead-disposition-section-title",children:"Subcategories"}),e.jsx("div",{className:"lead-disposition-subcategories-grid",children:t.subcategories.map((n,i)=>e.jsxs("div",{className:"lead-disposition-subcategory-card",children:[e.jsx("span",{className:"lead-disposition-subcategory-icon",children:"üîπ"}),e.jsx("span",{className:"lead-disposition-subcategory-name",children:n})]},i))})]})]}),e.jsx("div",{className:"lead-disposition-modal-footer",children:e.jsx("button",{className:"lead-disposition-close-button",onClick:s,children:"Close"})})]})}),document.body)},op=({onNavigate:t,searchQuery:s})=>{const[a,n]=h.useState("all"),[i,r]=h.useState(null),[o,c]=h.useState(s||""),[d,u]=h.useState(!1),[l,p]=h.useState(!1),[g,b]=h.useState([]),[y,f]=h.useState(!1),[v,j]=h.useState(-1),[C,x]=h.useState([]),[N,R]=h.useState([]),[E,z]=h.useState(!0),[k,V]=h.useState(null),[$,A]=h.useState([]),_=h.useCallback(S=>{const M=$.find(F=>F.id===S);return M?M.icon:"üìã"},[$]),O=(S,M)=>{let F;return function(...oe){const ae=()=>{clearTimeout(F),S(...oe)};clearTimeout(F),F=setTimeout(ae,M)}},Y=async S=>{if(!S.trim()){b([]);return}try{const M=await ks.searchDispositions(S);b(M)}catch(M){console.error("Error searching dispositions:",M),V("Failed to search dispositions. Please try again.")}},U=h.useCallback(O(S=>{Y(S)},300),[]),w=S=>{const M=S.target.value;c(M),f(!0),j(-1),U(M)},T=S=>{if(y)switch(S.key){case"ArrowDown":S.preventDefault(),j(M=>M<g.length-1?M+1:M);break;case"ArrowUp":S.preventDefault(),j(M=>M>0?M-1:M);break;case"Enter":S.preventDefault(),v>=0&&v<g.length&&W(g[v]);break;case"Escape":f(!1);break}},W=S=>{c(S.name),f(!1),r(S),u(!0)},P=async()=>{try{z(!0),V(null),await ks.forceReinitializeDispositions();const S=await ks.getAllDispositions();x(S),R(S)}catch(S){console.error("Error reinitializing dispositions:",S),V("Failed to reinitialize dispositions. Please try again later.")}finally{z(!1)}};h.useEffect(()=>{(async()=>{try{z(!0),V(null);const[M,F]=await Promise.all([ks.getAllDispositions(),ks.getDispositionCategories()]);x(M),R(M),A(F)}catch(M){console.error("Error fetching data:",M),V("Failed to load data. Please try again later.")}finally{z(!1)}})()},[]),h.useEffect(()=>{if(!C)return;let S=C;if(a!=="all"&&(S=S.filter(M=>M.category===a)),o){const M=o.toLowerCase();S=S.filter(F=>F.name.toLowerCase().includes(M)||F.description.toLowerCase().includes(M)||F.nextSteps.toLowerCase().includes(M)||Array.isArray(F.tips)&&F.tips.some(X=>X.toLowerCase().includes(M)))}R(S)},[C,o,a]),h.useEffect(()=>{n("all"),c("")},[]);const L=S=>{r(S),u(!0),document.body.style.overflow="hidden"},q=()=>{u(!1),r(null),document.body.style.overflow=""},m=h.useCallback(S=>S==="all"?N.length:N.filter(M=>M.category===S).length,[N]),D=h.useMemo(()=>{const S=[{id:"all",name:"All Categories",icon:"üìã"}],M=Array.from(new Set(C.map(F=>F.category))).filter(Boolean).map(F=>({id:F,name:F,icon:_(F)}));return[...S,...M]},[C,_]);return E?e.jsx("div",{className:"lead-disposition-page",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading dispositions..."})]})}):k?e.jsx("div",{className:"lead-disposition-page",children:e.jsxs("div",{className:"error",children:[e.jsx("p",{children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Retry"})]})}):e.jsxs("div",{className:"lead-disposition-page",children:[e.jsxs("div",{className:"lead-disposition-page-header",children:[e.jsxs("div",{className:"header-top",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{className:"page-title",children:"Lead Disposition"}),e.jsx("p",{className:"page-subtitle",children:"Track and manage your lead dispositions"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{onClick:P,className:"reinitialize-button",disabled:E,children:E?"Reinitializing...":"Reinitialize Dispositions"})})]}),e.jsxs("div",{className:"search-wrapper",children:[e.jsxs("div",{className:"search-input-container",children:[e.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("input",{type:"text",className:"search-input",placeholder:"Search lead dispositions...",value:o,onChange:w,onKeyDown:T}),o&&e.jsx("button",{className:"clear-search-button",onClick:()=>{c(""),f(!1),b([])},children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),y&&g.length>0&&e.jsx("div",{className:"search-suggestions-dropdown",children:g.map((S,M)=>e.jsxs("div",{className:`suggestion-item ${M===v?"selected":""}`,onClick:()=>W(S),children:[e.jsx("span",{className:"suggestion-icon",children:S.icon||"üìã"}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h4",{children:S.name}),e.jsx("p",{children:S.description})]})]},S.id))}),o&&e.jsxs("div",{className:"search-results-count",children:[N.length," result",N.length!==1?"s":""," found"]})]})]}),e.jsxs("div",{className:"lead-disposition-main-content",children:[e.jsxs("aside",{className:"lead-disposition-sidebar",children:[e.jsx("h2",{className:"sidebar-title",children:"Categories"}),e.jsx("div",{className:"categories-list",children:D.map(S=>e.jsxs("button",{className:`category-item ${a===S.id?"active":""}`,onClick:()=>n(S.id),children:[e.jsx("span",{className:"category-icon",children:S.icon}),e.jsx("span",{className:"category-name",children:S.name}),e.jsxs("span",{className:"category-count",children:["(",m(S.id),")"]})]},S.id))})]}),e.jsx("main",{className:"lead-disposition-content-area",children:N.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìã"}),e.jsx("h3",{children:"No dispositions found"}),e.jsx("p",{children:o?`No dispositions match your search "${o}". Try a different search term.`:a!=="all"?"No dispositions found in this category.":"No dispositions available."})]}):e.jsx("div",{className:"dispositions-grid",children:N.map(S=>e.jsxs("div",{className:"disposition-card",onClick:()=>L(S),children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"card-icon",children:S.icon}),e.jsxs("div",{className:"card-title-container",children:[e.jsx("h2",{className:"card-title",children:S.name}),e.jsx("span",{className:"card-category",children:S.category})]})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{className:"card-description",children:S.description}),e.jsxs("div",{className:"card-preview",children:[e.jsxs("div",{className:"preview-section",children:[e.jsx("h4",{children:"Next Steps"}),e.jsx("p",{children:S.nextSteps})]}),S.tips&&S.tips.length>0&&e.jsxs("div",{className:"preview-section",children:[e.jsx("h4",{children:"Key Tips"}),e.jsxs("ul",{children:[S.tips.slice(0,2).map((M,F)=>e.jsx("li",{children:M},F)),S.tips.length>2&&e.jsxs("li",{className:"more-tips",children:["+",S.tips.length-2," more tips"]})]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("span",{className:"click-hint",children:"Click to view full details"})})]})]},S.id))})})]}),d&&i&&e.jsx(rp,{disposition:i,onClose:q})]})},mn=({value:t,onChange:s,onClear:a,placeholder:n="Search...",onKeyDown:i,className:r="",autoFocus:o=!1,ariaLabel:c="Search",...d})=>e.jsxs("div",{className:`searchbar-container ${r}`,children:[e.jsx("span",{className:"searchbar-icon","aria-hidden":"true",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("input",{type:"text",className:"searchbar-input",value:t,onChange:s,onKeyDown:i,placeholder:n,autoFocus:o,"aria-label":c,...d}),t&&e.jsx("button",{type:"button",className:"searchbar-clear",onClick:a,"aria-label":"Clear search",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]});var Fn={exports:{}},Bo;function lp(){return Bo||(Bo=1,(function(t){var s=(function(a){var n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(P,L,q){P[L]=q.value},o,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(P,L,q){return Object.defineProperty(P,L,{value:q,enumerable:!0,configurable:!0,writable:!0}),P[L]}try{p({},"")}catch{p=function(L,q,m){return L[q]=m}}function g(P,L,q,m){var D=L&&L.prototype instanceof x?L:x,S=Object.create(D.prototype),M=new w(m||[]);return r(S,"_invoke",{value:_(P,q,M)}),S}a.wrap=g;function b(P,L,q){try{return{type:"normal",arg:P.call(L,q)}}catch(m){return{type:"throw",arg:m}}}var y="suspendedStart",f="suspendedYield",v="executing",j="completed",C={};function x(){}function N(){}function R(){}var E={};p(E,d,function(){return this});var z=Object.getPrototypeOf,k=z&&z(z(T([])));k&&k!==n&&i.call(k,d)&&(E=k);var V=R.prototype=x.prototype=Object.create(E);N.prototype=R,r(V,"constructor",{value:R,configurable:!0}),r(R,"constructor",{value:N,configurable:!0}),N.displayName=p(R,l,"GeneratorFunction");function $(P){["next","throw","return"].forEach(function(L){p(P,L,function(q){return this._invoke(L,q)})})}a.isGeneratorFunction=function(P){var L=typeof P=="function"&&P.constructor;return L?L===N||(L.displayName||L.name)==="GeneratorFunction":!1},a.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,R):(P.__proto__=R,p(P,l,"GeneratorFunction")),P.prototype=Object.create(V),P},a.awrap=function(P){return{__await:P}};function A(P,L){function q(S,M,F,X){var oe=b(P[S],P,M);if(oe.type==="throw")X(oe.arg);else{var ae=oe.arg,H=ae.value;return H&&typeof H=="object"&&i.call(H,"__await")?L.resolve(H.__await).then(function(se){q("next",se,F,X)},function(se){q("throw",se,F,X)}):L.resolve(H).then(function(se){ae.value=se,F(ae)},function(se){return q("throw",se,F,X)})}}var m;function D(S,M){function F(){return new L(function(X,oe){q(S,M,X,oe)})}return m=m?m.then(F,F):F()}r(this,"_invoke",{value:D})}$(A.prototype),p(A.prototype,u,function(){return this}),a.AsyncIterator=A,a.async=function(P,L,q,m,D){D===void 0&&(D=Promise);var S=new A(g(P,L,q,m),D);return a.isGeneratorFunction(L)?S:S.next().then(function(M){return M.done?M.value:S.next()})};function _(P,L,q){var m=y;return function(S,M){if(m===v)throw new Error("Generator is already running");if(m===j){if(S==="throw")throw M;return W()}for(q.method=S,q.arg=M;;){var F=q.delegate;if(F){var X=O(F,q);if(X){if(X===C)continue;return X}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(m===y)throw m=j,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);m=v;var oe=b(P,L,q);if(oe.type==="normal"){if(m=q.done?j:f,oe.arg===C)continue;return{value:oe.arg,done:q.done}}else oe.type==="throw"&&(m=j,q.method="throw",q.arg=oe.arg)}}}function O(P,L){var q=L.method,m=P.iterator[q];if(m===o)return L.delegate=null,q==="throw"&&P.iterator.return&&(L.method="return",L.arg=o,O(P,L),L.method==="throw")||q!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+q+"' method")),C;var D=b(m,P.iterator,L.arg);if(D.type==="throw")return L.method="throw",L.arg=D.arg,L.delegate=null,C;var S=D.arg;if(!S)return L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,C;if(S.done)L[P.resultName]=S.value,L.next=P.nextLoc,L.method!=="return"&&(L.method="next",L.arg=o);else return S;return L.delegate=null,C}$(V),p(V,l,"Generator"),p(V,d,function(){return this}),p(V,"toString",function(){return"[object Generator]"});function Y(P){var L={tryLoc:P[0]};1 in P&&(L.catchLoc=P[1]),2 in P&&(L.finallyLoc=P[2],L.afterLoc=P[3]),this.tryEntries.push(L)}function U(P){var L=P.completion||{};L.type="normal",delete L.arg,P.completion=L}function w(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(Y,this),this.reset(!0)}a.keys=function(P){var L=Object(P),q=[];for(var m in L)q.push(m);return q.reverse(),function D(){for(;q.length;){var S=q.pop();if(S in L)return D.value=S,D.done=!1,D}return D.done=!0,D}};function T(P){if(P){var L=P[d];if(L)return L.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var q=-1,m=function D(){for(;++q<P.length;)if(i.call(P,q))return D.value=P[q],D.done=!1,D;return D.value=o,D.done=!0,D};return m.next=m}}return{next:W}}a.values=T;function W(){return{value:o,done:!0}}return w.prototype={constructor:w,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(U),!P)for(var L in this)L.charAt(0)==="t"&&i.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=o)},stop:function(){this.done=!0;var P=this.tryEntries[0],L=P.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var L=this;function q(X,oe){return S.type="throw",S.arg=P,L.next=X,oe&&(L.method="next",L.arg=o),!!oe}for(var m=this.tryEntries.length-1;m>=0;--m){var D=this.tryEntries[m],S=D.completion;if(D.tryLoc==="root")return q("end");if(D.tryLoc<=this.prev){var M=i.call(D,"catchLoc"),F=i.call(D,"finallyLoc");if(M&&F){if(this.prev<D.catchLoc)return q(D.catchLoc,!0);if(this.prev<D.finallyLoc)return q(D.finallyLoc)}else if(M){if(this.prev<D.catchLoc)return q(D.catchLoc,!0)}else if(F){if(this.prev<D.finallyLoc)return q(D.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(P,L){for(var q=this.tryEntries.length-1;q>=0;--q){var m=this.tryEntries[q];if(m.tryLoc<=this.prev&&i.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var D=m;break}}D&&(P==="break"||P==="continue")&&D.tryLoc<=L&&L<=D.finallyLoc&&(D=null);var S=D?D.completion:{};return S.type=P,S.arg=L,D?(this.method="next",this.next=D.finallyLoc,C):this.complete(S)},complete:function(P,L){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&L&&(this.next=L),C},finish:function(P){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.finallyLoc===P)return this.complete(q.completion,q.afterLoc),U(q),C}},catch:function(P){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc===P){var m=q.completion;if(m.type==="throw"){var D=m.arg;U(q)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(P,L,q){return this.delegate={iterator:T(P),resultName:L,nextLoc:q},this.method==="next"&&(this.arg=o),C}},a})(t.exports);try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}})(Fn)),Fn.exports}var Un,Wo;function Tr(){return Wo||(Wo=1,Un=(t,s)=>`${t}-${s}-${Math.random().toString(16).slice(3,8)}`),Un}var Bn,Vo;function dd(){if(Vo)return Bn;Vo=1;const t=Tr();let s=0;return Bn=({id:a,action:n,payload:i={}})=>{let r=a;return typeof r>"u"&&(r=t("Job",s),s+=1),{id:r,action:n,payload:i}},Bn}var Xs={},$o;function Dr(){if($o)return Xs;$o=1;let t=!1;return Xs.logging=t,Xs.setLogging=s=>{t=s},Xs.log=(...s)=>t?console.log.apply(this,s):null,Xs}var Wn,qo;function cp(){if(qo)return Wn;qo=1;const t=dd(),{log:s}=Dr(),a=Tr();let n=0;return Wn=()=>{const i=a("Scheduler",n),r={},o={};let c=[];n+=1;const d=()=>c.length,u=()=>Object.keys(r).length,l=()=>{if(c.length!==0){const f=Object.keys(r);for(let v=0;v<f.length;v+=1)if(typeof o[f[v]]>"u"){c[0](r[f[v]]);break}}},p=(f,v)=>new Promise((j,C)=>{const x=t({action:f,payload:v});c.push(async N=>{c.shift(),o[N.id]=x;try{j(await N[f].apply(this,[...v,x.id]))}catch(R){C(R)}finally{delete o[N.id],l()}}),s(`[${i}]: Add ${x.id} to JobQueue`),s(`[${i}]: JobQueue length=${c.length}`),l()});return{addWorker:f=>(r[f.id]=f,s(`[${i}]: Add ${f.id}`),s(`[${i}]: Number of workers=${u()}`),l(),f.id),addJob:async(f,...v)=>{if(u()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return p(f,v)},terminate:async()=>{Object.keys(r).forEach(async f=>{await r[f].terminate()}),c=[]},getQueueLen:d,getNumWorkers:u}},Wn}function dp(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vn,_o;function up(){return _o||(_o=1,Vn=t=>{const s={};return typeof WorkerGlobalScope<"u"?s.type="webworker":typeof document=="object"?s.type="browser":typeof process=="object"&&typeof dp=="function"&&(s.type="node"),typeof t>"u"?s:s[t]}),Vn}var $n,Ho;function hp(){if(Ho)return $n;Ho=1;const s=up()("type")==="browser"?a=>new URL(a,window.location.href).href:a=>a;return $n=a=>{const n={...a};return["corePath","workerPath","langPath"].forEach(i=>{a[i]&&(n[i]=s(n[i]))}),n},$n}var qn,zo;function ud(){return zo||(zo=1,qn={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),qn}const mp="6.0.1",pp={version:mp};var _n,Go;function gp(){return Go||(Go=1,_n={workerBlobURL:!0,logger:()=>{}}),_n}var Hn,Yo;function fp(){if(Yo)return Hn;Yo=1;const t=pp.version;return Hn={...gp(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},Hn}var zn,Ko;function xp(){return Ko||(Ko=1,zn=({workerPath:t,workerBlobURL:s})=>{let a;if(Blob&&URL&&s){const n=new Blob([`importScripts("${t}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(n))}else a=new Worker(t);return a}),zn}var Gn,Qo;function vp(){return Qo||(Qo=1,Gn=t=>{t.terminate()}),Gn}var Yn,Jo;function yp(){return Jo||(Jo=1,Yn=(t,s)=>{t.onmessage=({data:a})=>{s(a)}}),Yn}var Kn,Xo;function jp(){return Xo||(Xo=1,Kn=async(t,s)=>{t.postMessage(s)}),Kn}var Qn,Zo;function bp(){if(Zo)return Qn;Zo=1;const t=a=>new Promise((n,i)=>{const r=new FileReader;r.onload=()=>{n(r.result)},r.onerror=({target:{error:{code:o}}})=>{i(Error(`File could not be read! Code=${o}`))},r.readAsArrayBuffer(a)}),s=async a=>{let n=a;if(typeof a>"u")return"undefined";if(typeof a=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(a)?n=atob(a.split(",")[1]).split("").map(i=>i.charCodeAt(0)):n=await(await fetch(a)).arrayBuffer();else if(typeof HTMLElement<"u"&&a instanceof HTMLElement)a.tagName==="IMG"&&(n=await s(a.src)),a.tagName==="VIDEO"&&(n=await s(a.poster)),a.tagName==="CANVAS"&&await new Promise(i=>{a.toBlob(async r=>{n=await t(r),i()})});else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){const i=await a.convertToBlob();n=await t(i)}else(a instanceof File||a instanceof Blob)&&(n=await t(a));return new Uint8Array(n)};return Qn=s,Qn}var Jn,el;function wp(){if(el)return Jn;el=1;const t=fp(),s=xp(),a=vp(),n=yp(),i=jp(),r=bp();return Jn={defaultOptions:t,spawnWorker:s,terminateWorker:a,onMessage:n,send:i,loadImage:r},Jn}var Xn,tl;function hd(){if(tl)return Xn;tl=1;const t=hp(),s=dd(),{log:a}=Dr(),n=Tr(),i=ud(),{defaultOptions:r,spawnWorker:o,terminateWorker:c,onMessage:d,loadImage:u,send:l}=wp();let p=0;return Xn=async(g="eng",b=i.LSTM_ONLY,y={},f={})=>{const v=n("Worker",p),{logger:j,errorHandler:C,...x}=t({...r,...y}),N={},R=typeof g=="string"?g.split("+"):g;let E=b,z=f;const k=[i.DEFAULT,i.LSTM_ONLY].includes(b)&&!x.legacyCore;let V,$;const A=new Promise((ae,H)=>{$=ae,V=H}),_=ae=>{V(ae.message)};let O=o(x);O.onerror=_,p+=1;const Y=({id:ae,action:H,payload:se})=>new Promise((Z,he)=>{a(`[${v}]: Start ${ae}, action=${H}`);const pe=`${H}-${ae}`;N[pe]={resolve:Z,reject:he},l(O,{workerId:v,jobId:ae,action:H,payload:se})}),U=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),w=ae=>Y(s({id:ae,action:"load",payload:{options:{lstmOnly:k,corePath:x.corePath,logging:x.logging}}})),T=(ae,H,se)=>Y(s({id:se,action:"FS",payload:{method:"writeFile",args:[ae,H]}})),W=(ae,H)=>Y(s({id:H,action:"FS",payload:{method:"readFile",args:[ae,{encoding:"utf8"}]}})),P=(ae,H)=>Y(s({id:H,action:"FS",payload:{method:"unlink",args:[ae]}})),L=(ae,H,se)=>Y(s({id:se,action:"FS",payload:{method:ae,args:H}})),q=(ae,H)=>Y(s({id:H,action:"loadLanguage",payload:{langs:ae,options:{langPath:x.langPath,dataPath:x.dataPath,cachePath:x.cachePath,cacheMethod:x.cacheMethod,gzip:x.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(E)&&!x.legacyLang}}})),m=(ae,H,se,Z)=>Y(s({id:Z,action:"initialize",payload:{langs:ae,oem:H,config:se}})),D=(ae="eng",H,se,Z)=>{if(k&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(H))throw Error("Legacy model requested but code missing.");const he=H||E;E=he;const pe=se||z;z=pe;const Ce=(typeof ae=="string"?ae.split("+"):ae).filter(ze=>!R.includes(ze));return R.push(...Ce),Ce.length>0?q(Ce,Z).then(()=>m(ae,he,pe,Z)):m(ae,he,pe,Z)},S=(ae={},H)=>Y(s({id:H,action:"setParameters",payload:{params:ae}})),M=async(ae,H={},se={text:!0},Z)=>Y(s({id:Z,action:"recognize",payload:{image:await u(ae),options:H,output:se}})),F=async(ae,H)=>{if(k)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Y(s({id:H,action:"detect",payload:{image:await u(ae)}}))},X=async()=>(O!==null&&(c(O),O=null),Promise.resolve());d(O,({workerId:ae,jobId:H,status:se,action:Z,data:he})=>{const pe=`${Z}-${H}`;if(se==="resolve")a(`[${ae}]: Complete ${H}`),N[pe].resolve({jobId:H,data:he}),delete N[pe];else if(se==="reject")if(N[pe].reject(he),delete N[pe],Z==="load"&&V(he),C)C(he);else throw Error(he);else se==="progress"&&j({...he,userJobId:H})});const oe={id:v,worker:O,load:U,writeText:T,readText:W,removeFile:P,FS:L,reinitialize:D,setParameters:S,recognize:M,detect:F,terminate:X};return w().then(()=>q(g)).then(()=>m(g,b,f)).then(()=>$(oe)).catch(()=>{}),A},Xn}var Zn,sl;function Np(){if(sl)return Zn;sl=1;const t=hd();return Zn={recognize:async(n,i,r)=>{const o=await t(i,1,r);return o.recognize(n).finally(async()=>{await o.terminate()})},detect:async(n,i)=>{const r=await t("osd",0,i);return r.detect(n).finally(async()=>{await r.terminate()})}},Zn}var ei,al;function Sp(){return al||(al=1,ei={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ei}var ti,nl;function Cp(){return nl||(nl=1,ti={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),ti}var si,il;function kp(){if(il)return si;il=1,lp();const t=cp(),s=hd(),a=Np(),n=Sp(),i=ud(),r=Cp(),{setLogging:o}=Dr();return si={languages:n,OEM:i,PSM:r,createScheduler:t,createWorker:s,setLogging:o,...a},si}var Ap=kp();const Tp=br(Ap),Pr=h.createContext({});function Er(t){const s=h.useRef(null);return s.current===null&&(s.current=t()),s.current}const Rr=typeof window<"u",md=Rr?h.useLayoutEffect:h.useEffect,pn=h.createContext(null);function Lr(t,s){t.indexOf(s)===-1&&t.push(s)}function Ir(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}const Vt=(t,s,a)=>a>s?s:a<t?t:a;let Mr=()=>{};const $t={},pd=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function gd(t){return typeof t=="object"&&t!==null}const fd=t=>/^0[^.\s]+$/u.test(t);function Or(t){let s;return()=>(s===void 0&&(s=t()),s)}const Tt=t=>t,Dp=(t,s)=>a=>s(t(a)),Na=(...t)=>t.reduce(Dp),ma=(t,s,a)=>{const n=s-t;return n===0?1:(a-t)/n};class Fr{constructor(){this.subscriptions=[]}add(s){return Lr(this.subscriptions,s),()=>Ir(this.subscriptions,s)}notify(s,a,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](s,a,n);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(s,a,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ot=t=>t*1e3,At=t=>t/1e3;function xd(t,s){return s?t*(1e3/s):0}const vd=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,Pp=1e-7,Ep=12;function Rp(t,s,a,n,i){let r,o,c=0;do o=s+(a-s)/2,r=vd(o,n,i)-t,r>0?a=o:s=o;while(Math.abs(r)>Pp&&++c<Ep);return o}function Sa(t,s,a,n){if(t===s&&a===n)return Tt;const i=r=>Rp(r,0,1,t,a);return r=>r===0||r===1?r:vd(i(r),s,n)}const yd=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,jd=t=>s=>1-t(1-s),bd=Sa(.33,1.53,.69,.99),Ur=jd(bd),wd=yd(Ur),Nd=t=>(t*=2)<1?.5*Ur(t):.5*(2-Math.pow(2,-10*(t-1))),Br=t=>1-Math.sin(Math.acos(t)),Sd=jd(Br),Cd=yd(Br),Lp=Sa(.42,0,1,1),Ip=Sa(0,0,.58,1),kd=Sa(.42,0,.58,1),Mp=t=>Array.isArray(t)&&typeof t[0]!="number",Ad=t=>Array.isArray(t)&&typeof t[0]=="number",Op={linear:Tt,easeIn:Lp,easeInOut:kd,easeOut:Ip,circIn:Br,circInOut:Cd,circOut:Sd,backIn:Ur,backInOut:wd,backOut:bd,anticipate:Nd},Fp=t=>typeof t=="string",rl=t=>{if(Ad(t)){Mr(t.length===4);const[s,a,n,i]=t;return Sa(s,a,n,i)}else if(Fp(t))return Op[t];return t},Ba=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Up(t,s){let a=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(l){o.has(l)&&(u.schedule(l),t()),l(c)}const u={schedule:(l,p=!1,g=!1)=>{const y=g&&i?a:n;return p&&o.add(l),y.has(l)||y.add(l),l},cancel:l=>{n.delete(l),o.delete(l)},process:l=>{if(c=l,i){r=!0;return}i=!0,[a,n]=[n,a],a.forEach(d),a.clear(),i=!1,r&&(r=!1,u.process(l))}};return u}const Bp=40;function Td(t,s){let a=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>a=!0,o=Ba.reduce((x,N)=>(x[N]=Up(r),x),{}),{setup:c,read:d,resolveKeyframes:u,preUpdate:l,update:p,preRender:g,render:b,postRender:y}=o,f=()=>{const x=$t.useManualTiming?i.timestamp:performance.now();a=!1,$t.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(x-i.timestamp,Bp),1)),i.timestamp=x,i.isProcessing=!0,c.process(i),d.process(i),u.process(i),l.process(i),p.process(i),g.process(i),b.process(i),y.process(i),i.isProcessing=!1,a&&s&&(n=!1,t(f))},v=()=>{a=!0,n=!0,i.isProcessing||t(f)};return{schedule:Ba.reduce((x,N)=>{const R=o[N];return x[N]=(E,z=!1,k=!1)=>(a||v(),R.schedule(E,z,k)),x},{}),cancel:x=>{for(let N=0;N<Ba.length;N++)o[Ba[N]].cancel(x)},state:i,steps:o}}const{schedule:Oe,cancel:Xt,state:it,steps:ai}=Td(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tt,!0);let Ya;function Wp(){Ya=void 0}const pt={now:()=>(Ya===void 0&&pt.set(it.isProcessing||$t.useManualTiming?it.timestamp:performance.now()),Ya),set:t=>{Ya=t,queueMicrotask(Wp)}},Dd=t=>s=>typeof s=="string"&&s.startsWith(t),Pd=Dd("--"),Vp=Dd("var(--"),Wr=t=>Vp(t)?$p.test(t.split("/*")[0].trim()):!1,$p=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$s={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pa={...$s,transform:t=>Vt(0,1,t)},Wa={...$s,default:1},oa=t=>Math.round(t*1e5)/1e5,Vr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qp(t){return t==null}const _p=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$r=(t,s)=>a=>!!(typeof a=="string"&&_p.test(a)&&a.startsWith(t)||s&&!qp(a)&&Object.prototype.hasOwnProperty.call(a,s)),Ed=(t,s,a)=>n=>{if(typeof n!="string")return n;const[i,r,o,c]=n.match(Vr);return{[t]:parseFloat(i),[s]:parseFloat(r),[a]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},Hp=t=>Vt(0,255,t),ni={...$s,transform:t=>Math.round(Hp(t))},hs={test:$r("rgb","red"),parse:Ed("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:n=1})=>"rgba("+ni.transform(t)+", "+ni.transform(s)+", "+ni.transform(a)+", "+oa(pa.transform(n))+")"};function zp(t){let s="",a="",n="",i="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),s+=s,a+=a,n+=n,i+=i),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Ii={test:$r("#"),parse:zp,transform:hs.transform},Ca=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),Kt=Ca("deg"),Ft=Ca("%"),ve=Ca("px"),Gp=Ca("vh"),Yp=Ca("vw"),ol={...Ft,parse:t=>Ft.parse(t)/100,transform:t=>Ft.transform(t*100)},Ds={test:$r("hsl","hue"),parse:Ed("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ft.transform(oa(s))+", "+Ft.transform(oa(a))+", "+oa(pa.transform(n))+")"},Ye={test:t=>hs.test(t)||Ii.test(t)||Ds.test(t),parse:t=>hs.test(t)?hs.parse(t):Ds.test(t)?Ds.parse(t):Ii.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hs.transform(t):Ds.transform(t),getAnimatableNone:t=>{const s=Ye.parse(t);return s.alpha=0,Ye.transform(s)}},Kp=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qp(t){return isNaN(t)&&typeof t=="string"&&(t.match(Vr)?.length||0)+(t.match(Kp)?.length||0)>0}const Rd="number",Ld="color",Jp="var",Xp="var(",ll="${}",Zp=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ga(t){const s=t.toString(),a=[],n={color:[],number:[],var:[]},i=[];let r=0;const c=s.replace(Zp,d=>(Ye.test(d)?(n.color.push(r),i.push(Ld),a.push(Ye.parse(d))):d.startsWith(Xp)?(n.var.push(r),i.push(Jp),a.push(d)):(n.number.push(r),i.push(Rd),a.push(parseFloat(d))),++r,ll)).split(ll);return{values:a,split:c,indexes:n,types:i}}function Id(t){return ga(t).values}function Md(t){const{split:s,types:a}=ga(t),n=s.length;return i=>{let r="";for(let o=0;o<n;o++)if(r+=s[o],i[o]!==void 0){const c=a[o];c===Rd?r+=oa(i[o]):c===Ld?r+=Ye.transform(i[o]):r+=i[o]}return r}}const eg=t=>typeof t=="number"?0:Ye.test(t)?Ye.getAnimatableNone(t):t;function tg(t){const s=Id(t);return Md(t)(s.map(eg))}const Zt={test:Qp,parse:Id,createTransformer:Md,getAnimatableNone:tg};function ii(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function sg({hue:t,saturation:s,lightness:a,alpha:n}){t/=360,s/=100,a/=100;let i=0,r=0,o=0;if(!s)i=r=o=a;else{const c=a<.5?a*(1+s):a+s-a*s,d=2*a-c;i=ii(d,c,t+1/3),r=ii(d,c,t),o=ii(d,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:n}}function tn(t,s){return a=>a>0?s:t}const We=(t,s,a)=>t+(s-t)*a,ri=(t,s,a)=>{const n=t*t,i=a*(s*s-n)+n;return i<0?0:Math.sqrt(i)},ag=[Ii,hs,Ds],ng=t=>ag.find(s=>s.test(t));function cl(t){const s=ng(t);if(!s)return!1;let a=s.parse(t);return s===Ds&&(a=sg(a)),a}const dl=(t,s)=>{const a=cl(t),n=cl(s);if(!a||!n)return tn(t,s);const i={...a};return r=>(i.red=ri(a.red,n.red,r),i.green=ri(a.green,n.green,r),i.blue=ri(a.blue,n.blue,r),i.alpha=We(a.alpha,n.alpha,r),hs.transform(i))},Mi=new Set(["none","hidden"]);function ig(t,s){return Mi.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function rg(t,s){return a=>We(t,s,a)}function qr(t){return typeof t=="number"?rg:typeof t=="string"?Wr(t)?tn:Ye.test(t)?dl:cg:Array.isArray(t)?Od:typeof t=="object"?Ye.test(t)?dl:og:tn}function Od(t,s){const a=[...t],n=a.length,i=t.map((r,o)=>qr(r)(r,s[o]));return r=>{for(let o=0;o<n;o++)a[o]=i[o](r);return a}}function og(t,s){const a={...t,...s},n={};for(const i in a)t[i]!==void 0&&s[i]!==void 0&&(n[i]=qr(t[i])(t[i],s[i]));return i=>{for(const r in n)a[r]=n[r](i);return a}}function lg(t,s){const a=[],n={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const r=s.types[i],o=t.indexes[r][n[r]],c=t.values[o]??0;a[i]=c,n[r]++}return a}const cg=(t,s)=>{const a=Zt.createTransformer(s),n=ga(t),i=ga(s);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Mi.has(t)&&!i.values.length||Mi.has(s)&&!n.values.length?ig(t,s):Na(Od(lg(n,i),i.values),a):tn(t,s)};function Fd(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?We(t,s,a):qr(t)(t,s)}const dg=t=>{const s=({timestamp:a})=>t(a);return{start:(a=!0)=>Oe.update(s,a),stop:()=>Xt(s),now:()=>it.isProcessing?it.timestamp:pt.now()}},Ud=(t,s,a=10)=>{let n="";const i=Math.max(Math.round(s/a),2);for(let r=0;r<i;r++)n+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},sn=2e4;function _r(t){let s=0;const a=50;let n=t.next(s);for(;!n.done&&s<sn;)s+=a,n=t.next(s);return s>=sn?1/0:s}function ug(t,s=100,a){const n=a({...t,keyframes:[0,s]}),i=Math.min(_r(n),sn);return{type:"keyframes",ease:r=>n.next(i*r).value/s,duration:At(i)}}const hg=5;function Bd(t,s,a){const n=Math.max(s-hg,0);return xd(a-t(n),s-n)}const qe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oi=.001;function mg({duration:t=qe.duration,bounce:s=qe.bounce,velocity:a=qe.velocity,mass:n=qe.mass}){let i,r,o=1-s;o=Vt(qe.minDamping,qe.maxDamping,o),t=Vt(qe.minDuration,qe.maxDuration,At(t)),o<1?(i=u=>{const l=u*o,p=l*t,g=l-a,b=Oi(u,o),y=Math.exp(-p);return oi-g/b*y},r=u=>{const p=u*o*t,g=p*a+a,b=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-p),f=Oi(Math.pow(u,2),o);return(-i(u)+oi>0?-1:1)*((g-b)*y)/f}):(i=u=>{const l=Math.exp(-u*t),p=(u-a)*t+1;return-oi+l*p},r=u=>{const l=Math.exp(-u*t),p=(a-u)*(t*t);return l*p});const c=5/t,d=gg(i,r,c);if(t=Ot(t),isNaN(d))return{stiffness:qe.stiffness,damping:qe.damping,duration:t};{const u=Math.pow(d,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const pg=12;function gg(t,s,a){let n=a;for(let i=1;i<pg;i++)n=n-t(n)/s(n);return n}function Oi(t,s){return t*Math.sqrt(1-s*s)}const fg=["duration","bounce"],xg=["stiffness","damping","mass"];function ul(t,s){return s.some(a=>t[a]!==void 0)}function vg(t){let s={velocity:qe.velocity,stiffness:qe.stiffness,damping:qe.damping,mass:qe.mass,isResolvedFromDuration:!1,...t};if(!ul(t,xg)&&ul(t,fg))if(t.visualDuration){const a=t.visualDuration,n=2*Math.PI/(a*1.2),i=n*n,r=2*Vt(.05,1,1-(t.bounce||0))*Math.sqrt(i);s={...s,mass:qe.mass,stiffness:i,damping:r}}else{const a=mg(t);s={...s,...a,mass:qe.mass},s.isResolvedFromDuration=!0}return s}function an(t=qe.visualDuration,s=qe.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:n,restDelta:i}=a;const r=a.keyframes[0],o=a.keyframes[a.keyframes.length-1],c={done:!1,value:r},{stiffness:d,damping:u,mass:l,duration:p,velocity:g,isResolvedFromDuration:b}=vg({...a,velocity:-At(a.velocity||0)}),y=g||0,f=u/(2*Math.sqrt(d*l)),v=o-r,j=At(Math.sqrt(d/l)),C=Math.abs(v)<5;n||(n=C?qe.restSpeed.granular:qe.restSpeed.default),i||(i=C?qe.restDelta.granular:qe.restDelta.default);let x;if(f<1){const R=Oi(j,f);x=E=>{const z=Math.exp(-f*j*E);return o-z*((y+f*j*v)/R*Math.sin(R*E)+v*Math.cos(R*E))}}else if(f===1)x=R=>o-Math.exp(-j*R)*(v+(y+j*v)*R);else{const R=j*Math.sqrt(f*f-1);x=E=>{const z=Math.exp(-f*j*E),k=Math.min(R*E,300);return o-z*((y+f*j*v)*Math.sinh(k)+R*v*Math.cosh(k))/R}}const N={calculatedDuration:b&&p||null,next:R=>{const E=x(R);if(b)c.done=R>=p;else{let z=R===0?y:0;f<1&&(z=R===0?Ot(y):Bd(x,R,E));const k=Math.abs(z)<=n,V=Math.abs(o-E)<=i;c.done=k&&V}return c.value=c.done?o:E,c},toString:()=>{const R=Math.min(_r(N),sn),E=Ud(z=>N.next(R*z).value,R,30);return R+"ms "+E},toTransition:()=>{}};return N}an.applyToOptions=t=>{const s=ug(t,100,an);return t.ease=s.ease,t.duration=Ot(s.duration),t.type="keyframes",t};function Fi({keyframes:t,velocity:s=0,power:a=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:c,max:d,restDelta:u=.5,restSpeed:l}){const p=t[0],g={done:!1,value:p},b=k=>c!==void 0&&k<c||d!==void 0&&k>d,y=k=>c===void 0?d:d===void 0||Math.abs(c-k)<Math.abs(d-k)?c:d;let f=a*s;const v=p+f,j=o===void 0?v:o(v);j!==v&&(f=j-p);const C=k=>-f*Math.exp(-k/n),x=k=>j+C(k),N=k=>{const V=C(k),$=x(k);g.done=Math.abs(V)<=u,g.value=g.done?j:$};let R,E;const z=k=>{b(g.value)&&(R=k,E=an({keyframes:[g.value,y(g.value)],velocity:Bd(x,k,g.value),damping:i,stiffness:r,restDelta:u,restSpeed:l}))};return z(0),{calculatedDuration:null,next:k=>{let V=!1;return!E&&R===void 0&&(V=!0,N(k),z(k)),R!==void 0&&k>=R?E.next(k-R):(!V&&N(k),g)}}}function yg(t,s,a){const n=[],i=a||$t.mix||Fd,r=t.length-1;for(let o=0;o<r;o++){let c=i(t[o],t[o+1]);if(s){const d=Array.isArray(s)?s[o]||Tt:s;c=Na(d,c)}n.push(c)}return n}function jg(t,s,{clamp:a=!0,ease:n,mixer:i}={}){const r=t.length;if(Mr(r===s.length),r===1)return()=>s[0];if(r===2&&s[0]===s[1])return()=>s[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),s=[...s].reverse());const c=yg(s,n,i),d=c.length,u=l=>{if(o&&l<t[0])return s[0];let p=0;if(d>1)for(;p<t.length-2&&!(l<t[p+1]);p++);const g=ma(t[p],t[p+1],l);return c[p](g)};return a?l=>u(Vt(t[0],t[r-1],l)):u}function bg(t,s){const a=t[t.length-1];for(let n=1;n<=s;n++){const i=ma(0,s,n);t.push(We(a,1,i))}}function wg(t){const s=[0];return bg(s,t.length-1),s}function Ng(t,s){return t.map(a=>a*s)}function Sg(t,s){return t.map(()=>s||kd).splice(0,t.length-1)}function la({duration:t=300,keyframes:s,times:a,ease:n="easeInOut"}){const i=Mp(n)?n.map(rl):rl(n),r={done:!1,value:s[0]},o=Ng(a&&a.length===s.length?a:wg(s),t),c=jg(o,s,{ease:Array.isArray(i)?i:Sg(s,i)});return{calculatedDuration:t,next:d=>(r.value=c(d),r.done=d>=t,r)}}const Cg=t=>t!==null;function Hr(t,{repeat:s,repeatType:a="loop"},n,i=1){const r=t.filter(Cg),c=i<0||s&&a!=="loop"&&s%2===1?0:r.length-1;return!c||n===void 0?r[c]:n}const kg={decay:Fi,inertia:Fi,tween:la,keyframes:la,spring:an};function Wd(t){typeof t.type=="string"&&(t.type=kg[t.type])}class zr{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,a){return this.finished.then(s,a)}}const Ag=t=>t/100;class Gr extends zr{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:a}=this.options;a&&a.updatedAt!==pt.now()&&this.tick(pt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;Wd(s);const{type:a=la,repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=s;let{keyframes:c}=s;const d=a||la;d!==la&&typeof c[0]!="number"&&(this.mixKeyframes=Na(Ag,Fd(c[0],c[1])),c=[0,100]);const u=d({...s,keyframes:c});r==="mirror"&&(this.mirroredGenerator=d({...s,keyframes:[...c].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=_r(u));const{calculatedDuration:l}=u;this.calculatedDuration=l,this.resolvedDuration=l+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(s){const a=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(s,a=!1){const{generator:n,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:l,repeat:p,repeatType:g,repeatDelay:b,type:y,onUpdate:f,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-i/this.speed,this.startTime)),a?this.currentTime=s:this.updateTime(s);const j=this.currentTime-u*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?j<0:j>i;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,N=n;if(p){const k=Math.min(this.currentTime,i)/c;let V=Math.floor(k),$=k%1;!$&&k>=1&&($=1),$===1&&V--,V=Math.min(V,p+1),!!(V%2)&&(g==="reverse"?($=1-$,b&&($-=b/c)):g==="mirror"&&(N=o)),x=Vt(0,1,$)*c}const R=C?{done:!1,value:l[0]}:N.next(x);r&&(R.value=r(R.value));let{done:E}=R;!C&&d!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return z&&y!==Fi&&(R.value=Hr(l,this.options,v,this.speed)),f&&f(R.value),z&&this.finish(),R}then(s,a){return this.finished.then(s,a)}get duration(){return At(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+At(s)}get time(){return At(this.currentTime)}set time(s){s=Ot(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(pt.now());const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=At(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=dg,startTime:a}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=a??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function Tg(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const ms=t=>t*180/Math.PI,Ui=t=>{const s=ms(Math.atan2(t[1],t[0]));return Bi(s)},Dg={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ui,rotateZ:Ui,skewX:t=>ms(Math.atan(t[1])),skewY:t=>ms(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Bi=t=>(t=t%360,t<0&&(t+=360),t),hl=Ui,ml=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),pl=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Pg={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ml,scaleY:pl,scale:t=>(ml(t)+pl(t))/2,rotateX:t=>Bi(ms(Math.atan2(t[6],t[5]))),rotateY:t=>Bi(ms(Math.atan2(-t[2],t[0]))),rotateZ:hl,rotate:hl,skewX:t=>ms(Math.atan(t[4])),skewY:t=>ms(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Wi(t){return t.includes("scale")?1:0}function Vi(t,s){if(!t||t==="none")return Wi(s);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(a)n=Pg,i=a;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Dg,i=c}if(!i)return Wi(s);const r=n[s],o=i[1].split(",").map(Rg);return typeof r=="function"?r(o):o[r]}const Eg=(t,s)=>{const{transform:a="none"}=getComputedStyle(t);return Vi(a,s)};function Rg(t){return parseFloat(t.trim())}const qs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_s=new Set(qs),gl=t=>t===$s||t===ve,Lg=new Set(["x","y","z"]),Ig=qs.filter(t=>!Lg.has(t));function Mg(t){const s=[];return Ig.forEach(a=>{const n=t.getValue(a);n!==void 0&&(s.push([a,n.get()]),n.set(a.startsWith("scale")?1:0))}),s}const fs={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Vi(s,"x"),y:(t,{transform:s})=>Vi(s,"y")};fs.translateX=fs.x;fs.translateY=fs.y;const xs=new Set;let $i=!1,qi=!1,_i=!1;function Vd(){if(qi){const t=Array.from(xs).filter(n=>n.needsMeasurement),s=new Set(t.map(n=>n.element)),a=new Map;s.forEach(n=>{const i=Mg(n);i.length&&(a.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),s.forEach(n=>{n.render();const i=a.get(n);i&&i.forEach(([r,o])=>{n.getValue(r)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}qi=!1,$i=!1,xs.forEach(t=>t.complete(_i)),xs.clear()}function $d(){xs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qi=!0)})}function Og(){_i=!0,$d(),Vd(),_i=!1}class Yr{constructor(s,a,n,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(xs.add(this),$i||($i=!0,Oe.read($d),Oe.resolveKeyframes(Vd))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:n,motionValue:i}=this;if(s[0]===null){const r=i?.get(),o=s[s.length-1];if(r!==void 0)s[0]=r;else if(n&&a){const c=n.readValue(a,o);c!=null&&(s[0]=c)}s[0]===void 0&&(s[0]=o),i&&r===void 0&&i.set(s[0])}Tg(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),xs.delete(this)}cancel(){this.state==="scheduled"&&(xs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Fg=t=>t.startsWith("--");function Ug(t,s,a){Fg(s)?t.style.setProperty(s,a):t.style[s]=a}const Bg=Or(()=>window.ScrollTimeline!==void 0),Wg={};function Vg(t,s){const a=Or(t);return()=>Wg[s]??a()}const qd=Vg(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),aa=([t,s,a,n])=>`cubic-bezier(${t}, ${s}, ${a}, ${n})`,fl={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:aa([0,.65,.55,1]),circOut:aa([.55,0,1,.45]),backIn:aa([.31,.01,.66,-.59]),backOut:aa([.33,1.53,.69,.99])};function _d(t,s){if(t)return typeof t=="function"?qd()?Ud(t,s):"ease-out":Ad(t)?aa(t):Array.isArray(t)?t.map(a=>_d(a,s)||fl.easeOut):fl[t]}function $g(t,s,a,{delay:n=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:c="easeOut",times:d}={},u=void 0){const l={[s]:a};d&&(l.offset=d);const p=_d(c,i);Array.isArray(p)&&(l.easing=p);const g={delay:n,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(l,g)}function Hd(t){return typeof t=="function"&&"applyToOptions"in t}function qg({type:t,...s}){return Hd(t)&&qd()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class _g extends zr{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:a,name:n,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=s;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=s,Mr(typeof s.type!="string");const u=qg(s);this.animation=$g(a,n,i,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const l=Hr(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(l):Ug(a,n,l),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return At(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+At(s)}get time(){return At(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Ot(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&Bg()?(this.animation.timeline=s,Tt):a(this)}}const zd={anticipate:Nd,backInOut:wd,circInOut:Cd};function Hg(t){return t in zd}function zg(t){typeof t.ease=="string"&&Hg(t.ease)&&(t.ease=zd[t.ease])}const xl=10;class Gg extends _g{constructor(s){zg(s),Wd(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:a,onUpdate:n,onComplete:i,element:r,...o}=this.options;if(!a)return;if(s!==void 0){a.set(s);return}const c=new Gr({...o,autoplay:!1}),d=Ot(this.finishedTime??this.time);a.setWithVelocity(c.sample(d-xl).value,c.sample(d).value,xl),c.stop()}}const vl=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zt.test(t)||t==="0")&&!t.startsWith("url("));function Yg(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function Kg(t,s,a,n){const i=t[0];if(i===null)return!1;if(s==="display"||s==="visibility")return!0;const r=t[t.length-1],o=vl(i,s),c=vl(r,s);return!o||!c?!1:Yg(t)||(a==="spring"||Hd(a))&&n}function Hi(t){t.duration=0,t.type="keyframes"}const Qg=new Set(["opacity","clipPath","filter","transform"]),Jg=Or(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Xg(t){const{motionValue:s,name:a,repeatDelay:n,repeatType:i,damping:r,type:o}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:u}=s.owner.getProps();return Jg()&&a&&Qg.has(a)&&(a!=="transform"||!u)&&!d&&!n&&i!=="mirror"&&r!==0&&o!=="inertia"}const Zg=40;class ef extends zr{constructor({autoplay:s=!0,delay:a=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:c,name:d,motionValue:u,element:l,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=pt.now();const g={autoplay:s,delay:a,type:n,repeat:i,repeatDelay:r,repeatType:o,name:d,motionValue:u,element:l,...p},b=l?.KeyframeResolver||Yr;this.keyframeResolver=new b(c,(y,f,v)=>this.onKeyframesResolved(y,f,g,!v),d,u,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,a,n,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:c,delay:d,isHandoff:u,onUpdate:l}=n;this.resolvedAt=pt.now(),Kg(s,r,o,c)||(($t.instantAnimations||!d)&&l?.(Hr(s,n,a)),s[0]=s[s.length-1],Hi(n),n.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Zg?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...n,keyframes:s},b=!u&&Xg(g)?new Gg({...g,element:g.motionValue.owner.current}):new Gr(g);b.finished.then(()=>this.notifyFinished()).catch(Tt),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(s,a){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Og()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const tf=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sf(t){const s=tf.exec(t);if(!s)return[,];const[,a,n,i]=s;return[`--${a??n}`,i]}function Gd(t,s,a=1){const[n,i]=sf(t);if(!n)return;const r=window.getComputedStyle(s).getPropertyValue(n);if(r){const o=r.trim();return pd(o)?parseFloat(o):o}return Wr(i)?Gd(i,s,a+1):i}function Kr(t,s){return t?.[s]??t?.default??t}const Yd=new Set(["width","height","top","left","right","bottom",...qs]),af={test:t=>t==="auto",parse:t=>t},Kd=t=>s=>s.test(t),Qd=[$s,ve,Ft,Kt,Yp,Gp,af],yl=t=>Qd.find(Kd(t));function nf(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fd(t):!0}const rf=new Set(["brightness","contrast","saturate","opacity"]);function of(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[n]=a.match(Vr)||[];if(!n)return t;const i=a.replace(n,"");let r=rf.has(s)?1:0;return n!==a&&(r*=100),s+"("+r+i+")"}const lf=/\b([a-z-]*)\(.*?\)/gu,zi={...Zt,getAnimatableNone:t=>{const s=t.match(lf);return s?s.map(of).join(" "):t}},jl={...$s,transform:Math.round},cf={rotate:Kt,rotateX:Kt,rotateY:Kt,rotateZ:Kt,scale:Wa,scaleX:Wa,scaleY:Wa,scaleZ:Wa,skew:Kt,skewX:Kt,skewY:Kt,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:pa,originX:ol,originY:ol,originZ:ve},Qr={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,backgroundPositionX:ve,backgroundPositionY:ve,...cf,zIndex:jl,fillOpacity:pa,strokeOpacity:pa,numOctaves:jl},df={...Qr,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:zi,WebkitFilter:zi},Jd=t=>df[t];function Xd(t,s){let a=Jd(t);return a!==zi&&(a=Zt),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const uf=new Set(["auto","none","0"]);function hf(t,s,a){let n=0,i;for(;n<t.length&&!i;){const r=t[n];typeof r=="string"&&!uf.has(r)&&ga(r).values.length&&(i=t[n]),n++}if(i&&a)for(const r of s)t[r]=Xd(a,i)}class mf extends Yr{constructor(s,a,n,i,r){super(s,a,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:n}=this;if(!a||!a.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let u=s[d];if(typeof u=="string"&&(u=u.trim(),Wr(u))){const l=Gd(u,a.current);l!==void 0&&(s[d]=l),d===s.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Yd.has(n)||s.length!==2)return;const[i,r]=s,o=yl(i),c=yl(r);if(o!==c)if(gl(o)&&gl(c))for(let d=0;d<s.length;d++){const u=s[d];typeof u=="string"&&(s[d]=parseFloat(u))}else fs[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,n=[];for(let i=0;i<s.length;i++)(s[i]===null||nf(s[i]))&&n.push(i);n.length&&hf(s,n,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:n}=this;if(!s||!s.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fs[n](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&s.getValue(n,i).jump(i,!1)}measureEndState(){const{element:s,name:a,unresolvedKeyframes:n}=this;if(!s||!s.current)return;const i=s.getValue(a);i&&i.jump(this.measuredOrigin,!1);const r=n.length-1,o=n[r];n[r]=fs[a](s.measureViewportBox(),window.getComputedStyle(s.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{s.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function pf(t,s,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=a?.[t]??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Zd=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function eu(t){return gd(t)&&"offsetHeight"in t}const bl=30,gf=t=>!isNaN(parseFloat(t));class ff{constructor(s,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=pt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=pt.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=gf(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new Fr);const n=this.events[s].add(a);return s==="change"?()=>{n(),Oe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,a,n){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-n}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=pt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>bl)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,bl);return xd(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Us(t,s){return new ff(t,s)}const{schedule:Jr}=Td(queueMicrotask,!1),Et={x:!1,y:!1};function tu(){return Et.x||Et.y}function xf(t){return t==="x"||t==="y"?Et[t]?null:(Et[t]=!0,()=>{Et[t]=!1}):Et.x||Et.y?null:(Et.x=Et.y=!0,()=>{Et.x=Et.y=!1})}function su(t,s){const a=pf(t),n=new AbortController,i={passive:!0,...s,signal:n.signal};return[a,i,()=>n.abort()]}function wl(t){return!(t.pointerType==="touch"||tu())}function vf(t,s,a={}){const[n,i,r]=su(t,a),o=c=>{if(!wl(c))return;const{target:d}=c,u=s(d,c);if(typeof u!="function"||!d)return;const l=p=>{wl(p)&&(u(p),d.removeEventListener("pointerleave",l))};d.addEventListener("pointerleave",l,i)};return n.forEach(c=>{c.addEventListener("pointerenter",o,i)}),r}const au=(t,s)=>s?t===s?!0:au(t,s.parentElement):!1,Xr=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,yf=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jf(t){return yf.has(t.tagName)||t.tabIndex!==-1}const Ka=new WeakSet;function Nl(t){return s=>{s.key==="Enter"&&t(s)}}function li(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const bf=(t,s)=>{const a=t.currentTarget;if(!a)return;const n=Nl(()=>{if(Ka.has(a))return;li(a,"down");const i=Nl(()=>{li(a,"up")}),r=()=>li(a,"cancel");a.addEventListener("keyup",i,s),a.addEventListener("blur",r,s)});a.addEventListener("keydown",n,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",n),s)};function Sl(t){return Xr(t)&&!tu()}function wf(t,s,a={}){const[n,i,r]=su(t,a),o=c=>{const d=c.currentTarget;if(!Sl(c))return;Ka.add(d);const u=s(d,c),l=(b,y)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Ka.has(d)&&Ka.delete(d),Sl(b)&&typeof u=="function"&&u(b,{success:y})},p=b=>{l(b,d===window||d===document||a.useGlobalTarget||au(d,b.target))},g=b=>{l(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return n.forEach(c=>{(a.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),eu(c)&&(c.addEventListener("focus",u=>bf(u,i)),!jf(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function nu(t){return gd(t)&&"ownerSVGElement"in t}function Nf(t){return nu(t)&&t.tagName==="svg"}const lt=t=>!!(t&&t.getVelocity),Sf=[...Qd,Ye,Zt],Cf=t=>Sf.find(Kd(t)),Zr=h.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Cl(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function kf(...t){return s=>{let a=!1;const n=t.map(i=>{const r=Cl(i,s);return!a&&typeof r=="function"&&(a=!0),r});if(a)return()=>{for(let i=0;i<n.length;i++){const r=n[i];typeof r=="function"?r():Cl(t[i],null)}}}}function Af(...t){return h.useCallback(kf(...t),t)}class Tf extends h.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const n=a.offsetParent,i=eu(n)&&n.offsetWidth||0,r=this.props.sizeRef.current;r.height=a.offsetHeight||0,r.width=a.offsetWidth||0,r.top=a.offsetTop,r.left=a.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Df({children:t,isPresent:s,anchorX:a,root:n}){const i=h.useId(),r=h.useRef(null),o=h.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=h.useContext(Zr),d=Af(r,t?.ref);return h.useInsertionEffect(()=>{const{width:u,height:l,top:p,left:g,right:b}=o.current;if(s||!r.current||!u||!l)return;const y=a==="left"?`left: ${g}`:`right: ${b}`;r.current.dataset.motionPopId=i;const f=document.createElement("style");c&&(f.nonce=c);const v=n??document.head;return v.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${l}px !important;
            ${y}px !important;
            top: ${p}px !important;
          }
        `),()=>{v.contains(f)&&v.removeChild(f)}},[s]),e.jsx(Tf,{isPresent:s,childRef:r,sizeRef:o,children:h.cloneElement(t,{ref:d})})}const Pf=({children:t,initial:s,isPresent:a,onExitComplete:n,custom:i,presenceAffectsLayout:r,mode:o,anchorX:c,root:d})=>{const u=Er(Ef),l=h.useId();let p=!0,g=h.useMemo(()=>(p=!1,{id:l,initial:s,isPresent:a,custom:i,onExitComplete:b=>{u.set(b,!0);for(const y of u.values())if(!y)return;n&&n()},register:b=>(u.set(b,!1),()=>u.delete(b))}),[a,u,n]);return r&&p&&(g={...g}),h.useMemo(()=>{u.forEach((b,y)=>u.set(y,!1))},[a]),h.useEffect(()=>{!a&&!u.size&&n&&n()},[a]),o==="popLayout"&&(t=e.jsx(Df,{isPresent:a,anchorX:c,root:d,children:t})),e.jsx(pn.Provider,{value:g,children:t})};function Ef(){return new Map}function iu(t=!0){const s=h.useContext(pn);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:n,register:i}=s,r=h.useId();h.useEffect(()=>{if(t)return i(r)},[t]);const o=h.useCallback(()=>t&&n&&n(r),[r,n,t]);return!a&&n?[!1,o]:[!0]}const Va=t=>t.key||"";function kl(t){const s=[];return h.Children.forEach(t,a=>{h.isValidElement(a)&&s.push(a)}),s}const Rf=({children:t,custom:s,initial:a=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1,anchorX:c="left",root:d})=>{const[u,l]=iu(o),p=h.useMemo(()=>kl(t),[t]),g=o&&!u?[]:p.map(Va),b=h.useRef(!0),y=h.useRef(p),f=Er(()=>new Map),[v,j]=h.useState(p),[C,x]=h.useState(p);md(()=>{b.current=!1,y.current=p;for(let E=0;E<C.length;E++){const z=Va(C[E]);g.includes(z)?f.delete(z):f.get(z)!==!0&&f.set(z,!1)}},[C,g.length,g.join("-")]);const N=[];if(p!==v){let E=[...p];for(let z=0;z<C.length;z++){const k=C[z],V=Va(k);g.includes(V)||(E.splice(z,0,k),N.push(k))}return r==="wait"&&N.length&&(E=N),x(kl(E)),j(p),null}const{forceRender:R}=h.useContext(Pr);return e.jsx(e.Fragment,{children:C.map(E=>{const z=Va(E),k=o&&!u?!1:p===C||g.includes(z),V=()=>{if(f.has(z))f.set(z,!0);else return;let $=!0;f.forEach(A=>{A||($=!1)}),$&&(R?.(),x(y.current),o&&l?.(),n&&n())};return e.jsx(Pf,{isPresent:k,initial:!b.current||a?void 0:!1,custom:s,presenceAffectsLayout:i,mode:r,root:d,onExitComplete:k?void 0:V,anchorX:c,children:E},z)})})},ru=h.createContext({strict:!1}),Al={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bs={};for(const t in Al)Bs[t]={isEnabled:s=>Al[t].some(a=>!!s[a])};function Lf(t){for(const s in t)Bs[s]={...Bs[s],...t[s]}}const If=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nn(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||If.has(t)}let ou=t=>!nn(t);function Mf(t){typeof t=="function"&&(ou=s=>s.startsWith("on")?!nn(s):t(s))}try{Mf(require("@emotion/is-prop-valid").default)}catch{}function Of(t,s,a){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(ou(i)||a===!0&&nn(i)||!s&&!nn(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const gn=h.createContext({});function fn(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function fa(t){return typeof t=="string"||Array.isArray(t)}const eo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],to=["initial",...eo];function xn(t){return fn(t.animate)||to.some(s=>fa(t[s]))}function lu(t){return!!(xn(t)||t.variants)}function Ff(t,s){if(xn(t)){const{initial:a,animate:n}=t;return{initial:a===!1||fa(a)?a:void 0,animate:fa(n)?n:void 0}}return t.inherit!==!1?s:{}}function Uf(t){const{initial:s,animate:a}=Ff(t,h.useContext(gn));return h.useMemo(()=>({initial:s,animate:a}),[Tl(s),Tl(a)])}function Tl(t){return Array.isArray(t)?t.join(" "):t}function Dl(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Zs={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const a=Dl(t,s.target.x),n=Dl(t,s.target.y);return`${a}% ${n}%`}},Bf={correct:(t,{treeScale:s,projectionDelta:a})=>{const n=t,i=Zt.parse(t);if(i.length>5)return n;const r=Zt.createTransformer(t),o=typeof i[0]!="number"?1:0,c=a.x.scale*s.x,d=a.y.scale*s.y;i[0+o]/=c,i[1+o]/=d;const u=We(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),r(i)}},Gi={borderRadius:{...Zs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zs,borderTopRightRadius:Zs,borderBottomLeftRadius:Zs,borderBottomRightRadius:Zs,boxShadow:Bf};function cu(t,{layout:s,layoutId:a}){return _s.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!Gi[t]||t==="opacity")}const Wf={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vf=qs.length;function $f(t,s,a){let n="",i=!0;for(let r=0;r<Vf;r++){const o=qs[r],c=t[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||a){const u=Zd(c,Qr[o]);if(!d){i=!1;const l=Wf[o]||o;n+=`${l}(${u}) `}a&&(s[o]=u)}}return n=n.trim(),a?n=a(s,i?"":n):i&&(n="none"),n}function so(t,s,a){const{style:n,vars:i,transformOrigin:r}=t;let o=!1,c=!1;for(const d in s){const u=s[d];if(_s.has(d)){o=!0;continue}else if(Pd(d)){i[d]=u;continue}else{const l=Zd(u,Qr[d]);d.startsWith("origin")?(c=!0,r[d]=l):n[d]=l}}if(s.transform||(o||a?n.transform=$f(s,t.transform,a):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:u="50%",originZ:l=0}=r;n.transformOrigin=`${d} ${u} ${l}`}}const ao=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function du(t,s,a){for(const n in s)!lt(s[n])&&!cu(n,a)&&(t[n]=s[n])}function qf({transformTemplate:t},s){return h.useMemo(()=>{const a=ao();return so(a,s,t),Object.assign({},a.vars,a.style)},[s])}function _f(t,s){const a=t.style||{},n={};return du(n,a,t),Object.assign(n,qf(t,s)),n}function Hf(t,s){const a={},n=_f(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=n,a}const zf={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gf={offset:"strokeDashoffset",array:"strokeDasharray"};function Yf(t,s,a=1,n=0,i=!0){t.pathLength=1;const r=i?zf:Gf;t[r.offset]=ve.transform(-n);const o=ve.transform(s),c=ve.transform(a);t[r.array]=`${o} ${c}`}function uu(t,{attrX:s,attrY:a,attrScale:n,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...c},d,u,l){if(so(t,c,u),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=l?.transformBox??"fill-box",delete p.transformBox),s!==void 0&&(p.x=s),a!==void 0&&(p.y=a),n!==void 0&&(p.scale=n),i!==void 0&&Yf(p,i,r,o,!1)}const hu=()=>({...ao(),attrs:{}}),mu=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Kf(t,s,a,n){const i=h.useMemo(()=>{const r=hu();return uu(r,s,mu(n),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[s]);if(t.style){const r={};du(r,t.style,t),i.style={...r,...i.style}}return i}const Qf=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function no(t){return typeof t!="string"||t.includes("-")?!1:!!(Qf.indexOf(t)>-1||/[A-Z]/u.test(t))}function Jf(t,s,a,{latestValues:n},i,r=!1){const c=(no(t)?Kf:Hf)(s,n,i,t),d=Of(s,typeof t=="string",r),u=t!==h.Fragment?{...d,...c,ref:a}:{},{children:l}=s,p=h.useMemo(()=>lt(l)?l.get():l,[l]);return h.createElement(t,{...u,children:p})}function Pl(t){const s=[{},{}];return t?.values.forEach((a,n)=>{s[0][n]=a.get(),s[1][n]=a.getVelocity()}),s}function io(t,s,a,n){if(typeof s=="function"){const[i,r]=Pl(n);s=s(a!==void 0?a:t.custom,i,r)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[i,r]=Pl(n);s=s(a!==void 0?a:t.custom,i,r)}return s}function Qa(t){return lt(t)?t.get():t}function Xf({scrapeMotionValuesFromProps:t,createRenderState:s},a,n,i){return{latestValues:Zf(a,n,i,t),renderState:s()}}function Zf(t,s,a,n){const i={},r=n(t,{});for(const g in r)i[g]=Qa(r[g]);let{initial:o,animate:c}=t;const d=xn(t),u=lu(t);s&&u&&!d&&t.inherit!==!1&&(o===void 0&&(o=s.initial),c===void 0&&(c=s.animate));let l=a?a.initial===!1:!1;l=l||o===!1;const p=l?c:o;if(p&&typeof p!="boolean"&&!fn(p)){const g=Array.isArray(p)?p:[p];for(let b=0;b<g.length;b++){const y=io(t,g[b]);if(y){const{transitionEnd:f,transition:v,...j}=y;for(const C in j){let x=j[C];if(Array.isArray(x)){const N=l?x.length-1:0;x=x[N]}x!==null&&(i[C]=x)}for(const C in f)i[C]=f[C]}}}return i}const pu=t=>(s,a)=>{const n=h.useContext(gn),i=h.useContext(pn),r=()=>Xf(t,s,n,i);return a?r():Er(r)};function ro(t,s,a){const{style:n}=t,i={};for(const r in n)(lt(n[r])||s.style&&lt(s.style[r])||cu(r,t)||a?.getValue(r)?.liveStyle!==void 0)&&(i[r]=n[r]);return i}const ex=pu({scrapeMotionValuesFromProps:ro,createRenderState:ao});function gu(t,s,a){const n=ro(t,s,a);for(const i in t)if(lt(t[i])||lt(s[i])){const r=qs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}const tx=pu({scrapeMotionValuesFromProps:gu,createRenderState:hu}),sx=Symbol.for("motionComponentSymbol");function Ps(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ax(t,s,a){return h.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),a&&(typeof a=="function"?a(n):Ps(a)&&(a.current=n))},[s])}const oo=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nx="framerAppearId",fu="data-"+oo(nx),xu=h.createContext({});function ix(t,s,a,n,i){const{visualElement:r}=h.useContext(gn),o=h.useContext(ru),c=h.useContext(pn),d=h.useContext(Zr).reducedMotion,u=h.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:s,parent:r,props:a,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const l=u.current,p=h.useContext(xu);l&&!l.projection&&i&&(l.type==="html"||l.type==="svg")&&rx(u.current,a,i,p);const g=h.useRef(!1);h.useInsertionEffect(()=>{l&&g.current&&l.update(a,c)});const b=a[fu],y=h.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return md(()=>{l&&(g.current=!0,window.MotionIsMounted=!0,l.updateFeatures(),l.scheduleRenderMicrotask(),y.current&&l.animationState&&l.animationState.animateChanges())}),h.useEffect(()=>{l&&(!y.current&&l.animationState&&l.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),y.current=!1),l.enteringChildren=void 0)}),l}function rx(t,s,a,n){const{layoutId:i,layout:r,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:u,layoutCrossfade:l}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:vu(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||c&&Ps(c),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:l,layoutScroll:d,layoutRoot:u})}function vu(t){if(t)return t.options.allowProjection!==!1?t.projection:vu(t.parent)}function ci(t,{forwardMotionProps:s=!1}={},a,n){a&&Lf(a);const i=no(t)?tx:ex;function r(c,d){let u;const l={...h.useContext(Zr),...c,layoutId:ox(c)},{isStatic:p}=l,g=Uf(c),b=i(c,p);if(!p&&Rr){lx();const y=cx(l);u=y.MeasureLayout,g.visualElement=ix(t,b,l,n,y.ProjectionNode)}return e.jsxs(gn.Provider,{value:g,children:[u&&g.visualElement?e.jsx(u,{visualElement:g.visualElement,...l}):null,Jf(t,c,ax(b,g.visualElement,d),b,p,s)]})}r.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=h.forwardRef(r);return o[sx]=t,o}function ox({layoutId:t}){const s=h.useContext(Pr).id;return s&&t!==void 0?s+"-"+t:t}function lx(t,s){h.useContext(ru).strict}function cx(t){const{drag:s,layout:a}=Bs;if(!s&&!a)return{};const n={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function dx(t,s){if(typeof Proxy>"u")return ci;const a=new Map,n=(r,o)=>ci(r,o,t,s),i=(r,o)=>n(r,o);return new Proxy(i,{get:(r,o)=>o==="create"?n:(a.has(o)||a.set(o,ci(o,void 0,t,s)),a.get(o))})}function yu({top:t,left:s,right:a,bottom:n}){return{x:{min:s,max:a},y:{min:t,max:n}}}function ux({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function hx(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),n=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:n.y,right:n.x}}function di(t){return t===void 0||t===1}function Yi({scale:t,scaleX:s,scaleY:a}){return!di(t)||!di(s)||!di(a)}function ds(t){return Yi(t)||ju(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ju(t){return El(t.x)||El(t.y)}function El(t){return t&&t!=="0%"}function rn(t,s,a){const n=t-a,i=s*n;return a+i}function Rl(t,s,a,n,i){return i!==void 0&&(t=rn(t,i,n)),rn(t,a,n)+s}function Ki(t,s=0,a=1,n,i){t.min=Rl(t.min,s,a,n,i),t.max=Rl(t.max,s,a,n,i)}function bu(t,{x:s,y:a}){Ki(t.x,s.translate,s.scale,s.originPoint),Ki(t.y,a.translate,a.scale,a.originPoint)}const Ll=.999999999999,Il=1.0000000000001;function mx(t,s,a,n=!1){const i=a.length;if(!i)return;s.x=s.y=1;let r,o;for(let c=0;c<i;c++){r=a[c],o=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Rs(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(s.x*=o.x.scale,s.y*=o.y.scale,bu(t,o)),n&&ds(r.latestValues)&&Rs(t,r.latestValues))}s.x<Il&&s.x>Ll&&(s.x=1),s.y<Il&&s.y>Ll&&(s.y=1)}function Es(t,s){t.min=t.min+s,t.max=t.max+s}function Ml(t,s,a,n,i=.5){const r=We(t.min,t.max,i);Ki(t,s,a,r,n)}function Rs(t,s){Ml(t.x,s.x,s.scaleX,s.scale,s.originX),Ml(t.y,s.y,s.scaleY,s.scale,s.originY)}function wu(t,s){return yu(hx(t.getBoundingClientRect(),s))}function px(t,s,a){const n=wu(t,a),{scroll:i}=s;return i&&(Es(n.x,i.offset.x),Es(n.y,i.offset.y)),n}const Ol=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ls=()=>({x:Ol(),y:Ol()}),Fl=()=>({min:0,max:0}),Ze=()=>({x:Fl(),y:Fl()}),Qi={current:null},Nu={current:!1};function gx(){if(Nu.current=!0,!!Rr)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Qi.current=t.matches;t.addEventListener("change",s),s()}else Qi.current=!1}const fx=new WeakMap;function xx(t,s,a){for(const n in s){const i=s[n],r=a[n];if(lt(i))t.addValue(n,i);else if(lt(r))t.addValue(n,Us(i,{owner:t}));else if(r!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,Us(o!==void 0?o:i,{owner:t}))}}for(const n in a)s[n]===void 0&&t.removeValue(n);return s}const Ul=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vx{scrapeMotionValuesFromProps(s,a,n){return{}}constructor({parent:s,props:a,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=pt.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Oe.render(this.render,!1,!0))};const{latestValues:d,renderState:u}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=a.initial?{...d}:{},this.renderState=u,this.parent=s,this.props=a,this.presenceContext=n,this.depth=s?s.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=xn(a),this.isVariantNode=lu(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:l,...p}=this.scrapeMotionValuesFromProps(a,{},this);for(const g in p){const b=p[g];d[g]!==void 0&&lt(b)&&b.set(d[g])}}mount(s){this.current=s,fx.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,n)=>this.bindToMotionValue(n,a)),Nu.current||gx(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qi.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Xt(this.notifyUpdate),Xt(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const n=_s.has(s);n&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",o=>{this.latestValues[s]=o,this.props.onUpdate&&Oe.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{i(),r&&r(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Bs){const a=Bs[s];if(!a)continue;const{isEnabled:n,Feature:i}=a;if(!this.features[s]&&i&&n(this.props)&&(this.features[s]=new i(this)),this.features[s]){const r=this.features[s];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ze()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let n=0;n<Ul.length;n++){const i=Ul[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=s[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=xx(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const n=this.values.get(s);a!==n&&(n&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let n=this.values.get(s);return n===void 0&&a!==void 0&&(n=Us(a===null?void 0:a,{owner:this}),this.addValue(s,n)),n}readValue(s,a){let n=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return n!=null&&(typeof n=="string"&&(pd(n)||fd(n))?n=parseFloat(n):!Cf(n)&&Zt.test(a)&&(n=Xd(s,a)),this.setBaseTarget(s,lt(n)?n.get():n)),lt(n)?n.get():n}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){const{initial:a}=this.props;let n;if(typeof a=="string"||typeof a=="object"){const r=io(this.props,a,this.presenceContext?.custom);r&&(n=r[s])}if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!lt(i)?i:this.initialValues[s]!==void 0&&n===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new Fr),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}scheduleRenderMicrotask(){Jr.render(this.render)}}class Su extends vx{constructor(){super(...arguments),this.KeyframeResolver=mf}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:n}){delete a[s],delete n[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;lt(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Cu(t,{style:s,vars:a},n,i){const r=t.style;let o;for(o in s)r[o]=s[o];i?.applyProjectionStyles(r,n);for(o in a)r.setProperty(o,a[o])}function yx(t){return window.getComputedStyle(t)}class jx extends Su{constructor(){super(...arguments),this.type="html",this.renderInstance=Cu}readValueFromInstance(s,a){if(_s.has(a))return this.projection?.isProjecting?Wi(a):Eg(s,a);{const n=yx(s),i=(Pd(a)?n.getPropertyValue(a):n[a])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:a}){return wu(s,a)}build(s,a,n){so(s,a,n.transformTemplate)}scrapeMotionValuesFromProps(s,a,n){return ro(s,a,n)}}const ku=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bx(t,s,a,n){Cu(t,s,void 0,n);for(const i in s.attrs)t.setAttribute(ku.has(i)?i:oo(i),s.attrs[i])}class wx extends Su{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ze}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(_s.has(a)){const n=Jd(a);return n&&n.default||0}return a=ku.has(a)?a:oo(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,n){return gu(s,a,n)}build(s,a,n){uu(s,a,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(s,a,n,i){bx(s,a,n,i)}mount(s){this.isSVGTag=mu(s.tagName),super.mount(s)}}const Nx=(t,s)=>no(t)?new wx(s):new jx(s,{allowProjection:t!==h.Fragment});function Os(t,s,a){const n=t.getProps();return io(n,s,a!==void 0?a:n.custom,t)}const Ji=t=>Array.isArray(t);function Sx(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,Us(a))}function Cx(t){return Ji(t)?t[t.length-1]||0:t}function kx(t,s){const a=Os(t,s);let{transitionEnd:n={},transition:i={},...r}=a||{};r={...r,...n};for(const o in r){const c=Cx(r[o]);Sx(t,o,c)}}function Ax(t){return!!(lt(t)&&t.add)}function Xi(t,s){const a=t.getValue("willChange");if(Ax(a))return a.add(s);if(!a&&$t.WillChange){const n=new $t.WillChange("auto");t.addValue("willChange",n),n.add(s)}}function Au(t){return t.props[fu]}const Tx=t=>t!==null;function Dx(t,{repeat:s,repeatType:a="loop"},n){const i=t.filter(Tx),r=s&&a!=="loop"&&s%2===1?0:i.length-1;return i[r]}const Px={type:"spring",stiffness:500,damping:25,restSpeed:10},Ex=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Rx={type:"keyframes",duration:.8},Lx={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ix=(t,{keyframes:s})=>s.length>2?Rx:_s.has(t)?t.startsWith("scale")?Ex(s[1]):Px:Lx;function Mx({when:t,delay:s,delayChildren:a,staggerChildren:n,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:c,from:d,elapsed:u,...l}){return!!Object.keys(l).length}const lo=(t,s,a,n={},i,r)=>o=>{const c=Kr(n,t)||{},d=c.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Ot(d);const l={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...c,delay:-u,onUpdate:g=>{s.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:s,element:r?void 0:i};Mx(c)||Object.assign(l,Ix(t,l)),l.duration&&(l.duration=Ot(l.duration)),l.repeatDelay&&(l.repeatDelay=Ot(l.repeatDelay)),l.from!==void 0&&(l.keyframes[0]=l.from);let p=!1;if((l.type===!1||l.duration===0&&!l.repeatDelay)&&(Hi(l),l.delay===0&&(p=!0)),($t.instantAnimations||$t.skipAnimations)&&(p=!0,Hi(l),l.delay=0),l.allowFlatten=!c.type&&!c.ease,p&&!r&&s.get()!==void 0){const g=Dx(l.keyframes,c);if(g!==void 0){Oe.update(()=>{l.onUpdate(g),l.onComplete()});return}}return c.isSync?new Gr(l):new ef(l)};function Ox({protectedKeys:t,needsAnimating:s},a){const n=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,n}function Tu(t,s,{delay:a=0,transitionOverride:n,type:i}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:o,...c}=s;n&&(r=n);const d=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const l in c){const p=t.getValue(l,t.latestValues[l]??null),g=c[l];if(g===void 0||u&&Ox(u,l))continue;const b={delay:a,...Kr(r||{},l)},y=p.get();if(y!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===y&&!b.velocity)continue;let f=!1;if(window.MotionHandoffAnimation){const j=Au(t);if(j){const C=window.MotionHandoffAnimation(j,l,Oe);C!==null&&(b.startTime=C,f=!0)}}Xi(t,l),p.start(lo(l,p,g,t.shouldReduceMotion&&Yd.has(l)?{type:!1}:b,t,f));const v=p.animation;v&&d.push(v)}return o&&Promise.all(d).then(()=>{Oe.update(()=>{o&&kx(t,o)})}),d}function Du(t,s,a,n=0,i=1){const r=Array.from(t).sort((u,l)=>u.sortNodePosition(l)).indexOf(s),o=t.size,c=(o-1)*n;return typeof a=="function"?a(r,o):i===1?r*n:c-r*n}function Zi(t,s,a={}){const n=Os(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(i=a.transitionOverride);const r=n?()=>Promise.all(Tu(t,n,a)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:l,staggerDirection:p}=i;return Fx(t,s,d,u,l,p,a)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[r,o]:[o,r];return d().then(()=>u())}else return Promise.all([r(),o(a.delay)])}function Fx(t,s,a=0,n=0,i=0,r=1,o){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",s),c.push(Zi(d,s,{...o,delay:a+(typeof n=="function"?0:n)+Du(t.variantChildren,d,n,i,r)}).then(()=>d.notify("AnimationComplete",s)));return Promise.all(c)}function Ux(t,s,a={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const i=s.map(r=>Zi(t,r,a));n=Promise.all(i)}else if(typeof s=="string")n=Zi(t,s,a);else{const i=typeof s=="function"?Os(t,s,a.custom):s;n=Promise.all(Tu(t,i,a))}return n.then(()=>{t.notify("AnimationComplete",s)})}function Pu(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let n=0;n<a;n++)if(s[n]!==t[n])return!1;return!0}const Bx=to.length;function Eu(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Eu(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<Bx;a++){const n=to[a],i=t.props[n];(fa(i)||i===!1)&&(s[n]=i)}return s}const Wx=[...eo].reverse(),Vx=eo.length;function $x(t){return s=>Promise.all(s.map(({animation:a,options:n})=>Ux(t,a,n)))}function qx(t){let s=$x(t),a=Bl(),n=!0;const i=d=>(u,l)=>{const p=Os(t,l,d==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:b,...y}=p;u={...u,...y,...b}}return u};function r(d){s=d(t)}function o(d){const{props:u}=t,l=Eu(t.parent)||{},p=[],g=new Set;let b={},y=1/0;for(let v=0;v<Vx;v++){const j=Wx[v],C=a[j],x=u[j]!==void 0?u[j]:l[j],N=fa(x),R=j===d?C.isActive:null;R===!1&&(y=v);let E=x===l[j]&&x!==u[j]&&N;if(E&&n&&t.manuallyAnimateOnMount&&(E=!1),C.protectedKeys={...b},!C.isActive&&R===null||!x&&!C.prevProp||fn(x)||typeof x=="boolean")continue;const z=_x(C.prevProp,x);let k=z||j===d&&C.isActive&&!E&&N||v>y&&N,V=!1;const $=Array.isArray(x)?x:[x];let A=$.reduce(i(j),{});R===!1&&(A={});const{prevResolvedValues:_={}}=C,O={..._,...A},Y=T=>{k=!0,g.has(T)&&(V=!0,g.delete(T)),C.needsAnimating[T]=!0;const W=t.getValue(T);W&&(W.liveStyle=!1)};for(const T in O){const W=A[T],P=_[T];if(b.hasOwnProperty(T))continue;let L=!1;Ji(W)&&Ji(P)?L=!Pu(W,P):L=W!==P,L?W!=null?Y(T):g.add(T):W!==void 0&&g.has(T)?Y(T):C.protectedKeys[T]=!0}C.prevProp=x,C.prevResolvedValues=A,C.isActive&&(b={...b,...A}),n&&t.blockInitialAnimation&&(k=!1);const U=E&&z;k&&(!U||V)&&p.push(...$.map(T=>{const W={type:j};if(typeof T=="string"&&n&&!U&&t.manuallyAnimateOnMount&&t.parent){const{parent:P}=t,L=Os(P,T);if(P.enteringChildren&&L){const{delayChildren:q}=L.transition||{};W.delay=Du(P.enteringChildren,t,q)}}return{animation:T,options:W}}))}if(g.size){const v={};if(typeof u.initial!="boolean"){const j=Os(t,Array.isArray(u.initial)?u.initial[0]:u.initial);j&&j.transition&&(v.transition=j.transition)}g.forEach(j=>{const C=t.getBaseTarget(j),x=t.getValue(j);x&&(x.liveStyle=!0),v[j]=C??null}),p.push({animation:v})}let f=!!p.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(f=!1),n=!1,f?s(p):Promise.resolve()}function c(d,u){if(a[d].isActive===u)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(d,u)),a[d].isActive=u;const l=o(d);for(const p in a)a[p].protectedKeys={};return l}return{animateChanges:o,setActive:c,setAnimateFunction:r,getState:()=>a,reset:()=>{a=Bl()}}}function _x(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!Pu(s,t):!1}function cs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bl(){return{animate:cs(!0),whileInView:cs(),whileHover:cs(),whileTap:cs(),whileDrag:cs(),whileFocus:cs(),exit:cs()}}class as{constructor(s){this.isMounted=!1,this.node=s}update(){}}class Hx extends as{constructor(s){super(s),s.animationState||(s.animationState=qx(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();fn(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let zx=0;class Gx extends as{constructor(){super(...arguments),this.id=zx++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const i=this.node.animationState.setActive("exit",!s);a&&!s&&i.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const Yx={animation:{Feature:Hx},exit:{Feature:Gx}};function xa(t,s,a,n={passive:!0}){return t.addEventListener(s,a,n),()=>t.removeEventListener(s,a)}function ka(t){return{point:{x:t.pageX,y:t.pageY}}}const Kx=t=>s=>Xr(s)&&t(s,ka(s));function ca(t,s,a,n){return xa(t,s,Kx(a),n)}const Ru=1e-4,Qx=1-Ru,Jx=1+Ru,Lu=.01,Xx=0-Lu,Zx=0+Lu;function dt(t){return t.max-t.min}function ev(t,s,a){return Math.abs(t-s)<=a}function Wl(t,s,a,n=.5){t.origin=n,t.originPoint=We(s.min,s.max,t.origin),t.scale=dt(a)/dt(s),t.translate=We(a.min,a.max,t.origin)-t.originPoint,(t.scale>=Qx&&t.scale<=Jx||isNaN(t.scale))&&(t.scale=1),(t.translate>=Xx&&t.translate<=Zx||isNaN(t.translate))&&(t.translate=0)}function da(t,s,a,n){Wl(t.x,s.x,a.x,n?n.originX:void 0),Wl(t.y,s.y,a.y,n?n.originY:void 0)}function Vl(t,s,a){t.min=a.min+s.min,t.max=t.min+dt(s)}function tv(t,s,a){Vl(t.x,s.x,a.x),Vl(t.y,s.y,a.y)}function $l(t,s,a){t.min=s.min-a.min,t.max=t.min+dt(s)}function on(t,s,a){$l(t.x,s.x,a.x),$l(t.y,s.y,a.y)}function Ct(t){return[t("x"),t("y")]}const Iu=({current:t})=>t?t.ownerDocument.defaultView:null,ql=(t,s)=>Math.abs(t-s);function sv(t,s){const a=ql(t.x,s.x),n=ql(t.y,s.y);return Math.sqrt(a**2+n**2)}class Mu{constructor(s,a,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=hi(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,y=sv(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!y)return;const{point:f}=g,{timestamp:v}=it;this.history.push({...f,timestamp:v});const{onStart:j,onMove:C}=this.handlers;b||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=ui(b,this.transformPagePoint),Oe.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:y,onSessionEnd:f,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=hi(g.type==="pointercancel"?this.lastMoveEventInfo:ui(b,this.transformPagePoint),this.history);this.startEvent&&y&&y(g,j),f&&f(g,j)},!Xr(s))return;this.dragSnapToOrigin=r,this.handlers=a,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const c=ka(s),d=ui(c,this.transformPagePoint),{point:u}=d,{timestamp:l}=it;this.history=[{...u,timestamp:l}];const{onSessionStart:p}=a;p&&p(s,hi(d,this.history)),this.removeListeners=Na(ca(this.contextWindow,"pointermove",this.handlePointerMove),ca(this.contextWindow,"pointerup",this.handlePointerUp),ca(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Xt(this.updatePoint)}}function ui(t,s){return s?{point:s(t.point)}:t}function _l(t,s){return{x:t.x-s.x,y:t.y-s.y}}function hi({point:t},s){return{point:t,delta:_l(t,Ou(s)),offset:_l(t,av(s)),velocity:nv(s,.1)}}function av(t){return t[0]}function Ou(t){return t[t.length-1]}function nv(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,n=null;const i=Ou(t);for(;a>=0&&(n=t[a],!(i.timestamp-n.timestamp>Ot(s)));)a--;if(!n)return{x:0,y:0};const r=At(i.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-n.x)/r,y:(i.y-n.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function iv(t,{min:s,max:a},n){return s!==void 0&&t<s?t=n?We(s,t,n.min):Math.max(t,s):a!==void 0&&t>a&&(t=n?We(a,t,n.max):Math.min(t,a)),t}function Hl(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function rv(t,{top:s,left:a,bottom:n,right:i}){return{x:Hl(t.x,a,i),y:Hl(t.y,s,n)}}function zl(t,s){let a=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,n]=[n,a]),{min:a,max:n}}function ov(t,s){return{x:zl(t.x,s.x),y:zl(t.y,s.y)}}function lv(t,s){let a=.5;const n=dt(t),i=dt(s);return i>n?a=ma(s.min,s.max-n,t.min):n>i&&(a=ma(t.min,t.max-i,s.min)),Vt(0,1,a)}function cv(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const er=.35;function dv(t=er){return t===!1?t=0:t===!0&&(t=er),{x:Gl(t,"left","right"),y:Gl(t,"top","bottom")}}function Gl(t,s,a){return{min:Yl(t,s),max:Yl(t,a)}}function Yl(t,s){return typeof t=="number"?t:t[s]||0}const uv=new WeakMap;class hv{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ze(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(ka(p).point)},o=(p,g)=>{const{drag:b,dragPropagation:y,onDragStart:f}=this.getProps();if(b&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xf(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ct(j=>{let C=this.getAxisMotionValue(j).get()||0;if(Ft.test(C)){const{projection:x}=this.visualElement;if(x&&x.layout){const N=x.layout.layoutBox[j];N&&(C=dt(N)*(parseFloat(C)/100))}}this.originPoint[j]=C}),f&&Oe.postRender(()=>f(p,g)),Xi(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},c=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:b,dragDirectionLock:y,onDirectionLock:f,onDrag:v}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:j}=g;if(y&&this.currentDirection===null){this.currentDirection=mv(j),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),v&&v(p,g)},d=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ct(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Mu(s,{onSessionStart:r,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:n,contextWindow:Iu(this.visualElement)})}stop(s,a){const n=s||this.latestPointerEvent,i=a||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Oe.postRender(()=>c(n,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,n){const{drag:i}=this.getProps();if(!n||!$a(s,i,this.currentDirection))return;const r=this.getAxisMotionValue(s);let o=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(o=iv(o,this.constraints[s],this.elastic[s])),r.set(o)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&Ps(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=rv(n.layoutBox,s):this.constraints=!1,this.elastic=dv(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ct(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=cv(n.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!Ps(s))return!1;const n=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=px(n,i.root,this.visualElement.getTransformPagePoint());let o=ov(i.layout.layoutBox,r);if(a){const c=a(ux(o));this.hasMutatedConstraints=!!c,c&&(o=yu(c))}return o}startAnimation(s){const{drag:a,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},u=Ct(l=>{if(!$a(l,a,this.currentDirection))return;let p=d&&d[l]||{};o&&(p={min:0,max:0});const g=i?200:1e6,b=i?40:1e7,y={type:"inertia",velocity:n?s[l]:0,bounceStiffness:g,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...r,...p};return this.startAxisValueAnimation(l,y)});return Promise.all(u).then(c)}startAxisValueAnimation(s,a){const n=this.getAxisMotionValue(s);return Xi(this.visualElement,s),n.start(lo(s,n,0,a,this.visualElement,!1))}stopAnimation(){Ct(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Ct(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),i=n[a];return i||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){Ct(a=>{const{drag:n}=this.getProps();if(!$a(a,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(a);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[a];r.set(s[a]-We(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:n}=this.visualElement;if(!Ps(a)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ct(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=lv({min:d,max:d},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ct(o=>{if(!$a(o,s,null))return;const c=this.getAxisMotionValue(o),{min:d,max:u}=this.constraints[o];c.set(We(d,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;uv.set(this.visualElement,this);const s=this.visualElement.current,a=ca(s,"pointerdown",d=>{const{drag:u,dragListener:l=!0}=this.getProps();u&&l&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Ps(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Oe.read(n);const o=xa(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ct(l=>{const p=this.getAxisMotionValue(l);p&&(this.originPoint[l]+=d[l].translate,p.set(p.get()+d[l].translate))}),this.visualElement.render())}));return()=>{o(),a(),r(),c&&c()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=er,dragMomentum:c=!0}=s;return{...s,drag:a,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:c}}}function $a(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function mv(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class pv extends as{constructor(s){super(s),this.removeGroupControls=Tt,this.removeListeners=Tt,this.controls=new hv(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Kl=t=>(s,a)=>{t&&Oe.postRender(()=>t(s,a))};class gv extends as{constructor(){super(...arguments),this.removePointerDownListener=Tt}onPointerDown(s){this.session=new Mu(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Iu(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Kl(s),onStart:Kl(a),onMove:n,onEnd:(r,o)=>{delete this.session,i&&Oe.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=ca(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ja={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let mi=!1;class fv extends h.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=s;r&&(a.group&&a.group.add(r),n&&n.register&&i&&n.register(r),mi&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ja.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:n,drag:i,isPresent:r}=this.props,{projection:o}=n;return o&&(o.isPresent=r,mi=!0,i||s.layoutDependency!==a||a===void 0||s.isPresent!==r?o.willUpdate():this.safeToRemove(),s.isPresent!==r&&(r?o.promote():o.relegate()||Oe.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Jr.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n}=this.props,{projection:i}=s;mi=!0,i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Fu(t){const[s,a]=iu(),n=h.useContext(Pr);return e.jsx(fv,{...t,layoutGroup:n,switchLayoutGroup:h.useContext(xu),isPresent:s,safeToRemove:a})}function xv(t,s,a){const n=lt(t)?t:Us(t);return n.start(lo("",n,s,a)),n.animation}const vv=(t,s)=>t.depth-s.depth;class yv{constructor(){this.children=[],this.isDirty=!1}add(s){Lr(this.children,s),this.isDirty=!0}remove(s){Ir(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(vv),this.isDirty=!1,this.children.forEach(s)}}function jv(t,s){const a=pt.now(),n=({timestamp:i})=>{const r=i-a;r>=s&&(Xt(n),t(r-s))};return Oe.setup(n,!0),()=>Xt(n)}const Uu=["TopLeft","TopRight","BottomLeft","BottomRight"],bv=Uu.length,Ql=t=>typeof t=="string"?parseFloat(t):t,Jl=t=>typeof t=="number"||ve.test(t);function wv(t,s,a,n,i,r){i?(t.opacity=We(0,a.opacity??1,Nv(n)),t.opacityExit=We(s.opacity??1,0,Sv(n))):r&&(t.opacity=We(s.opacity??1,a.opacity??1,n));for(let o=0;o<bv;o++){const c=`border${Uu[o]}Radius`;let d=Xl(s,c),u=Xl(a,c);if(d===void 0&&u===void 0)continue;d||(d=0),u||(u=0),d===0||u===0||Jl(d)===Jl(u)?(t[c]=Math.max(We(Ql(d),Ql(u),n),0),(Ft.test(u)||Ft.test(d))&&(t[c]+="%")):t[c]=u}(s.rotate||a.rotate)&&(t.rotate=We(s.rotate||0,a.rotate||0,n))}function Xl(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const Nv=Bu(0,.5,Sd),Sv=Bu(.5,.95,Tt);function Bu(t,s,a){return n=>n<t?0:n>s?1:a(ma(t,s,n))}function Zl(t,s){t.min=s.min,t.max=s.max}function Pt(t,s){Zl(t.x,s.x),Zl(t.y,s.y)}function ec(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function tc(t,s,a,n,i){return t-=s,t=rn(t,1/a,n),i!==void 0&&(t=rn(t,1/i,n)),t}function Cv(t,s=0,a=1,n=.5,i,r=t,o=t){if(Ft.test(s)&&(s=parseFloat(s),s=We(o.min,o.max,s/100)-o.min),typeof s!="number")return;let c=We(r.min,r.max,n);t===r&&(c-=s),t.min=tc(t.min,s,a,c,i),t.max=tc(t.max,s,a,c,i)}function sc(t,s,[a,n,i],r,o){Cv(t,s[a],s[n],s[i],s.scale,r,o)}const kv=["x","scaleX","originX"],Av=["y","scaleY","originY"];function ac(t,s,a,n){sc(t.x,s,kv,a?a.x:void 0,n?n.x:void 0),sc(t.y,s,Av,a?a.y:void 0,n?n.y:void 0)}function nc(t){return t.translate===0&&t.scale===1}function Wu(t){return nc(t.x)&&nc(t.y)}function ic(t,s){return t.min===s.min&&t.max===s.max}function Tv(t,s){return ic(t.x,s.x)&&ic(t.y,s.y)}function rc(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Vu(t,s){return rc(t.x,s.x)&&rc(t.y,s.y)}function oc(t){return dt(t.x)/dt(t.y)}function lc(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Dv{constructor(){this.members=[]}add(s){Lr(this.members,s),s.scheduleRender()}remove(s){if(Ir(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(i=>s===i);if(a===0)return!1;let n;for(let i=a;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(s,a){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,a&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:n}=s;a.onExitComplete&&a.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pv(t,s,a){let n="";const i=t.x.translate/s.x,r=t.y.translate/s.y,o=a?.z||0;if((i||r||o)&&(n=`translate3d(${i}px, ${r}px, ${o}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:u,rotate:l,rotateX:p,rotateY:g,skewX:b,skewY:y}=a;u&&(n=`perspective(${u}px) ${n}`),l&&(n+=`rotate(${l}deg) `),p&&(n+=`rotateX(${p}deg) `),g&&(n+=`rotateY(${g}deg) `),b&&(n+=`skewX(${b}deg) `),y&&(n+=`skewY(${y}deg) `)}const c=t.x.scale*s.x,d=t.y.scale*s.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const pi=["","X","Y","Z"],Ev=1e3;let Rv=0;function gi(t,s,a,n){const{latestValues:i}=s;i[t]&&(a[t]=i[t],s.setStaticValue(t,0),n&&(n[t]=0))}function $u(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=Au(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",Oe,!(i||r))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&$u(n)}function qu({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},c=s?.()){this.id=Rv++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Mv),this.nodes.forEach(Bv),this.nodes.forEach(Wv),this.nodes.forEach(Ov)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new yv)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Fr),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=nu(o)&&!Nf(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let l,p=0;const g=()=>this.root.updateBlockedByResize=!1;Oe.read(()=>{p=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,l&&l(),l=jv(g,250),Ja.hasAnimatedSinceResize&&(Ja.hasAnimatedSinceResize=!1,this.nodes.forEach(uc)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:l,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||Hv,{onLayoutAnimationStart:f,onLayoutAnimationComplete:v}=u.getProps(),j=!this.targetLayout||!Vu(this.targetLayout,b),C=!p&&g;if(this.options.layoutRoot||this.resumeFrom||C||p&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...Kr(y,"layout"),onPlay:f,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(l,C)}else p||uc(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vv),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$u(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const p=this.path[l];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cc);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dc);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Uv),this.nodes.forEach(Lv),this.nodes.forEach(Iv)):this.nodes.forEach(dc),this.clearAllSnapshots();const c=pt.now();it.delta=Vt(0,1e3/60,c-it.timestamp),it.timestamp=c,it.isProcessing=!0,ai.update.process(it),ai.preRender.process(it),ai.render.process(it),it.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fv),this.sharedNodes.forEach($v)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Oe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Oe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!dt(this.snapshot.measuredBox.x)&&!dt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Wu(this.projectionDelta),d=this.getTransformTemplate(),u=d?d(this.latestValues,""):void 0,l=u!==this.prevTransformTemplateValue;o&&this.instance&&(c||ds(this.latestValues)||l)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),zv(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ze();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Gv))){const{scroll:u}=this.root;u&&(Es(c.x,u.offset.x),Es(c.y,u.offset.y))}return c}removeElementScroll(o){const c=Ze();if(Pt(c,o),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:l,options:p}=u;u!==this.root&&l&&p.layoutScroll&&(l.wasRoot&&Pt(c,o),Es(c.x,l.offset.x),Es(c.y,l.offset.y))}return c}applyTransform(o,c=!1){const d=Ze();Pt(d,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];!c&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Rs(d,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),ds(l.latestValues)&&Rs(d,l.latestValues)}return ds(this.latestValues)&&Rs(d,this.latestValues),d}removeTransform(o){const c=Ze();Pt(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];if(!u.instance||!ds(u.latestValues))continue;Yi(u.latestValues)&&u.updateSnapshot();const l=Ze(),p=u.measurePageBox();Pt(l,p),ac(c,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,l)}return ds(this.latestValues)&&ac(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==it.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:l,layoutId:p}=this.options;if(!this.layout||!(l||p))return;this.resolvedRelativeTargetAt=it.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ze(),this.targetWithTransforms=Ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tv(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pt(this.target,this.layout.layoutBox),bu(this.target,this.targetDelta)):Pt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Yi(this.parent.latestValues)||ju(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,d){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),on(this.relativeTargetOrigin,c,d),Pt(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===it.timestamp&&(d=!1),d)return;const{layout:u,layoutId:l}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||l))return;Pt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;mx(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ze());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ec(this.prevProjectionDelta.x,this.projectionDelta.x),ec(this.prevProjectionDelta.y,this.projectionDelta.y)),da(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!lc(this.projectionDelta.x,this.prevProjectionDelta.x)||!lc(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ls(),this.projectionDelta=Ls(),this.projectionDeltaWithTransform=Ls()}setAnimationOrigin(o,c=!1){const d=this.snapshot,u=d?d.latestValues:{},l={...this.latestValues},p=Ls();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=Ze(),b=d?d.source:void 0,y=this.layout?this.layout.source:void 0,f=b!==y,v=this.getStack(),j=!v||v.members.length<=1,C=!!(f&&!j&&this.options.crossfade===!0&&!this.path.some(_v));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const R=N/1e3;hc(p.x,o.x,R),hc(p.y,o.y,R),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(on(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qv(this.relativeTarget,this.relativeTargetOrigin,g,R),x&&Tv(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ze()),Pt(x,this.relativeTarget)),f&&(this.animationValues=l,wv(l,u,this.latestValues,R,C,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Xt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Oe.update(()=>{Ja.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Us(0)),this.currentAnimation=xv(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ev),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:u,latestValues:l}=o;if(!(!c||!d||!u)){if(this!==o&&this.layout&&u&&_u(this.options.animationType,this.layout.layoutBox,u.layoutBox)){d=this.target||Ze();const p=dt(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+p;const g=dt(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+g}Pt(c,d),Rs(c,l),da(this.projectionDeltaWithTransform,this.layoutCorrected,c,l)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Dv),this.sharedNodes.get(o).add(c);const u=c.options.initialPromotionConfig;c.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const u=this.getStack();u&&u.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const u={};d.z&&gi("z",o,u,this.animationValues);for(let l=0;l<pi.length;l++)gi(`rotate${pi[l]}`,o,u,this.animationValues),gi(`skew${pi[l]}`,o,u,this.animationValues);o.render();for(const l in u)o.setStaticValue(l,u[l]),this.animationValues&&(this.animationValues[l]=u[l]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Qa(c?.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Qa(c?.pointerEvents)||""),this.hasProjected&&!ds(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const l=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=Pv(this.projectionDeltaWithTransform,this.treeScale,l);d&&(p=d(l,p)),o.transform=p;const{x:g,y:b}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,u.animationValues?o.opacity=u===this?l.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:l.opacityExit:o.opacity=u===this?l.opacity!==void 0?l.opacity:"":l.opacityExit!==void 0?l.opacityExit:0;for(const y in Gi){if(l[y]===void 0)continue;const{correct:f,applyTo:v,isCSSVariable:j}=Gi[y],C=p==="none"?l[y]:f(l[y],u);if(v){const x=v.length;for(let N=0;N<x;N++)o[v[N]]=C}else j?this.options.visualElement.renderState.vars[y]=C:o[y]=C}this.options.layoutId&&(o.pointerEvents=u===this?Qa(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(cc),this.root.sharedNodes.clear()}}}function Lv(t){t.updateLayout()}function Iv(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:i}=t.options,r=s.source!==t.layout.source;i==="size"?Ct(l=>{const p=r?s.measuredBox[l]:s.layoutBox[l],g=dt(p);p.min=a[l].min,p.max=p.min+g}):_u(i,s.layoutBox,a)&&Ct(l=>{const p=r?s.measuredBox[l]:s.layoutBox[l],g=dt(a[l]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[l].max=t.relativeTarget[l].min+g)});const o=Ls();da(o,a,s.layoutBox);const c=Ls();r?da(c,t.applyTransform(n,!0),s.measuredBox):da(c,a,s.layoutBox);const d=!Wu(o);let u=!1;if(!t.resumeFrom){const l=t.getClosestProjectingParent();if(l&&!l.resumeFrom){const{snapshot:p,layout:g}=l;if(p&&g){const b=Ze();on(b,s.layoutBox,p.layoutBox);const y=Ze();on(y,a,g.layoutBox),Vu(b,y)||(u=!0),l.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=b,t.relativeParent=l)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function Mv(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ov(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Fv(t){t.clearSnapshot()}function cc(t){t.clearMeasurements()}function dc(t){t.isLayoutDirty=!1}function Uv(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function uc(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Bv(t){t.resolveTargetDelta()}function Wv(t){t.calcProjection()}function Vv(t){t.resetSkewAndRotation()}function $v(t){t.removeLeadSnapshot()}function hc(t,s,a){t.translate=We(s.translate,0,a),t.scale=We(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function mc(t,s,a,n){t.min=We(s.min,a.min,n),t.max=We(s.max,a.max,n)}function qv(t,s,a,n){mc(t.x,s.x,a.x,n),mc(t.y,s.y,a.y,n)}function _v(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hv={duration:.45,ease:[.4,0,.1,1]},pc=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),gc=pc("applewebkit/")&&!pc("chrome/")?Math.round:Tt;function fc(t){t.min=gc(t.min),t.max=gc(t.max)}function zv(t){fc(t.x),fc(t.y)}function _u(t,s,a){return t==="position"||t==="preserve-aspect"&&!ev(oc(s),oc(a),.2)}function Gv(t){return t!==t.root&&t.scroll?.wasRoot}const Yv=qu({attachResizeListener:(t,s)=>xa(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fi={current:void 0},Hu=qu({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fi.current){const t=new Yv({});t.mount(window),t.setOptions({layoutScroll:!0}),fi.current=t}return fi.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kv={pan:{Feature:gv},drag:{Feature:pv,ProjectionNode:Hu,MeasureLayout:Fu}};function xc(t,s,a){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,r=n[i];r&&Oe.postRender(()=>r(s,ka(s)))}class Qv extends as{mount(){const{current:s}=this.node;s&&(this.unmount=vf(s,(a,n)=>(xc(this.node,n,"Start"),i=>xc(this.node,i,"End"))))}unmount(){}}class Jv extends as{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Na(xa(this.node.current,"focus",()=>this.onFocus()),xa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vc(t,s,a){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),r=n[i];r&&Oe.postRender(()=>r(s,ka(s)))}class Xv extends as{mount(){const{current:s}=this.node;s&&(this.unmount=wf(s,(a,n)=>(vc(this.node,n,"Start"),(i,{success:r})=>vc(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tr=new WeakMap,xi=new WeakMap,Zv=t=>{const s=tr.get(t.target);s&&s(t)},ey=t=>{t.forEach(Zv)};function ty({root:t,...s}){const a=t||document;xi.has(a)||xi.set(a,{});const n=xi.get(a),i=JSON.stringify(s);return n[i]||(n[i]=new IntersectionObserver(ey,{root:t,...s})),n[i]}function sy(t,s,a){const n=ty(s);return tr.set(t,a),n.observe(t),()=>{tr.delete(t),n.unobserve(t)}}const ay={some:0,all:1};class ny extends as{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:n,amount:i="some",once:r}=s,o={root:a?a.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:ay[i]},c=d=>{const{isIntersecting:u}=d;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:l,onViewportLeave:p}=this.node.getProps(),g=u?l:p;g&&g(d)};return sy(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(iy(s,a))&&this.startObserver()}unmount(){}}function iy({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const ry={inView:{Feature:ny},tap:{Feature:Xv},focus:{Feature:Jv},hover:{Feature:Qv}},oy={layout:{ProjectionNode:Hu,MeasureLayout:Fu}},ly={...Yx,...ry,...Kv,...oy},de=dx(ly,Nx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dy=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,n)=>n?n.toUpperCase():a.toLowerCase()),yc=t=>{const s=dy(t);return s.charAt(0).toUpperCase()+s.slice(1)},zu=(...t)=>t.filter((s,a,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===a).join(" ").trim(),uy=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=h.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:o,...c},d)=>h.createElement("svg",{ref:d,...hy,width:s,height:s,stroke:t,strokeWidth:n?Number(a)*24/Number(s):a,className:zu("lucide",i),...!r&&!uy(c)&&{"aria-hidden":"true"},...c},[...o.map(([u,l])=>h.createElement(u,l)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(t,s)=>{const a=h.forwardRef(({className:n,...i},r)=>h.createElement(my,{ref:r,iconNode:s,className:zu(`lucide-${cy(yc(t))}`,`lucide-${t}`,n),...i}));return a.displayName=yc(t),a};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],gy=He("bath",py);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ln=He("calendar",fy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ea=He("check",xy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Xa=He("circle-check-big",vy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jy=He("circle-x",yy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sr=He("clock",by);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jc=He("download",wy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vi=He("file-text",Ny);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],As=He("house",Sy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ky=He("lock",Cy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ty=He("mail",Ay);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Py=He("map-pin",Dy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],qa=He("phone",Ey);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yi=He("plus",Ry);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ji=He("save",Ly);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],My=He("shield",Iy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ss=He("square-check-big",Oy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bi=He("square-pen",Fy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ta=He("square",Uy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],wi=He("trash-2",By);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bc=He("user",Wy);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gu=He("users",Vy);window.getNotifications=window.getNotifications||function(){return console.log("getNotifications called from iframe - using fallback"),Promise.resolve([])};const $y=()=>{const t={...console};console=new Proxy(console,{get(s,a){return a==="warn"||a==="error"||a==="log"?(...n)=>{const i=n.join(" ");["mapContainer","Google Maps JavaScript API","Permissions policy violation","getNotifications","Invalid DOM property","componentWillMount","componentWillReceiveProps","ReactDOM.render is no longer supported","string ref","strict-mode-string-ref","mapTypeId_changed","styles_changed","Geolocation access has been blocked","InvalidValueError: in property address","Failed to decode downloaded font","OTS parsing error","Failed to load resource","Uncaught SyntaxError","InvalidAccessError: Failed to execute","applicationServerKey is not valid","Initialization error","Error while retrieving token","subscribe on PushManager","Error getting location","Geolocation has been disabled","worker init","worker messaging","res 65.246.84.74","got ip","timeDifference","firebase mounted","should call","called","Firebase apps","Initializing Firebase","Firebase initialized","Firebase Messaging initialized","req token","Requesting permission","firebase","loadAppData is resolved","Click is in the middle bottom","Click is in the bottom-right corner","google.maps.places.AutocompleteService","google.maps.places.PlacesService","google.maps.Marker","mapId is present","map styles are controlled via the cloud console","deprecated","not available to new customers","not scheduled to be discontinued","will continue to receive bug fixes","at least 12 months notice","migration guide","ReferenceError: getNotifications","Geolocation has been disabled in this document","The notification permission was not granted and blocked instead","messaging/permission-blocked","Geolocation has been disabled in this document by permissions policy","As of March 1st, 2025","As of February 21st, 2024","Basemap iframe loaded successfully"].some(o=>i.includes(o))||t[a](...n)}:s[a]}}),window.addEventListener("error",s=>{const a=s.message||"";if(["getNotifications","Geolocation","applicationServerKey","PushManager","mapContainer","InvalidValueError","ReferenceError","Failed to decode downloaded font","OTS parsing error","The notification permission was not granted and blocked instead","messaging/permission-blocked","Geolocation has been disabled in this document by permissions policy"].some(i=>a.includes(i)))return s.preventDefault(),!1}),console.log("Iframe error handling initialized")},Aa="timeBlocks",Ta="regions",cn="availability",vn=async()=>{const t=J();return(await ue(ne(t,Aa))).docs.map(a=>({id:a.id,...a.data()}))},Yu=t=>{const s=J();return ja(ne(s,Aa),a=>t(a.docs.map(n=>({id:n.id,...n.data()}))))},qy=async(t,s)=>{const a=J();return wt(ie(a,Aa,t),s,{merge:!0})},Ku=async t=>{const s=J();return Qe(ne(s,Aa),t)},_y=async t=>{const s=J();return ot(ie(s,Aa,t))},co=async()=>{const t=J();return(await ue(ne(t,Ta))).docs.map(a=>({id:a.id,...a.data()}))},Hy=t=>{const s=J();return ja(ne(s,Ta),a=>t(a.docs.map(n=>({id:n.id,...n.data()}))))},zy=async(t,s)=>{const a=J();return wt(ie(a,Ta,t),s,{merge:!0})},Qu=async t=>{const s=J();return Qe(ne(s,Ta),t)},Gy=async t=>{const s=J();return ot(ie(s,Ta,t))},dn=async(t=null)=>{const s=J();if(console.log("üîç Fetching availability for region:",t),t){const a=je(ne(s,cn),Ke(`regions.${t}`,"!=",null)),n=await ue(a),i={};return n.docs.forEach(r=>{const o=r.data();console.log("üìÖ Availability data for date:",r.id,o),o&&o.regions&&o.regions[t]&&(i[r.id]=o.regions[t])}),console.log("‚úÖ Final availability for region:",t,i),i}else{const a=await ue(ne(s,cn)),n={};return a.docs.forEach(i=>{const r=i.data();console.log("üìÖ Availability data for date:",i.id,r),r&&(n[i.id]=r)}),console.log("‚úÖ Final availability for all regions:",n),n}},Yy=(t,s)=>{const a=J();return console.log("üîÑ Setting up real-time listener for region:",t),ja(ne(a,cn),n=>{const i={};n.docs.forEach(r=>{const o=r.data();console.log("üìÖ Real-time availability data for date:",r.id,o),o&&o.regions&&o.regions[t]&&(i[r.id]=o.regions[t])}),console.log("‚úÖ Real-time availability for region:",t,i),s(i)})},Ju=async(t,s)=>{const a=J();return wt(ie(a,cn,t),s,{merge:!0})},Xu={MIDA:["Anne Arundel MD","Baltimore City MD","Baltimore County MD","Berkeley WV","Calvert MD","Carroll MD","Cecil MD","Charles MD","District of Columbia","Fredrick MD","Harford MD","Howard MD","Jefferson WV","Montgomery MD","Morgan WV","Prince George's MD","St Mary's MD","Washington MD"],ESDE:["Caroline MD","Dorchester MD","Kent DE","Kent MD","Queen Anne's MD","Somerset MD","Sussex DE","Talbot MD","Wicomico MD","Worcester MD"],NOVA:["Alexandria VA","Arlington VA","Caroline VA","Charles City VA","Chesterfield VA","Clarke VA","Colonial Heights VA","Culpeper VA","Essex VA","Fairfax VA","Falls Church VA","Fauquier VA","Fredrick VA","Fredricksburg VA","Gloucester VA","Goochland VA","Hanover VA","Henrico VA","Hopewell VA","King and Queen VA","King George VA","King William VA","Lancaster VA","Loudon VA","Louisa VA","Madison VA","Manassas Park VA","Manassas VA","Mathews VA","Middlesex VA","New Kent VA","Northumberland VA","Orange VA","Petersburg VA","Powhatan VA","Prince William VA","Rappahanncock VA","Richmond City VA","Richmond County VA","Spotsylvania VA","Stafford VA","Warren VA","Westmoreland VA","Winchester VA"],NENG:["Barnstable MA","Bristol MA","Bristol RI","Essex MA","Kent RI","Middlessex MA","Newport RI","Norfolk MA","Plymouth MA","Providence RI","Suffolk MA","Suffolk MA","Washington RI","Worcester MA"],NHME:["Bellknap NH","Carroll NH","Cheshire NH","Cumberland ME","Grafton NH","Hillsborough NH","Merrimack NH","Rockingham NH","Strafford NH","Sullivan NH","York ME"],CTWM:["Berkshire MA","Fairfield CT","Franklin MA","Hampden MA","Hampshire MA","Hartford CT","Litchfield CT","Middlessex CT","New Haven CT","New London CT","Tolland CT","Windham CT"],SOPA:["Adams PA","Berks PA","Carbon PA","Chester PA","Columbia PA","Cumberland PA","Dauphin PA","Juniata PA","Lancaster PA","Lebanon PA","Lehigh PA","Montour PA","Northumberland PA","Perry PA","Schuylkill PA","Snyder PA","Union PA","York PA"],WCFL:["Citrus FL","DeSoto FL","Hardee FL","Hernando FL","Hillsborough FL","Manatee FL","Pasco FL","Pinellas FL","Polk FL","Sarasota FL"]};function Ky(t){if(!t)return null;console.log("üîç Checking address:",t);const s=t.toUpperCase(),a=["MD","VA","WV","DE","MA","RI","NH","ME","CT","PA","FL"];let n=null,i=null;for(const r of a)if(new RegExp(`\\b${r}\\b`).test(s)){n=r,console.log("üìç Found state:",n);break}if(!n)return console.log("‚ö†Ô∏è No state found in address"),null;for(const[r,o]of Object.entries(Xu)){for(const c of o){const[d,u]=c.split(" ");if(u===n){const l=d.toUpperCase();if(s.includes(l)){i=d,console.log("üìç Found county:",i,"in region:",r);break}}}if(i)break}if(!i&&n==="MD"&&(s.includes("SEVERN")||s.includes("21144")?(i="Anne Arundel",console.log("üìç Determined Anne Arundel County from city/zip")):s.includes("HANOVER")||s.includes("21076")?(i="Howard",console.log("üìç Determined Howard County from city/zip")):s.includes("BALTIMORE")?(i="Baltimore",console.log("üìç Determined Baltimore County from city")):s.includes("ROCKVILLE")||s.includes("BETHESDA")||s.includes("SILVER SPRING")?(i="Montgomery",console.log("üìç Determined Montgomery County from city")):(s.includes("LAUREL")||s.includes("20708"))&&(i="Prince George's",console.log("üìç Determined Prince George's County from city/zip"))),i&&n){const r=`${i} ${n}`;return console.log("‚úÖ Final result:",r),r}return console.log("‚ùå Could not determine county/state"),null}function Qy(t){if(!t)return console.log("‚ùå No address provided"),{inServiceArea:!1,region:null,county:null};const s=Ky(t);if(!s)return console.log("‚ùå Could not extract county/state from address"),{inServiceArea:!1,region:null,county:null};for(const[a,n]of Object.entries(Xu))if(n.includes(s))return console.log("‚úÖ Address is in service area:",a,s),{inServiceArea:!0,region:a,county:s};return console.log("‚ùå Address not in any service area:",s),{inServiceArea:!1,region:null,county:null}}function Zu(t){var s,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(a=Zu(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function yn(){for(var t,s,a=0,n="",i=arguments.length;a<i;a++)(t=arguments[a])&&(s=Zu(t))&&(n&&(n+=" "),n+=s);return n}const Jy=(t,s,a,n)=>{if(a==="length"||a==="prototype"||a==="arguments"||a==="caller")return;const i=Object.getOwnPropertyDescriptor(t,a),r=Object.getOwnPropertyDescriptor(s,a);!Xy(i,r)&&n||Object.defineProperty(t,a,r)},Xy=function(t,s){return t===void 0||t.configurable||t.writable===s.writable&&t.enumerable===s.enumerable&&t.configurable===s.configurable&&(t.writable||t.value===s.value)},Zy=(t,s)=>{const a=Object.getPrototypeOf(s);a!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,a)},ej=(t,s)=>`/* Wrapped ${t}*/
${s}`,tj=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),sj=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),aj=(t,s,a)=>{const n=a===""?"":`with ${a.trim()}() `,i=ej.bind(null,n,s.toString());Object.defineProperty(i,"name",sj);const{writable:r,enumerable:o,configurable:c}=tj;Object.defineProperty(t,"toString",{value:i,writable:r,enumerable:o,configurable:c})};function nj(t,s,{ignoreNonConfigurable:a=!1}={}){const{name:n}=t;for(const i of Reflect.ownKeys(s))Jy(t,s,i,a);return Zy(t,s),aj(t,s,n),t}const _a=2147483647,ij=new WeakMap,Ni=new WeakMap,rj=new WeakMap;function oj(t,s){const a=t.get(s);if(a){if(a.maxAge<=Date.now()){t.delete(s);return}return a}}function eh(t,{cacheKey:s,cache:a=new Map,maxAge:n}={}){if(n===0)return t;if(typeof n=="number"&&Number.isFinite(n)){if(n>_a)throw new TypeError(`The \`maxAge\` option cannot exceed ${_a}.`);if(n<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const i=function(...r){const o=s?s(r):r[0],c=oj(a,o);if(c)return c.data;const d=t.apply(this,r),u=typeof n=="function"?n(...r):n;if(u!==void 0&&u!==Number.POSITIVE_INFINITY){if(!Number.isFinite(u))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(u<=0)return d;if(u>_a)throw new TypeError(`The \`maxAge\` function result cannot exceed ${_a}.`)}if(a.set(o,{data:d,maxAge:u===void 0||u===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+u}),u!==void 0&&u!==Number.POSITIVE_INFINITY){const l=setTimeout(()=>{a.delete(o),Ni.get(i)?.delete(l)},u);l.unref?.();const p=Ni.get(i)??new Set;p.add(l),Ni.set(i,p)}return d};return nj(i,t,{ignoreNonConfigurable:!0}),ij.set(i,a),rj.set(i,s??(r=>r[0])),i}function lj(t){return typeof t=="string"}function cj(t,s,a){return a.indexOf(t)===s}function dj(t){return t.toLowerCase()===t}function wc(t){return t.indexOf(",")===-1?t:t.split(",")}function ar(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var s=t.split(".")[0],a=s===void 0?"":s;return ar(a)}if(t.indexOf("@")!==-1){var n=t.split("@")[0],a=n===void 0?"":n;return ar(a)}if(t.indexOf("-")===-1||!dj(t))return t;var i=t.split("-"),r=i[0],o=i[1],c=o===void 0?"":o;return"".concat(r,"-").concat(c.toUpperCase())}function uj(t){var s=t===void 0?{}:t,a=s.useFallbackLocale,n=a===void 0?!0:a,i=s.fallbackLocale,r=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var c=navigator.languages||[],d=[],u=0,l=c;u<l.length;u++){var p=l[u];d=d.concat(wc(p))}var g=navigator.language,b=g&&wc(g);o=o.concat(d,b)}return n&&o.push(r),o.filter(lj).map(ar).filter(cj)}var hj=eh(uj,{cacheKey:JSON.stringify});function mj(t){return hj(t)[0]||null}var th=eh(mj,{cacheKey:JSON.stringify});function qt(t,s,a){return function(i,r=a){const o=t(i)+r;return s(o)}}function Da(t){return function(a){return new Date(t(a).getTime()-1)}}function Pa(t,s){return function(n){return[t(n),s(n)]}}function Fe(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const s=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(s))return s;throw new Error(`Failed to get year from date: ${t}.`)}function ns(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function jn(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function Hs(t){const s=Fe(t),a=s+(-s+1)%100,n=new Date;return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const pj=qt(Fe,Hs,-100),sh=qt(Fe,Hs,100),uo=Da(sh),gj=qt(Fe,uo,-100),ah=Pa(Hs,uo);function is(t){const s=Fe(t),a=s+(-s+1)%10,n=new Date;return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const nh=qt(Fe,is,-10),ho=qt(Fe,is,10),bn=Da(ho),ih=qt(Fe,bn,-10),rh=Pa(is,bn);function zs(t){const s=Fe(t),a=new Date;return a.setFullYear(s,0,1),a.setHours(0,0,0,0),a}const oh=qt(Fe,zs,-1),mo=qt(Fe,zs,1),wn=Da(mo),lh=qt(Fe,wn,-1),fj=Pa(zs,wn);function po(t,s){return function(n,i=s){const r=Fe(n),o=ns(n)+i,c=new Date;return c.setFullYear(r,o,1),c.setHours(0,0,0,0),t(c)}}function js(t){const s=Fe(t),a=ns(t),n=new Date;return n.setFullYear(s,a,1),n.setHours(0,0,0,0),n}const ch=po(js,-1),go=po(js,1),Ea=Da(go),dh=po(Ea,-1),xj=Pa(js,Ea);function vj(t,s){return function(n,i=s){const r=Fe(n),o=ns(n),c=jn(n)+i,d=new Date;return d.setFullYear(r,o,c),d.setHours(0,0,0,0),t(d)}}function Ra(t){const s=Fe(t),a=ns(t),n=jn(t),i=new Date;return i.setFullYear(s,a,n),i.setHours(0,0,0,0),i}const yj=vj(Ra,1),fo=Da(yj),jj=Pa(Ra,fo);function uh(t){return jn(Ea(t))}var rt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},bj={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},xo=[0,1,2,3,4,5,6],Si=new Map;function wj(t){return function(a,n){var i=a||th();Si.has(i)||Si.set(i,new Map);var r=Si.get(i);return r.has(t)||r.set(t,new Intl.DateTimeFormat(i||void 0,t).format),r.get(t)(n)}}function Nj(t){var s=new Date(t);return new Date(s.setHours(12))}function bs(t){return function(s,a){return wj(t)(s,Nj(a))}}var Sj={day:"numeric"},Cj={day:"numeric",month:"long",year:"numeric"},kj={month:"long"},Aj={month:"long",year:"numeric"},Tj={weekday:"short"},Dj={weekday:"long"},Pj={year:"numeric"},Ej=bs(Sj),Rj=bs(Cj),Lj=bs(kj),hh=bs(Aj),Ij=bs(Tj),Mj=bs(Dj),Nn=bs(Pj),Oj=xo[0],Fj=xo[5],Nc=xo[6];function va(t,s){s===void 0&&(s=rt.ISO_8601);var a=t.getDay();switch(s){case rt.ISO_8601:return(a+6)%7;case rt.ISLAMIC:return(a+1)%7;case rt.HEBREW:case rt.GREGORY:return a;default:throw new Error("Unsupported calendar type.")}}function Uj(t){var s=Hs(t);return Fe(s)}function Bj(t){var s=is(t);return Fe(s)}function nr(t,s){s===void 0&&(s=rt.ISO_8601);var a=Fe(t),n=ns(t),i=t.getDate()-va(t,s);return new Date(a,n,i)}function Wj(t,s){s===void 0&&(s=rt.ISO_8601);var a=s===rt.GREGORY?rt.GREGORY:rt.ISO_8601,n=nr(t,s),i=Fe(t)+1,r,o;do r=new Date(i,0,a===rt.ISO_8601?4:1),o=nr(r,s),i-=1;while(t<o);return Math.round((n.getTime()-o.getTime())/(864e5*7))+1}function vs(t,s){switch(t){case"century":return Hs(s);case"decade":return is(s);case"year":return zs(s);case"month":return js(s);case"day":return Ra(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function Vj(t,s){switch(t){case"century":return pj(s);case"decade":return nh(s);case"year":return oh(s);case"month":return ch(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function mh(t,s){switch(t){case"century":return sh(s);case"decade":return ho(s);case"year":return mo(s);case"month":return go(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function $j(t,s){switch(t){case"decade":return nh(s,-100);case"year":return oh(s,-10);case"month":return ch(s,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function qj(t,s){switch(t){case"decade":return ho(s,100);case"year":return mo(s,10);case"month":return go(s,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function ph(t,s){switch(t){case"century":return uo(s);case"decade":return bn(s);case"year":return wn(s);case"month":return Ea(s);case"day":return fo(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function _j(t,s){switch(t){case"century":return gj(s);case"decade":return ih(s);case"year":return lh(s);case"month":return dh(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function Hj(t,s){switch(t){case"decade":return ih(s,-100);case"year":return lh(s,-10);case"month":return dh(s,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function Sc(t,s){switch(t){case"century":return ah(s);case"decade":return rh(s);case"year":return fj(s);case"month":return xj(s);case"day":return jj(s);default:throw new Error("Invalid rangeType: ".concat(t))}}function zj(t,s,a){var n=[s,a].sort(function(i,r){return i.getTime()-r.getTime()});return[vs(t,n[0]),ph(t,n[1])]}function gh(t,s,a){return a.map(function(n){return(s||Nn)(t,n)}).join(" ‚Äì ")}function Gj(t,s,a){return gh(t,s,ah(a))}function fh(t,s,a){return gh(t,s,rh(a))}function Yj(t){return t.getDay()===new Date().getDay()}function xh(t,s){s===void 0&&(s=rt.ISO_8601);var a=t.getDay();switch(s){case rt.ISLAMIC:case rt.HEBREW:return a===Fj||a===Nc;case rt.ISO_8601:case rt.GREGORY:return a===Nc||a===Oj;default:throw new Error("Unsupported calendar type.")}}var Mt="react-calendar__navigation";function Kj(t){var s=t.activeStartDate,a=t.drillUp,n=t.formatMonthYear,i=n===void 0?hh:n,r=t.formatYear,o=r===void 0?Nn:r,c=t.locale,d=t.maxDate,u=t.minDate,l=t.navigationAriaLabel,p=l===void 0?"":l,g=t.navigationAriaLive,b=t.navigationLabel,y=t.next2AriaLabel,f=y===void 0?"":y,v=t.next2Label,j=v===void 0?"¬ª":v,C=t.nextAriaLabel,x=C===void 0?"":C,N=t.nextLabel,R=N===void 0?"‚Ä∫":N,E=t.prev2AriaLabel,z=E===void 0?"":E,k=t.prev2Label,V=k===void 0?"¬´":k,$=t.prevAriaLabel,A=$===void 0?"":$,_=t.prevLabel,O=_===void 0?"‚Äπ":_,Y=t.setActiveStartDate,U=t.showDoubleView,w=t.view,T=t.views,W=T.indexOf(w)>0,P=w!=="century",L=Vj(w,s),q=P?$j(w,s):void 0,m=mh(w,s),D=P?qj(w,s):void 0,S=(function(){if(L.getFullYear()<0)return!0;var pe=_j(w,s);return u&&u>=pe})(),M=P&&(function(){if(q.getFullYear()<0)return!0;var pe=Hj(w,s);return u&&u>=pe})(),F=d&&d<m,X=P&&d&&d<D;function oe(){Y(L,"prev")}function ae(){Y(q,"prev2")}function H(){Y(m,"next")}function se(){Y(D,"next2")}function Z(pe){var De=(function(){switch(w){case"century":return Gj(c,o,pe);case"decade":return fh(c,o,pe);case"year":return o(c,pe);case"month":return i(c,pe);default:throw new Error("Invalid view: ".concat(w,"."))}})();return b?b({date:pe,label:De,locale:c||th()||void 0,view:w}):De}function he(){var pe="".concat(Mt,"__label");return e.jsxs("button",{"aria-label":p,"aria-live":g,className:pe,disabled:!W,onClick:a,style:{flexGrow:1},type:"button",children:[e.jsx("span",{className:"".concat(pe,"__labelText ").concat(pe,"__labelText--from"),children:Z(s)}),U?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"".concat(pe,"__divider"),children:" ‚Äì "}),e.jsx("span",{className:"".concat(pe,"__labelText ").concat(pe,"__labelText--to"),children:Z(m)})]}):null]})}return e.jsxs("div",{className:Mt,children:[V!==null&&P?e.jsx("button",{"aria-label":z,className:"".concat(Mt,"__arrow ").concat(Mt,"__prev2-button"),disabled:M,onClick:ae,type:"button",children:V}):null,O!==null&&e.jsx("button",{"aria-label":A,className:"".concat(Mt,"__arrow ").concat(Mt,"__prev-button"),disabled:S,onClick:oe,type:"button",children:O}),he(),R!==null&&e.jsx("button",{"aria-label":x,className:"".concat(Mt,"__arrow ").concat(Mt,"__next-button"),disabled:F,onClick:H,type:"button",children:R}),j!==null&&P?e.jsx("button",{"aria-label":f,className:"".concat(Mt,"__arrow ").concat(Mt,"__next2-button"),disabled:X,onClick:se,type:"button",children:j}):null]})}var Is=function(){return Is=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},Is.apply(this,arguments)},Qj=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a};function Cc(t){return"".concat(t,"%")}function vo(t){var s=t.children,a=t.className,n=t.count,i=t.direction,r=t.offset,o=t.style,c=t.wrap,d=Qj(t,["children","className","count","direction","offset","style","wrap"]);return e.jsx("div",Is({className:a,style:Is({display:"flex",flexDirection:i,flexWrap:c?"wrap":"nowrap"},o)},d,{children:h.Children.map(s,function(u,l){var p=r&&l===0?Cc(100*r/n):null;return h.cloneElement(u,Is(Is({},u.props),{style:{flexBasis:Cc(100/n),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:p,marginInlineStart:p,marginInlineEnd:0}}))})}))}function Jj(t,s,a){return s&&s>t?s:a&&a<t?a:t}function ya(t,s){return s[0]<=t&&s[1]>=t}function Xj(t,s){return t[0]<=s[0]&&t[1]>=s[1]}function vh(t,s){return ya(t[0],s)||ya(t[1],s)}function kc(t,s,a){var n=vh(s,t),i=[];if(n){i.push(a);var r=ya(t[0],s),o=ya(t[1],s);r&&i.push("".concat(a,"Start")),o&&i.push("".concat(a,"End")),r&&o&&i.push("".concat(a,"BothEnds"))}return i}function Zj(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function eb(t){if(!t)throw new Error("args is required");var s=t.value,a=t.date,n=t.hover,i="react-calendar__tile",r=[i];if(!a)return r;var o=new Date,c=(function(){if(Array.isArray(a))return a;var b=t.dateType;if(!b)throw new Error("dateType is required when date is not an array of two dates");return Sc(b,a)})();if(ya(o,c)&&r.push("".concat(i,"--now")),!s||!Zj(s))return r;var d=(function(){if(Array.isArray(s))return s;var b=t.valueType;if(!b)throw new Error("valueType is required when value is not an array of two dates");return Sc(b,s)})();Xj(d,c)?r.push("".concat(i,"--active")):vh(d,c)&&r.push("".concat(i,"--hasActive"));var u=kc(d,c,"".concat(i,"--range"));r.push.apply(r,u);var l=Array.isArray(s)?s:[s];if(n&&l.length===1){var p=n>d[0]?[d[0],n]:[n,d[0]],g=kc(p,c,"".concat(i,"--hover"));r.push.apply(r,g)}return r}function Sn(t){for(var s=t.className,a=t.count,n=a===void 0?3:a,i=t.dateTransform,r=t.dateType,o=t.end,c=t.hover,d=t.offset,u=t.renderTile,l=t.start,p=t.step,g=p===void 0?1:p,b=t.value,y=t.valueType,f=[],v=l;v<=o;v+=g){var j=i(v);f.push(u({classes:eb({date:j,dateType:r,hover:c,value:b,valueType:y}),date:j}))}return e.jsx(vo,{className:s,count:n,offset:d,wrap:!0,children:f})}function Cn(t){var s=t.activeStartDate,a=t.children,n=t.classes,i=t.date,r=t.formatAbbr,o=t.locale,c=t.maxDate,d=t.maxDateTransform,u=t.minDate,l=t.minDateTransform,p=t.onClick,g=t.onMouseOver,b=t.style,y=t.tileClassName,f=t.tileContent,v=t.tileDisabled,j=t.view,C=h.useMemo(function(){var N={activeStartDate:s,date:i,view:j};return typeof y=="function"?y(N):y},[s,i,y,j]),x=h.useMemo(function(){var N={activeStartDate:s,date:i,view:j};return typeof f=="function"?f(N):f},[s,i,f,j]);return e.jsxs("button",{className:yn(n,C),disabled:u&&l(u)>i||c&&d(c)<i||v?.({activeStartDate:s,date:i,view:j}),onClick:p?function(N){return p(i,N)}:void 0,onFocus:g?function(){return g(i)}:void 0,onMouseOver:g?function(){return g(i)}:void 0,style:b,type:"button",children:[r?e.jsx("abbr",{"aria-label":r(o,i),children:a}):a,x]})}var ir=function(){return ir=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},ir.apply(this,arguments)},tb=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a},Ac="react-calendar__century-view__decades__decade";function sb(t){var s=t.classes,a=s===void 0?[]:s,n=t.currentCentury,i=t.formatYear,r=i===void 0?Nn:i,o=tb(t,["classes","currentCentury","formatYear"]),c=o.date,d=o.locale,u=[];return a&&u.push.apply(u,a),u.push(Ac),Hs(c).getFullYear()!==n&&u.push("".concat(Ac,"--neighboringCentury")),e.jsx(Cn,ir({},o,{classes:u,maxDateTransform:bn,minDateTransform:is,view:"century",children:fh(d,r,c)}))}var rr=function(){return rr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},rr.apply(this,arguments)},Tc=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a};function ab(t){var s=t.activeStartDate,a=t.hover,n=t.showNeighboringCentury,i=t.value,r=t.valueType,o=Tc(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),c=Uj(s),d=c+(n?119:99);return e.jsx(Sn,{className:"react-calendar__century-view__decades",dateTransform:is,dateType:"decade",end:d,hover:a,renderTile:function(u){var l=u.date,p=Tc(u,["date"]);return e.jsx(sb,rr({},o,p,{activeStartDate:s,currentCentury:c,date:l}),l.getTime())},start:c,step:10,value:i,valueType:r})}var or=function(){return or=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},or.apply(this,arguments)};function nb(t){function s(){return e.jsx(ab,or({},t))}return e.jsx("div",{className:"react-calendar__century-view",children:s()})}var lr=function(){return lr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},lr.apply(this,arguments)},ib=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a},Dc="react-calendar__decade-view__years__year";function rb(t){var s=t.classes,a=s===void 0?[]:s,n=t.currentDecade,i=t.formatYear,r=i===void 0?Nn:i,o=ib(t,["classes","currentDecade","formatYear"]),c=o.date,d=o.locale,u=[];return a&&u.push.apply(u,a),u.push(Dc),is(c).getFullYear()!==n&&u.push("".concat(Dc,"--neighboringDecade")),e.jsx(Cn,lr({},o,{classes:u,maxDateTransform:wn,minDateTransform:zs,view:"decade",children:r(d,c)}))}var cr=function(){return cr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},cr.apply(this,arguments)},Pc=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a};function ob(t){var s=t.activeStartDate,a=t.hover,n=t.showNeighboringDecade,i=t.value,r=t.valueType,o=Pc(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),c=Bj(s),d=c+(n?11:9);return e.jsx(Sn,{className:"react-calendar__decade-view__years",dateTransform:zs,dateType:"year",end:d,hover:a,renderTile:function(u){var l=u.date,p=Pc(u,["date"]);return e.jsx(rb,cr({},o,p,{activeStartDate:s,currentDecade:c,date:l}),l.getTime())},start:c,value:i,valueType:r})}var dr=function(){return dr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},dr.apply(this,arguments)};function lb(t){function s(){return e.jsx(ob,dr({},t))}return e.jsx("div",{className:"react-calendar__decade-view",children:s()})}var ur=function(){return ur=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},ur.apply(this,arguments)},cb=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a},Ec=function(t,s,a){if(a||arguments.length===2)for(var n=0,i=s.length,r;n<i;n++)(r||!(n in s))&&(r||(r=Array.prototype.slice.call(s,0,n)),r[n]=s[n]);return t.concat(r||Array.prototype.slice.call(s))},db="react-calendar__year-view__months__month";function ub(t){var s=t.classes,a=s===void 0?[]:s,n=t.formatMonth,i=n===void 0?Lj:n,r=t.formatMonthYear,o=r===void 0?hh:r,c=cb(t,["classes","formatMonth","formatMonthYear"]),d=c.date,u=c.locale;return e.jsx(Cn,ur({},c,{classes:Ec(Ec([],a,!0),[db],!1),formatAbbr:o,maxDateTransform:Ea,minDateTransform:js,view:"year",children:i(u,d)}))}var hr=function(){return hr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},hr.apply(this,arguments)},Rc=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a};function hb(t){var s=t.activeStartDate,a=t.hover,n=t.value,i=t.valueType,r=Rc(t,["activeStartDate","hover","value","valueType"]),o=0,c=11,d=Fe(s);return e.jsx(Sn,{className:"react-calendar__year-view__months",dateTransform:function(u){var l=new Date;return l.setFullYear(d,u,1),js(l)},dateType:"month",end:c,hover:a,renderTile:function(u){var l=u.date,p=Rc(u,["date"]);return e.jsx(ub,hr({},r,p,{activeStartDate:s,date:l}),l.getTime())},start:o,value:n,valueType:i})}var mr=function(){return mr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},mr.apply(this,arguments)};function mb(t){function s(){return e.jsx(hb,mr({},t))}return e.jsx("div",{className:"react-calendar__year-view",children:s()})}var pr=function(){return pr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},pr.apply(this,arguments)},pb=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a},Ci="react-calendar__month-view__days__day";function gb(t){var s=t.calendarType,a=t.classes,n=a===void 0?[]:a,i=t.currentMonthIndex,r=t.formatDay,o=r===void 0?Ej:r,c=t.formatLongDate,d=c===void 0?Rj:c,u=pb(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),l=u.date,p=u.locale,g=[];return n&&g.push.apply(g,n),g.push(Ci),xh(l,s)&&g.push("".concat(Ci,"--weekend")),l.getMonth()!==i&&g.push("".concat(Ci,"--neighboringMonth")),e.jsx(Cn,pr({},u,{classes:g,formatAbbr:d,maxDateTransform:fo,minDateTransform:Ra,view:"month",children:o(p,l)}))}var gr=function(){return gr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},gr.apply(this,arguments)},Lc=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a};function fb(t){var s=t.activeStartDate,a=t.calendarType,n=t.hover,i=t.showFixedNumberOfWeeks,r=t.showNeighboringMonth,o=t.value,c=t.valueType,d=Lc(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),u=Fe(s),l=ns(s),p=i||r,g=va(s,a),b=p?0:g,y=(p?-g:0)+1,f=(function(){if(i)return y+42-1;var v=uh(s);if(r){var j=new Date;j.setFullYear(u,l,v),j.setHours(0,0,0,0);var C=7-va(j,a)-1;return v+C}return v})();return e.jsx(Sn,{className:"react-calendar__month-view__days",count:7,dateTransform:function(v){var j=new Date;return j.setFullYear(u,l,v),Ra(j)},dateType:"day",hover:n,end:f,renderTile:function(v){var j=v.date,C=Lc(v,["date"]);return e.jsx(gb,gr({},d,C,{activeStartDate:s,calendarType:a,currentMonthIndex:l,date:j}),j.getTime())},offset:b,start:y,value:o,valueType:c})}var yh="react-calendar__month-view__weekdays",ki="".concat(yh,"__weekday");function xb(t){for(var s=t.calendarType,a=t.formatShortWeekday,n=a===void 0?Ij:a,i=t.formatWeekday,r=i===void 0?Mj:i,o=t.locale,c=t.onMouseLeave,d=new Date,u=js(d),l=Fe(u),p=ns(u),g=[],b=1;b<=7;b+=1){var y=new Date(l,p,b-va(u,s)),f=r(o,y);g.push(e.jsx("div",{className:yn(ki,Yj(y)&&"".concat(ki,"--current"),xh(y,s)&&"".concat(ki,"--weekend")),children:e.jsx("abbr",{"aria-label":f,title:f,children:n(o,y).replace(".","")})},b))}return e.jsx(vo,{className:yh,count:7,onFocus:c,onMouseOver:c,children:g})}var un=function(){return un=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},un.apply(this,arguments)},Ic=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a},Mc="react-calendar__tile";function vb(t){var s=t.onClickWeekNumber,a=t.weekNumber,n=e.jsx("span",{children:a});if(s){var i=t.date,r=t.onClickWeekNumber,o=t.weekNumber,c=Ic(t,["date","onClickWeekNumber","weekNumber"]);return e.jsx("button",un({},c,{className:Mc,onClick:function(d){return r(o,i,d)},type:"button",children:n}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var c=Ic(t,["date","onClickWeekNumber","weekNumber"]);return e.jsx("div",un({},c,{className:Mc,children:n}))}}function yb(t){var s=t.activeStartDate,a=t.calendarType,n=t.onClickWeekNumber,i=t.onMouseLeave,r=t.showFixedNumberOfWeeks,o=(function(){if(r)return 6;var u=uh(s),l=va(s,a),p=u-(7-l);return 1+Math.ceil(p/7)})(),c=(function(){for(var u=Fe(s),l=ns(s),p=jn(s),g=[],b=0;b<o;b+=1)g.push(nr(new Date(u,l,p+b*7),a));return g})(),d=c.map(function(u){return Wj(u,a)});return e.jsx(vo,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:d.map(function(u,l){var p=c[l];if(!p)throw new Error("date is not defined");return e.jsx(vb,{date:p,onClickWeekNumber:n,weekNumber:u},u)})})}var fr=function(){return fr=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},fr.apply(this,arguments)},jb=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(a[n[i]]=t[n[i]]);return a};function bb(t){if(t)for(var s=0,a=Object.entries(bj);s<a.length;s++){var n=a[s],i=n[0],r=n[1];if(r.includes(t))return i}return rt.ISO_8601}function wb(t){var s=t.activeStartDate,a=t.locale,n=t.onMouseLeave,i=t.showFixedNumberOfWeeks,r=t.calendarType,o=r===void 0?bb(a):r,c=t.formatShortWeekday,d=t.formatWeekday,u=t.onClickWeekNumber,l=t.showWeekNumbers,p=jb(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function g(){return e.jsx(xb,{calendarType:o,formatShortWeekday:c,formatWeekday:d,locale:a,onMouseLeave:n})}function b(){return l?e.jsx(yb,{activeStartDate:s,calendarType:o,onClickWeekNumber:u,onMouseLeave:n,showFixedNumberOfWeeks:i}):null}function y(){return e.jsx(fb,fr({calendarType:o},p))}var f="react-calendar__month-view";return e.jsx("div",{className:yn(f,l?"".concat(f,"--weekNumbers"):""),children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[b(),e.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[g(),y()]})]})})}var Ms=function(){return Ms=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},Ms.apply(this,arguments)},Ha="react-calendar",Za=["century","decade","year","month"],Nb=["decade","year","month","day"],yo=new Date;yo.setFullYear(1,0,1);yo.setHours(0,0,0,0);var Sb=new Date(864e13);function na(t){return t instanceof Date?t:new Date(t)}function jh(t,s){return Za.slice(Za.indexOf(t),Za.indexOf(s)+1)}function Cb(t,s,a){var n=jh(s,a);return n.indexOf(t)!==-1}function jo(t,s,a){return t&&Cb(t,s,a)?t:a}function bh(t){var s=Za.indexOf(t);return Nb[s]}function kb(t,s){var a=Array.isArray(t)?t[s]:t;if(!a)return null;var n=na(a);if(Number.isNaN(n.getTime()))throw new Error("Invalid date: ".concat(t));return n}function wh(t,s){var a=t.value,n=t.minDate,i=t.maxDate,r=t.maxDetail,o=kb(a,s);if(!o)return null;var c=bh(r),d=(function(){switch(s){case 0:return vs(c,o);case 1:return ph(c,o);default:throw new Error("Invalid index value: ".concat(s))}})();return Jj(d,n,i)}var bo=function(t){return wh(t,0)},Nh=function(t){return wh(t,1)},Ab=function(t){return[bo,Nh].map(function(s){return s(t)})};function Sh(t){var s=t.maxDate,a=t.maxDetail,n=t.minDate,i=t.minDetail,r=t.value,o=t.view,c=jo(o,i,a),d=bo({value:r,minDate:n,maxDate:s,maxDetail:a})||new Date;return vs(c,d)}function Tb(t){var s=t.activeStartDate,a=t.defaultActiveStartDate,n=t.defaultValue,i=t.defaultView,r=t.maxDate,o=t.maxDetail,c=t.minDate,d=t.minDetail,u=t.value,l=t.view,p=jo(l,d,o),g=s||a;return g?vs(p,g):Sh({maxDate:r,maxDetail:o,minDate:c,minDetail:d,value:u||n,view:l||i})}function Ai(t){return t&&(!Array.isArray(t)||t.length===1)}function za(t,s){return t instanceof Date&&s instanceof Date&&t.getTime()===s.getTime()}var Db=h.forwardRef(function(s,a){var n=s.activeStartDate,i=s.allowPartialRange,r=s.calendarType,o=s.className,c=s.defaultActiveStartDate,d=s.defaultValue,u=s.defaultView,l=s.formatDay,p=s.formatLongDate,g=s.formatMonth,b=s.formatMonthYear,y=s.formatShortWeekday,f=s.formatWeekday,v=s.formatYear,j=s.goToRangeStartOnSelect,C=j===void 0?!0:j,x=s.inputRef,N=s.locale,R=s.maxDate,E=R===void 0?Sb:R,z=s.maxDetail,k=z===void 0?"month":z,V=s.minDate,$=V===void 0?yo:V,A=s.minDetail,_=A===void 0?"century":A,O=s.navigationAriaLabel,Y=s.navigationAriaLive,U=s.navigationLabel,w=s.next2AriaLabel,T=s.next2Label,W=s.nextAriaLabel,P=s.nextLabel,L=s.onActiveStartDateChange,q=s.onChange,m=s.onClickDay,D=s.onClickDecade,S=s.onClickMonth,M=s.onClickWeekNumber,F=s.onClickYear,X=s.onDrillDown,oe=s.onDrillUp,ae=s.onViewChange,H=s.prev2AriaLabel,se=s.prev2Label,Z=s.prevAriaLabel,he=s.prevLabel,pe=s.returnValue,De=pe===void 0?"start":pe,Ce=s.selectRange,ze=s.showDoubleView,gt=s.showFixedNumberOfWeeks,ft=s.showNavigation,ut=ft===void 0?!0:ft,Pe=s.showNeighboringCentury,Nt=s.showNeighboringDecade,Ut=s.showNeighboringMonth,xe=Ut===void 0?!0:Ut,Ee=s.showWeekNumbers,Dt=s.tileClassName,rs=s.tileContent,st=s.tileDisabled,at=s.value,ht=s.view,_t=h.useState(c),os=_t[0],Lt=_t[1],Ht=h.useState(null),Q=Ht[0],te=Ht[1],ge=h.useState(Array.isArray(d)?d.map(function(be){return be!==null?na(be):null}):d!=null?na(d):null),re=ge[0],ke=ge[1],Ve=h.useState(u),fe=Ve[0],Ue=Ve[1],ye=n||os||Tb({activeStartDate:n,defaultActiveStartDate:c,defaultValue:d,defaultView:u,maxDate:E,maxDetail:k,minDate:$,minDetail:_,value:at,view:ht}),Ae=(function(){var be=(function(){return Ce&&Ai(re)?re:at!==void 0?at:re})();return be?Array.isArray(be)?be.map(function(Me){return Me!==null?na(Me):null}):be!==null?na(be):null:null})(),ce=bh(k),ee=jo(ht||fe,_,k),Se=jh(_,k),ct=Ce?Q:null,xt=Se.indexOf(ee)<Se.length-1,nt=Se.indexOf(ee)>0,ls=h.useCallback(function(be){var Me=(function(){switch(De){case"start":return bo;case"end":return Nh;case"range":return Ab;default:throw new Error("Invalid returnValue.")}})();return Me({maxDate:E,maxDetail:k,minDate:$,value:be})},[E,k,$,De]),Gs=h.useCallback(function(be,Me){Lt(be);var $e={action:Me,activeStartDate:be,value:Ae,view:ee};L&&!za(ye,be)&&L($e)},[ye,L,Ae,ee]),zt=h.useCallback(function(be,Me){var $e=(function(){switch(ee){case"century":return D;case"decade":return F;case"year":return S;case"month":return m;default:throw new Error("Invalid view: ".concat(ee,"."))}})();$e&&$e(be,Me)},[m,D,S,F,ee]),Gt=h.useCallback(function(be,Me){if(xt){zt(be,Me);var $e=Se[Se.indexOf(ee)+1];if(!$e)throw new Error("Attempted to drill down from the lowest view.");Lt(be),Ue($e);var vt={action:"drillDown",activeStartDate:be,value:Ae,view:$e};L&&!za(ye,be)&&L(vt),ae&&ee!==$e&&ae(vt),X&&X(vt)}},[ye,xt,L,zt,X,ae,Ae,ee,Se]),Ys=h.useCallback(function(){if(nt){var be=Se[Se.indexOf(ee)-1];if(!be)throw new Error("Attempted to drill up from the highest view.");var Me=vs(be,ye);Lt(Me),Ue(be);var $e={action:"drillUp",activeStartDate:Me,value:Ae,view:be};L&&!za(ye,Me)&&L($e),ae&&ee!==be&&ae($e),oe&&oe($e)}},[ye,nt,L,oe,ae,Ae,ee,Se]),La=h.useCallback(function(be,Me){var $e=Ae;zt(be,Me);var vt=Ce&&!Ai($e),yt;if(Ce)if(vt)yt=vs(ce,be);else{if(!$e)throw new Error("previousValue is required");if(Array.isArray($e))throw new Error("previousValue must not be an array");yt=zj(ce,$e,be)}else yt=ls(be);var ws=!Ce||vt||C?Sh({maxDate:E,maxDetail:k,minDate:$,minDetail:_,value:yt,view:ee}):null;Me.persist(),Lt(ws),ke(yt);var Dn={action:"onChange",activeStartDate:ws,value:yt,view:ee};if(L&&!za(ye,ws)&&L(Dn),q)if(Ce){var Pn=Ai(yt);if(!Pn)q(yt||null,Me);else if(i){if(Array.isArray(yt))throw new Error("value must not be an array");q([yt||null,null],Me)}}else q(yt||null,Me)},[ye,i,ls,C,E,k,$,_,L,q,zt,Ce,Ae,ce,ee]);function Ia(be){te(be)}function Yt(){te(null)}h.useImperativeHandle(a,function(){return{activeStartDate:ye,drillDown:Gt,drillUp:Ys,onChange:La,setActiveStartDate:Gs,value:Ae,view:ee}},[ye,Gt,Ys,La,Gs,Ae,ee]);function Ks(be){var Me=be?mh(ee,ye):vs(ee,ye),$e=xt?Gt:La,vt={activeStartDate:Me,hover:ct,locale:N,maxDate:E,minDate:$,onClick:$e,onMouseOver:Ce?Ia:void 0,tileClassName:Dt,tileContent:rs,tileDisabled:st,value:Ae,valueType:ce};switch(ee){case"century":return e.jsx(nb,Ms({formatYear:v,showNeighboringCentury:Pe},vt));case"decade":return e.jsx(lb,Ms({formatYear:v,showNeighboringDecade:Nt},vt));case"year":return e.jsx(mb,Ms({formatMonth:g,formatMonthYear:b},vt));case"month":return e.jsx(wb,Ms({calendarType:r,formatDay:l,formatLongDate:p,formatShortWeekday:y,formatWeekday:f,onClickWeekNumber:M,onMouseLeave:Ce?Yt:void 0,showFixedNumberOfWeeks:typeof gt<"u"?gt:ze,showNeighboringMonth:xe,showWeekNumbers:Ee},vt));default:throw new Error("Invalid view: ".concat(ee,"."))}}function Tn(){return ut?e.jsx(Kj,{activeStartDate:ye,drillUp:Ys,formatMonthYear:b,formatYear:v,locale:N,maxDate:E,minDate:$,navigationAriaLabel:O,navigationAriaLive:Y,navigationLabel:U,next2AriaLabel:w,next2Label:T,nextAriaLabel:W,nextLabel:P,prev2AriaLabel:H,prev2Label:se,prevAriaLabel:Z,prevLabel:he,setActiveStartDate:Gs,showDoubleView:ze,view:ee,views:Se}):null}var Ma=Array.isArray(Ae)?Ae:[Ae];return e.jsxs("div",{className:yn(Ha,Ce&&Ma.length===1&&"".concat(Ha,"--selectRange"),ze&&"".concat(Ha,"--doubleView"),o),ref:x,children:[Tn(),e.jsxs("div",{className:"".concat(Ha,"__viewContainer"),onBlur:Ce?Yt:void 0,onMouseLeave:Ce?Yt:void 0,children:[Ks(),ze?Ks(!0):null]})]})});function Pb(t){const s=[{label:"Owner Name",keys:["Owner Name","Nome"]},{label:"Owner Address",keys:["Owner Address","Mailing Address"]},{label:"Owner City",keys:["Owner Cty","Owner City"]},{label:"Owner State",keys:["Owner sate","Owner State","State"]},{label:"Owner Zip Code",keys:["OwnerZip Code","Owner Zip","Zip"]},{label:"County Name",keys:["CountyNeme","County Name"]},{label:"County FIPS",keys:["County Fips Code","County FIPS"]},{label:"Acres",keys:["Acres"]},{label:"APN",keys:["Ap","APN"]}],a={};for(const n of s)for(const i of n.keys){const r=new RegExp(`${i}s*[:=]?s*([^
]+)`,"i"),o=t.match(r);if(o){a[n.label]=o[1].trim();break}}return a}const Eb=({onNavigate:t})=>{const[s,a]=h.useState(0),[n,i]=h.useState(""),[r,o]=h.useState(""),[c,d]=h.useState(""),[u,l]=h.useState({issues:"",currentSetup:"",replacementType:"",plumbingSetup:"",materialsPurchased:"",roofType:"",activeLeaks:"",roofReplaced:""}),[p,g]=h.useState({date:"",time:"",confirmed:!1}),[b,y]=h.useState(!1),[f,v]=h.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",secondaryName:"",secondaryPhone:"",secondaryEmail:"",relationshipToPrimary:"",showSecondary:!1}),[j,C]=h.useState({projectChecklist:[],bathChecklist:[],roofChecklist:[],commitmentChecklist:[]}),[x,N]=h.useState({address:"",results:null,loading:!1,error:null,suggestions:[],showSuggestions:!1,selectedCoordinates:null,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}}),[R,E]=h.useState(!0),[z,k]=h.useState(!1),[V,$]=h.useState(!1),[A,_]=h.useState(null),[O,Y]=h.useState(!1),[U,w]=h.useState(""),[T,W]=h.useState(!1),[P,L]=h.useState({}),[q,m]=h.useState(!1),[D,S]=h.useState(!1),[M,F]=h.useState({type:"success",title:"",message:"",details:""}),[X,oe]=h.useState(!1),[ae,H]=h.useState(""),[se,Z]=h.useState(!1),he=[{key:"basemapVerified",label:"Screenshot Uploaded & Owner Verified"},{key:"addressVerified",label:"Address Matches Screenshot"},{key:"propertyTypeConfirmed",label:"Property Type Matches Screenshot"},{key:"characteristicsNoted",label:"Key Characteristics Noted"},{key:"accessInfoCollected",label:"Access/Entry Info from Screenshot"}],pe=V&&x.checklist.addressVerified&&x.checklist.propertyTypeConfirmed&&x.checklist.characteristicsNoted&&x.checklist.accessInfoCollected;h.useEffect(()=>{s===0&&!n&&!r&&!c&&fe()},[]),h.useEffect(()=>{if(s===0&&!n&&!r&&!c)return;const I={currentStep:s,callType:n,projectType:r,userName:c,customerInfo:f,projectDetails:u,appointment:p,appointmentConfirmed:b,checklistItems:j,propertySearch:x,propertySearchCollapsed:R,basemapVisited:z,basemapVerified:V,basemapScreenshot:A,parsedPropertyInfo:P,timestamp:new Date().toISOString()};localStorage.setItem("scheduleScriptData",JSON.stringify(I)),console.log("üíæ Auto-saved progress:",{currentStep:s,callType:n,projectType:r}),Z(!0),H("Progress saved automatically"),oe(!0),setTimeout(()=>oe(!1),2e3)},[s,n,r,c,f,u,p,b,j,x,R,z,V,A,P]),h.useEffect(()=>{const I=localStorage.getItem("scheduleScriptData");if(I)try{const B=JSON.parse(I),K=new Date(B.timestamp);(new Date-K)/(1e3*60*60)<24?(console.log("üîÑ Loading saved progress from localStorage"),Z(!0),B.currentStep!==void 0&&a(B.currentStep),B.callType&&i(B.callType),B.projectType&&o(B.projectType),B.userName&&d(B.userName),B.customerInfo&&v(B.customerInfo),B.projectDetails&&l(B.projectDetails),B.appointment&&g(B.appointment),B.appointmentConfirmed!==void 0&&y(B.appointmentConfirmed),B.checklistItems&&C(B.checklistItems),B.propertySearch&&N(B.propertySearch),B.propertySearchCollapsed!==void 0&&E(B.propertySearchCollapsed),B.basemapVisited!==void 0&&k(B.basemapVisited),B.basemapVerified!==void 0&&$(B.basemapVerified),B.basemapScreenshot&&_(B.basemapScreenshot),B.parsedPropertyInfo&&L(B.parsedPropertyInfo),console.log("‚úÖ Progress restored:",{currentStep:B.currentStep,callType:B.callType,projectType:B.projectType}),H(`Welcome back! Continuing from step ${B.currentStep+1}`),oe(!0),setTimeout(()=>oe(!1),3e3)):(console.log("‚è∞ Saved data is too old, starting fresh"),localStorage.removeItem("scheduleScriptData"),Z(!1))}catch(B){console.error("‚ùå Error loading saved progress:",B),localStorage.removeItem("scheduleScriptData"),Z(!1)}else Z(!1)},[]),h.useEffect(()=>{A?(W(!0),w(""),Tp.recognize(A,"eng",{logger:I=>{}}).then(({data:{text:I}})=>{w(I),W(!1)}).catch(()=>{w("Could not extract text from image."),W(!1)})):(w(""),W(!1))},[A]),h.useEffect(()=>{if(U&&!T){const I=Pb(U);L(I)}else L({})},[U,T]),h.useEffect(()=>{A&&U&&!T?($(!0),N(I=>({...I,checklist:{addressVerified:!0,propertyTypeConfirmed:!0,characteristicsNoted:!0,accessInfoCollected:!0}}))):A||($(!1),N(I=>({...I,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}})))},[A,U,T]);const De=[{id:"greeting",title:"Call Greeting",type:"greeting"},{id:"propertySearch",title:"Property Search",type:"property"},{id:"projectType",title:"Project Type Selection",type:"selection"},{id:"projectChecklist",title:"Project Checklist",type:"checklist"},{id:"projectQuestions",title:"Project-Specific Questions",type:"questions"},{id:"valueProposition",title:"Value of the Visit",type:"presentation"},{id:"customerInfo",title:"Customer Information",type:"customer"},{id:"commitment",title:"Commitment & Scheduling",type:"scheduling"},{id:"buttonUp",title:"Button Up & Final Steps",type:"final"},{id:"confirmation",title:"Appointment Confirmation",type:"confirmation"}],Ce={incoming:{script:"It's a great day here at Long, my name is _______ How may I HELP you?",tone:"Friendly, consultative, not pushy. Make it feel like a conversation, not a sales pitch."},outgoing:{script:"Hello Mr. / Mrs..... My name is (agent name) with Long Home on a recorded line following up on your inquiry for your (project type). Is this the best phone number to reach you on in case we are disconnected? Perfect!",tone:"Professional, warm, and consultative approach."}},ze=I=>{const B=I==="bath"?"bath/shower":I==="roof"?"roof":"product",K=I==="bath"?"bath/shower":I==="roof"?"roof":"product";return[`How old is your ${K}?`,`What issues are you currently having with your ${K}?`,`What would you like to have done? (Ask ${B} related questions)`]},gt=["Do you currently have a tub or shower in the space?","What are you looking to replace it with? (Tub to Tub/Shower to Shower or Conversion)","Is plumbing set up for a bath or shower to connect to? ***","Have you purchased any materials yet? (Must get a no. All purchases & installations must be from Long)?"],ft=["Are you looking for asphalt shingles, metal, or flat roof?","Do you currently have any active leaks or missing shingles?","Have you ever replaced the roof since owning your home?"],ut=["First and Last Name of all parties involved","Address","Appointment Date and Time","Verify Product"],[Pe,Nt]=h.useState({weekdays:[],weekends:[]}),[Ut,xe]=h.useState(!0),Ee=h.useRef(null);h.useEffect(()=>{const I=B=>{Ee.current&&!Ee.current.contains(B.target)&&N(K=>({...K,showSuggestions:!1}))};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]);const Dt=(I,B)=>{C(K=>({...K,[I]:K[I].includes(B)?K[I].filter(me=>me!==B):[...K[I],B]}))},rs=(I,B)=>{g(K=>({...K,[I]:B}))},st=(I,B)=>{v(K=>({...K,[I]:B}))},at=()=>{s>0&&a(s-1)},ht=()=>{s<De.length-1&&a(s+1)},_t=async()=>{if(x.address){N(I=>({...I,loading:!0,error:null}));try{let I,B;if(x.selectedCoordinates)[B,I]=x.selectedCoordinates;else{const mt=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(x.address)}`)).json();if(!mt.length)throw new Error("Address not found");[B,I]=mt[0].lon,mt[0].lat}console.log("Using coordinates:",{lat:I,lon:B});const K="eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJyZWdyaWQuY29tIiwiaWF0IjoxNzUyNjk2NzMxLCJleHAiOjE3NTUyODg3MzEsInUiOjU2MTIxMSwiZyI6MjMxNTMsImNhcCI6InBhOnRzOnBzOmJmOm1hOnR5OmVvOnpvOnNiIn0.x1b_CldtsWyGIIJ8kTAkgRidkMniV8QC23NKMtVg4dE";console.log("Regrid API key available:",!!K);let me,G;me=`https://app.regrid.com/api/v2/parcels/point?lat=${I}&lon=${B}&token=${K}&radius=500`,console.log("Trying Regrid v2 API with lat/lon (500m radius):",me);let le=await fetch(me);if(console.log("Regrid v2 response status:",le.status),console.log("Regrid v2 response headers:",le.headers),le.ok){if(G=await le.json(),console.log("Regrid v2 API response:",G),console.log("Regrid v2 API response structure:",{hasParcels:!!G.parcels,parcelsType:typeof G.parcels,hasFeatures:G.parcels&&!!G.parcels.features,featuresLength:G.parcels&&G.parcels.features?G.parcels.features.length:0,firstFeature:G.parcels&&G.parcels.features?G.parcels.features[0]:null}),G.parcels&&G.parcels.features&&G.parcels.features.length>0)if(me=`https://app.regrid.com/api/v2/parcels/address?query=${encodeURIComponent(x.address)}&token=${K}`,console.log("Trying Regrid v2 API with address:",me),le=await fetch(me),console.log("Regrid v2 address response status:",le.status),le.ok)G=await le.json(),console.log("Regrid v2 address API response:",G);else if(me=`https://app.regrid.com/api/v2/parcels/point?lat=${I}&lon=${B}&radius=500`,console.log("Trying Regrid v2 API with Authorization header:",me),le=await fetch(me,{headers:{Authorization:`Bearer ${K}`,"Content-Type":"application/json"}}),console.log("Regrid v2 Auth header response status:",le.status),le.ok)G=await le.json(),console.log("Regrid v2 Auth header API response:",G);else throw new Error(`All Regrid v2 API attempts failed. Last error: ${le.status} ${le.statusText}`);else if(console.log("No parcels found with lat/lon search, trying address search..."),me=`https://app.regrid.com/api/v2/parcels/address?query=${encodeURIComponent(x.address)}&token=${K}`,console.log("Trying Regrid v2 API with address:",me),le=await fetch(me),console.log("Regrid v2 address response status:",le.status),le.ok&&(G=await le.json(),console.log("Regrid v2 address API response:",G),!(G.parcels&&G.parcels.features&&G.parcels.features.length>0))){console.log("No parcels found with address search, trying simplified address...");const St=x.address.split(",")[0];me=`https://app.regrid.com/api/v2/parcels/address?query=${encodeURIComponent(St)}&token=${K}`,console.log("Trying Regrid v2 API with simplified address:",me),le=await fetch(me),console.log("Regrid v2 simplified address response status:",le.status),le.ok&&(G=await le.json(),console.log("Regrid v2 simplified address API response:",G))}}let Ne=null;if(G.parcels&&G.parcels.features&&G.parcels.features.length>0?(Ne=G.parcels.features[0],console.log("Found parcel in features array")):G.parcels&&Array.isArray(G.parcels)&&G.parcels.length>0?(Ne=G.parcels[0],console.log("Found parcel in parcels array")):G.features&&Array.isArray(G.features)&&G.features.length>0?(Ne=G.features[0],console.log("Found parcel in root features array")):(console.log("No parcel found in any expected structure"),console.log("Available keys in response:",Object.keys(G))),!Ne){console.log("No parcel found in API response, using mock data"),console.log("Full API response for debugging:",JSON.stringify(G,null,2));const Be={address:x.address,usedesc:"Single Family Home",yearbuilt:"1985",recrdareano:"2400",deeded_acres:"0.25",numrooms:"3",numunits:"1",garage_spaces:"2",taxamt:"3200",saledate:"2018",parval:"450000",owner:"John & Jane Doe"};N(mt=>({...mt,results:{address:Be.address,propertyType:Be.usedesc,yearBuilt:Be.yearbuilt,squareFootage:Be.recrdareano,lotSize:`${Be.deeded_acres} acres`,bedrooms:Be.numrooms,bathrooms:"2.5",garageSpaces:Be.garage_spaces,propertyTax:`$${Be.taxamt}/year`,lastSold:Be.saledate,estimatedValue:`$${Be.parval}`,ownerName:Be.owner},loading:!1,checklist:{...mt.checklist,addressVerified:!0}}));return}const It=Ne.properties||{},Le=It.fields||{};console.log("Parcel properties:",It),console.log("Parcel fields:",Le),N(Be=>({...Be,results:{address:It.headline||x.address,propertyType:Le.usedesc||"N/A",yearBuilt:Le.yearbuilt||"N/A",squareFootage:Le.recrdareano?`${Le.recrdareano} sq ft`:"N/A",lotSize:Le.deeded_acres?`${Le.deeded_acres} acres`:"N/A",bedrooms:Le.numrooms||"N/A",bathrooms:Le.numunits||"N/A",garageSpaces:"N/A",propertyTax:Le.taxamt?`$${Le.taxamt}/year`:"N/A",lastSold:Le.saledate||"N/A",estimatedValue:Le.parval?`$${Le.parval}`:"N/A",ownerName:Le.owner||"N/A"},loading:!1,checklist:{...Be.checklist,addressVerified:!0}}))}catch(I){console.error("Property search error:",I),N(B=>({...B,error:I.message||"Failed to search property. Please try again.",loading:!1}))}}},os=()=>{N({address:"",results:null,loading:!1,error:null,suggestions:[],showSuggestions:!1,selectedCoordinates:null,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}})},Lt=I=>{N(B=>({...B,checklist:{...B.checklist,[I]:!B.checklist[I]}}))},Ht=async I=>{if(console.log("handleAddressInputChange called with:",I),N(B=>({...B,address:I,showSuggestions:!1})),I.length<3){console.log("Value too short, clearing suggestions"),N(B=>({...B,suggestions:[]}));return}try{const B="pk.eyJ1Ijoic3RhbmxlZWdvdG1lMTAiLCJhIjoiY21kNmd0dDMyMDAwdTJqcHk3Z3BvMWUxZiJ9.URKW_CwDuJ5FtzW_yBPuKQ";console.log("Mapbox API Key available:",!!B),console.log("Making request to Mapbox API...");const me=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(I)}.json?access_token=${B}&country=US&types=address&limit=5`)).json();console.log("Mapbox API response:",me);const G=me.features.map(le=>({id:le.id,address:le.place_name,coordinates:le.center}));console.log("Processed suggestions:",G),N(le=>({...le,suggestions:G,showSuggestions:G.length>0})),console.log("Setting suggestions:",G.length,"showSuggestions:",G.length>0)}catch(B){console.error("Error fetching address suggestions:",B)}},Q=I=>{N(B=>({...B,address:I.address,suggestions:[],showSuggestions:!1,selectedCoordinates:I.coordinates}))},te=(I,B)=>!I||!B?"":`${new Date(I).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"})} at ${B}`,ge=I=>{if(!I)return!1;const B=new Date(I).getDay();return B===0||B===6};h.useEffect(()=>{(async()=>{try{xe(!0);const K=await vn();if(K&&K.length>0){const me=K.filter(le=>le.dayType==="weekday"),G=K.filter(le=>le.dayType==="weekend");Nt({weekdays:me,weekends:G})}else console.log("No time blocks found in Firestore"),Nt({weekdays:[],weekends:[]});xe(!1)}catch(K){console.error("Error loading time blocks from Firestore:",K),Nt({weekdays:[],weekends:[]}),xe(!1)}})();const B=Yu(K=>{if(K&&K.length>0){const me=K.filter(le=>le.dayType==="weekday"),G=K.filter(le=>le.dayType==="weekend");Nt({weekdays:me,weekends:G}),console.log("üïê Current time blocks updated:",{weekdays:me,weekends:G})}});return()=>B()},[]);const re={address:f.address||x.address||P?.["Owner Address"]||"",owner:`${f.firstName} ${f.lastName}`.trim()||P?.["Owner Name"]||"",county:P?.["County Name"]||"",countyFips:P?.["County FIPS"]||"",acres:P?.Acres||"",apn:P?.APN||"",projectType:r||"",userName:c||"",appointment:{date:p.date||"",time:p.time||""},projectDetails:u||{}},ke=`üîç Lead Notes ‚Äì ${re.address||"Address not provided"}

üè† Homeownership: Yes${re.owner?` (Owner: ${re.owner})`:""}
üë§ Decision-Makers: All required parties will be present
üìå Project Interest:
‚Ä¢ ${re.projectType==="bath"?"Bathroom remodel ‚Äì replacing old tub with walk-in shower":re.projectType==="roof"?"Roof replacement":re.projectType||"N/A"}
${re.projectDetails?.issues?`‚Ä¢ ${re.projectDetails.issues}`:""}

üóÇÔ∏è Property Details:
${re.owner?`‚Ä¢ Owner: ${re.owner}
`:""}${re.county?`‚Ä¢ County: ${re.county}`:""}${re.countyFips?` (FIPS: ${re.countyFips})`:""}
${re.acres?`‚Ä¢ Acres: ${re.acres}
`:""}${re.apn?`‚Ä¢ APN: ${re.apn}
`:""}

üìÖ Appointment Status: ${re.appointment.date&&re.appointment.time?te(re.appointment.date,re.appointment.time):"Not scheduled"}
${b?"‚úÖ Appointment Confirmed (No Follow-up Needed)":"‚è≥ Appointment Pending (Follow-up Required)"}

‚úÖ REP NOTES
Rep Name: ${re.userName||"N/A"}
Customer Name: ${re.owner||"N/A"}
Address: ${re.address||"N/A"}
Project Type: ${re.projectType==="bath"?"Bathroom remodel":re.projectType==="roof"?"Roof replacement":re.projectType||"N/A"}
Special Details: ${re.projectDetails?.issues||"N/A"}
Appointment Date & Time: ${re.appointment.date&&re.appointment.time?te(re.appointment.date,re.appointment.time):"Not scheduled"}
Confirmation Status: ${b?"Confirmed":"Pending"}
`,Ve=`Thank you for scheduling your appointment with Long Home Products!

Here's what to expect:
‚Ä¢ A design consultant will visit your home at ${re.address||"your address"}.
‚Ä¢ Appointment: ${re.appointment.date&&re.appointment.time?te(re.appointment.date,re.appointment.time):"date and time to be confirmed"}.
‚Ä¢ We'll review your ${re.projectType==="bath"?"bathroom remodel":re.projectType==="roof"?"roof replacement":re.projectType||"project"} needs and provide a free estimate.
‚Ä¢ Please ensure all decision-makers are present.

We look forward to meeting you!`;h.useCallback(()=>{const I=localStorage.getItem("scheduleScriptData");if(I)try{const B=JSON.parse(I),K=new Date(B.timestamp);(new Date-K)/(1e3*60*60)<24?(console.log("üîÑ Resuming saved progress"),B.currentStep!==void 0&&a(B.currentStep),B.callType&&i(B.callType),B.projectType&&o(B.projectType),B.userName&&d(B.userName),B.customerInfo&&v(B.customerInfo),B.projectDetails&&l(B.projectDetails),B.appointment&&g(B.appointment),B.appointmentConfirmed!==void 0&&y(B.appointmentConfirmed),B.checklistItems&&C(B.checklistItems),B.propertySearch&&N(B.propertySearch),B.propertySearchCollapsed!==void 0&&E(B.propertySearchCollapsed),B.basemapVisited!==void 0&&k(B.basemapVisited),B.basemapVerified!==void 0&&$(B.basemapVerified),B.basemapScreenshot&&_(B.basemapScreenshot),B.parsedPropertyInfo&&L(B.parsedPropertyInfo),H(`Resumed from step ${B.currentStep+1}`),oe(!0),setTimeout(()=>oe(!1),2e3)):(console.log("‚è∞ Saved data is too old"),localStorage.removeItem("scheduleScriptData"),Z(!1))}catch(B){console.error("‚ùå Error resuming progress:",B),localStorage.removeItem("scheduleScriptData"),Z(!1)}},[]);const fe=h.useCallback(()=>{a(0),i(""),o(""),d(""),y(!1),v({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",secondaryName:"",secondaryPhone:"",secondaryEmail:"",relationshipToPrimary:"",showSecondary:!1}),l({age:"",issues:"",currentSetup:"",replacementType:"",plumbingSetup:"",materialsPurchased:"",roofType:"",activeLeaks:"",roofReplaced:""}),g({date:"",time:"",confirmed:!1}),C({projectChecklist:[],bathChecklist:[],roofChecklist:[],commitmentChecklist:[]}),N({address:"",results:null,loading:!1,error:null,suggestions:[],showSuggestions:!1,selectedCoordinates:null,checklist:{addressVerified:!1,propertyTypeConfirmed:!1,characteristicsNoted:!1,accessInfoCollected:!1}}),E(!0),k(!1),$(!1),_(null),Y(!1),w(""),W(!1),L({}),m(!1),S(!1),F({type:"success",title:"",message:"",details:""}),localStorage.removeItem("scheduleScriptData"),F({type:"success",title:"",message:"",details:""}),Z(!1),console.log("üóëÔ∏è All data cleared for new appointment")},[]),Ue=h.useCallback(()=>{navigator.clipboard.writeText(ke).then(()=>{S(!0),setTimeout(()=>S(!1),2e3)})},[ke]),ye=h.useCallback(()=>{navigator.clipboard.writeText(Ve).then(()=>{alert("Customer recap copied to clipboard!")})},[Ve]),Ae=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Select Call Type"}),e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#f8fafc"},children:["Current selection: ",n||"None"]}),e.jsxs("div",{className:"greeting-options-dark",children:[e.jsxs(de.div,{className:`greeting-option-dark ${n==="incoming"?"selected-dark":""}`,onClick:()=>{i("incoming"),setTimeout(()=>a(s+1),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(qa,{className:"greeting-icon"}),e.jsxs("div",{className:"greeting-content-dark",children:[e.jsx("h4",{children:"Incoming Call"}),e.jsxs("p",{className:"greeting-script-dark",children:['"',Ce.incoming.script,'"']}),e.jsx("p",{className:"greeting-tone-dark",children:Ce.incoming.tone})]}),n==="incoming"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ea,{size:16})})]}),e.jsxs(de.div,{className:`greeting-option-dark ${n==="outgoing"?"selected-dark":""}`,onClick:()=>{i("outgoing"),setTimeout(()=>a(s+1),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(qa,{className:"greeting-icon"}),e.jsxs("div",{className:"greeting-content-dark",children:[e.jsx("h4",{children:"Outgoing Call"}),e.jsxs("p",{className:"greeting-script-dark",children:['"',Ce.outgoing.script,'"']}),e.jsx("p",{className:"greeting-tone-dark",children:Ce.outgoing.tone})]}),n==="outgoing"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ea,{size:16})})]})]}),e.jsx("div",{className:"step-navigation-dark",children:e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,disabled:s===0,whileHover:{scale:1.05},whileTap:{scale:.95},style:{opacity:s===0?.5:1},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})})]}),ce=()=>{const I=()=>{const K={};if(x.address&&!f.address&&(K.address=x.address),P?.["Owner Name"]&&!f.firstName&&!f.lastName){const me=P["Owner Name"],G=me.split(" ");G.length>=2?(K.firstName=G[0],K.lastName=G.slice(1).join(" ")):K.firstName=me}P?.["Owner City"]&&!f.city&&(K.city=P["Owner City"]),P?.["Owner State"]&&!f.state&&(K.state=P["Owner State"]),P?.["Owner Zip Code"]&&!f.zipCode&&(K.zipCode=P["Owner Zip Code"].replace(":","").trim()),Object.keys(K).length>0&&v(me=>({...me,...K}))},B=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];return e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{background:"rgba(59,130,246,0.03)",borderRadius:16,padding:"2.5rem 1.5rem",boxShadow:"0 2px 16px rgba(59,130,246,0.07)",maxWidth:600,margin:"0 auto"},children:[e.jsxs("h3",{className:"step-title-dark",style:{color:"#2563eb",display:"flex",alignItems:"center",gap:10,fontSize:"2rem",marginBottom:18},children:[e.jsx(bc,{style:{color:"#2563eb",fontSize:28}}),"Quick Customer Info"]}),(x.address||P&&Object.keys(P).length>0)&&e.jsxs("div",{style:{background:"#1e293b",borderRadius:8,padding:"1rem",marginBottom:"1rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",color:"#94a3b8"},children:"üìã Available property data:"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:[P?.["Owner Name"]&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["üë§ ",P["Owner Name"]]}),P?.["Owner City"]&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["üèôÔ∏è ",P["Owner City"]]}),P?.["Owner State"]&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["üó∫Ô∏è ",P["Owner State"]]}),x.address&&e.jsxs("span",{style:{background:"#374151",padding:"0.25rem 0.5rem",borderRadius:4,fontSize:"0.8rem"},children:["üìç ",x.address]})]}),e.jsx("button",{onClick:I,style:{background:"#3b82f6",color:"white",border:"none",borderRadius:6,padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8},children:"üöÄ Auto-fill from property data"})]}),e.jsxs("div",{className:"customer-info-container-dark",style:{background:"#1e293b",borderRadius:12,boxShadow:"0 1px 8px rgba(0,0,0,0.3)",padding:"2rem",marginBottom:24,border:"1px solid #334155"},children:[e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:18,flexWrap:"wrap",marginBottom:16},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsxs("label",{className:"form-label-dark",children:["Name ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:`${f.firstName} ${f.lastName}`.trim(),onChange:K=>{const me=K.target.value.split(" ");v(G=>({...G,firstName:me[0]||"",lastName:me.slice(1).join(" ")||""}))},className:"form-input-dark",placeholder:"First Last",required:!0})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsxs("label",{className:"form-label-dark",children:["Phone ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"tel",value:f.phone,onChange:K=>st("phone",K.target.value),className:"form-input-dark",placeholder:"(555) 123-4567",required:!0})]})]}),e.jsxs("div",{className:"form-group-dark",style:{marginBottom:16},children:[e.jsx("label",{className:"form-label-dark",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:f.email,onChange:K=>st("email",K.target.value),className:"form-input-dark",placeholder:"email@example.com"})]}),e.jsxs("div",{className:"form-group-dark",style:{marginBottom:16},children:[e.jsxs("label",{className:"form-label-dark",children:["Address ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:f.address,onChange:K=>st("address",K.target.value),className:"form-input-dark",placeholder:"Street address",required:!0})]}),e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:2,minWidth:120},children:[e.jsxs("label",{className:"form-label-dark",children:["City ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:f.city,onChange:K=>st("city",K.target.value),className:"form-input-dark",placeholder:"City",required:!0})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:80},children:[e.jsxs("label",{className:"form-label-dark",children:["State ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:f.state,onChange:K=>st("state",K.target.value),className:"form-input-dark",required:!0,children:[e.jsx("option",{value:"",children:"State"}),B.map(K=>e.jsx("option",{value:K,children:K},K))]})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:80},children:[e.jsxs("label",{className:"form-label-dark",children:["ZIP ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:f.zipCode,onChange:K=>st("zipCode",K.target.value),className:"form-input-dark",placeholder:"ZIP",required:!0})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem",borderTop:"1px solid #475569",paddingTop:"1rem"},children:[e.jsxs("button",{onClick:()=>v(K=>({...K,showSecondary:!K.showSecondary})),style:{background:"transparent",color:"#34d399",border:"none",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8,fontWeight:600},children:[f.showSecondary?"‚ñº":"‚ñ∂"," Add Secondary Contact (Optional)"]}),f.showSecondary&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#0f172a",borderRadius:8},children:[e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsx("label",{className:"form-label-dark",children:"Secondary Name"}),e.jsx("input",{type:"text",value:f.secondaryName,onChange:K=>st("secondaryName",K.target.value),className:"form-input-dark",placeholder:"Spouse, partner, etc."})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsx("label",{className:"form-label-dark",children:"Secondary Phone"}),e.jsx("input",{type:"tel",value:f.secondaryPhone,onChange:K=>st("secondaryPhone",K.target.value),className:"form-input-dark",placeholder:"(555) 123-4567"})]})]}),e.jsxs("div",{className:"form-row-dark",style:{display:"flex",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:140},children:[e.jsx("label",{className:"form-label-dark",children:"Secondary Email"}),e.jsx("input",{type:"email",value:f.secondaryEmail,onChange:K=>st("secondaryEmail",K.target.value),className:"form-input-dark",placeholder:"email@example.com"})]}),e.jsxs("div",{className:"form-group-dark",style:{flex:1,minWidth:120},children:[e.jsx("label",{className:"form-label-dark",children:"Relationship"}),e.jsxs("select",{value:f.relationshipToPrimary,onChange:K=>st("relationshipToPrimary",K.target.value),className:"form-input-dark",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Partner",children:"Partner"}),e.jsx("option",{value:"Parent",children:"Parent"}),e.jsx("option",{value:"Child",children:"Child"}),e.jsx("option",{value:"Roommate",children:"Roommate"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]})]})]}),e.jsxs("div",{className:"step-navigation-dark",style:{display:"flex",justifyContent:"space-between",marginTop:32},children:[e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(de.button,{className:"nav-button-dark next-button-dark",onClick:ht,disabled:!f.firstName||!f.lastName||!f.phone||!f.address||!f.city||!f.state||!f.zipCode,whileHover:{scale:1.05},whileTap:{scale:.95},style:{opacity:!f.firstName||!f.lastName||!f.phone||!f.address||!f.city||!f.state||!f.zipCode?.5:1},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})},ee=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Select Project Type"}),e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#f8fafc"},children:["Current selection: ",r||"None"]}),e.jsxs("div",{className:"project-options-dark",children:[e.jsxs(de.div,{className:`project-option-dark ${r==="bath"?"selected-dark":""}`,onClick:()=>{o("bath"),setTimeout(()=>a(4),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(As,{className:"project-icon"}),e.jsxs("div",{className:"project-content-dark",children:[e.jsx("h4",{children:"Bath/Shower Replacement"}),e.jsx("p",{children:"Schedule bath check and consultation"})]}),r==="bath"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ea,{size:16})})]}),e.jsxs(de.div,{className:`project-option-dark ${r==="roof"?"selected-dark":""}`,onClick:()=>{o("roof"),setTimeout(()=>a(4),200)},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(As,{className:"project-icon"}),e.jsxs("div",{className:"project-content-dark",children:[e.jsx("h4",{children:"Roof Replacement"}),e.jsx("p",{children:"Schedule roof inspection and estimate"})]}),r==="roof"&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#10b981",borderRadius:"50%",width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ea,{size:16})})]})]}),e.jsx("div",{className:"step-navigation-dark",children:e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})})]}),Se=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h3",{className:"step-title-dark",children:[r==="bath"?"Bath/Shower":r==="roof"?"Roof":"Project"," Checklist"]}),e.jsxs("div",{className:"checklist-container-dark",children:[e.jsxs("h4",{className:"checklist-title-dark",children:[r==="bath"?"Bath/Shower":r==="roof"?"Roof":"General"," Project Questions:"]}),e.jsx("div",{className:"checklist-items-dark",children:ze(r).map((I,B)=>e.jsxs(de.div,{className:`checklist-item-dark ${j.projectChecklist.includes(B)?"completed-dark":""}`,onClick:()=>Dt("projectChecklist",B),whileHover:{scale:1.02},whileTap:{scale:.98},children:[j.projectChecklist.includes(B)?e.jsx(Ss,{className:"check-icon"}):e.jsx(ta,{className:"check-icon"}),e.jsx("span",{children:I})]},B))})]}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(de.button,{className:"nav-button-dark next-button-dark",onClick:ht,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),ct=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h3",{className:"step-title-dark",children:[r==="bath"?"Bath/Shower":"Roof"," Specific Questions"]}),e.jsx("div",{className:"questions-container-dark",children:r==="bath"?e.jsx("div",{className:"checklist-items-dark",children:gt.map((I,B)=>e.jsxs(de.div,{className:`checklist-item-dark ${j.bathChecklist.includes(B)?"completed-dark":""}`,onClick:()=>Dt("bathChecklist",B),whileHover:{scale:1.02},whileTap:{scale:.98},children:[j.bathChecklist.includes(B)?e.jsx(Ss,{className:"check-icon"}):e.jsx(ta,{className:"check-icon"}),e.jsx("span",{children:I})]},B))}):e.jsx("div",{className:"checklist-items-dark",children:ft.map((I,B)=>e.jsxs(de.div,{className:`checklist-item-dark ${j.roofChecklist.includes(B)?"completed-dark":""}`,onClick:()=>Dt("roofChecklist",B),whileHover:{scale:1.02},whileTap:{scale:.98},children:[j.roofChecklist.includes(B)?e.jsx(Ss,{className:"check-icon"}):e.jsx(ta,{className:"check-icon"}),e.jsx("span",{children:I})]},B))})}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(de.button,{className:"nav-button-dark next-button-dark",onClick:ht,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),xt=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Value of the Visit"}),e.jsx("div",{className:"value-proposition-dark",children:e.jsxs("div",{className:"proposition-card-dark",children:[e.jsx("h4",{className:"proposition-title-dark",children:"Script for Agent:"}),e.jsx("p",{className:"proposition-text-dark",children:'"Now that I have a clear understanding of what you are looking for, let me explain the next steps in our process and how we can assist you today: Long provides total replacements services only. We need you to set aside 60-90 minutes so one of our design consultants can visit your home with samples in hand to show you. The design consultant will do a wellness check and go over different colors, styles, warranty, and financing options available. After taking measurements and answering all your questions, they will provide you with an on-the-spot estimate. How does that sound?"'}),e.jsxs("div",{className:"key-points-dark",children:[e.jsx("h5",{children:"Key Points:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"60-90 minute consultation"}),e.jsx("li",{children:"Total replacement services only"}),e.jsx("li",{children:"Own the property"}),e.jsx("li",{children:"All decision makers must be present"})]})]})]})}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(de.button,{className:"nav-button-dark next-button-dark",onClick:ht,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),[nt,ls]=h.useState(null),[Gs,zt]=h.useState(null),[Gt,Ys]=h.useState(null),[La,Ia]=h.useState([]),[Yt,Ks]=h.useState({}),[Tn,Ma]=h.useState(!1);h.useEffect(()=>{if(f.address){const I=[f.address,f.city,f.state,f.zipCode].filter(Boolean).join(", ");console.log("üîç Checking full address for region detection:",I);const B=Qy(I);B.inServiceArea?(ls(B.region),zt(null),console.log("‚úÖ Region detected:",B.region)):(ls(null),zt("Region could not be determined from address. Please select manually."),console.log("‚ùå Region not detected for address:",I))}else ls(null),zt(null)},[f.address,f.city,f.state,f.zipCode]);const be=["MIDA","ESDE","NOVA","NENG","NHME","CTWM","SOPA","WCFL"];h.useEffect(()=>{if(nt){Me(nt);const I=Yy(nt,B=>{console.log("üîÑ Real-time availability update for region:",nt,B),Ks(B||{});const K=B?Object.keys(B).filter(me=>{const G=B[me];if(!G)return!1;let le=!1;return Object.values(G).forEach(Ne=>{typeof Ne=="object"&&Ne.available?Ne.available>0&&(le=!0):typeof Ne=="number"&&Ne>0&&(le=!0)}),le}):[];Ia(K)});return()=>I()}},[nt]);const Me=async I=>{Ma(!0);try{console.log("üîÑ Loading availability for region:",I);const B=await dn(I);console.log("üìÖ Raw availability data:",B),Ks(B);const K=B?Object.keys(B).filter(me=>{const G=B[me];if(console.log("üìä Checking availability for date:",me,G),!G)return!1;let le=!1;return typeof G=="object"&&G!==null&&Object.values(G).forEach(Ne=>{typeof Ne=="object"&&Ne.available?Ne.available>0&&(le=!0):typeof Ne=="number"&&Ne>0&&(le=!0)}),le}):[];console.log("‚úÖ Available dates:",K),Ia(K)}catch(B){console.error("‚ùå Error loading availability:",B)}finally{Ma(!1)}},$e=({date:I,view:B})=>{if(B!=="month")return null;const K=I.toISOString().split("T")[0],me=Yt[K];if(!me)return null;console.log("üìÖ Day availability for",K,":",me);let G=0;return typeof me=="object"&&me!==null&&Object.values(me).forEach(le=>{typeof le=="object"&&le.available?G+=le.available:typeof le=="number"&&(G+=le)}),console.log("üìä Total slots for",K,":",G),G===0?null:e.jsx("div",{className:"calendar-slot-count",children:e.jsx("span",{className:"slot-count-badge",children:G})})},vt=({date:I,view:B})=>{if(B!=="month")return null;const K=I.toISOString().split("T")[0],me=Yt[K];if(!me)return"calendar-day-unavailable";let G=0;return typeof me=="object"&&me!==null&&Object.values(me).forEach(le=>{typeof le=="object"&&le.available?G+=le.available:typeof le=="number"&&(G+=le)}),G===0?"calendar-day-unavailable":G<=2?"calendar-day-limited":G<=5?"calendar-day-moderate":"calendar-day-available"},yt=I=>{Ys(I),g(B=>({...B,date:I.toISOString().split("T")[0],time:""}))},ws=(I,B)=>{if(!I||!B)return[];const K=Yt||{},me=new Date;me.setHours(0,0,0,0);const G=new Date(I);if(G.setHours(0,0,0,0),G.getTime()===me.getTime())return[];const le=I.toISOString().split("T")[0],Ne=K[le];if(!Ne)return[];const It=ge(I),Le=It?Pe.weekends:Pe.weekdays;console.log("üìÖ Date:",le,"Weekend:",It),console.log("üïê Current time blocks:",Le),console.log("üìä Day availability:",Ne);let Be=[];if(Ne.slots){for(const[mt,St]of Object.entries(Ne.slots))if(St[B]&&St[B].available>0){const Bt=Le.find(Oa=>Oa.id===mt);Bt&&Be.push({time:Bt.time,timeId:mt,availableSlots:St[B].available,label:`${Bt.time} (${St[B].available} slot${St[B].available>1?"s":""} available)`})}}else for(const[mt,St]of Object.entries(Ne)){const Bt={morning:"weekday-morning","late-morning":"weekday-morning","early-afternoon":"weekday-afternoon","late-afternoon":"weekday-afternoon",evening:"weekday-evening"};It&&(Bt.morning="weekend-morning",Bt["late-morning"]="weekend-morning",Bt["early-afternoon"]="weekend-afternoon",Bt["late-afternoon"]="weekend-afternoon");const Oa=Bt[mt],Ln=Le.find(Rh=>Rh.id===Oa);Ln&&St.available>0&&Be.push({time:Ln.time,timeId:Oa,availableSlots:St.available,label:`${Ln.time} (${St.available} slot${St.available>1?"s":""} available)`})}return console.log("‚úÖ Available slots:",Be),Be},Dn=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Commitment & Scheduling"}),e.jsx("div",{className:"commitment-container-dark",children:e.jsxs("div",{className:"commitment-card-dark",children:[e.jsx("h4",{className:"commitment-title-dark",children:"Commitment Script:"}),e.jsx("p",{className:"commitment-text-dark",children:'"All we ask is that all parties involved are present when we come out for the free in-home estimate. I can have a design consultant make a special trip out to your home tomorrow, currently, I have a 2pm & 6 pm left, which time works best for all parties involved?"'}),e.jsxs("div",{className:"appointment-scheduling-dark",children:[e.jsxs("div",{className:"region-selection-container",children:[e.jsx("h5",{children:"Service Region:"}),nt?e.jsx("div",{className:"region-info",children:e.jsxs("span",{className:"region-badge",children:["Region: ",nt]})}):e.jsxs("div",{className:"region-info error",children:[e.jsx("span",{children:Gs||"Region not detected."}),e.jsxs("select",{value:nt||"",onChange:I=>ls(I.target.value),className:"region-select",children:[e.jsx("option",{value:"",children:"Select Region"}),be.map(I=>e.jsx("option",{value:I,children:I},I))]})]})]}),nt&&e.jsxs("div",{className:"calendar-container",children:[e.jsx("h5",{children:"Select Appointment Date:"}),Tn?e.jsxs("div",{className:"loading-calendar",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading availability..."})]}):e.jsxs("div",{className:"modern-calendar-wrapper",children:[e.jsx(Db,{onChange:yt,value:Gt,tileContent:$e,tileClassName:vt,minDate:new Date(new Date().setHours(0,0,0,0)),maxDate:new Date(Date.now()+720*60*60*1e3),className:"modern-calendar",tileDisabled:({date:I})=>{const B=new Date;B.setHours(0,0,0,0);const K=new Date(I);if(K.setHours(0,0,0,0),K<B)return!0;const me=I.toISOString().split("T")[0],G=Yt?.[me];if(!G)return!0;let le=!1;return typeof G=="object"&&G!==null&&Object.values(G).forEach(Ne=>{typeof Ne=="object"&&Ne.available?Ne.available>0&&(le=!0):typeof Ne=="number"&&Ne>0&&(le=!0)}),!le}}),e.jsxs("div",{className:"calendar-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color available"}),e.jsx("span",{children:"Available (5+ slots)"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color moderate"}),e.jsx("span",{children:"Moderate (3-5 slots)"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-color limited"}),e.jsx("span",{children:"Limited (1-2 slots)"})]})]})]})]}),Gt&&nt&&e.jsxs("div",{className:"time-selection-container",children:[e.jsx("h5",{children:"Select Appointment Time:"}),e.jsx("div",{className:"time-slots-grid",children:ws(Gt,nt).map(I=>e.jsxs(de.button,{className:`time-slot-modern ${p.time===I.time?"selected-modern":""}`,onClick:()=>rs("time",I.time),whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(sr,{className:"time-icon"}),e.jsxs("div",{className:"time-block-info",children:[e.jsx("span",{className:"time-block-time",children:I.time}),e.jsxs("span",{className:"time-block-slots",children:[I.availableSlots," slot",I.availableSlots>1?"s":""," available"]})]})]},I.timeId))}),ws(Gt,nt).length===0&&e.jsx("div",{className:"no-availability-modern",children:e.jsx("p",{children:"No available time slots for this date. Please select a different date."})})]})]})]})}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(de.button,{className:"nav-button-dark next-button-dark",onClick:ht,disabled:!p.date||!p.time,whileHover:{scale:1.05},whileTap:{scale:.95},style:{opacity:!p.date||!p.time?.5:1},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),Pn=()=>e.jsx(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",borderRadius:24,boxShadow:"0 8px 32px rgba(16,185,129,0.15)",padding:"2.5rem 1.5rem",maxWidth:520,margin:"0 auto"},children:e.jsxs("div",{style:{background:"white",borderRadius:20,boxShadow:"0 8px 32px rgba(16,185,129,0.10)",padding:"2.5rem 2rem 2rem 2rem",width:"100%",maxWidth:480,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"50%",width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,boxShadow:"0 4px 16px rgba(16,185,129,0.15)"},children:e.jsx(Xa,{size:48,color:"white"})}),e.jsx("h2",{style:{color:"#059669",fontWeight:800,fontSize:"2rem",marginBottom:8,textAlign:"center"},children:"Appointment Confirmed!"}),e.jsx("p",{style:{color:"#334155",fontSize:"1.1rem",marginBottom:28,textAlign:"center"},children:"Your appointment has been successfully scheduled"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.2rem 1.5rem",width:"100%",marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(ln,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"DATE"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:te(p.date,"")})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(sr,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"TIME"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:p.time})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(As,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"PROJECT"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:r==="bath"?"Bathroom Remodel":r==="roof"?"Roof Replacement":r})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(bc,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"CUSTOMER"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:f.firstName&&f.lastName?`${f.firstName} ${f.lastName}`:"Not provided"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(qa,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"PHONE"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:f.phone||"Not provided"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(Ty,{size:22,color:"#6366f1"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b",fontWeight:600},children:"EMAIL"}),e.jsx("div",{style:{fontWeight:700,color:"#0f172a"},children:f.email||"Not provided"})]})]})]}),e.jsxs("div",{style:{background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:16,padding:"0.75rem 1.5rem",fontWeight:700,fontSize:"1.1rem",marginBottom:18,boxShadow:"0 2px 8px rgba(16,185,129,0.10)",display:"flex",alignItems:"center",gap:10},children:[e.jsx(Xa,{size:20,color:"white"}),"Appointment Fully Confirmed"]}),e.jsxs("p",{style:{color:"#334155",fontSize:"1rem",marginBottom:28,textAlign:"center"},children:["Customer has confirmed the appointment and no follow-up is needed. This will update the Salesforce status to ",e.jsx("b",{children:'"Set"'}),"."]}),e.jsxs("button",{className:"action-button",style:{background:"linear-gradient(90deg, #6366f1 0%, #3b82f6 100%)",color:"white",border:"none",borderRadius:12,padding:"1rem 2.5rem",fontWeight:700,fontSize:"1.1rem",boxShadow:"0 2px 8px rgba(59,130,246,0.10)",marginTop:8,marginBottom:0,cursor:"pointer",transition:"all 0.2s"},onClick:()=>{y(!0)},children:[e.jsx(ea,{size:20,style:{marginRight:10,verticalAlign:"middle"}}),"Confirm with Customer"]})]})}),Th=()=>{const I=()=>{const me={appointment:{date:p.date,time:p.time,confirmed:b},customerInfo:{name:`${f.firstName} ${f.lastName}`,phone:f.phone,email:f.email,address:`${f.address}, ${f.city}, ${f.state} ${f.zipCode}`,secondaryContact:f.showSecondary?`${f.secondaryName} (${f.relationshipToPrimary}) - ${f.secondaryPhone}`:"N/A"},projectDetails:{type:r,issues:u.issues,currentSetup:u.currentSetup,replacementType:u.replacementType,plumbingSetup:u.plumbingSetup,materialsPurchased:u.materialsPurchased,roofType:u.roofType,activeLeaks:u.activeLeaks,roofReplaced:u.roofReplaced},propertyInfo:P,callType:n,userName:c,timestamp:new Date().toLocaleString()};return JSON.stringify(me,null,2)},B=()=>{const me=I(),G=new Blob([me],{type:"application/json"}),le=URL.createObjectURL(G),Ne=document.createElement("a");Ne.href=le,Ne.download=`appointment_${f.firstName}_${f.lastName}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(le)},K=()=>{const me=I(),G=JSON.parse(me);let le=`APPOINTMENT SUMMARY
===================

CUSTOMER INFORMATION:
Name: ${G.customerInfo.name}
Phone: ${G.customerInfo.phone}
Email: ${G.customerInfo.email}
Address: ${G.customerInfo.address}
Secondary Contact: ${G.customerInfo.secondaryContact}

APPOINTMENT DETAILS:
Date: ${G.appointment.date}
Time: ${G.appointment.time}
Confirmed: ${G.appointment.confirmed?"Yes":"No"}

PROJECT INFORMATION:
Type: ${G.projectDetails.type}
Issues: ${G.projectDetails.issues}
Current Setup: ${G.projectDetails.currentSetup}
Replacement Type: ${G.projectDetails.replacementType}
Plumbing Setup: ${G.projectDetails.plumbingSetup}
Materials Purchased: ${G.projectDetails.materialsPurchased}
Roof Type: ${G.projectDetails.roofType}
Active Leaks: ${G.projectDetails.activeLeaks}
Roof Replaced: ${G.projectDetails.roofReplaced}

PROPERTY INFORMATION:
${Object.entries(G.propertyInfo).map(([Be,mt])=>`${Be}: ${mt}`).join(`
`)}

CALL DETAILS:
Call Type: ${G.callType}
Rep: ${G.userName}
Timestamp: ${G.timestamp}

NOTES FOR SALESFORCE ENTRY:
- Lead Source: Phone Call
- Status: Appointment Scheduled
- Priority: High
- Description: ${G.projectDetails.type} appointment scheduled for ${G.appointment.date} at ${G.appointment.time}
- Next Steps: Follow up with customer before appointment`;const Ne=new Blob([le],{type:"text/plain"}),It=URL.createObjectURL(Ne),Le=document.createElement("a");Le.href=It,Le.download=`appointment_summary_${f.firstName}_${f.lastName}_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(It)};return e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Button Up & Confirmation"}),e.jsx("div",{className:"confirmation-container-dark",children:e.jsxs("div",{className:"confirmation-card-dark",children:[e.jsx("h4",{className:"confirmation-title-dark",children:"Final Confirmation Checklist:"}),e.jsx("div",{className:"checklist-items-dark",children:ut.map((me,G)=>e.jsxs(de.div,{className:`checklist-item-dark ${j.commitmentChecklist.includes(G)?"completed-dark":""}`,onClick:()=>Dt("commitmentChecklist",G),whileHover:{scale:1.02},whileTap:{scale:.98},children:[j.commitmentChecklist.includes(G)?e.jsx(Ss,{className:"check-icon"}):e.jsx(ta,{className:"check-icon"}),e.jsx("span",{children:me})]},G))}),e.jsxs("div",{className:"closing-script-dark",children:[e.jsx("h5",{children:"Closing Script:"}),e.jsxs("p",{children:['"Before I finalize everything, could you do a few things for me? Please mention the appointment to any other parties involved, and mark your calendar to avoid rescheduling. Also, do not make any decisions until Long gets a chance to show you our product and how we can offer you peace of mind at a great price. Does that make sense? OK FANTASTIC‚Ä¶. The next point of contact will be the rep at your home on ',p.date," at ",p.time," to do the estimate for you on a total replacement of your ",r,'. Thank you and have a wonderful day!"']})]})]})}),e.jsxs(de.div,{className:"salesforce-section-dark",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"16px",padding:"2rem",marginTop:"2rem",textAlign:"center"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:600,marginBottom:"1rem"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Salesforce Integration"]}),e.jsx("h4",{style:{color:"#1f2937",fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem"},children:"Coming Soon! üöÄ"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem"},children:"Direct Salesforce integration is currently under development. In the meantime, you can download the appointment data in a formatted format to manually enter into Salesforce."})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap",marginBottom:"1.5rem"},children:[e.jsxs(de.button,{onClick:K,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 15V3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Download Formatted Summary"]}),e.jsxs(de.button,{onClick:B,style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 2V8H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 13H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 17H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 9H9H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Download JSON Data"]})]}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",fontStyle:"italic",marginBottom:"1.5rem"},children:'üí° Tip: Use the "Formatted Summary" for easy copy-paste into Salesforce, or "JSON Data" for technical integration.'})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap",marginTop:"2rem"},children:[e.jsxs(de.button,{className:"complete-button-dark",onClick:()=>{a(0),i(""),o(""),d(""),l({issues:"",currentSetup:"",replacementType:"",plumbingSetup:"",materialsPurchased:"",roofType:"",activeLeaks:"",roofReplaced:""}),g({date:"",time:"",confirmed:!1}),y(!1),v({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States",secondaryName:"",secondaryPhone:"",secondaryEmail:"",relationshipToPrimary:"",showSecondary:!1}),C({projectChecklist:[],bathChecklist:[],roofChecklist:[],commitmentChecklist:[]})},style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 12L5 10L9 14L21 2L23 4L9 18L3 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Finish & Restart Script"]}),e.jsxs(de.button,{onClick:()=>Rn(),style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 2H2V22H22V2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Try Salesforce Integration"]})]})]})},Dh=()=>e.jsxs(de.div,{className:"script-step-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h3",{className:"step-title-dark",children:"Property Search & Verification"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:500,marginBottom:"0.5rem",color:"#fff"},children:"For best results, use the Basemap tool to visually locate the property first. Then return here to enter the address for search and verification."}),e.jsxs("a",{href:"https://app.basemap.com/?_gl=1*1s9rt3w*_gcl_au*MTg4MTc1NjgwOC4xNzUyNzU4NzU5*_ga*MTE3ODIzOTY4Ni4xNzUyNzU4NzU5*_ga_4XG891YZD4*czE3NTI3NTg3NTkkbzEkZzAkdDE3NTI3NTg3NTkkajYwJGwwJGgw*_ga_8X0CQ17R59*czE3NTI3NTg3NTkkbzEkZzAkdDE3NTI3NTg3NTkkajYwJGwwJGgw",target:"_blank",rel:"noopener noreferrer",className:"basemap-link-dark prominent",style:{display:"inline-flex",alignItems:"center",gap:"12px",background:"linear-gradient(90deg, #3b82f6 0%, #06b6d4 100%)",color:"#fff",textDecoration:"none",fontWeight:700,fontSize:"1.2rem",borderRadius:"8px",padding:"1rem 2rem",margin:"0.5rem 0 0 0",boxShadow:"0 4px 16px rgba(0,0,0,0.18)",transition:"background 0.2s"},onClick:()=>k(!0),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M18 13V19C18 20.1046 17.1046 21 16 21H5C3.89543 21 3 20.1046 3 19V8C3 6.89543 3.89543 6 5 6H11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15 3H21V9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 14L21 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Open Basemap Tool"]}),z&&!V&&e.jsxs("button",{style:{marginTop:"1rem",padding:"0.5rem 1.5rem",background:"#10b981",color:"#fff",border:"none",borderRadius:"6px",fontWeight:600,fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>$(!0),children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 13l4 4L19 7",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Mark as Verified from Basemap"]}),z&&e.jsxs("div",{style:{marginTop:"1.5rem",marginBottom:"1rem",textAlign:"center",border:O?"2.5px solid #3b82f6":"1.5px solid #e5e7eb",borderRadius:12,background:"rgba(59,130,246,0.06)",padding:"1.5rem 1rem",maxWidth:400,marginLeft:"auto",marginRight:"auto",boxShadow:"0 2px 12px rgba(59,130,246,0.07)",transition:"border 0.2s"},tabIndex:0,onPaste:I=>{if(I.clipboardData&&I.clipboardData.items)for(let B=0;B<I.clipboardData.items.length;B++){const K=I.clipboardData.items[B];if(K.type.indexOf("image")!==-1){const me=K.getAsFile(),G=new FileReader;G.onload=le=>_(le.target.result),G.readAsDataURL(me),I.preventDefault();break}}},onFocus:()=>Y(!0),onBlur:()=>Y(!1),children:[e.jsxs("div",{style:{fontSize:13,color:"#2563eb",marginBottom:6,fontWeight:500},children:["You can ",e.jsx("b",{children:"paste"})," (Ctrl+V) a copied screenshot here!"]}),e.jsx("label",{style:{fontWeight:700,color:"#2563eb",display:"block",marginBottom:14,fontSize:"1.1rem",letterSpacing:.2},children:"Upload Basemap Screenshot (property info)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:10},children:[e.jsx("input",{id:"basemap-screenshot-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:I=>{const B=I.target.files[0];if(B){const K=new FileReader;K.onload=me=>_(me.target.result),K.readAsDataURL(B)}}}),e.jsx("label",{htmlFor:"basemap-screenshot-upload",style:{background:"linear-gradient(90deg, #3b82f6 0%, #06b6d4 100%)",color:"#fff",padding:"0.5rem 1.2rem",borderRadius:8,fontWeight:600,fontSize:"1rem",cursor:"pointer",boxShadow:"0 1px 4px rgba(59,130,246,0.08)",border:"none",display:"inline-block",transition:"background 0.2s",marginRight:4},children:"Choose Screenshot"}),e.jsx("span",{style:{color:"#555",fontSize:"0.98rem",fontWeight:500,minWidth:120,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},children:A?"Screenshot selected":"No file chosen"}),A&&e.jsx("button",{onClick:()=>_(null),style:{background:"none",border:"none",color:"#ef4444",fontSize:18,marginLeft:4,cursor:"pointer",padding:0,lineHeight:1},title:"Remove screenshot",children:"√ó"})]}),A&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("img",{src:A,alt:"Basemap Screenshot Preview",style:{maxWidth:"100%",maxHeight:320,borderRadius:10,boxShadow:"0 4px 24px rgba(59,130,246,0.13)"}}),e.jsx("div",{style:{fontSize:13,color:"#2563eb",marginTop:6,fontWeight:500},children:"Screenshot attached"}),e.jsx("div",{style:{marginTop:18,background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:8,padding:"1rem",color:"#222",fontSize:"1rem",minHeight:48,maxWidth:420,marginLeft:"auto",marginRight:"auto",boxShadow:"0 1px 4px rgba(59,130,246,0.06)"},children:T?e.jsx("span",{style:{color:"#3b82f6",fontWeight:500},children:"Extracting text from screenshot..."}):P&&Object.keys(P).length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem 1.5rem"},children:Object.entries(P).map(([I,B])=>e.jsxs(Nr.Fragment,{children:[e.jsxs("div",{style:{fontWeight:600,color:"#2563eb"},children:[I,":"]}),e.jsx("div",{style:{color:"#222",wordBreak:"break-word"},children:B})]},I))}):e.jsx("span",{style:{color:"#888"},children:U||"No text extracted yet."})})]})]}),V&&e.jsxs("div",{style:{marginTop:"1rem",color:"#10b981",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 13l4 4L19 7",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Verified from Basemap"]})]}),e.jsxs("div",{className:"search-form-container-dark",children:[e.jsxs("div",{className:"search-header-dark",style:{cursor:"pointer",userSelect:"none"},onClick:()=>E(I=>!I),children:[e.jsx("div",{className:"search-icon-container-dark",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"search-title-dark",children:[e.jsxs("h4",{style:{display:"inline-block",marginRight:8},children:["Property Address Search",e.jsx("span",{style:{background:"#f59e42",color:"#fff",fontWeight:700,fontSize:"0.75rem",borderRadius:"6px",padding:"2px 8px",marginLeft:8,verticalAlign:"middle",letterSpacing:.5},children:"Beta"})]}),e.jsx("span",{style:{fontSize:18,verticalAlign:"middle",transition:"transform 0.2s",display:"inline-block",transform:R?"rotate(-90deg)":"rotate(0deg)"},children:"‚ñ∂"}),e.jsx("p",{style:{fontSize:"0.92rem",color:"#aaa",margin:0},children:"Enter the property address to search for detailed information"})]})]}),!R&&e.jsxs("div",{style:{background:"rgba(59,130,246,0.04)",border:"1px solid #e5e7eb",borderRadius:8,padding:"1rem",marginTop:8,marginBottom:8,maxWidth:420,marginLeft:"auto",marginRight:"auto",boxShadow:"0 1px 4px rgba(59,130,246,0.04)"},children:[e.jsxs("div",{className:"search-input-section-dark",children:[e.jsx("label",{className:"input-label-dark",style:{fontWeight:700,fontSize:"1.1rem",marginBottom:8,display:"block",color:"#3b82f6"},children:"Regrid Property Search"}),e.jsx("input",{type:"text",placeholder:"Enter full property address...",className:"modern-input-dark",value:x.address||"",onChange:I=>Ht(I.target.value),onFocus:()=>x.suggestions.length>0&&N(I=>({...I,showSuggestions:!0}))}),x.showSuggestions&&x.suggestions.length>0&&e.jsx("div",{className:"suggestions-dropdown-dark",children:x.suggestions.map(I=>e.jsxs("div",{className:"suggestion-item-dark",onClick:()=>Q(I),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M17.657 16.657L13.414 20.9C13.039 21.275 12.525 21.485 12 21.485C11.475 21.485 10.961 21.275 10.586 20.9L6.343 16.657C5.22422 15.5381 4.46234 14.1127 4.15369 12.5608C3.84504 11.009 4.00349 9.40047 4.60901 7.93853C5.21452 6.4766 6.2399 5.22425 7.55548 4.34668C8.87107 3.46911 10.4178 3.00024 12 3.00024C13.5822 3.00024 15.1289 3.46911 16.4445 4.34668C17.7601 5.22425 18.7855 6.4766 19.391 7.93853C19.9965 9.40047 20.155 11.009 19.8463 12.5608C19.5377 14.1127 18.7758 15.5381 17.657 16.657Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15 11C15 12.6569 13.6569 14 12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),I.address]},I.id))}),e.jsxs("div",{className:"search-actions-dark",style:{marginTop:12},children:[e.jsxs(de.button,{className:"search-button-dark primary",onClick:_t,whileHover:{scale:1.02},whileTap:{scale:.98},disabled:!x.address,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Search Property"]}),e.jsxs(de.button,{className:"search-button-dark secondary",onClick:os,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 7L18.132 19.142C18.0579 20.1891 17.187 21.0273 16.148 21.0273H7.852C6.813 21.0273 5.94214 20.1891 5.868 19.142L5 7M10 11V17M14 11V17M15 7V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V7M4 7H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Clear"]})]})]}),x.results&&e.jsx("div",{className:"search-results-container-dark"})]})]}),e.jsxs("div",{className:"property-checklist-section-dark",children:[e.jsx("h4",{children:"Property Verification Checklist"}),e.jsx("div",{className:"property-checklist-grid-dark",children:he.map(I=>e.jsxs(de.div,{className:`checklist-item-dark ${(I.key==="basemapVerified"?V:x.checklist[I.key])?"completed-dark":""}`,onClick:()=>{I.key==="basemapVerified"?$(B=>!B):Lt(I.key)},whileHover:{scale:1.02},whileTap:{scale:.98},style:{cursor:"pointer"},children:[(I.key==="basemapVerified"?V:x.checklist[I.key])?e.jsx(Ss,{className:"check-icon"}):e.jsx(ta,{className:"check-icon"}),e.jsx("span",{children:I.label})]},I.key))})]}),e.jsxs("div",{className:"step-navigation-dark",children:[e.jsxs(de.button,{className:"nav-button-dark back-button-dark",onClick:at,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]}),e.jsxs(de.button,{className:"nav-button-dark next-button-dark",onClick:ht,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:!pe,style:{opacity:pe?1:.5},children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12H19M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),Ph=()=>{switch(De[s].id){case"greeting":return Ae();case"customerInfo":return ce();case"projectType":return ee();case"propertySearch":return Dh();case"projectChecklist":return Se();case"projectQuestions":return ct();case"valueProposition":return xt();case"commitment":return Dn();case"confirmation":return Pn();case"buttonUp":return Th();default:return Ae()}},[Qs,En]=h.useState({open:!1,duplicates:[],allowSave:!1}),[So,Eh]=h.useState(!1),Rn=async(I=!1)=>{try{console.log("Sending data to Salesforce...",{forceCreate:I});const B={appointment:p,propertyInfo:P,customerInfo:f,projectType:r,callType:n,userName:c,appointmentConfirmed:b,allowSave:I};console.log("Data being sent:",B);const K="/.netlify/functions/sendToSalesforce";console.log("Using API URL:",K);const me=await fetch(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});console.log("Response status:",me.status),console.log("Response headers:",me.headers);const G=await me.text();console.log("Raw response text:",G);const le=G?JSON.parse(G):{};if(console.log("Parsed result:",le),me.ok)console.log("Data sent successfully:",le),F({type:"success",title:"Success",message:"Data sent to Salesforce successfully."});else if(me.status===409&&le.error==="DUPLICATE"){if(console.log("Duplicate detected:",le),!le.duplicates||le.duplicates.length===0)if(console.log("No actual duplicates found, proceeding with creation"),I){console.log("Already forcing creation, proceeding anyway"),F({type:"success",title:"Success",message:"Data sent to Salesforce successfully."});return}else return Rn(!0);if(I){console.log("Force create is true, proceeding with success"),F({type:"success",title:"Success",message:"Data sent to Salesforce successfully."});return}console.log("Checking duplicates array:",le.duplicates),console.log("Duplicates length:",le.duplicates?le.duplicates.length:"undefined"),le.duplicates&&le.duplicates.length>0?(console.log("Setting duplicate modal with:",{open:!0,duplicates:le.duplicates||[],allowSave:le.allowSave||!1}),En({open:!0,duplicates:le.duplicates||[],allowSave:le.allowSave||!1})):(console.log("No duplicates to show, proceeding with success message"),F({type:"success",title:"Success",message:"Data sent to Salesforce successfully."}))}else console.error("Error sending data:",le),F({type:"error",title:"Error",message:"Failed to send data to Salesforce.",details:le.error||"No error details provided."})}catch(B){console.error("Unexpected error:",B),F({type:"error",title:"Error",message:"An unexpected error occurred.",details:B.message})}};return e.jsxs("div",{className:"schedule-script-container-dark",children:[e.jsxs(de.div,{className:"schedule-script-header-dark",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("div",{className:"header-content",children:[e.jsxs(de.h1,{className:"schedule-script-title-dark",initial:{scale:.8},animate:{scale:1},transition:{duration:.6,delay:.2},children:[e.jsx(vi,{className:"title-icon"}),"Interactive Scheduling Script"]}),e.jsx(de.p,{className:"schedule-script-subtitle-dark",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:"Follow the step-by-step script to schedule appointments effectively"})]}),e.jsx(de.div,{className:"header-navigation-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsxs("div",{className:"quick-nav-dark",children:[e.jsxs(de.button,{onClick:()=>t("home"),className:"nav-button-dark home-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs(de.button,{onClick:()=>t("rebuttals"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs(de.button,{onClick:()=>t("disposition"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 3H15V5H9V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs(de.button,{onClick:()=>t("customerService"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs(de.button,{onClick:()=>t("faq"),className:"nav-button-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.30197 14.92 10.02C14.92 12 11.92 13 11.92 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 17H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"FAQ"]}),e.jsxs(de.button,{onClick:fe,className:"nav-button-dark",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",fontWeight:600},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Start New Appointment"]})]})})]}),e.jsxs(de.div,{className:"schedule-script-content-dark",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},children:[e.jsx("div",{className:"script-progress-dark",children:e.jsx("div",{className:"progress-bar-prominent",children:De.map((I,B)=>{let K=vi;return I.type==="greeting"&&(K=qa),I.type==="selection"&&(K=As),I.type==="property"&&(K=As),I.type==="checklist"&&(K=Ss),I.type==="questions"&&(K=Gu),I.type==="presentation"&&(K=vi),I.type==="scheduling"&&(K=ln),I.type==="confirmation"&&(K=Xa),e.jsxs(de.div,{className:`progress-step-prominent ${B<s?"completed":""} ${B===s?"current":""}`,"aria-label":`Go to step: ${I.title}`,children:[e.jsx("div",{className:"step-icon-wrapper",children:e.jsx(K,{className:"step-icon"})}),e.jsx("span",{className:"step-label-prominent",children:I.title}),B<De.length-1&&e.jsx("span",{className:"step-connector"})]},I.id)})})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:`${So?"56px":"300px"} 1fr`,gap:"2rem",alignItems:"flex-start"},children:[e.jsx(ip,{collapsed:So,onCollapseChange:Eh}),e.jsx("div",{className:"script-main-content-dark",children:Ph()})]})]}),q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)",padding:"2rem"},children:e.jsxs(de.div,{style:{background:"#fff",borderRadius:20,padding:"2rem",maxWidth:1200,width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",position:"relative"},initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,type:"spring"},children:[e.jsx("button",{onClick:()=>m(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"#f1f5f9",border:"none",borderRadius:"50%",width:"2.5rem",height:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.2rem",color:"#64748b",transition:"all 0.2s"},onMouseEnter:I=>{I.target.style.background="#e2e8f0",I.target.style.color="#475569"},onMouseLeave:I=>{I.target.style.background="#f1f5f9",I.target.style.color="#64748b"},children:"‚úï"}),e.jsx("h1",{style:{color:"#1e293b",marginBottom:"2rem",textAlign:"center",fontSize:"2rem",fontWeight:700},children:"üìã Appointment Recaps"}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:16,padding:"2rem",maxWidth:500,minWidth:350,color:"#fff",position:"relative",boxShadow:"0 8px 32px rgba(59,130,246,0.3)"},children:[e.jsx("h2",{style:{color:"#fff",marginBottom:16,fontSize:"1.5rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:"üë®‚Äçüíº Rep Recap"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"1rem",marginBottom:20,lineHeight:"1.5",color:"#e2e8f0"},children:ke}),e.jsx("button",{onClick:Ue,style:{background:D?"#10b981":"rgba(255, 255, 255, 0.2)",color:"#fff",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:8,padding:"0.75rem 1.5rem",fontWeight:600,fontSize:"1rem",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseEnter:I=>{D||(I.target.style.background="rgba(255, 255, 255, 0.3)",I.target.style.transform="scale(1.05)")},onMouseLeave:I=>{D||(I.target.style.background="rgba(255, 255, 255, 0.2)",I.target.style.transform="scale(1)")},children:D?"‚úÖ Copied!":"üìã Copy Rep Recap"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:16,padding:"2rem",maxWidth:450,minWidth:320,color:"#fff",boxShadow:"0 8px 32px rgba(16,185,129,0.3)"},children:[e.jsx("h2",{style:{color:"#fff",marginBottom:16,fontSize:"1.5rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:"üë§ Customer Recap"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1.5",color:"#d1fae5"},children:Ve}),e.jsx("button",{onClick:ye,style:{background:"rgba(255, 255, 255, 0.2)",color:"#fff",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:8,padding:"0.75rem 1.5rem",fontWeight:600,fontSize:"1rem",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)",marginTop:"1rem"},onMouseEnter:I=>{I.target.style.background="rgba(255, 255, 255, 0.3)",I.target.style.transform="scale(1.05)"},onMouseLeave:I=>{I.target.style.background="rgba(255, 255, 255, 0.2)",I.target.style.transform="scale(1)"},children:"üìã Copy Customer Recap"})]})]})]})}),M.title&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},children:e.jsxs(de.div,{style:{background:M.type==="success"?"linear-gradient(135deg, #059669 0%, #10b981 100%)":"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",borderRadius:20,padding:"2rem",maxWidth:500,width:"90%",color:"white",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",textAlign:"center"},initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,type:"spring"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:M.type==="success"?"‚úÖ":"‚ùå"}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:700,marginBottom:"1rem"},children:M.title}),e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1rem",opacity:.9},children:M.message}),M.details&&e.jsx("p",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"1.5rem"},children:M.details}),e.jsx("button",{onClick:()=>{F({type:"success",title:"",message:"",details:""}),M.type==="success"&&p.date&&p.time&&(f.firstName||f.lastName)&&m(!0)},style:{background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:12,padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseEnter:I=>{I.target.style.background="rgba(255, 255, 255, 0.3)",I.target.style.transform="scale(1.05)"},onMouseLeave:I=>{I.target.style.background="rgba(255, 255, 255, 0.2)",I.target.style.transform="scale(1)"},children:M.type==="success"?"Continue":"Close"})]})}),X&&e.jsx(de.div,{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"0 8px 32px rgba(16,185,129,0.3)",zIndex:1e4,maxWidth:"300px",fontSize:"0.9rem",fontWeight:500},initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{duration:.3,type:"spring"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"üíæ"}),ae]})}),Qs.open&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},children:e.jsxs(de.div,{style:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",borderRadius:24,padding:"2rem",minWidth:480,maxWidth:600,boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.2)",position:"relative",overflow:"hidden"},initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.4,type:"spring"},children:[e.jsx("div",{style:{position:"absolute",top:-20,right:-20,width:100,height:100,background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:"50%",opacity:.3}}),e.jsx("div",{style:{position:"absolute",bottom:-30,left:-30,width:80,height:80,background:"linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%)",borderRadius:"50%",opacity:.3}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",position:"relative",zIndex:1},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"},children:"‚ö†Ô∏è"}),e.jsx("h2",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1.8rem",fontWeight:700,background:"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Duplicate Lead Detected"}),e.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",fontWeight:500},children:"A similar lead already exists in Salesforce"})]}),Qs.duplicates.map((I,B)=>e.jsxs(de.div,{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",border:"2px solid #e2e8f0",borderRadius:16,padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",position:"relative",overflow:"hidden"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:B*.1},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:4,background:"linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%)"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Name"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:600},children:I.name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Phone"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:I.phone})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Email"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:I.email})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Company"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:I.company})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:I.status})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Lead Source"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"1rem",fontWeight:500},children:I.leadSource})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:8,border:"1px solid rgba(59, 130, 246, 0.1)"},children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"üìç Address Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Address:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.address})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"City:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.city})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"State:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.state})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"ZIP:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.zipCode})]})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16, 185, 129, 0.05)",borderRadius:8,border:"1px solid rgba(16, 185, 129, 0.1)"},children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"üìÖ Activity Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Last Activity:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.lastActivity})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Created:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.createdDate})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Last Modified:"}),e.jsx("div",{style:{color:"#1f2937",fontWeight:500},children:I.lastModifiedDate})]})]})]}),I.description&&I.description!=="N/A"&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(245, 158, 11, 0.05)",borderRadius:8,border:"1px solid rgba(245, 158, 11, 0.1)"},children:[e.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"üìù Description"}),e.jsx("div",{style:{color:"#1f2937",fontSize:"0.9rem",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:I.description})]}),e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsx("a",{href:I.salesforceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",padding:"0.5rem 1rem",borderRadius:8,background:"rgba(59, 130, 246, 0.1)",transition:"all 0.2s ease",display:"inline-block"},onMouseEnter:K=>{K.target.style.background="rgba(59, 130, 246, 0.2)",K.target.style.transform="scale(1.05)"},onMouseLeave:K=>{K.target.style.background="rgba(59, 130, 246, 0.1)",K.target.style.transform="scale(1)"},children:"üîó View in Salesforce"})})]},I.id)),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(de.button,{onClick:()=>{const I=Qs.duplicates[0]?.salesforceUrl;I&&I!=="https://login.salesforce.com"&&I.startsWith("http")?window.open(I,"_blank"):alert("Unable to open Salesforce record. Please log into Salesforce and search for the lead manually.")},style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",borderRadius:12,padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},onMouseEnter:I=>{I.target.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.4)"},onMouseLeave:I=>{I.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)"},children:"üëÅÔ∏è View Existing Lead"}),Qs.allowSave&&e.jsx(de.button,{onClick:()=>{En({...Qs,open:!1}),Rn(!0)},style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:12,padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},onMouseEnter:I=>{I.target.style.boxShadow="0 6px 20px rgba(16, 185, 129, 0.4)"},onMouseLeave:I=>{I.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:"‚ûï Create New Anyway"}),e.jsx(de.button,{onClick:()=>En({open:!1,duplicates:[],allowSave:!1}),style:{background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",color:"#374151",border:"none",borderRadius:12,padding:"0.75rem 1.5rem",fontWeight:600,cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},onMouseEnter:I=>{I.target.style.background="linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)"},onMouseLeave:I=>{I.target.style.background="linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)"},children:"‚ùå Cancel"})]})]})})]})},sa="faqs",ia={async getAllFAQs(){try{const t=je(ne(J(),sa),Ge("createdAt","desc"));return(await ue(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error fetching FAQs:",t),new Error("Failed to fetch FAQs")}},async getFAQById(t){try{const s=ie(J(),sa,t),a=await Te(s);if(a.exists())return{id:a.id,...a.data()};throw new Error("FAQ not found")}catch(s){throw console.error("Error fetching FAQ:",s),new Error("Failed to fetch FAQ")}},async addFAQ(t){try{return{id:(await Qe(ne(J(),sa),{...t,createdAt:Ie(),updatedAt:Ie()})).id,...t,createdAt:new Date,updatedAt:new Date}}catch(s){throw console.error("Error adding FAQ:",s),new Error("Failed to add FAQ")}},async updateFAQ(t,s){try{const a=ie(J(),sa,t);return await _e(a,{...s,updatedAt:Ie()}),{id:t,...s,updatedAt:new Date}}catch(a){throw console.error("Error updating FAQ:",a),new Error("Failed to update FAQ")}},async deleteFAQ(t){try{const s=ie(J(),sa,t);return await ot(s),t}catch(s){throw console.error("Error deleting FAQ:",s),new Error("Failed to delete FAQ")}},async searchFAQs(t){try{const s=await this.getAllFAQs(),a=t.toLowerCase();return s.filter(n=>n.question.toLowerCase().includes(a)||n.answer.toLowerCase().includes(a))}catch(s){throw console.error("Error searching FAQs:",s),new Error("Failed to search FAQs")}}},Rb=({onNavigate:t})=>{const{currentUser:s}=Rt(),[a,n]=h.useState(null),[i,r]=h.useState([]),[o,c]=h.useState(!0),[d,u]=h.useState(null),[l,p]=h.useState(!1),[g,b]=h.useState(!1),[y,f]=h.useState(!1),v={title:"Long Home Reference Guide",lastUpdated:new Date().toLocaleDateString(),sections:{roof:{title:"Roof Services",icon:e.jsx(As,{className:"section-icon"}),canDo:{title:"Can Do",items:["Total replacement of roof:","‚Ä¢ Asphalt Shingle roof","‚Ä¢ Metal Roof","‚Ä¢ Flat roof","‚Ä¢ (Synthetic) Cedar Shake","‚Ä¢ (Synthetic) Slate","‚Ä¢ Modular home same as Single Family","‚Ä¢ Mobile home (Asphalt shingle Only)","‚Ä¢ 2 car lengths wide garage (Must be detached from home)","‚Ä¢ Barns (Asphalt shingle. Must be on Plywood)"]},cantDo:{title:"Can't Do",items:["Cedar Shake","Slate","Partial Replacement","Roof Repairs","Structural work/Framing","Shed","Single car garage","Mobile home (Metal, flat roof, etc.)","Roof that covers multiple properties (Example: Condos, Apartments, etc.)","Insurance (No open claims)","Commercial Properties","Shingle Lay over"]}},bath:{title:"Bath Services",icon:e.jsx(gy,{className:"section-icon"}),canDo:{title:"Can Do",items:["Must have existing Tub/Shower (Wet Area)","‚Ä¢ Tub/shower replacement","‚Ä¢ Tub to Shower Conversion","‚Ä¢ Walk in Tubs (Excludes NH, RI)","‚Ä¢ Modular home same as Single Family","‚Ä¢ Mobile home (No walk in Tub)","‚Ä¢ Full bathroom extras (Wet area must be included)","  - Toilet","  - Vanity","  - Flooring (Vinyl tile)","  - Mirror"]},cantDo:{title:"Can't Do",items:["Half Bathrooms","Partial Replacement, Repairs, Liners","Plumbing/Demolition","Lighting","Ceramic Tile","Mobile home (Walk in tubs)","Insurance (No open claims)","Commercial Properties","Free standing/Claw Tub"]}}}};h.useEffect(()=>{C(),j()},[s]);const j=()=>{const E=localStorage.getItem("adminUser");if(E)try{const z=JSON.parse(E);p(z.role==="admin")}catch(z){console.error("Error parsing admin user data:",z),p(!1)}else p(!1)},C=async()=>{try{c(!0),u(null);const E=await ia.getAllFAQs();r(E)}catch(E){console.error("Error loading FAQs:",E),u("Failed to load FAQs. Please try again.")}finally{c(!1)}},x=h.useCallback(E=>{n(z=>z===E?null:E)},[]),N=()=>{try{const E=document.createElement("a");E.href="/Can-Can't do.pdf",E.download="Long-Home-Can-Cant-Do-Reference-Guide.pdf",E.target="_blank",document.body.appendChild(E),E.click(),document.body.removeChild(E)}catch(E){console.error("Error downloading file:",E);try{window.open("/Can-Can't do.pdf","_blank")}catch(z){console.error("Fallback download failed:",z),alert("Failed to download the reference guide. Please try again.")}}},R=()=>{try{const E=document.createElement("a");E.href="/Scheduling Script Update 2025 - Jill Approved.docx",E.download="Long-Home-Scheduling-Script-2025.docx",E.target="_blank",document.body.appendChild(E),E.click(),document.body.removeChild(E)}catch(E){console.error("Error downloading file:",E);try{window.open("/Scheduling Script Update 2025 - Jill Approved.docx","_blank")}catch(z){console.error("Fallback download failed:",z),alert("Failed to download the scheduling script. Please try again.")}}};return o?e.jsx("div",{className:"faq-container",children:e.jsxs("div",{className:"faq-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading FAQs..."})]})}):d?e.jsx("div",{className:"faq-container",children:e.jsxs("div",{className:"faq-error",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),e.jsx("h3",{children:"Error Loading FAQs"}),e.jsx("p",{children:d}),e.jsx("button",{onClick:C,className:"retry-button",children:"Try Again"})]})}):e.jsxs("div",{className:"faq-container",children:[e.jsxs("div",{className:"faq-header",children:[e.jsx(de.h1,{className:"faq-title",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:"Frequently Asked Questions"}),e.jsx(de.p,{className:"faq-subtitle",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:"FAQ for Reps"}),e.jsx("div",{className:"header-navigation",children:e.jsxs("div",{className:"quick-nav",children:[e.jsxs("button",{onClick:()=>t("home"),className:"nav-button home-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22V12H15V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Home"]}),e.jsxs("button",{onClick:()=>t("rebuttals"),className:"nav-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 9H17M7 13H13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Rebuttals"]}),e.jsxs("button",{onClick:()=>t("disposition"),className:"nav-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 3H15V5H9V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Lead Disposition"]}),e.jsxs("button",{onClick:()=>t("customerService"),className:"nav-button",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 2V6M8 2V6M3 10H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 14H8.01M12 14H12.01M16 14H16.01M8 18H8.01M12 18H12.01M16 18H16.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Customer Service"]}),e.jsxs("button",{onClick:()=>t("scheduleScript"),className:"nav-button",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Schedule Script"]})]})})]}),e.jsxs("div",{className:"faq-content",children:[e.jsxs(de.div,{className:"reference-guide-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:[e.jsxs("div",{className:"reference-guide-header",children:[e.jsxs("div",{className:"reference-guide-title",children:[e.jsx(My,{className:"reference-guide-icon"}),e.jsxs("div",{children:[e.jsx("h2",{children:v.title}),e.jsxs("p",{className:"last-updated",children:["Last Updated: ",v.lastUpdated]})]})]}),e.jsxs("div",{className:"reference-guide-actions",children:[e.jsxs(de.button,{className:"download-reference-button",onClick:N,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[e.jsx(jc,{className:"button-icon"}),"Download"]}),e.jsxs(de.button,{className:"download-script-button",onClick:R,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[e.jsx(jc,{className:"button-icon"}),"Download Script"]})]})]}),e.jsx("div",{className:"reference-guide-content",children:Object.entries(v.sections).map(([E,z])=>e.jsxs(de.div,{className:"reference-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.3},children:[e.jsxs("div",{className:"section-header",children:[z.icon,e.jsx("h3",{children:z.title})]}),e.jsxs("div",{className:"section-cards-flex",children:[e.jsxs("div",{className:"can-do-card",children:[e.jsxs("div",{className:"section-subheader",children:[e.jsx(Xa,{className:"check-icon"}),e.jsx("h4",{children:z.canDo.title})]}),z.canDo.items.map((k,V)=>{if(!k.startsWith("‚Ä¢")){const $=[];for(let A=V+1;A<z.canDo.items.length&&z.canDo.items[A].startsWith("‚Ä¢");A++)$.push(z.canDo.items[A]);return e.jsxs("div",{className:"main-with-subs",children:[e.jsx("div",{className:"main-item",children:k}),$.length>0&&e.jsx("ul",{className:"service-list sub-items",children:$.map((A,_)=>e.jsx("li",{className:"sub-item",children:A},_))})]},V)}return null})]}),e.jsxs("div",{className:"cant-do-card",children:[e.jsxs("div",{className:"section-subheader",children:[e.jsx(jy,{className:"x-icon"}),e.jsx("h4",{children:z.cantDo.title})]}),e.jsx("ul",{className:"service-list cant-do-list",children:z.cantDo.items.map((k,V)=>e.jsx("li",{className:"sub-item",children:k},V))})]})]})]},E))})]}),e.jsxs(de.div,{className:"faq-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},children:[e.jsx("h2",{className:"faq-section-title",children:"General FAQs"}),e.jsx("div",{className:"faq-grid",children:i.length>0?i.map((E,z)=>e.jsxs(de.div,{className:`faq-card-public${a===z?" expanded":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5+z*.05},children:[e.jsxs("button",{className:`faq-question-public ${a===z?"active":""}`,onClick:()=>x(z),"aria-expanded":a===z,children:[e.jsx("span",{className:"faq-q-icon",children:"‚ùì"}),e.jsx("span",{className:"question-text",children:E.question}),e.jsx("span",{className:"expand-icon",children:a===z?"‚àí":"+"})]}),e.jsx("div",{className:"faq-divider-public"}),e.jsx(Rf,{mode:"wait",children:a===z&&e.jsx(de.div,{className:"faq-answer-public active",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeInOut"},children:e.jsx("p",{children:E.answer})})})]},z)):e.jsx("div",{className:"empty-faq",children:e.jsxs("div",{className:"empty-faq-content",children:[e.jsx("h3",{children:"No FAQ content available"}),e.jsx("p",{children:"FAQ content will be added here. Please check back later or contact support for assistance."})]})})})]}),e.jsx("div",{className:"faq-footer",children:e.jsxs("div",{className:"contact-section",children:[e.jsx("h3",{children:"Still have questions?"}),e.jsx("p",{children:"Contact our support team for additional assistance."}),e.jsxs("div",{className:"contact-info",children:[e.jsxs("div",{className:"contact-item",children:[e.jsx("span",{className:"contact-label",children:"Email:"}),e.jsx("span",{className:"contact-value",children:"contactsupervisors@longhome.com"})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx("span",{className:"contact-label",children:"Phone:"}),e.jsx("span",{className:"contact-value",children:"1-800-LONG-HOME"})]})]})]})})]})]})},es="serviceTopics",xr="customerServiceCategories",Ch=[{topic:"appointments",title:"Appointment Management",description:"Handle all appointment-related inquiries and requests",steps:["Verify customer information","Check availability","Confirm details","Send confirmation"],tips:["Be flexible with timing","Offer alternatives","Document all changes"],keywords:["appointments","scheduling","management"],isUrgent:!1},{topic:"appointments",title:"Appointment Verification",description:"Verify and validate appointment details",steps:["Check appointment date and time","Verify customer contact information","Confirm service requirements","Review special instructions"],tips:["Double-check all details","Note any special requirements","Update customer records"],keywords:["verification","validation","details"],isUrgent:!1},{topic:"appointments",title:"Appointment Updates",description:"Handle appointment modifications and updates",steps:["Review requested changes","Check new availability","Update appointment details","Notify relevant parties"],tips:["Be prompt with updates","Maintain clear communication","Document all changes"],keywords:["updates","modifications","changes"],isUrgent:!1},{topic:"scheduling",title:"New Appointment Scheduling",description:"Process for scheduling new customer appointments",steps:["Collect customer contact information","Determine service requirements","Find optimal time slot","Confirm appointment details"],tips:["Offer multiple time options","Consider customer preferences","Check technician availability"],keywords:["new appointment","schedule","booking"],isUrgent:!1},{topic:"scheduling",title:"Bulk Scheduling",description:"Handle multiple appointment scheduling requests",steps:["Review all scheduling requests","Group similar appointments","Optimize schedule","Send batch confirmations"],tips:["Prioritize urgent requests","Maintain schedule balance","Consider travel time"],keywords:["bulk","multiple","group scheduling"],isUrgent:!1},{topic:"scheduling",title:"Priority Scheduling",description:"Handle urgent and priority scheduling requests",steps:["Assess urgency level","Check immediate availability","Coordinate with team","Confirm priority booking"],tips:["Respond quickly","Maintain clear communication","Follow up promptly"],keywords:["priority","urgent","immediate"],isUrgent:!0},{topic:"confirmation",title:"Appointment Confirmation",description:"Send and manage appointment confirmations",steps:["Prepare confirmation details","Send confirmation message","Request acknowledgment","Follow up if needed"],tips:["Include all necessary details","Use clear formatting","Provide contact information"],keywords:["confirmation","verify","acknowledge"],isUrgent:!1},{topic:"confirmation",title:"Reminder Notifications",description:"Send appointment reminders to customers",steps:["Schedule reminder timing","Prepare reminder message","Send notification","Track delivery status"],tips:["Send reminders in advance","Use multiple channels","Include cancellation policy"],keywords:["reminder","notification","alert"],isUrgent:!1},{topic:"cancellation",title:"Appointment Cancellation",description:"Process appointment cancellations",steps:["Record cancellation reason","Update schedule","Notify relevant parties","Offer rescheduling options"],tips:["Be understanding","Document cancellation reason","Maintain professional tone"],keywords:["cancellation","cancel","terminate"],isUrgent:!1},{topic:"cancellation",title:"Rescheduling Process",description:"Handle appointment rescheduling requests",steps:["Review rescheduling request","Check new availability","Update appointment details","Send new confirmation"],tips:["Be flexible with timing","Offer multiple options","Maintain clear communication"],keywords:["reschedule","rescheduling","change time"],isUrgent:!1},{topic:"followup",title:"Service Follow-up",description:"Conduct post-service follow-ups",steps:["Review service details","Contact customer","Gather feedback","Address any concerns"],tips:["Follow up promptly","Be attentive to feedback","Document all interactions"],keywords:["follow-up","feedback","service review"],isUrgent:!1},{topic:"followup",title:"Customer Satisfaction",description:"Measure and improve customer satisfaction",steps:["Send satisfaction survey","Analyze responses","Identify areas for improvement","Implement changes"],tips:["Make surveys concise","Act on feedback","Follow up on concerns"],keywords:["satisfaction","feedback","survey"],isUrgent:!1},{topic:"followup",title:"Issue Resolution",description:"Handle post-service issues and complaints",steps:["Listen to concerns","Investigate issue","Propose solution","Follow up on resolution"],tips:["Respond quickly","Be empathetic","Document all actions"],keywords:["issue","complaint","resolution"],isUrgent:!1}],Lb=[{title:"Appointment Management",description:"Manage and handle appointment-related inquiries",icon:"üìÖ",keySteps:["Verify appointment details","Check availability","Confirm changes"],quickTips:["Be proactive with scheduling","Offer alternatives when needed"],tags:["appointments","scheduling","management"]},{title:"Scheduling",description:"Handle new appointment scheduling requests",icon:"‚è∞",keySteps:["Collect customer information","Find suitable time slots","Confirm booking"],quickTips:["Offer multiple options","Consider customer preferences"],tags:["scheduling","booking","appointments"]},{title:"Cancellation",description:"Process appointment cancellations and rescheduling",icon:"‚ùå",keySteps:["Verify cancellation reason","Process cancellation","Offer alternatives"],quickTips:["Be understanding","Offer rescheduling options"],tags:["cancellation","rescheduling","appointments"]},{title:"Confirmation",description:"Handle appointment confirmations and reminders",icon:"‚úÖ",keySteps:["Send confirmation details","Verify contact information","Set reminders"],quickTips:["Send reminders in advance","Include all necessary details"],tags:["confirmation","reminders","appointments"]},{title:"Follow-up",description:"Manage post-appointment follow-ups",icon:"üìû",keySteps:["Check service satisfaction","Address any concerns","Schedule follow-up if needed"],quickTips:["Be prompt with follow-ups","Address issues proactively"],tags:["follow-up","feedback","service"]}],Ib=async()=>{try{console.log("Checking if service topics need initialization...");const t=je(ne(J(),es));if((await ue(t)).empty){console.log("No service topics found. Initializing default topics...");const a=et(J());for(const n of Ch){const i=ie(ne(J(),es));a.set(i,{...n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}await a.commit(),console.log("Default service topics initialized successfully")}else console.log("Service topics already exist, skipping initialization")}catch(t){throw console.error("Error initializing default service topics:",t),t}},Mb=async()=>{try{console.log("Checking if categories need initialization...");const t=je(ne(J(),xr));if((await ue(t)).empty){console.log("No categories found. Initializing default categories...");const a=et(J());for(const n of Lb){const i=ie(ne(J(),xr));a.set(i,{...n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}await a.commit(),console.log("Default categories initialized successfully")}else console.log("Categories already exist, skipping initialization")}catch(t){throw console.error("Error initializing default categories:",t),t}},kh=async()=>{try{await ys(),console.log("Fetching service topics...");const t=je(ne(J(),es)),s=await ue(t);if(s.empty){console.log("No topics found, initializing default topics..."),await Ib();const i=(await ue(t)).docs.map(r=>({id:r.id,...r.data()}));return console.log(`Successfully fetched ${i.length} service topics`),i}const a=s.docs.map(n=>({id:n.id,...n.data()}));return console.log(`Successfully fetched ${a.length} service topics`),a}catch(t){throw console.error("Error fetching service topics:",t),new Error("Failed to fetch service topics. Please try again.")}},Ob=async()=>{try{await ys(),console.log("Fetching urgent service topics...");const t=je(ne(J(),es),Ke("isUrgent","==",!0),Ge("title")),a=(await ue(t)).docs.map(n=>({id:n.id,...n.data()}));return console.log(`Successfully fetched ${a.length} urgent service topics`),a}catch(t){throw console.error("Error fetching urgent service topics:",t),new Error("Failed to fetch urgent service topics. Please try again.")}},Fb=async t=>{try{await ys(),console.log("Adding new service topic...");const s=await Qe(ne(J(),es),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return console.log("Service topic added successfully with ID:",s.id),{id:s.id,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}catch(s){throw console.error("Error adding service topic:",s),new Error("Failed to add service topic. Please try again.")}},Ub=async(t,s)=>{try{await ys(),console.log("Updating service topic:",t);const a=ie(J(),es,t);return await _e(a,{...s,updatedAt:new Date().toISOString()}),console.log("Service topic updated successfully"),{id:t,...s,updatedAt:new Date().toISOString()}}catch(a){throw console.error("Error updating service topic:",a),new Error("Failed to update service topic. Please try again.")}},Bb=async t=>{try{await ys(),console.log("Deleting service topic:",t);const s=ie(J(),es,t);return await ot(s),console.log("Service topic deleted successfully"),!0}catch(s){throw console.error("Error deleting service topic:",s),new Error("Failed to delete service topic. Please try again.")}},Wb=async()=>{try{await ys(),console.log("Fetching service categories..."),await Mb();const t=je(ne(J(),xr),Ge("title")),a=(await ue(t)).docs.map(n=>({id:n.id,...n.data()}));return console.log(`Successfully fetched ${a.length} categories:`,a),a}catch(t){throw console.error("Error fetching categories:",t),new Error("Failed to fetch categories. Please try again.")}},Vb=async()=>{try{await ys();const t=ne(J(),es),s=await ue(t),a=et(J());return s.docs.forEach(n=>{a.delete(n.ref)}),Ch.forEach(n=>{const i=ie(t);a.set(i,{...n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}),await a.commit(),!0}catch(t){throw console.error("Error resetting service topics:",t),t}},Ti=(t,s)=>{s=s.toLowerCase(),t=t.toLowerCase();let a=0,n=0,i=0;for(;n<t.length&&a<s.length;)s[a]===t[n]&&(i++,a++),n++;return a===s.length?i/s.length:0},$b={appointment:["apointment","appoinment","appoitment","apointmnt"],schedule:["scedule","scedual","schedual","scedul"],cancel:["cancell","cancle","cancell","cancle"],reschedule:["rescedule","rescedual","reschedual","rescedul"],confirm:["confrim","conferm","confurm","confrm"],follow:["follw","folow","foll","folow"],up:["up","up","up","up"],management:["managment","mangement","managment","mangmnt"],service:["servise","servis","servic","servis"],customer:["custumer","custmer","custmor","custmr"],help:["helpp","helpe","hel","helpe"],search:["searcgh","serch","searh","serach"],find:["fid","findd","fnd","find"],looking:["lookin","lookng","lookig","lookn"],assist:["asist","assistt","asst","asist"],home:["hom","hoem","hme","hom"],correct:["corrcet","corret","corrct","corret"],spell:["spel","spelll","spl","spel"],word:["wrd","wor","wod","wrd"],make:["mak","maek","mke","mak"],way:["wai","wae","wayy","wai"],more:["moer","mor","mre","moer"],helpful:["helpfull","helpfu","helful","helpfl"],something:["somehting","somthing","somethng","somethig"],wrong:["wron","wrog","wong","wronng"],will:["wil","wll","wil","wll"],try:["try","tri","tryy","try"],auto:["auto","aut","autoo","auto"],options:["aoptiinoin","optins","optons","opions"],bar:["bar","br","bar","br"]},qb={"how to":["how do i","how can i","how do you","how to"],"when can":["when can i","when is","when will","when should"],"where to":["where can i","where do i","where is","where to"],"what is":["whats","what is","what are","what do"],"why do":["why does","why is","why are","why do"],"can i":["can you","is it possible","is there a way","can i"],"need to":["want to","have to","should i","need to"],"looking for":["searching for","trying to find","want to find","looking for"]},_b=({onNavigate:t,searchQuery:s})=>{const[a,n]=h.useState("all"),[i,r]=h.useState(s||""),[o,c]=h.useState(!1),[d,u]=h.useState(null),[l,p]=h.useState([]),[g,b]=h.useState(!1),[y,f]=h.useState(-1),[v,j]=h.useState(!1),[C,x]=h.useState(null),[N,R]=h.useState([]),[E,z]=h.useState(!0),[k,V]=h.useState(null),[$,A]=h.useState([]),[_,O]=h.useState([]),Y=[{id:"appointments",name:"Appointment Management",icon:"üìÖ",color:"blue",features:["Calendar Integration","Automated Reminders","Conflict Resolution","Appointment History","Rescheduling Options"],description:"Manage your appointments efficiently with our comprehensive scheduling system"},{id:"scheduling",name:"Scheduling",icon:"‚è∞",color:"green",features:["Real-time Availability","Multiple Time Zones","Recurring Appointments","Buffer Time Settings"],description:"Schedule appointments with ease using our flexible booking system"},{id:"confirmation",name:"Confirmation",icon:"‚úÖ",color:"yellow",features:["Email Confirmations","SMS Notifications","Calendar Invites","Reminder Settings"],description:"Keep track of your appointments with automated confirmations"},{id:"cancellation",name:"Cancellation",icon:"‚ùå",color:"red",features:["Cancellation Policy","Rescheduling Options","Waitlist Management","No-show Prevention"],description:"Handle appointment cancellations and rescheduling efficiently"},{id:"followup",name:"Follow-up",icon:"üìû",color:"purple",features:["Post-appointment Surveys","Feedback Collection","Follow-up Scheduling","Communication History"],description:"Maintain relationships with automated follow-up systems"}];h.useEffect(()=>{U()},[]);const U=async()=>{try{z(!0),V(null),console.log("Loading customer service data...");const F=await Wb();console.log("Loaded categories:",F),R(F);const X=await kh();console.log("Loaded service topics:",X),A(X);const oe=await Ob();console.log("Loaded urgent topics:",oe),O(oe),console.log("All topics combined:",[...X,...oe])}catch(F){console.error("Error loading data:",F),V("Failed to load data. Please try again.")}finally{z(!1)}},w=[...$,..._].map((F,X)=>({...F,uniqueId:`${F.id}-${X}`})),T=F=>{const X=F.toLowerCase();for(const[oe,ae]of Object.entries($b))if(ae.includes(X))return oe;return F},W=F=>{let X=F.toLowerCase();for(const[oe,ae]of Object.entries(qb))for(const H of ae)X.includes(H)&&(X=X.replace(H,oe));return X.split(" ").map(oe=>T(oe)).join(" ")},P=F=>{if(!F.trim())return[];const X=W(F),oe=[];return w.forEach(ae=>{const H=Ti(ae.title,X),se=Ti(ae.description,X),Z=ae.keywords.map(De=>Ti(De,X)),he=Math.max(...Z),pe=Math.max(H,se,he);pe>.3&&oe.push({...ae,relevanceScore:pe})}),oe.sort((ae,H)=>H.relevanceScore-ae.relevanceScore)},L=F=>{const X=F.target.value;r(X),b(!0),f(-1);const oe=P(X);p(oe)},q=F=>{if(g)switch(F.key){case"ArrowDown":F.preventDefault(),f(X=>X<l.length-1?X+1:X);break;case"ArrowUp":F.preventDefault(),f(X=>X>0?X-1:X);break;case"Enter":F.preventDefault(),y>=0&&y<l.length&&m(l[y]);break;case"Escape":b(!1);break}},m=F=>{r(F.title),b(!1),u(F),c(!0),document.body.style.overflow="hidden"},D=h.useMemo(()=>{const F=i.toLowerCase().trim();return w.filter(X=>{const oe=a==="all"||X.topic===a;if(!F)return oe;const ae=X.title?.toLowerCase().includes(F)||X.description?.toLowerCase().includes(F)||X.steps?.some(H=>H.toLowerCase().includes(F))||X.tips?.some(H=>H.toLowerCase().includes(F))||X.keywords?.some(H=>H.toLowerCase().includes(F));return oe&&ae}).sort((X,oe)=>X.title.localeCompare(oe.title))},[w,a,i]),S=F=>{u(F),c(!0),document.body.style.overflow="hidden"},M=()=>{c(!1),u(null),document.body.style.overflow=""};return E?e.jsx("div",{className:"customer-service-page",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-text",children:"Loading customer service data..."})]})}):k?e.jsx("div",{className:"customer-service-page",children:e.jsxs("div",{className:"error-container",children:[e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),e.jsx("span",{children:k})]}),e.jsx("button",{className:"retry-button",onClick:U,children:"Retry"})]})}):e.jsxs("div",{className:"customer-service-page",children:[e.jsxs("div",{className:"customer-service-page-header",children:[e.jsx("div",{className:"header-top",children:e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{className:"page-title",children:"Customer Service"}),e.jsx("p",{className:"page-subtitle",children:"Manage customer service interactions and support"})]})}),e.jsxs("div",{className:"search-wrapper",children:[e.jsxs("div",{className:"search-input-container",children:[e.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("input",{type:"text",className:"search-input",placeholder:"Search service topics...",value:i,onChange:L,onKeyDown:q}),i&&e.jsx("button",{className:"clear-search-button",onClick:()=>{r(""),b(!1),p([])},children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),g&&l.length>0&&e.jsx("div",{className:"search-suggestions-dropdown",children:l.map((F,X)=>e.jsxs("div",{className:`suggestion-item ${X===y?"selected":""}`,onClick:()=>m(F),children:[e.jsx("span",{className:"suggestion-icon",children:Y.find(oe=>oe.id===F.topic)?.icon||"üìã"}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("h4",{children:F.title}),e.jsx("p",{children:F.description})]})]},F.uniqueId))}),i&&e.jsxs("div",{className:"search-results-count",children:[D.length," result",D.length!==1?"s":""," found"]})]})]}),e.jsxs("div",{className:"customer-service-main-content",children:[e.jsxs("aside",{className:"customer-service-sidebar",children:[e.jsx("h2",{className:"sidebar-title",children:"Service Topics"}),e.jsxs("div",{className:"topic-buttons",children:[e.jsxs("button",{onClick:()=>n("all"),className:`topic-button ${a==="all"?"active":""}`,children:[e.jsx("span",{className:"topic-icon",children:"üìã"}),e.jsx("span",{className:"topic-name",children:"All Topics"})]}),Y.map(F=>e.jsxs("button",{onClick:()=>n(F.id),className:`topic-button ${a===F.id?"active":""}`,children:[e.jsx("span",{className:"topic-icon",children:F.icon}),e.jsx("span",{className:"topic-name",children:F.name})]},F.id))]})]}),e.jsx("main",{className:"customer-service-content-area",children:D.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìã"}),e.jsx("h3",{children:"No service topics found"}),e.jsx("p",{children:i?`No topics match your search "${i}". Try a different search term.`:a!=="all"?"No topics found in this category.":"No service topics available."})]}):e.jsx("div",{className:"categories-grid",children:D.map(F=>e.jsxs("div",{className:"category-card",onClick:()=>S(F),children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:"category-icon",children:Y.find(X=>X.id===F.topic)?.icon||"üìã"}),e.jsx("h3",{children:F.title})]}),e.jsx("div",{className:"category-description",children:e.jsx("p",{children:F.description})}),e.jsxs("div",{className:"category-details",children:[e.jsxs("div",{className:"key-steps",children:[e.jsx("h4",{children:"Key Steps"}),e.jsx("ul",{children:F.steps&&F.steps.slice(0,3).map((X,oe)=>e.jsx("li",{children:X},oe))})]}),e.jsxs("div",{className:"quick-tips",children:[e.jsx("h4",{children:"Quick Tips"}),e.jsx("ul",{children:F.tips&&F.tips.slice(0,2).map((X,oe)=>e.jsx("li",{children:X},oe))})]})]}),F.keywords&&F.keywords.length>0&&e.jsx("div",{className:"category-tags",children:F.keywords.map((X,oe)=>e.jsx("span",{className:"category-tag",children:X},oe))})]},F.uniqueId))})})]}),o&&d&&Sr.createPortal(e.jsx("div",{className:"customer-service-modal-overlay",onClick:M,children:e.jsxs("div",{className:"customer-service-modal-content",onClick:F=>F.stopPropagation(),children:[e.jsxs("div",{className:"customer-service-modal-header",children:[e.jsx("h2",{className:"customer-service-modal-title",children:d.title}),e.jsx("button",{className:"customer-service-modal-close",onClick:M,children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("div",{className:"customer-service-modal-body",children:[e.jsxs("div",{className:"customer-service-modal-section",children:[e.jsx("h3",{className:"customer-service-section-title",children:"Description"}),e.jsx("p",{className:"customer-service-description-text",children:d.description})]}),d.steps&&d.steps.length>0&&e.jsxs("div",{className:"customer-service-modal-section",children:[e.jsx("h3",{className:"customer-service-section-title",children:"Steps"}),e.jsx("ol",{className:"customer-service-steps-list",children:d.steps.map((F,X)=>e.jsx("li",{className:"customer-service-step-item",children:F},X))})]}),d.tips&&d.tips.length>0&&e.jsxs("div",{className:"customer-service-modal-section",children:[e.jsx("h3",{className:"customer-service-section-title",children:"Tips"}),e.jsx("ul",{className:"customer-service-tips-list",children:d.tips.map((F,X)=>e.jsx("li",{className:"customer-service-tip-item",children:F},X))})]}),d.keywords&&d.keywords.length>0&&e.jsxs("div",{className:"customer-service-modal-section",children:[e.jsx("h3",{className:"customer-service-section-title",children:"Related Keywords"}),e.jsx("div",{className:"customer-service-keyword-tags",children:d.keywords.map((F,X)=>e.jsx("span",{className:"customer-service-keyword-tag",children:F},X))})]})]}),e.jsx("div",{className:"customer-service-modal-footer",children:e.jsx("button",{className:"customer-service-close-button",onClick:M,children:"Close"})})]})}),document.body)]})},Hb="modulepreload",zb=function(t){return"/"+t},Oc={},Fc=function(s,a,n){let i=Promise.resolve();if(a&&a.length>0){let o=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=o(a.map(u=>{if(u=zb(u),u in Oc)return;Oc[u]=!0;const l=u.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=l?"stylesheet":Hb,l||(g.as="script"),g.crossOrigin="",g.href=u,d&&g.setAttribute("nonce",d),document.head.appendChild(g),l)return new Promise((b,y)=>{g.addEventListener("load",b),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&r(c.reason);return s().catch(r)})};let Ws,vr;try{({db:Ws,auth:vr}=await Fc(()=>import("./nodeConfig-CYnQWZpH.js"),__vite__mapDeps([0,1])))}catch{({db:Ws,auth:vr}=await Fc(()=>import("./config-Dar2JuxW.js"),__vite__mapDeps([2,1])))}const kn="rebuttals",An=()=>{if(typeof window>"u")return{uid:"script-admin"};const t=vr.currentUser;if(!t)throw new Error("User must be authenticated to perform this action");return t},Gb=async t=>{try{const s=An();return(await Qe(ne(Ws,kn),{...t,createdBy:s.uid,createdAt:Ie(),updatedAt:Ie()})).id}catch(s){throw console.error("Error adding rebuttal:",s),s.code==="permission-denied"?new Error("You do not have permission to add rebuttals. Please make sure you are logged in as an admin."):s}},Ts=async(t,s)=>{try{const a=An(),n=ie(Ws,kn,t);await _e(n,{...s,updatedBy:a.uid,updatedAt:Ie()})}catch(a){throw console.error("Error updating rebuttal:",a),a.code==="permission-denied"?new Error("You do not have permission to update rebuttals. Please make sure you are logged in as an admin."):a}},Uc=async t=>{try{An();const s=ie(Ws,kn,t);await ot(s)}catch(s){throw console.error("Error deleting rebuttal:",s),s.code==="permission-denied"?new Error("You do not have permission to delete rebuttals. Please make sure you are logged in as an admin."):s}},Bc=async()=>{try{An();const t=je(ne(Ws,kn),Ge("createdAt","desc"));return(await ue(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error getting rebuttals:",t),t.code==="permission-denied"?new Error("You do not have permission to view rebuttals. Please make sure you are logged in."):t}},Wc=["Price Concern","Time Constraint","Spouse Decision","Budget Issues","Not Ready","Competitor Comparison","Quality Concerns","Installation Time","Warranty Questions","Financing Options","Custom Design","Material Selection","Maintenance","Rescheduling","Emergency Service"],yr=({rebuttal:t,onSave:s})=>{const[a,n]=h.useState({title:"",summary:"",content:{pt1:"",pt2:""},tags:[],category:"",situationOverview:"",rebuttalStrategy:"",tips:[]}),[i,r]=h.useState(!1),[o,c]=h.useState(""),[d,u]=h.useState(""),[l,p]=h.useState(""),[g,b]=h.useState(!1),[y,f]=h.useState([]),[v,j]=h.useState([]),[C,x]=h.useState(!0),N=tt(),{id:R}=Ar(),E=!!R||!!t;h.useEffect(()=>{z()},[]),h.useEffect(()=>{if(t&&E){console.log("Populating form with rebuttal data:",t);const w={title:t.title||"",summary:t.summary||"",content:{pt1:typeof t.content=="object"?t.content.pt1||"":t.content||"",pt2:typeof t.content=="object"&&t.content.pt2||""},tags:t.tags||[],category:t.category||"",situationOverview:t.situationOverview||"",rebuttalStrategy:t.rebuttalStrategy||"",tips:t.tips||[]};console.log("Setting form data to:",w),n(w)}},[t,E]);const z=async()=>{try{x(!0);const w=await Jt.getAllCategories();j(w)}catch(w){console.error("Error loading categories:",w)}finally{x(!1)}},k=w=>{const{name:T,value:W}=w.target;n(P=>({...P,[T]:W}))},V=(w,T)=>{n(W=>({...W,content:{...W.content,[w]:T}}))},$=w=>{const T=w.target.value;if(u(T),T.trim()){const W=Wc.filter(P=>P.toLowerCase().includes(T.toLowerCase())&&!a.tags.includes(P));f(W),b(!0)}else f([]),b(!1)},A=w=>{const T=w||d.trim();T&&!a.tags.includes(T)&&(n(W=>({...W,tags:[...W.tags,T]})),u(""),b(!1),f([]))},_=w=>{n(T=>({...T,tags:T.tags.filter(W=>W!==w)}))},O=()=>{l.trim()&&!a.tips.includes(l.trim())&&(n(w=>({...w,tips:[...w.tips,l.trim()]})),p(""))},Y=w=>{n(T=>({...T,tips:T.tips.filter(W=>W!==w)}))},U=async w=>{w.preventDefault(),c(""),r(!0);try{const T={...a,updatedAt:new Date().toISOString()};if(E){const W=t?.id||R;await Ts(W,T)}else T.createdAt=new Date().toISOString(),await Gb(T);s?s():N("/admin/dashboard")}catch(T){console.error("Error saving rebuttal:",T),c("Error saving rebuttal")}finally{r(!1)}};return e.jsxs("div",{className:"edit-admin-form",children:[o&&e.jsx("div",{className:"error-message",children:o}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"üìù"}),e.jsx("h3",{children:"Basic Information"}),e.jsx("p",{children:"Essential details about the rebuttal"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"title",children:[e.jsx("span",{className:"label-icon",children:"üìù"}),e.jsx("span",{className:"label-text",children:"Title"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:k,required:!0,placeholder:"Enter rebuttal title",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"üìù"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"category",children:[e.jsx("span",{className:"label-icon",children:"üè∑Ô∏è"}),e.jsx("span",{className:"label-text",children:"Category"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsxs("select",{id:"category",name:"category",value:a.category,onChange:k,required:!0,disabled:C,className:"form-select",children:[e.jsx("option",{value:"",children:"Select a category"}),v.map(w=>e.jsxs("option",{value:w.name,children:[w.icon," ",w.name]},w.id))]}),e.jsx("div",{className:"input-icon",children:"üè∑Ô∏è"})]}),C&&e.jsx("div",{className:"loading-indicator",children:"Loading categories..."})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"summary",children:[e.jsx("span",{className:"label-icon",children:"üìã"}),e.jsx("span",{className:"label-text",children:"Summary"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"summary",name:"summary",value:a.summary,onChange:k,required:!0,rows:"3",placeholder:"Enter a brief summary of the rebuttal",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"üìã"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"üéØ"}),e.jsx("h3",{children:"Strategy & Content"}),e.jsx("p",{children:"Define the approach and detailed responses"})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"situationOverview",children:[e.jsx("span",{className:"label-icon",children:"üîç"}),e.jsx("span",{className:"label-text",children:"Situation Overview"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"situationOverview",name:"situationOverview",value:a.situationOverview,onChange:k,required:!0,rows:"4",placeholder:"Describe the situation or objection being addressed",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"üîç"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"rebuttalStrategy",children:[e.jsx("span",{className:"label-icon",children:"‚ö°"}),e.jsx("span",{className:"label-text",children:"Rebuttal Strategy"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"rebuttalStrategy",name:"rebuttalStrategy",value:a.rebuttalStrategy,onChange:k,required:!0,rows:"4",placeholder:"Describe the overall strategy for this rebuttal",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"‚ö°"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"content-pt1",children:[e.jsx("span",{className:"label-icon",children:"üí¨"}),e.jsx("span",{className:"label-text",children:"Initial Response (Part 1)"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"content-pt1",value:a.content.pt1,onChange:w=>V("pt1",w.target.value),required:!0,rows:"6",placeholder:"Enter the initial response to the objection...",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"üí¨"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"content-pt2",children:[e.jsx("span",{className:"label-icon",children:"üîÑ"}),e.jsx("span",{className:"label-text",children:"Follow-up Response (Part 2)"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"content-pt2",value:a.content.pt2,onChange:w=>V("pt2",w.target.value),rows:"6",placeholder:"Enter the follow-up response if the initial response doesn't work...",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"üîÑ"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"üè∑Ô∏è"}),e.jsx("h3",{children:"Tags & Tips"}),e.jsx("p",{children:"Organize and enhance your rebuttal"})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{children:[e.jsx("span",{className:"label-icon",children:"üí°"}),e.jsx("span",{className:"label-text",children:"Tips"})]}),e.jsxs("div",{className:"tags-input-container",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",value:l,onChange:w=>p(w.target.value),placeholder:"Add a tip (e.g., 'Stay calm and professional')",className:"form-input",onKeyPress:w=>{w.key==="Enter"&&(w.preventDefault(),O())}}),e.jsx("div",{className:"input-icon",children:"üí°"})]}),e.jsx("button",{type:"button",onClick:O,className:"add-tag-btn",children:"Add Tip"})]}),e.jsx("div",{className:"tags-container",children:a.tips.map((w,T)=>e.jsxs("span",{className:"tag",children:["üí° ",w,e.jsx("button",{type:"button",onClick:()=>Y(w),className:"remove-tag-btn",children:"√ó"})]},T))})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{children:[e.jsx("span",{className:"label-icon",children:"üè∑Ô∏è"}),e.jsx("span",{className:"label-text",children:"Tags"})]}),e.jsxs("div",{className:"tags-input-container",children:[e.jsxs("div",{className:"tags-input-wrapper",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",value:d,onChange:$,placeholder:"Add a tag or select from suggestions",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"üè∑Ô∏è"})]}),g&&y.length>0&&e.jsx("div",{className:"tags-dropdown",children:y.map((w,T)=>e.jsx("div",{className:"tag-suggestion",onClick:()=>A(w),children:w},T))})]}),e.jsx("button",{type:"button",onClick:()=>A(),className:"add-tag-btn",disabled:!d.trim(),children:"Add Tag"})]}),e.jsx("div",{className:"tags-container",children:a.tags.map((w,T)=>e.jsxs("span",{className:"tag",children:["#",w,e.jsx("button",{type:"button",onClick:()=>_(w),className:"remove-tag-btn",children:"√ó"})]},T))}),e.jsxs("div",{className:"premade-tags",children:[e.jsx("h4",{children:"Common Tags:"}),e.jsx("div",{className:"premade-tags-list",children:Wc.map((w,T)=>e.jsx("button",{type:"button",onClick:()=>A(w),className:"premade-tag",disabled:a.tags.includes(w),children:w},T))})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:s,className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"submit-btn",children:i?"Saving...":E?"Update":"Save"})]})]})]})},Yb=()=>{const[t,s]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(""),[o,c]=h.useState(""),[d,u]=h.useState(""),[l,p]=h.useState("all"),[g,b]=h.useState(!1),[y,f]=h.useState(null),[v,j]=h.useState([]),[C,x]=h.useState(""),[N,R]=h.useState(!1),[E,z]=h.useState([]);tt();const k=h.useRef(null);h.useEffect(()=>{V()},[]),h.useEffect(()=>{g&&k.current&&(k.current.scrollTop=0)},[g]);const V=async()=>{try{n(!0);const m=await Bc(),D=await $(m);s(D)}catch(m){console.error("Error loading rebuttals:",m),r("Failed to load rebuttals")}finally{n(!1)}},$=async(m,D=!0)=>{try{R(!0),z([]);const S=await Jt.getAllCategories(),M={};S.forEach(ae=>{M[ae.id]=ae.name});let F=!1;const X=[],oe=[];for(const ae of m){const H=ae.category;let se={...ae};if(H&&H.length===20&&!H.includes(" ")){const Z=M[H];Z?(await Ts(ae.id,{...ae,category:Z}),se.category=Z,F=!0):oe.push(`Could not find category name for UID: ${H} (Rebuttal: ${ae.title})`)}X.push(se)}return D&&oe.length>0&&(z(oe),setTimeout(()=>z([]),1e4)),R(!1),X}catch(S){return R(!1),console.error("Error checking/fixing category names:",S),m}},A=async()=>{R(!0);const m=await Bc(),D=await $(m,!0);s(D),R(!1)},_=async m=>{if(window.confirm("Are you sure you want to delete this rebuttal? This action cannot be undone."))try{await Uc(m),s(t.filter(D=>D.id!==m))}catch(D){console.error("Error deleting rebuttal:",D),r("Failed to delete rebuttal")}},O=async m=>{try{await Ts(m,{archived:!0,archivedAt:new Date().toISOString()}),s(t.map(D=>D.id===m?{...D,archived:!0,archivedAt:new Date().toISOString()}:D))}catch(D){console.error("Error archiving rebuttal:",D),r("Failed to archive rebuttal")}},Y=async m=>{try{await Ts(m,{archived:!1,archivedAt:null}),s(t.map(D=>D.id===m?{...D,archived:!1,archivedAt:null}:D))}catch(D){console.error("Error unarchiving rebuttal:",D),r("Failed to unarchive rebuttal")}},U=m=>{const D={...m,summary:m.summary||m.objection||"",situationOverview:m.situationOverview||m.summary||m.objection||"",rebuttalStrategy:m.rebuttalStrategy||"",content:m.content?typeof m.content=="object"?m.content:{pt1:m.content,pt2:""}:m.response?typeof m.response=="object"?m.response:{pt1:m.response,pt2:""}:{pt1:"",pt2:""},tips:m.tips||[]};f(D),b(!0)},w=()=>{console.log("handleFormClose called");const m=document.querySelector(".modal-content");m?(m.style.animation="modalSlideOut 0.2s ease-in forwards",setTimeout(()=>{b(!1),f(null),V()},200)):(b(!1),f(null),V())},T=async()=>{if(!(!C||v.length===0))try{C==="delete"?window.confirm(`Are you sure you want to delete ${v.length} rebuttals?`)&&(await Promise.all(v.map(m=>Uc(m))),s(t.filter(m=>!v.includes(m.id)))):C==="archive"?(await Promise.all(v.map(m=>Ts(m,{archived:!0,archivedAt:new Date().toISOString()}))),s(t.map(m=>v.includes(m.id)?{...m,archived:!0,archivedAt:new Date().toISOString()}:m))):C==="unarchive"&&(await Promise.all(v.map(m=>Ts(m,{archived:!1,archivedAt:null}))),s(t.map(m=>v.includes(m.id)?{...m,archived:!1,archivedAt:null}:m))),j([]),x("")}catch(m){console.error("Error performing bulk action:",m),r("Failed to perform bulk action")}},W=()=>{v.length===L.length?j([]):j(L.map(m=>m.id))},P=m=>{j(D=>D.includes(m)?D.filter(S=>S!==m):[...D,m])},L=t.filter(m=>{const D=m.title?.toLowerCase().includes(o.toLowerCase())||m.summary?.toLowerCase().includes(o.toLowerCase())||m.category?.toLowerCase().includes(o.toLowerCase())||m.tags?.some(F=>F.toLowerCase().includes(o.toLowerCase())),S=!d||m.category===d,M=l==="all"||l==="archived"&&m.archived||l==="active"&&!m.archived;return D&&S&&M}),q=[...new Set(t.map(m=>m.category).filter(Boolean))];return e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"edit-admin-modal-overlay",onClick:w,children:e.jsxs("div",{className:"edit-admin-modal-container",ref:k,onClick:m=>m.stopPropagation(),children:[e.jsx("div",{className:"edit-admin-modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-icon-section",children:[e.jsx("div",{className:"modal-main-icon",children:y?"‚úèÔ∏è":"‚ûï"}),e.jsxs("div",{className:"modal-title-group",children:[e.jsx("h2",{children:y?"Edit Rebuttal":"Create New Rebuttal"}),e.jsx("p",{children:"Manage rebuttal content and settings"}),y&&e.jsxs("div",{className:"company-status-badge",children:[e.jsx("span",{className:`status-indicator ${y.status||"active"}`}),e.jsx("span",{className:"status-text",children:y.status||"active"})]})]})]}),e.jsx("button",{className:"modal-close-btn",onClick:w,"aria-label":"Close modal",children:e.jsx("span",{children:"‚úï"})})]})}),e.jsx("div",{className:"modal-body",children:e.jsx(yr,{rebuttal:y,onSave:w})})]})}),e.jsxs("div",{className:"rebuttal-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Rebuttal Management"}),e.jsx("p",{children:"Manage all rebuttals in the system. Create, edit, archive, and delete rebuttals."})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"add-rebuttal-btn",onClick:()=>{f(null),b(!0)},children:"‚ûï Add New Rebuttal"}),e.jsx("button",{className:"fix-categories-btn",onClick:A,disabled:N,style:{marginLeft:"1rem",background:"#f39c12",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:600,cursor:N?"not-allowed":"pointer"},children:N?"Fixing...":"Fix Category Names"})]})]}),E.length>0&&e.jsxs("div",{className:"fix-warning-toast",children:[e.jsx("strong",{children:"Warning:"}),e.jsx("ul",{children:E.map((m,D)=>e.jsx("li",{children:m},D))})]}),i&&e.jsxs("div",{className:"error-message",children:[i,e.jsx("button",{onClick:()=>r(""),children:"√ó"})]}),e.jsxs("div",{className:"filters-section",children:[e.jsx(mn,{value:o,onChange:m=>c(m.target.value),onClear:()=>c(""),placeholder:"Search rebuttals...",className:"admin-searchbar"}),e.jsxs("div",{className:"filter-controls",children:[e.jsxs("select",{value:d,onChange:m=>u(m.target.value),className:"filter-select",children:[e.jsx("option",{value:"",children:"All Categories"}),q.map(m=>e.jsx("option",{value:m,children:m},m))]}),e.jsxs("select",{value:l,onChange:m=>p(m.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),v.length>0&&e.jsxs("div",{className:"bulk-actions",children:[e.jsxs("div",{className:"bulk-info",children:[v.length," rebuttal(s) selected"]}),e.jsxs("div",{className:"bulk-controls",children:[e.jsxs("select",{value:C,onChange:m=>x(m.target.value),className:"bulk-select",children:[e.jsx("option",{value:"",children:"Select Action"}),e.jsx("option",{value:"archive",children:"Archive Selected"}),e.jsx("option",{value:"unarchive",children:"Unarchive Selected"}),e.jsx("option",{value:"delete",children:"Delete Selected"})]}),e.jsx("button",{onClick:T,disabled:!C,className:"bulk-action-btn",children:"Apply"})]})]}),e.jsxs("div",{className:"rebuttals-table-container",children:[e.jsx("div",{className:"mobile-rebuttal-cards",children:L.map(m=>e.jsxs("div",{className:`rebuttal-card${m.archived?" archived":""}`,children:[e.jsxs("div",{className:"rebuttal-card-header",children:[e.jsx("div",{className:"rebuttal-card-title",children:m.title}),e.jsx("span",{className:"category-badge",children:m.category})]}),e.jsx("div",{className:"rebuttal-card-summary",children:m.summary}),e.jsxs("div",{className:"rebuttal-card-tags",children:[m.tags?.slice(0,3).map((D,S)=>e.jsxs("span",{className:"tag-badge",children:["#",D]},S)),m.tags?.length>3&&e.jsxs("span",{className:"more-tags",children:["+",m.tags.length-3]})]}),e.jsxs("div",{className:"rebuttal-card-status",children:[e.jsx("span",{className:`status-badge ${m.archived?"archived":"active"}`,children:m.archived?"Archived":"Active"}),e.jsx("span",{className:"date-info",children:new Date(m.createdAt?.toDate?.()||m.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"rebuttal-card-actions",children:[e.jsx("button",{onClick:()=>U(m),className:"action-btn edit",title:"Edit",children:"‚úèÔ∏è"}),m.archived?e.jsx("button",{onClick:()=>Y(m.id),className:"action-btn unarchive",title:"Unarchive",children:"üì¶"}):e.jsx("button",{onClick:()=>O(m.id),className:"action-btn archive",title:"Archive",children:"üì¶"}),e.jsx("button",{onClick:()=>_(m.id),className:"action-btn delete",title:"Delete",children:"üóëÔ∏è"})]})]},m.id))}),e.jsxs("table",{className:"rebuttals-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:v.length===L.length,onChange:W,className:"select-all-checkbox"})}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Tags"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:L.map(m=>e.jsxs("tr",{className:m.archived?"archived":"",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:v.includes(m.id),onChange:()=>P(m.id),className:"rebuttal-checkbox"})}),e.jsx("td",{children:e.jsxs("div",{className:"rebuttal-title",children:[e.jsx("strong",{children:m.title}),e.jsx("p",{className:"rebuttal-summary",children:m.summary})]})}),e.jsx("td",{children:e.jsx("span",{className:"category-badge",children:m.category})}),e.jsx("td",{children:e.jsxs("div",{className:"tags-container",children:[m.tags?.slice(0,3).map((D,S)=>e.jsxs("span",{className:"tag-badge",children:["#",D]},S)),m.tags?.length>3&&e.jsxs("span",{className:"more-tags",children:["+",m.tags.length-3]})]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${m.archived?"archived":"active"}`,children:m.archived?"Archived":"Active"})}),e.jsx("td",{children:e.jsx("div",{className:"date-info",children:new Date(m.createdAt?.toDate?.()||m.createdAt).toLocaleDateString()})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:()=>U(m),className:"action-btn edit",title:"Edit",children:"‚úèÔ∏è"}),m.archived?e.jsx("button",{onClick:()=>Y(m.id),className:"action-btn unarchive",title:"Unarchive",children:"üì¶"}):e.jsx("button",{onClick:()=>O(m.id),className:"action-btn archive",title:"Archive",children:"üì¶"}),e.jsx("button",{onClick:()=>_(m.id),className:"action-btn delete",title:"Delete",children:"üóëÔ∏è"})]})})]},m.id))})]})]}),e.jsxs("div",{className:"stats-footer",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Total:"}),e.jsx("span",{className:"stat-value",children:t.length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Active:"}),e.jsx("span",{className:"stat-value",children:t.filter(m=>!m.archived).length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Archived:"}),e.jsx("span",{className:"stat-value",children:t.filter(m=>m.archived).length})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Categories:"}),e.jsx("span",{className:"stat-value",children:q.length})]})]})]})]})},Kb=()=>{const[t,s]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(null),[o,c]=h.useState(null),[d,u]=h.useState(!1),[l,p]=h.useState(!1),[g,b]=h.useState(!1),[y,f]=h.useState(!1),[v,j]=h.useState(null),[C,x]=h.useState({name:"",icon:"",color:"",isActive:!0,description:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),N=["üìä","üìà","üìâ","üìã","üìù","üìå","üìç","üîç","üîé","üîê","üîë","üîí","üîì","üíº","üìÅ","üìÇ","üóÇÔ∏è","üìÖ","üìÜ","üóìÔ∏è","‚è∞","‚è±Ô∏è","‚è≤Ô∏è","üïê","üïë","üïí","üïì","üïî","üïï","üïñ","üïó","üïò","üïô","üïö","üïõ","üéØ","üé®","üé≠","üé™","üéüÔ∏è","üé´","üé¨","üé•","üì∫","üì∑","üìπ","üéûÔ∏è","üìΩÔ∏è","üéÆ","üé≤","üß©","üé®","üé≠","üé™","üéüÔ∏è","üé´","üé¨","üé•","üì∫","üì∑","üìπ","üéûÔ∏è","üìΩÔ∏è","üéÆ","üé≤","üß©","üéØ","üé®","üé™"];h.useEffect(()=>{R()},[]);const R=async()=>{try{n(!0);const _=(await Jt.getAllCategories()).map(O=>({...O,isActive:O.isActive??!0}));s(_),r(null)}catch(A){console.error("Error loading categories:",A),r("Failed to load categories. Please try again.")}finally{n(!1)}},E=A=>{if(!A)return"N/A";try{if(A.toDate)return A.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});const _=new Date(A);return isNaN(_.getTime())?"N/A":_.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(_){return console.error("Error formatting date:",_),"N/A"}},z=async A=>{A.preventDefault();try{const _={...C,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Jt.addCategory(_),u(!1),x({name:"",icon:"",color:"",isActive:!0,description:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),R()}catch(_){console.error("Error adding category:",_),r("Failed to add category. Please try again.")}},k=async A=>{A.preventDefault();try{const _={...o,isActive:o.isActive??!0,updatedAt:new Date().toISOString()};await Jt.updateCategory(o.id,_),p(!1),c(null),R()}catch(_){console.error("Error updating category:",_),r("Failed to update category. Please try again.")}},V=async()=>{try{await Jt.deleteCategory(v.id),b(!1),j(null),R()}catch(A){console.error("Error deleting category:",A),r("Failed to delete category. Please try again.")}},$=A=>{d?x({...C,icon:A}):l&&o&&c({...o,icon:A}),f(!1)};return a?e.jsx("div",{className:"loading",children:"Loading categories..."}):i?e.jsx("div",{className:"error",children:i}):e.jsxs("div",{className:"category-management",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("h2",{children:"Manage Categories"}),e.jsx("button",{className:"add-button",onClick:()=>u(!0),children:"Add New Category"})]}),e.jsx("div",{className:"categories-list redesigned",children:t.map(A=>e.jsxs("div",{className:"category-card redesigned",children:[e.jsxs("div",{className:"category-card-main",children:[e.jsx("div",{className:"category-card-icon",style:{background:A.color?`linear-gradient(135deg, ${A.color}33 0%, #fff 100%)`:"#f3f4f6"},children:e.jsx("span",{className:"icon-emoji",children:A.icon})}),e.jsxs("div",{className:"category-card-info",children:[e.jsx("div",{className:"category-card-title",children:A.name}),A.description&&e.jsx("div",{className:"category-card-desc",children:A.description}),e.jsx("div",{className:"category-card-badges",children:e.jsx("span",{className:`status-badge ${A.isActive?"active":"inactive"}`,children:A.isActive?"Active":"Inactive"})})]})]}),e.jsxs("div",{className:"category-card-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Created",children:"üìÖ"})," ",e.jsx("span",{className:"meta-label",children:"Created:"})," ",e.jsx("span",{className:"meta-value",children:E(A.createdAt)})]}),A.updatedAt&&e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Updated",children:"üïí"})," ",e.jsx("span",{className:"meta-label",children:"Updated:"})," ",e.jsx("span",{className:"meta-value",children:E(A.updatedAt)})]})]}),e.jsxs("div",{className:"category-card-actions",children:[e.jsxs("button",{className:"action-button edit-button",onClick:()=>{c(A),p(!0)},children:[e.jsx("span",{role:"img","aria-label":"Edit",children:"‚úèÔ∏è"})," Edit"]}),e.jsxs("button",{className:"action-button delete-button",onClick:()=>{j(A),b(!0)},children:[e.jsx("span",{role:"img","aria-label":"Delete",children:"üóëÔ∏è"})," Delete"]})]})]},A.id))}),d&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Add New Category"}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:C.name,onChange:A=>x({...C,name:A.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:C.description,onChange:A=>x({...C,description:A.target.value}),placeholder:"Enter a description for this category",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsxs("div",{className:"emoji-input-container",children:[e.jsx("input",{type:"text",value:C.icon,onChange:A=>x({...C,icon:A.target.value}),placeholder:"Click to select an emoji",required:!0,readOnly:!0,onClick:()=>f(!0)}),e.jsx("span",{className:"emoji-preview",children:C.icon})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{value:C.color,onChange:A=>x({...C,color:A.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select a color"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"pink",children:"Pink"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"teal",children:"Teal"}),e.jsx("option",{value:"indigo",children:"Indigo"}),e.jsx("option",{value:"cyan",children:"Cyan"}),e.jsx("option",{value:"lime",children:"Lime"}),e.jsx("option",{value:"amber",children:"Amber"}),e.jsx("option",{value:"rose",children:"Rose"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:C.isActive,onChange:A=>x({...C,isActive:A.target.checked})}),"Active Category"]})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Add Category"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{u(!1),x({name:"",icon:"",color:"",isActive:!0,description:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},children:"Cancel"})]})]})]})}),l&&o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Edit Category"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:o.name,onChange:A=>c({...o,name:A.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:o.description,onChange:A=>c({...o,description:A.target.value}),placeholder:"Enter a description for this category",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsxs("div",{className:"emoji-input-container",children:[e.jsx("input",{type:"text",value:o.icon,onChange:A=>c({...o,icon:A.target.value}),placeholder:"Click to select an emoji",required:!0,readOnly:!0,onClick:()=>f(!0)}),e.jsx("span",{className:"emoji-preview",children:o.icon})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{value:o.color,onChange:A=>c({...o,color:A.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select a color"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"pink",children:"Pink"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"teal",children:"Teal"}),e.jsx("option",{value:"indigo",children:"Indigo"}),e.jsx("option",{value:"cyan",children:"Cyan"}),e.jsx("option",{value:"lime",children:"Lime"}),e.jsx("option",{value:"amber",children:"Amber"}),e.jsx("option",{value:"rose",children:"Rose"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:o.isActive,onChange:A=>c({...o,isActive:A.target.checked})}),"Active Category"]})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Save Changes"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{p(!1),c(null)},children:"Cancel"})]})]})]})}),g&&v&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Delete Category"}),e.jsxs("p",{children:['Are you sure you want to delete the category "',v.name,'"?']}),e.jsx("p",{className:"warning",children:"This action cannot be undone."}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"delete-button",onClick:V,children:"Delete"}),e.jsx("button",{className:"cancel-button",onClick:()=>{b(!1),j(null)},children:"Cancel"})]})]})}),y&&e.jsx("div",{className:"modal-overlay emoji-picker-overlay",children:e.jsxs("div",{className:"modal-content emoji-picker-content",children:[e.jsxs("div",{className:"emoji-picker-header",children:[e.jsx("h3",{children:"Select an Emoji"}),e.jsx("button",{className:"close-button",onClick:()=>f(!1),children:"√ó"})]}),e.jsx("div",{className:"emoji-grid",children:N.map((A,_)=>e.jsx("button",{className:"emoji-button",onClick:()=>$(A),children:A},_))})]})})]})},Qb=()=>{const[t,s]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(null),[o,c]=h.useState(!1),[d,u]=h.useState(null),[l,p]=h.useState(""),[g,b]=h.useState("all"),[y,f]=h.useState([]),[v,j]=h.useState(!1),C=kt(),[x,N]=h.useState({name:"",description:"",category:"",icon:"üìã",nextSteps:"",situations:[""],tips:[""],examples:[""],subcategories:[""],isActive:!0});h.useEffect(()=>{R()},[]);const R=async()=>{try{n(!0);const w=ne(C,"dispositions"),W=(await ue(w)).docs.map(P=>({id:P.id,...P.data()})).sort((P,L)=>(P.name||"").localeCompare(L.name||""));s(W)}catch(w){console.error("Error fetching dispositions:",w),r("Failed to load dispositions")}finally{n(!1)}},E=async w=>{w.preventDefault();try{const T=ne(C,"dispositions"),W={...x,situations:x.situations.filter(P=>P.trim()),tips:x.tips.filter(P=>P.trim()),examples:x.examples.filter(P=>P.trim()),subcategories:x.subcategories.filter(P=>P.trim())};d?await _e(ie(C,"dispositions",d.id),W):await Qe(T,W),c(!1),u(null),$(),R()}catch(T){console.error("Error saving disposition:",T),r("Failed to save disposition")}},z=w=>{u(w),N({name:w.name||"",description:w.description||"",category:w.category||"",icon:w.icon||"üìã",nextSteps:w.nextSteps||"",situations:w.situations||[""],tips:w.tips||[""],examples:w.examples||[""],subcategories:w.subcategories||[""],isActive:w.isActive===void 0?!0:w.isActive}),c(!0)},k=async w=>{if(window.confirm("Are you sure you want to delete this disposition?"))try{await ot(ie(C,"dispositions",w)),R()}catch(T){console.error("Error deleting disposition:",T),r("Failed to delete disposition")}},V=async()=>{if(window.confirm(`Are you sure you want to delete ${y.length} dispositions?`))try{const w=y.map(T=>ot(ie(C,"dispositions",T)));await Promise.all(w),f([]),j(!1),R()}catch(w){console.error("Error bulk deleting dispositions:",w),r("Failed to delete dispositions")}},$=()=>{N({name:"",description:"",category:"",icon:"üìã",nextSteps:"",situations:[""],tips:[""],examples:[""],subcategories:[""],isActive:!0})},A=w=>{N(T=>({...T,[w]:[...T[w],""]}))},_=(w,T)=>{N(W=>({...W,[w]:W[w].filter((P,L)=>L!==T)}))},O=(w,T,W)=>{N(P=>({...P,[w]:P[w].map((L,q)=>q===T?W:L)}))},Y=t.filter(w=>{const T=w.name.toLowerCase().includes(l.toLowerCase())||w.description.toLowerCase().includes(l.toLowerCase()),W=g==="all"||w.category===g;return T&&W}),U=[...new Set(t.map(w=>w.category).filter(Boolean))];return a?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading dispositions..."})]}):e.jsxs("div",{className:"lead-disposition-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsx("h2",{children:"Lead Disposition Management"}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"fix-button",onClick:async()=>{try{const w=ne(C,"dispositions"),W=(await ue(w)).docs.map(P=>P.data().isActive===void 0?_e(P.ref,{isActive:!0}):Promise.resolve());await Promise.all(W),R(),r("Fixed existing dispositions!"),setTimeout(()=>r(null),3e3)}catch(w){console.error("Error fixing dispositions:",w),r("Failed to fix dispositions")}},children:"üîß Fix Existing Dispositions"}),e.jsx("button",{className:"add-button",onClick:()=>{u(null),$(),c(!0)},children:"‚ûï Add New Disposition"})]})]}),i&&e.jsxs("div",{className:"error-message",children:[i,e.jsx("button",{onClick:()=>r(null),children:"√ó"})]}),e.jsxs("div",{className:"management-controls",children:[e.jsxs("div",{className:"search-filter",children:[e.jsx("input",{type:"text",placeholder:"Search dispositions...",value:l,onChange:w=>p(w.target.value),className:"search-input"}),e.jsxs("select",{value:g,onChange:w=>b(w.target.value),className:"category-filter",children:[e.jsx("option",{value:"all",children:"All Categories"}),U.map(w=>e.jsx("option",{value:w,children:w},w))]})]}),e.jsxs("div",{className:"bulk-actions",children:[e.jsxs("label",{className:"select-all",children:[e.jsx("input",{type:"checkbox",checked:y.length===Y.length&&Y.length>0,onChange:w=>{w.target.checked?f(Y.map(T=>T.id)):f([])}}),"Select All"]}),y.length>0&&e.jsx("div",{className:"bulk-action-buttons",children:e.jsxs("button",{className:"bulk-delete-button",onClick:V,children:["üóëÔ∏è Delete Selected (",y.length,")"]})})]})]}),e.jsx("div",{className:"dispositions-grid",children:Y.map(w=>e.jsxs("div",{className:"disposition-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("input",{type:"checkbox",checked:y.includes(w.id),onChange:T=>{T.target.checked?f(W=>[...W,w.id]):f(W=>W.filter(P=>P!==w.id))},className:"select-checkbox"}),e.jsx("span",{className:"disposition-icon",children:w.icon}),e.jsx("h3",{className:"disposition-name",children:w.name}),e.jsx("span",{className:`status-badge ${w.isActive===void 0||w.isActive?"active":"inactive"}`,children:w.isActive===void 0||w.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{className:"disposition-description",children:w.description}),w.category&&e.jsx("span",{className:"disposition-category",children:w.category}),w.nextSteps&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Next Steps:"}),e.jsx("p",{className:"detail-text",children:w.nextSteps})]}),w.tips&&w.tips.length>0&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Tips & Best Practices:"}),e.jsx("ul",{className:"detail-list",children:w.tips.map((T,W)=>e.jsx("li",{className:"detail-item",children:T},W))})]}),w.examples&&w.examples.length>0&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Common Examples:"}),e.jsx("ul",{className:"detail-list",children:w.examples.map((T,W)=>e.jsx("li",{className:"detail-item",children:T},W))})]}),w.subcategories&&w.subcategories.length>0&&e.jsxs("div",{className:"disposition-details",children:[e.jsx("h4",{className:"detail-title",children:"Subcategories:"}),e.jsx("div",{className:"subcategories-container",children:w.subcategories.map((T,W)=>e.jsx("span",{className:"subcategory-tag",children:T},W))})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"edit-button",onClick:()=>z(w),children:"‚úèÔ∏è Edit"}),e.jsx("button",{className:"delete-button",onClick:()=>k(w.id),children:"üóëÔ∏è Delete"})]})]},w.id))}),Y.length===0&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No dispositions found. Create your first disposition to get started!"})}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:e.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:d?"Edit Disposition":"Add New Disposition"}),e.jsx("button",{className:"modal-close",onClick:()=>c(!1),children:"√ó"})]}),e.jsxs("form",{onSubmit:E,className:"disposition-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",value:x.name,onChange:w=>N(T=>({...T,name:w.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsx("input",{type:"text",value:x.icon,onChange:w=>N(T=>({...T,icon:w.target.value})),placeholder:"üìã"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{value:x.description,onChange:w=>N(T=>({...T,description:w.target.value})),required:!0,rows:3})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{type:"text",value:x.category,onChange:w=>N(T=>({...T,category:w.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:x.isActive?"active":"inactive",onChange:w=>N(T=>({...T,isActive:w.target.value==="active"})),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Next Steps"}),e.jsx("textarea",{value:x.nextSteps,onChange:w=>N(T=>({...T,nextSteps:w.target.value})),rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Situations"}),x.situations.map((w,T)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:w,onChange:W=>O("situations",T,W.target.value),placeholder:"When to use this disposition..."}),e.jsx("button",{type:"button",onClick:()=>_("situations",T),className:"remove-button",children:"√ó"})]},T)),e.jsx("button",{type:"button",onClick:()=>A("situations"),className:"add-array-button",children:"+ Add Situation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tips & Best Practices"}),x.tips.map((w,T)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:w,onChange:W=>O("tips",T,W.target.value),placeholder:"Tip or best practice..."}),e.jsx("button",{type:"button",onClick:()=>_("tips",T),className:"remove-button",children:"√ó"})]},T)),e.jsx("button",{type:"button",onClick:()=>A("tips"),className:"add-array-button",children:"+ Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Examples"}),x.examples.map((w,T)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:w,onChange:W=>O("examples",T,W.target.value),placeholder:"Common example..."}),e.jsx("button",{type:"button",onClick:()=>_("examples",T),className:"remove-button",children:"√ó"})]},T)),e.jsx("button",{type:"button",onClick:()=>A("examples"),className:"add-array-button",children:"+ Add Example"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subcategories"}),x.subcategories.map((w,T)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:w,onChange:W=>O("subcategories",T,W.target.value),placeholder:"Subcategory name..."}),e.jsx("button",{type:"button",onClick:()=>_("subcategories",T),className:"remove-button",children:"√ó"})]},T)),e.jsx("button",{type:"button",onClick:()=>A("subcategories"),className:"add-array-button",children:"+ Add Subcategory"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"cancel-button",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"save-button",children:[d?"Update":"Create"," Disposition"]})]})]})]})})]})},Ga={"Appointment Management":"üìÖ",Scheduling:"‚è∞",Cancellation:"‚ùå",Confirmation:"‚úÖ","Follow-up":"üìû",Rescheduling:"üîÑ",Urgent:"‚ö†Ô∏è",General:"üí¨"},Jb=["appointments","scheduling","confirmation","cancellation","followup"],Xb=()=>{const[t,s]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(null),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[l,p]=h.useState(!1),[g,b]=h.useState(null),[y,f]=h.useState(""),[v,j]=h.useState("title"),[C,x]=h.useState(!1),[N,R]=h.useState("all"),[E,z]=h.useState({total:0,urgent:0,categories:{}}),[k,V]=h.useState({title:"",description:"",topic:"",category:"",icon:"",steps:[""],tips:[""],keywords:[""],isUrgent:!1});h.useEffect(()=>{$()},[]),h.useEffect(()=>{const S=t.filter(F=>F.isUrgent).length,M={};t.forEach(F=>{M[F.category]=(M[F.category]||0)+1}),z({total:t.length,urgent:S,categories:M})},[t]);const $=async()=>{try{n(!0);const S=await kh();s(S),r(null)}catch(S){r("Failed to load service topics. Please try again."),console.error("Error loading topics:",S)}finally{n(!1)}},A=async()=>{if(window.confirm("Are you sure you want to reset all service topics? This action cannot be undone."))try{n(!0),await Vb(),await $(),r("Service topics have been reset successfully!"),setTimeout(()=>r(null),3e3)}catch(S){r("Failed to reset service topics. Please try again."),console.error("Error resetting topics:",S)}finally{n(!1)}},_=()=>{V({title:"",description:"",topic:"",category:"",icon:"",steps:[""],tips:[""],keywords:[""],isUrgent:!1}),c(!0)},O=S=>{b(S),V({title:S.title,description:S.description,topic:S.topic,category:S.category,icon:S.icon,steps:S.steps||[""],tips:S.tips||[""],keywords:S.keywords||[""],isUrgent:S.isUrgent||!1}),u(!0)},Y=S=>{b(S),p(!0)},U=async S=>{S.preventDefault();try{o?await Fb(k):await Ub(g.id,k),await $(),c(!1),u(!1),r(null)}catch(M){r("Failed to save service topic. Please try again."),console.error("Error saving topic:",M)}},w=async()=>{try{await Bb(g.id),await $(),p(!1),r(null)}catch(S){r("Failed to delete service topic. Please try again."),console.error("Error deleting topic:",S)}},T=S=>{const{name:M,value:F,type:X,checked:oe}=S.target;V(ae=>({...ae,[M]:X==="checkbox"?oe:F}))},W=(S,M,F)=>{V(X=>({...X,[F]:X[F].map((oe,ae)=>ae===S?M:oe)}))},P=S=>{V(M=>({...M,[S]:[...M[S],""]}))},L=(S,M)=>{V(F=>({...F,[M]:F[M].filter((X,oe)=>oe!==S)}))},q=S=>{V(M=>({...M,icon:S})),x(!1)},m=t.filter(S=>{const M=S.title.toLowerCase().includes(y.toLowerCase())||S.description.toLowerCase().includes(y.toLowerCase())||S.category.toLowerCase().includes(y.toLowerCase()),F=N==="all"||S.category===N;return M&&F}).sort((S,M)=>{switch(v){case"title":return S.title.localeCompare(M.title);case"category":return S.category.localeCompare(M.category);case"urgent":return(M.isUrgent?1:0)-(S.isUrgent?1:0);default:return 0}}),D=[...new Set(t.map(S=>S.category).filter(Boolean))];return a?e.jsx("div",{className:"customer-service-management",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading customer service topics..."})]})}):e.jsxs("div",{className:"customer-service-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"Customer Service Management"}),e.jsx("p",{className:"header-subtitle",children:"Manage support topics, procedures, and customer service guidelines"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"reset-button",onClick:A,children:[e.jsx("span",{className:"button-icon",children:"üîÑ"}),"Reset Topics"]}),e.jsxs("button",{className:"add-button",onClick:_,children:[e.jsx("span",{className:"button-icon",children:"‚ûï"}),"Add New Topic"]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üìã"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Topics"}),e.jsx("div",{className:"stat-number",children:E.total})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üè∑Ô∏è"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Categories"}),e.jsx("div",{className:"stat-number",children:D.length})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üìà"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Active"}),e.jsx("div",{className:"stat-number",children:E.total-E.urgent})]})]})]}),i&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{children:i}),e.jsx("button",{onClick:()=>r(null),children:"√ó"})]}),e.jsx("div",{className:"management-controls",children:e.jsxs("div",{className:"search-filter",children:[e.jsx(mn,{value:y,onChange:S=>f(S.target.value),onClear:()=>f(""),placeholder:"Search topics..."}),e.jsxs("select",{className:"category-filter",value:N,onChange:S=>R(S.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),D.map(S=>e.jsx("option",{value:S,children:S},S))]}),e.jsxs("select",{className:"sort-select",value:v,onChange:S=>j(S.target.value),children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"category",children:"Sort by Category"})]})]})}),e.jsx("div",{className:"topics-grid",children:m.map(S=>e.jsxs("div",{className:`topic-card ${S.isUrgent?"urgent":""}`,children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"topic-icon",children:e.jsx("span",{className:"icon",children:S.icon||Ga[S.category]||"üí¨"})}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"edit-button",onClick:()=>O(S),title:"Edit topic",children:"‚úèÔ∏è"}),e.jsx("button",{className:"delete-button",onClick:()=>Y(S),title:"Delete topic",children:"üóëÔ∏è"})]})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{className:"topic-title",children:S.title}),e.jsx("p",{className:"topic-description",children:S.description}),e.jsx("div",{className:"topic-meta",children:e.jsxs("span",{className:"category-badge",children:[e.jsx("span",{className:"category-icon",children:Ga[S.category]||"üí¨"}),S.category]})}),e.jsxs("div",{className:"topic-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Steps"}),e.jsx("span",{className:"stat-value",children:S.steps?.length||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Tips"}),e.jsx("span",{className:"stat-value",children:S.tips?.length||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Keywords"}),e.jsx("span",{className:"stat-value",children:S.keywords?.length||0})]})]})]})]},S.id))}),m.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìã"}),e.jsx("h3",{children:"No topics found"}),e.jsx("p",{children:"Create your first customer service topic to get started!"}),e.jsxs("button",{className:"add-button",onClick:_,children:[e.jsx("span",{className:"button-icon",children:"‚ûï"}),"Add New Topic"]})]}),(o||d)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{c(!1),u(!1)},children:e.jsxs("div",{className:"topic-modal",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:o?"Add New Topic":"Edit Topic"}),e.jsx("button",{className:"close-modal",onClick:()=>{c(!1),u(!1)},children:"√ó"})]}),e.jsxs("form",{onSubmit:U,className:"topic-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:k.title,onChange:T,required:!0,placeholder:"Enter topic title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category *"}),e.jsxs("select",{name:"category",value:k.category,onChange:T,required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),Jb.map(S=>e.jsx("option",{value:S,children:S.charAt(0).toUpperCase()+S.slice(1)},S))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{name:"description",value:k.description,onChange:T,required:!0,rows:3,placeholder:"Describe the topic..."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Topic"}),e.jsx("input",{type:"text",name:"topic",value:k.topic,onChange:T,placeholder:"Enter topic keyword"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon"}),e.jsxs("div",{className:"icon-input-container",children:[e.jsx("input",{type:"text",className:"icon-input",value:k.icon,onChange:T,name:"icon",onClick:()=>x(!0),placeholder:"Click to select icon",readOnly:!0}),e.jsx("div",{className:"icon-preview",children:k.icon||Ga[k.category]||"üí¨"})]}),C&&e.jsx("div",{className:"icon-picker",children:e.jsx("div",{className:"icon-picker-grid",children:Object.values(Ga).map((S,M)=>e.jsx("button",{className:"icon-picker-item",onClick:()=>q(S),children:S},M))})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Steps"}),k.steps.map((S,M)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:S,onChange:F=>W(M,F.target.value,"steps"),placeholder:`Step ${M+1}`}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>L(M,"steps"),children:"√ó"})]},M)),e.jsx("button",{type:"button",className:"add-array-button",onClick:()=>P("steps"),children:"+ Add Step"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tips & Best Practices"}),k.tips.map((S,M)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:S,onChange:F=>W(M,F.target.value,"tips"),placeholder:`Tip ${M+1}`}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>L(M,"tips"),children:"√ó"})]},M)),e.jsx("button",{type:"button",className:"add-array-button",onClick:()=>P("tips"),children:"+ Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Keywords"}),k.keywords.map((S,M)=>e.jsxs("div",{className:"array-input",children:[e.jsx("input",{type:"text",value:S,onChange:F=>W(M,F.target.value,"keywords"),placeholder:`Keyword ${M+1}`}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>L(M,"keywords"),children:"√ó"})]},M)),e.jsx("button",{type:"button",className:"add-array-button",onClick:()=>P("keywords"),children:"+ Add Keyword"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{c(!1),u(!1)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"save-button",children:o?"Create Topic":"Save Changes"})]})]})]})}),l&&e.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:e.jsxs("div",{className:"delete-modal",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"delete-header",children:[e.jsx("div",{className:"warning-icon",children:"‚ö†Ô∏è"}),e.jsx("h2",{children:"Delete Topic"})]}),e.jsxs("div",{className:"delete-content",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',g?.title,'"']}),"?"]}),e.jsx("p",{className:"delete-warning",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"delete-actions",children:[e.jsx("button",{className:"cancel-button",onClick:()=>p(!1),children:"Cancel"}),e.jsx("button",{className:"delete-button",onClick:w,children:"Delete Topic"})]})]})})]})},Zb=()=>{const[t,s]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(null),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[l,p]=h.useState(null),[g,b]=h.useState(""),[y,f]=h.useState({question:"",answer:""});h.useEffect(()=>{v()},[]);const v=async()=>{try{n(!0),r(null);const E=await ia.getAllFAQs();s(E)}catch(E){console.error("Error loading FAQs:",E),r("Failed to load FAQs. Please try again.")}finally{n(!1)}},j=async E=>{E.preventDefault();try{if(!y.question.trim()||!y.answer.trim()){r("Please fill in both question and answer fields.");return}await ia.addFAQ(y),f({question:"",answer:""}),c(!1),r(null),v()}catch(z){console.error("Error adding FAQ:",z),r("Failed to add FAQ. Please try again.")}},C=async E=>{E.preventDefault();try{if(!l.question.trim()||!l.answer.trim()){r("Please fill in both question and answer fields.");return}await ia.updateFAQ(l.id,{question:l.question,answer:l.answer}),p(null),u(!1),r(null),v()}catch(z){console.error("Error updating FAQ:",z),r("Failed to update FAQ. Please try again.")}},x=async E=>{if(window.confirm("Are you sure you want to delete this FAQ?"))try{await ia.deleteFAQ(E),v(),r(null)}catch(z){console.error("Error deleting FAQ:",z),r("Failed to delete FAQ. Please try again.")}},N=E=>{p({...E}),u(!0)},R=t.filter(E=>E.question.toLowerCase().includes(g.toLowerCase())||E.answer.toLowerCase().includes(g.toLowerCase()));return a?e.jsxs("div",{className:"faq-management-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading FAQs..."})]}):e.jsxs("div",{className:"faq-management",children:[e.jsxs("div",{className:"faq-management-header",children:[e.jsx("h2",{children:"FAQ Management"}),e.jsx("div",{className:"faq-actions",children:e.jsxs("button",{className:"add-faq-button",onClick:()=>c(!0),children:[e.jsx("span",{children:"‚ûï"})," Add New FAQ"]})})]}),i&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"‚ö†Ô∏è"}),i]}),e.jsxs("div",{className:"faq-search-section",children:[e.jsx(mn,{value:g,onChange:E=>b(E.target.value),onClear:()=>b(""),placeholder:"Search FAQs..."}),e.jsx("div",{className:"search-results",children:g&&e.jsxs("span",{className:"results-count",children:[R.length," result",R.length!==1?"s":""," found"]})})]}),e.jsx("div",{className:"faq-list",children:R.length===0?e.jsx("div",{className:"no-faqs",children:e.jsxs("div",{className:"no-faqs-content",children:[e.jsx("span",{className:"no-faqs-icon",children:"‚ùì"}),e.jsx("h3",{children:"No FAQs found"}),e.jsx("p",{children:g?"No FAQs match your search criteria.":'No FAQs have been added yet. Click "Add New FAQ" to get started.'})]})}):R.map(E=>e.jsxs("div",{className:"faq-item-admin",children:[e.jsxs("div",{className:"faq-content",children:[e.jsx("div",{className:"faq-question-admin",children:e.jsx("h3",{children:E.question})}),e.jsx("div",{className:"faq-answer-admin",children:e.jsx("p",{children:E.answer})}),e.jsxs("div",{className:"faq-meta",children:[e.jsxs("span",{className:"faq-date",children:["Created: ",E.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"]}),E.updatedAt&&E.updatedAt!==E.createdAt&&e.jsxs("span",{className:"faq-updated",children:["Updated: ",E.updatedAt?.toDate?.()?.toLocaleDateString()||"Unknown"]})]})]}),e.jsxs("div",{className:"faq-actions-admin",children:[e.jsx("button",{className:"edit-faq-button",onClick:()=>N(E),title:"Edit FAQ",children:"‚úèÔ∏è"}),e.jsx("button",{className:"delete-faq-button",onClick:()=>x(E.id),title:"Delete FAQ",children:"üóëÔ∏è"})]})]},E.id))}),o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("button",{className:"modal-close",onClick:()=>{c(!1),f({question:"",answer:""}),r(null)},"aria-label":"Close",children:"√ó"}),e.jsx("h2",{children:"Add New FAQ"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Question"}),e.jsx("input",{type:"text",value:y.question,onChange:E=>f({...y,question:E.target.value}),placeholder:"Enter the question...",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Answer"}),e.jsx("textarea",{value:y.answer,onChange:E=>f({...y,answer:E.target.value}),rows:6,placeholder:"Enter the answer...",required:!0}),e.jsxs("div",{className:"char-count",children:[y.answer.length," characters"]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Add FAQ"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{c(!1),f({question:"",answer:""}),r(null)},children:"Cancel"})]})]})]})}),d&&l&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Edit FAQ"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Question"}),e.jsx("input",{type:"text",value:l.question,onChange:E=>p({...l,question:E.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"required",children:"Answer"}),e.jsx("textarea",{value:l.answer,onChange:E=>p({...l,answer:E.target.value}),rows:6,required:!0}),e.jsxs("div",{className:"char-count",children:[l.answer.length," characters"]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",children:"Update FAQ"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{u(!1),p(null),r(null)},children:"Cancel"})]})]})]})})]})};wr().catch(t=>{console.error("Failed to initialize Firebase:",t)});const ps={async restoreAuthSession(){try{const t=localStorage.getItem("adminUser");if(!t)throw new Error("No stored admin user found");const s=JSON.parse(t);return console.log("üîç userService: Attempting to restore auth session for:",s.email),s}catch(t){throw console.error("üîç userService: Error restoring auth session:",t),t}},async createUser(t,s,a="user"){try{if(console.log("createUser called with:",{email:t,role:a}),!we.currentUser)throw console.log("No current user in auth"),new Error("You must be logged in to create users");console.log("Current user exists:",we.currentUser.email);const n=we.currentUser.email,i=s;console.log("Creating user in Firebase Auth...");const o=(await Qc(we,t,s)).user;console.log("User created in Firebase Auth:",o.uid),console.log("Creating user document in Firestore...");const c={uid:o.uid,email:o.email,role:a,createdAt:new Date().toISOString(),createdBy:we.currentUser.uid,lastSignIn:null,isActive:!0,emailVerified:o.emailVerified||!1,displayName:o.displayName||"",updatedAt:new Date().toISOString()};return console.log("User data to be saved:",c),await wt(ie(J(),"users",o.uid),c),console.log("User document created in Firestore"),console.log("Signing out newly created user..."),await Co(we),console.log("Signing back in as admin..."),await en(we,n,i),console.log("Successfully signed back in as admin"),o}catch(n){throw console.error("Error creating user:",n),console.error("Error details:",{code:n.code,message:n.message,stack:n.stack}),n.code==="auth/email-already-in-use"?new Error("This email is already registered"):n.code==="auth/invalid-email"?new Error("Invalid email address"):n.code==="auth/weak-password"?new Error("Password should be at least 6 characters"):n}},async syncUsers(){try{if(!we.currentUser)throw new Error("You must be logged in to sync users");const t=await ue(ne(J(),"users")),s=new Set(t.docs.map(n=>n.data().uid)),a=await ue(ne(J(),"users"));for(const n of a.docs){const i=n.data();s.has(i.uid)||await wt(n(J(),"users",i.uid),{uid:i.uid,email:i.email,role:"user",createdAt:new Date().toISOString(),lastSignIn:null,isActive:!0,emailVerified:!1})}return!0}catch(t){throw console.error("Error syncing users:",t),t}},async getAllUsers(){try{if(console.log("getAllUsers called, checking current user..."),!we.currentUser)throw console.log("No current user in auth"),new Error("You must be logged in to view users");console.log("Current user exists:",we.currentUser.email),console.log("Fetching users from Firestore...");const t=ne(J(),"users");console.log("Created users collection reference");const s=await ue(t);console.log("Firestore query completed, snapshot size:",s.size);const a=s.docs.map(n=>{const i=n.data();return console.log("Processing user document:",{id:n.id,...i}),{id:n.id,...i,role:i.role||"user",isActive:i.isActive!==void 0?i.isActive:!0,emailVerified:i.emailVerified||!1,lastSignIn:i.lastSignIn||null,createdAt:i.createdAt||new Date().toISOString()}});if(console.log("Processed users:",a),a.length===0){console.log("No users found in Firestore, attempting to sync..."),await this.syncUsers();const i=(await ue(t)).docs.map(r=>({id:r.id,...r.data(),role:r.data().role||"user",isActive:r.data().isActive!==void 0?r.data().isActive:!0,emailVerified:r.data().emailVerified||!1,lastSignIn:r.data().lastSignIn||null,createdAt:r.data().createdAt||new Date().toISOString()}));return console.log("Users after sync:",i),i}return a}catch(t){throw console.error("Error in getAllUsers:",t),console.error("Error details:",{code:t.code,message:t.message,stack:t.stack}),t.code==="permission-denied"?new Error("You do not have permission to view users"):t.code==="unauthenticated"?new Error("You must be logged in to view users"):t}},async updateUserLastSignIn(t){try{const s=ie(J(),"users",t);await _e(s,{lastSignIn:new Date().toISOString()})}catch(s){console.error("Error updating last sign-in:",s)}},async updateUserRole(t,s){try{if(console.log("üîç userService: updateUserRole called with:",{userId:t,newRole:s}),console.log("üîç userService: auth.currentUser:",we.currentUser),!we.currentUser){console.log("üîç userService: No Firebase Auth user, attempting to restore session...");try{const i=await this.restoreAuthSession();throw console.log("üîç userService: Restored stored user:",i.email),new Error("Firebase Auth session required. Please log in again.")}catch(i){throw console.log("üîç userService: Could not restore session:",i.message),new Error("You must be logged in to update user roles")}}console.log("üîç userService: Current user authenticated, updating role...");const n=ie(J(),"users",t);await _e(n,{role:s,updatedAt:new Date().toISOString(),updatedBy:we.currentUser.uid}),console.log("üîç userService: Role updated successfully")}catch(a){throw console.error("üîç userService: Error updating user role:",a),console.error("üîç userService: Error details:",{code:a.code,message:a.message,stack:a.stack}),a.code==="permission-denied"?new Error("You do not have permission to update user roles"):a.code==="not-found"?new Error("User not found"):a.code==="unavailable"?new Error("Service temporarily unavailable. Please try again."):a}},async deleteUser(t){try{if(console.log("üîç userService: deleteUser called with:",{userId:t}),console.log("üîç userService: auth.currentUser:",we.currentUser),!we.currentUser){console.log("üîç userService: No Firebase Auth user, attempting to restore session...");try{const o=await this.restoreAuthSession();throw console.log("üîç userService: Restored stored user:",o.email),new Error("Firebase Auth session required. Please log in again.")}catch(o){throw console.log("üîç userService: Could not restore session:",o.message),new Error("You must be logged in to delete users")}}const a=ie(J(),"users",t),n=await Te(a);if(!n.exists()){console.warn("üîç userService: Target user not found in Firestore:",t);const o=new Error("User not found");throw o.code="not-found",o}const i=n.data(),r=i&&i.role?i.role:"user";if(console.log("üîç userService: Target user role:",r),r==="admin"){console.log("üîç userService: Target is admin; checking caller role");let o=null;try{const c=ie(J(),"users",we.currentUser.uid),d=await Te(c);d.exists()&&(o=d.data().role,console.log("üîç userService: Caller role from Firestore:",o))}catch(c){console.warn("üîç userService: Could not fetch caller role from Firestore, falling back to localStorage:",c)}if(!o)try{const c=localStorage.getItem("adminUser");c&&(o=JSON.parse(c).role,console.log("üîç userService: Caller role from localStorage:",o))}catch(c){console.warn("üîç userService: Failed to parse local adminUser from localStorage:",c)}if(o!=="super-admin"){console.warn("üîç userService: Caller is not authorized to delete admin users");const c=new Error("permission-denied: cannot delete admin users");throw c.code="permission-denied",c}}console.log("üîç userService: Current user authenticated and authorized, deleting user..."),await ot(ie(J(),"users",t)),console.log("üîç userService: User deleted from Firestore successfully"),console.log("User deleted from Firestore. Note: User may still exist in Firebase Auth.")}catch(s){throw console.error("üîç userService: Error deleting user:",s),console.error("üîç userService: Error details:",{code:s.code,message:s.message,stack:s.stack}),s.code==="permission-denied"?new Error("You do not have permission to delete users"):s.code==="not-found"?new Error("User not found"):s}},async loginUser(t,s){try{const a=J(),n=je(ne(a,"company-registration-requests"),Ke("email","==",t.toLowerCase().trim())),i=await ue(n);if(!i.empty){const p=i.docs[0].data().status;if(p==="pending")throw new Error("REGISTRATION_PENDING: Your account is still being reviewed. Please wait to be contacted, or contact us at contact@mellowsites.com for assistance.");if(p==="rejected")throw new Error("REGISTRATION_REJECTED: Your registration request has been rejected. Please contact contact@mellowsites.com for more information.")}const o=(await en(we,t,s)).user,c=ie(J(),"users",o.uid),d=await Te(c);let u=!1;if(d.exists())u=d.data().needsDisplayName===!0,await _e(c,{lastSignIn:new Date().toISOString(),emailVerified:o.emailVerified,updatedAt:new Date().toISOString()});else{const l={uid:o.uid,email:o.email,role:"user",createdAt:new Date().toISOString(),lastSignIn:new Date().toISOString(),isActive:!0,emailVerified:o.emailVerified,displayName:o.displayName||"",updatedAt:new Date().toISOString(),needsDisplayName:!1};await wt(c,l),u=!1}return{user:o,needsDisplayName:u}}catch(a){throw console.error("Error logging in:",a),a}},async logoutUser(){try{await Co(we)}catch(t){throw console.error("Error logging out:",t),t}},getCurrentUser(){return we.currentUser},async isCurrentUserAdmin(){try{if(!we.currentUser)return!1;const t=await ue(je(ne(J(),"users"),Ke("uid","==",we.currentUser.uid)));return t.empty?!1:t.docs[0].data().role==="admin"}catch(t){return console.error("Error checking admin status:",t),!1}},async updateDisplayName(t,s){try{if(!we.currentUser)throw new Error("You must be logged in to update display name");const a=ie(J(),"users",t);await _e(a,{displayName:s,needsDisplayName:!1,updatedAt:new Date().toISOString()}),await Oh(we.currentUser,{displayName:s})}catch(a){throw console.error("Error updating display name:",a),a}}},ew=()=>{const{currentUser:t,getUserType:s}=Rt(),[a,n]=h.useState([]),[i,r]=h.useState(!0),[o,c]=h.useState(null),[d,u]=h.useState(!1),[l,p]=h.useState(""),[g,b]=h.useState("all"),[y,f]=h.useState("all"),[v,j]=h.useState({email:"",password:"",confirmPassword:"",role:"user"}),[C,x]=h.useState("");h.useEffect(()=>{console.log("UserManagement mounted, currentUser:",t),t?(console.log("Current user exists, fetching users..."),N()):(console.log("No current user found"),c("You must be logged in to view users"),r(!1))},[t]);const N=async()=>{try{if(console.log("Starting fetchUsers..."),r(!0),c(null),!t){console.log("No current user in fetchUsers"),c("You must be logged in to view users"),r(!1);return}console.log("Calling userService.getAllUsers()...");const O=await ps.getAllUsers();console.log("Fetched users:",O);const Y=J();let U=new Set;try{const T=ne(Y,"super-admins"),W=await ue(T);U=new Set(W.docs.map(P=>P.id))}catch(T){console.warn("Could not fetch super-admins (may not have permission):",T),U=new Set}const w=O.filter(T=>{const W=T.uid||T.id;return!U.has(W)});console.log(`Filtered out ${O.length-w.length} super admins`),console.log(`Remaining users: ${w.length}`),!w||w.length===0?(console.log("No users found in response"),c("No users found. Try creating a new user.")):(console.log(`Found ${w.length} users`),n(w))}catch(O){console.error("Error in fetchUsers:",O),console.error("Error details:",{code:O.code,message:O.message,stack:O.stack}),O.message.includes("must be logged in")?c("You must be logged in to view users"):O.message.includes("permission-denied")?c("You do not have permission to view users. Please contact your administrator."):c(`Failed to fetch users: ${O.message}`)}finally{r(!1)}},R=async O=>{if(O.preventDefault(),x(""),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.email)){x("Please enter a valid email address");return}if(v.password!==v.confirmPassword){x("Passwords do not match");return}if(v.password.length<6){x("Password must be at least 6 characters long");return}try{r(!0),await ps.createUser(v.email,v.password,v.role),u(!1),j({email:"",password:"",confirmPassword:"",role:"user"}),await N(),alert("User created successfully! They can now log in with their email and password.")}catch(U){console.error("Error adding user:",U),U.message.includes("must be logged in")?x("You must be logged in to create users"):U.message.includes("already registered")?x("This email is already registered"):U.message.includes("Invalid email")?x("Please enter a valid email address"):U.message.includes("Password should be")?x("Password must be at least 6 characters long"):U.message.includes("permission-denied")?x("You do not have permission to create users"):x(U.message||"Failed to create user")}finally{r(!1)}},E=async O=>{if(window.confirm("Are you sure you want to delete this user?"))try{console.log("üîç UserManagement: Attempting to delete user:",O),console.log("üîç UserManagement: Current user:",we.currentUser),console.log("üîç UserManagement: Stored admin user:",localStorage.getItem("adminUser")),await ps.deleteUser(O),console.log("üîç UserManagement: User deleted successfully"),N()}catch(Y){console.error("üîç UserManagement: Error deleting user:",Y),console.error("üîç UserManagement: Error details:",{code:Y.code,message:Y.message,stack:Y.stack}),Y.message.includes("must be logged in")?alert("You must be logged in to delete users"):Y.message.includes("Firebase Auth session required")?alert("Your session has expired. Please log in again to continue."):Y.message.includes("permission-denied")?alert("You do not have permission to delete users"):Y.message.includes("not found")?alert("User not found. They may have already been deleted."):alert(`Failed to delete user: ${Y.message}`)}},z=async(O,Y)=>{try{console.log("üîç UserManagement: Attempting to update user role:",{userId:O,newRole:Y}),console.log("üîç UserManagement: Current user:",we.currentUser),console.log("üîç UserManagement: Stored admin user:",localStorage.getItem("adminUser")),await ps.updateUserRole(O,Y),console.log("üîç UserManagement: User role updated successfully"),N()}catch(U){console.error("üîç UserManagement: Error updating user role:",U),console.error("üîç UserManagement: Error details:",{code:U.code,message:U.message,stack:U.stack}),U.message.includes("must be logged in")?alert("You must be logged in to update user roles"):U.message.includes("Firebase Auth session required")?alert("Your session has expired. Please log in again to continue."):U.message.includes("permission-denied")?alert("You do not have permission to update user roles"):U.message.includes("not found")?alert("User not found. They may have been deleted."):U.message.includes("unavailable")?alert("Service temporarily unavailable. Please try again."):alert(`Failed to update user role: ${U.message}`)}},k=O=>O?new Date(O).toLocaleString():"Never",V=O=>O.isActive!==!1?e.jsx("span",{className:"status-badge active",children:"Active"}):e.jsx("span",{className:"status-badge inactive",children:"Inactive"}),$=O=>e.jsx("span",{className:`role-badge ${O.toLowerCase()}`,children:O.charAt(0).toUpperCase()+O.slice(1)}),_=a.filter(O=>{const Y=O.email.toLowerCase().includes(l.toLowerCase()),U=g==="all"||O.role===g,w=y==="all"||y==="active"&&O.isActive||y==="inactive"&&!O.isActive;return Y&&U&&w});return i?e.jsxs("div",{className:"user-management-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading users..."})]}):o?e.jsx("div",{className:"user-management",children:e.jsxs("div",{className:"error-message",children:[e.jsx("div",{className:"error-icon",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"error-content",children:[e.jsx("h3",{children:"Error Loading Users"}),e.jsx("p",{children:o}),e.jsxs("button",{onClick:N,className:"retry-button",children:[e.jsx("span",{children:"üîÑ"})," Retry"]})]})]})}):e.jsxs("div",{className:"user-management",children:[e.jsxs("div",{className:"user-management-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h2",{children:"üë• User Management"}),e.jsx("p",{className:"header-subtitle",children:"Manage user accounts and permissions"})]}),e.jsx("div",{className:"header-right",children:e.jsxs("button",{className:"add-button",onClick:()=>u(!0),children:[e.jsx("span",{children:"‚ûï"})," Add New User"]})})]}),e.jsxs("div",{className:"filters-section",children:[e.jsx(mn,{value:l,onChange:O=>p(O.target.value),onClear:()=>p(""),placeholder:"Search users by email..."}),e.jsxs("div",{className:"filter-controls",children:[e.jsxs("select",{value:g,onChange:O=>b(O.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"user",children:"User"})]}),e.jsxs("select",{value:y,onChange:O=>f(O.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"users-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:a.length}),e.jsx("span",{className:"stat-label",children:"Total Users"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:a.filter(O=>O.role==="admin").length}),e.jsx("span",{className:"stat-label",children:"Admins"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:a.filter(O=>O.isActive!==!1).length}),e.jsx("span",{className:"stat-label",children:"Active Users"})]})]}),e.jsx("div",{className:"users-list",children:_.length===0?e.jsx("div",{className:"no-users",children:e.jsxs("div",{className:"no-users-content",children:[e.jsx("div",{className:"no-users-icon",children:"üë§"}),e.jsx("h3",{children:"No Users Found"}),e.jsx("p",{children:l||g!=="all"||y!=="all"?"Try adjusting your search or filters.":"Get started by creating your first user account."}),!l&&g==="all"&&y==="all"&&e.jsxs("button",{className:"add-button",onClick:()=>u(!0),children:[e.jsx("span",{children:"‚ûï"})," Create First User"]})]})}):e.jsx("div",{className:"users-grid",children:_.map(O=>e.jsxs("div",{className:"user-card redesigned",children:[e.jsxs("div",{className:"user-card-main",children:[e.jsx("div",{className:"user-avatar big",children:O.email.charAt(0).toUpperCase()}),e.jsxs("div",{className:"user-main-info",children:[e.jsx("div",{className:"user-email redesigned",children:O.email}),e.jsxs("div",{className:"user-badges redesigned",children:[V(O),$(O.role||"user")]})]}),e.jsxs("div",{className:"user-actions redesigned",children:[e.jsxs("button",{className:"action-button edit",onClick:()=>z(O.id||O.uid,O.role==="admin"?"user":"admin"),title:O.role==="admin"?"Remove Admin":"Make Admin",children:[O.role==="admin"?e.jsx("span",{role:"img","aria-label":"Remove Admin",children:"üëë"}):e.jsx("span",{role:"img","aria-label":"Make Admin",children:"üë§"}),O.role==="admin"?"Remove Admin":"Make Admin"]}),O.email!=="longhome@"&&(()=>{const Y=s?s():null,U=Y?Y.role:null;return!(O.role==="admin")||U==="super-admin"?e.jsxs("button",{className:"action-button delete",onClick:()=>E(O.id||O.uid),title:"Delete User",children:[e.jsx("span",{role:"img","aria-label":"Delete",children:"üóëÔ∏è"})," Delete"]}):e.jsxs("button",{className:"action-button delete disabled",disabled:!0,title:"Cannot delete admin users","aria-disabled":"true",children:[e.jsx("span",{role:"img","aria-label":"Delete",children:"üóëÔ∏è"})," Delete"]})})()]})]}),e.jsx("div",{className:"user-card-divider"}),e.jsxs("div",{className:"user-card-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Created",children:"üìÖ"}),e.jsx("span",{className:"meta-label",children:"Created:"}),e.jsx("span",{className:"meta-value",children:k(O.createdAt)})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-icon",role:"img","aria-label":"Last Sign In",children:"üïí"}),e.jsx("span",{className:"meta-label",children:"Last Sign In:"}),e.jsx("span",{className:"meta-value",children:k(O.lastSignIn)})]})]})]},O.id||O.uid))})}),d&&e.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:e.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"‚ûï Add New User"}),e.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:"‚úï"})]}),C&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",C]}),e.jsxs("form",{onSubmit:R,className:"add-user-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"üìß Email Address"}),e.jsx("input",{type:"email",id:"email",value:v.email,onChange:O=>j({...v,email:O.target.value}),placeholder:"Enter user's email address",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"üîí Password"}),e.jsx("input",{type:"password",id:"password",value:v.password,onChange:O=>j({...v,password:O.target.value}),placeholder:"Enter password",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"üîí Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:v.confirmPassword,onChange:O=>j({...v,confirmPassword:O.target.value}),placeholder:"Confirm password",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"role",children:"üë§ Role"}),e.jsxs("select",{id:"role",value:v.role,onChange:O=>j({...v,role:O.target.value}),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"create-button",disabled:i,children:i?"üîÑ Creating...":"‚úÖ Create User"})]})]})]})})]})},tw=t=>{try{if(!t||(t&&typeof t=="object"&&t.toDate&&(t=t.toDate()),t instanceof Date||(t=new Date(t)),isNaN(t.getTime())))return"Unknown";const a=Math.floor((new Date-t)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:t.toLocaleDateString()}catch(s){return console.error("Error formatting time ago:",s),"Unknown"}},Xe=t=>{if(t==null)return"";if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return String(t);if(t&&typeof t=="object"&&typeof t.toDate=="function")try{return t.toDate().toLocaleString()}catch{return"Unknown"}if(Array.isArray(t))return t.map(s=>Xe(s)).join(", ");if(typeof t=="object"){const s=t.text||t.pt1||t.pt2||t.title||t.name||t.value;if(s)return Xe(s);try{return JSON.stringify(t)}catch{return"[object]"}}try{return String(t)}catch{return""}},sw=({onGoTab:t,companyId:s})=>{const[a,n]=h.useState({totalRebuttals:0,totalCategories:0,totalDispositions:0,totalUsers:0,recentActivity:[],topCategories:[],systemHealth:"Good"}),[i,r]=h.useState(!0),[o,c]=h.useState(!1);h.useEffect(()=>{d()},[s]);const d=async()=>{try{let u=function(k){const V=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#ec4899"];let $=0;for(let A=0;A<k.length;A++)$=k.charCodeAt(A)+(($<<5)-$);return V[Math.abs($)%V.length]};r(!0);const l=kt();console.log("üîç DashboardView: Fetching dashboard data..."),console.log("üîç DashboardView: CompanyId:",s);const p=await ue(ne(l,"rebuttals")),g=await ue(ne(l,"categories")),b=await ue(ne(l,"dispositions")),y=await ue(ne(l,"users"));console.log("üîç DashboardView: Raw data counts:",{rebuttals:p.docs.length,categories:g.docs.length,dispositions:b.docs.length,users:y.docs.length});const f=p.docs,v=g.docs,j=s?b.docs.filter(k=>{const V=k.data();return V.companyId===s||!V.companyId}):b.docs,C=s?y.docs.filter(k=>{const V=k.data();return V.companyId===s||!V.companyId}):y.docs;console.log("üîç DashboardView: Filtered data counts:",{rebuttals:f.length,categories:v.length,dispositions:j.length,users:C.length}),f.length>0&&console.log("üîç Sample rebuttal:",{id:f[0].id,data:f[0].data()}),v.length>0&&console.log("üîç Sample category:",{id:v[0].id,data:v[0].data()});const x={},N={};v.forEach(k=>{const V=k.data();N[k.id]={id:k.id,name:V.name||"Unnamed Category",description:V.description||"",color:V.color||u(k.id)}});const R=f.sort((k,V)=>{const $=k.data().createdAt?.toDate?.()||new Date(k.data().createdAt||0);return(V.data().createdAt?.toDate?.()||new Date(V.data().createdAt||0))-$}).slice(0,8).map(k=>{const V=k.data(),$=V.category,A=Object.values(N).find(_=>_.name===$)||{name:$||"Uncategorized",color:"#6b7280"};return{id:k.id,type:"rebuttal",summary:Xe(V.summary||V.title||V.heading),objection:Xe(V.objection),response:Xe(V.response||V.body||V.text),category:Xe(V.category||""),categoryName:Xe(A.name||"Uncategorized"),categoryColor:Xe(A.color||"#6b7280"),timeAgo:tw(V.createdAt?.toDate?.()||new Date(V.createdAt||0)),status:Xe(V.status||"active"),priority:Xe(V.priority||"normal"),createdAt:V.createdAt}});f.forEach(k=>{const $=k.data().category;$&&(x[$]=(x[$]||0)+1)});const E=Object.entries(x).map(([k,V])=>{const $=Object.values(N).find(A=>A.name===k)||{id:k,name:k,description:"",color:"#6b7280"};return{id:$.id,name:$.name,description:$.description,color:$.color,count:V}}).sort((k,V)=>V.count-k.count).slice(0,5),z={totalRebuttals:Number(f.length||0),totalCategories:Number(v.length||0),totalDispositions:Number(j.length||0),totalUsers:Number(C.length||0),recentActivity:Array.isArray(R)?R:[],topCategories:Array.isArray(E)?E:[],systemHealth:"Good"};console.log("üîç DashboardView: Final stats:",z),console.log("üîç DashboardView: Top categories:",E),console.log("üîç DashboardView: Recent activity count:",R.length),n(z)}catch(u){console.error("Error fetching dashboard data:",u),n(l=>({...l,systemHealth:"Error"}))}finally{r(!1)}};return i?e.jsxs("div",{className:"dashboard-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading dashboard data..."})]}):e.jsxs("div",{className:"dashboard-view",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Dashboard Overview"}),e.jsx("p",{children:"Welcome to your admin dashboard. Here's what's happening with your system."})]}),e.jsx("div",{className:"header-actions",children:e.jsxs("button",{className:"refresh-btn",onClick:d,children:[e.jsx("span",{children:"üîÑ"}),"Refresh"]})})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üìö"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Total Rebuttals"}),e.jsx("div",{className:"stat-number",children:a.totalRebuttals}),e.jsx("div",{className:"stat-label",children:"Active responses"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üè∑Ô∏è"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Categories"}),e.jsx("div",{className:"stat-number",children:a.totalCategories}),e.jsx("div",{className:"stat-label",children:"Organized groups"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üìã"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Dispositions"}),e.jsx("div",{className:"stat-number",children:a.totalDispositions}),e.jsx("div",{className:"stat-label",children:"Lead outcomes"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üë•"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"Users"}),e.jsx("div",{className:"stat-number",children:a.totalUsers}),e.jsx("div",{className:"stat-label",children:"Registered users"})]})]})]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"recent-activity-modern",children:[e.jsxs("div",{className:"activity-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"üìà Recent Activity"}),e.jsx("p",{children:"Latest rebuttals and system updates"})]}),e.jsx("div",{className:"activity-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:a.recentActivity.length}),e.jsx("span",{className:"stat-label",children:"Recent"})]})})]}),e.jsxs("div",{className:"activity-timeline",children:[a.recentActivity.length>0?(o?a.recentActivity:a.recentActivity.slice(0,3)).map((u,l)=>e.jsxs("div",{className:"activity-card",style:{"--category-color":u.categoryColor},children:[e.jsxs("div",{className:"activity-indicator",children:[e.jsx("div",{className:"indicator-dot"}),l<a.recentActivity.length-1&&e.jsx("div",{className:"indicator-line"})]}),e.jsxs("div",{className:"activity-content",children:[e.jsxs("div",{className:"activity-header-card",children:[e.jsxs("div",{className:"activity-type",children:[e.jsx("div",{className:"type-icon",children:"üìù"}),e.jsx("span",{className:"type-label",children:"Rebuttal"})]}),e.jsx("div",{className:"activity-time",children:u.timeAgo})]}),e.jsx("div",{className:"activity-title",children:Xe(u.summary||u.objection||"Untitled Rebuttal")}),e.jsxs("div",{className:"activity-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Category"}),e.jsx("span",{className:"meta-value category-badge",style:{backgroundColor:u.categoryColor},children:Xe(u.categoryName)})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Status"}),e.jsx("span",{className:`meta-value status-badge ${Xe(u.status)}`,children:Xe(u.status)})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Priority"}),e.jsx("span",{className:`meta-value priority-badge ${Xe(u.priority)}`,children:Xe(u.priority)})]})]}),u.response&&e.jsxs("div",{className:"activity-preview",children:[e.jsx("span",{className:"preview-label",children:"Preview:"}),e.jsx("span",{className:"preview-text",children:Xe(u.response).length>100?`${Xe(u.response).substring(0,100)}...`:Xe(u.response)})]})]})]},u.id)):e.jsxs("div",{className:"empty-activity",children:[e.jsx("div",{className:"empty-icon",children:"üìù"}),e.jsx("h3",{children:"No Recent Activity"}),e.jsx("p",{children:"New rebuttals and updates will appear here"}),e.jsxs("button",{className:"create-rebuttal-btn",onClick:()=>t&&t("rebuttals"),children:[e.jsx("span",{children:"‚ûï"}),"Create First Rebuttal"]})]}),a.recentActivity.length>3&&e.jsx("div",{className:"activity-toggle",children:e.jsx("button",{className:"create-rebuttal-btn",onClick:()=>c(!o),children:o?"Show less":`Show more (${a.recentActivity.length-3})`})})]})]}),e.jsxs("div",{className:"system-status-modern",children:[e.jsxs("div",{className:"status-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"‚ö° System Status"}),e.jsx("p",{children:"Real-time monitoring and health metrics"})]}),e.jsxs("div",{className:"status-indicator-modern",children:[e.jsx("div",{className:"status-pulse"}),e.jsx("span",{className:"status-text-modern",children:"All Systems Operational"})]})]}),e.jsxs("div",{className:"status-grid",children:[e.jsxs("div",{className:"status-card database",children:[e.jsxs("div",{className:"status-card-header",children:[e.jsx("div",{className:"status-icon",children:"üóÑÔ∏è"}),e.jsxs("div",{className:"status-info",children:[e.jsx("h3",{children:"Database"}),e.jsx("span",{className:"status-badge success",children:"Connected"})]})]}),e.jsxs("div",{className:"status-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Response Time"}),e.jsx("span",{className:"metric-value",children:"12ms"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Uptime"}),e.jsx("span",{className:"metric-value",children:"99.9%"})]})]}),e.jsxs("div",{className:"status-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"95%"}})}),e.jsx("span",{className:"progress-text",children:"95% Performance"})]})]}),e.jsxs("div",{className:"status-card authentication",children:[e.jsxs("div",{className:"status-card-header",children:[e.jsx("div",{className:"status-icon",children:"üîê"}),e.jsxs("div",{className:"status-info",children:[e.jsx("h3",{children:"Authentication"}),e.jsx("span",{className:"status-badge success",children:"Active"})]})]}),e.jsxs("div",{className:"status-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Active Users"}),e.jsx("span",{className:"metric-value",children:"24"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Last Login"}),e.jsx("span",{className:"metric-value",children:"2 min ago"})]})]}),e.jsxs("div",{className:"status-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"100%"}})}),e.jsx("span",{className:"progress-text",children:"100% Secure"})]})]}),e.jsxs("div",{className:"status-card storage",children:[e.jsxs("div",{className:"status-card-header",children:[e.jsx("div",{className:"status-icon",children:"üíæ"}),e.jsxs("div",{className:"status-info",children:[e.jsx("h3",{children:"Storage"}),e.jsx("span",{className:"status-badge warning",children:"75% Used"})]})]}),e.jsxs("div",{className:"status-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Used Space"}),e.jsx("span",{className:"metric-value",children:"7.5 GB"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("span",{className:"metric-label",children:"Available"}),e.jsx("span",{className:"metric-value",children:"2.5 GB"})]})]}),e.jsxs("div",{className:"status-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill warning",style:{width:"75%"}})}),e.jsx("span",{className:"progress-text",children:"75% Capacity"})]})]})]})]}),e.jsxs("div",{className:"top-categories-modern",style:{background:"linear-gradient(180deg, rgba(59,130,246,0.1) 0%, rgba(0,0,0,0.05) 60%)",borderRadius:16,padding:20,boxShadow:"0 10px 30px rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:44,height:44,borderRadius:12,background:"linear-gradient(135deg, #3b82f6, #06b6d4)",display:"grid",placeItems:"center",color:"white",fontSize:22,boxShadow:"0 8px 20px rgba(59,130,246,0.35)"},children:"üèÜ"}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:20,color:"#ffffff"},children:"Top Categories"}),e.jsx("p",{style:{margin:0,color:"#a1a1aa"},children:"Most used categories across your rebuttals"})]})]}),e.jsx("div",{children:e.jsx("button",{className:"create-rebuttal-btn",onClick:()=>t&&t("categories"),children:"Manage"})})]}),Array.isArray(a.topCategories)&&a.topCategories.length>0?e.jsx("div",{className:"top-categories-list",style:{display:"grid",gap:12},children:(()=>{const u=Math.max(...a.topCategories.map(l=>l.count||0),1);return a.topCategories.map((l,p)=>{const g=Math.round((l.count||0)/u*100),b=p===0?"ü•á":p===1?"ü•à":p===2?"ü•â":`${p+1}`;return e.jsxs("div",{className:"top-category-card",onClick:()=>t&&t("categories"),style:{border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:14,background:"rgba(255,255,255,0.05)",boxShadow:"0 4px 14px rgba(0,0,0,0.1)",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"rgba(255,255,255,0.1)",display:"grid",placeItems:"center",fontSize:18},children:b}),e.jsx("div",{style:{width:10,height:10,borderRadius:9999,backgroundColor:l.color||"#6b7280"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{fontWeight:600,color:"#ffffff"},children:l.name}),e.jsxs("span",{style:{background:"rgba(255,255,255,0.1)",color:"#ffffff",borderRadius:9999,padding:"2px 8px",fontSize:12},children:[l.count," uses"]})]}),l.description?e.jsx("div",{style:{color:"#a1a1aa",fontSize:13,marginTop:2},children:l.description}):null]}),e.jsxs("div",{style:{fontWeight:700,color:"#ffffff"},children:[g,"%"]})]}),e.jsx("div",{style:{width:"100%",height:10,borderRadius:9999,background:"rgba(255,255,255,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{width:`${g}%`,height:"100%",background:`linear-gradient(90deg, ${l.color||"#3b82f6"} 0%, rgba(59,130,246,0.7) 100%)`}})})]},l.id||l.name)})})()}):e.jsxs("div",{className:"empty-activity",style:{textAlign:"center"},children:[e.jsx("div",{className:"empty-icon",children:"üè∑Ô∏è"}),e.jsx("h3",{style:{color:"#ffffff"},children:"No Categories Found"}),e.jsx("p",{style:{color:"#a1a1aa"},children:"Create categories to organize your rebuttals"}),e.jsxs("button",{className:"create-rebuttal-btn",onClick:()=>t&&t("categories"),children:[e.jsx("span",{children:"‚ûï"}),"Create Category"]})]})]}),e.jsxs("div",{className:"quick-actions-modern",children:[e.jsxs("div",{className:"quick-actions-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"üöÄ Quick Actions"}),e.jsx("p",{children:"Streamline your workflow with these essential tools"})]}),e.jsxs("div",{className:"header-decoration",children:[e.jsx("div",{className:"decoration-dot"}),e.jsx("div",{className:"decoration-dot"}),e.jsx("div",{className:"decoration-dot"})]})]}),e.jsxs("div",{className:"actions-grid",children:[e.jsxs("div",{className:"action-card primary",onClick:()=>t&&t("rebuttals"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"‚ûï"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"Add Rebuttal"}),e.jsx("p",{children:"Create new response templates"}),e.jsx("div",{className:"action-badge",children:"New"})]}),e.jsx("div",{className:"action-arrow",children:"‚Üí"})]}),e.jsxs("div",{className:"action-card secondary",onClick:()=>t&&t("categories"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"üè∑Ô∏è"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"Manage Categories"}),e.jsx("p",{children:"Organize and structure content"}),e.jsx("div",{className:"action-badge",children:"Essential"})]}),e.jsx("div",{className:"action-arrow",children:"‚Üí"})]}),e.jsxs("div",{className:"action-card tertiary",onClick:()=>t&&t("dispositions"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"üìä"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"View Analytics"}),e.jsx("p",{children:"Track performance metrics"}),e.jsx("div",{className:"action-badge",children:"Insights"})]}),e.jsx("div",{className:"action-arrow",children:"‚Üí"})]}),e.jsxs("div",{className:"action-card quaternary",onClick:()=>t&&t("time-blocks"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"‚öôÔ∏è"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"System Settings"}),e.jsx("p",{children:"Configure preferences"}),e.jsx("div",{className:"action-badge",children:"Admin"})]}),e.jsx("div",{className:"action-arrow",children:"‚Üí"})]}),e.jsxs("div",{className:"action-card quinary",onClick:()=>t&&t("users"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"üë•"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"User Management"}),e.jsx("p",{children:"Manage team members"}),e.jsx("div",{className:"action-badge",children:"Team"})]}),e.jsx("div",{className:"action-arrow",children:"‚Üí"})]}),e.jsxs("div",{className:"action-card senary",onClick:()=>t&&t("faqs"),children:[e.jsxs("div",{className:"action-icon-wrapper",children:[e.jsx("div",{className:"action-icon",children:"‚ùì"}),e.jsx("div",{className:"icon-glow"})]}),e.jsxs("div",{className:"action-content",children:[e.jsx("h3",{children:"FAQ Management"}),e.jsx("p",{children:"Update help content"}),e.jsx("div",{className:"action-badge",children:"Support"})]}),e.jsx("div",{className:"action-arrow",children:"‚Üí"})]})]})]})]})]})},Vc=[{id:"weekday-morning",time:"10:00 AM",label:"Morning",available:!0,dayType:"weekday"},{id:"weekday-afternoon",time:"2:00 PM",label:"Afternoon",available:!0,dayType:"weekday"},{id:"weekday-evening",time:"6:00 PM",label:"Evening",available:!0,dayType:"weekday"},{id:"weekend-morning",time:"10:00 AM",label:"Morning",available:!0,dayType:"weekend"},{id:"weekend-afternoon",time:"2:00 PM",label:"Afternoon",available:!0,dayType:"weekend"}],$c=[{id:"mida",name:"MIDA",reps:["John Smith","Sarah Johnson"],color:"#3b82f6"},{id:"esde",name:"ESDE",reps:["Mike Davis","Lisa Wilson"],color:"#10b981"},{id:"nova",name:"NOVA",reps:["David Brown","Emma Taylor"],color:"#f59e0b"},{id:"neng",name:"NENG",reps:["Alex Rodriguez","Maria Garcia"],color:"#ef4444"},{id:"nhme",name:"NHME",reps:["Jennifer Lee","Robert Wilson"],color:"#8b5cf6"},{id:"ctwm",name:"CTWM",reps:["Michael Chen","Amanda Johnson"],color:"#06b6d4"},{id:"sopa",name:"SOPA",reps:["Christopher Davis","Rachel Green"],color:"#f97316"},{id:"wcfl",name:"WCFL",reps:["Daniel Martinez","Jessica Taylor"],color:"#ec4899"}],aw=async()=>{try{console.log("Initializing scheduling data...");const t=await vn(),s=await co();if(t.length===0){console.log("Adding default time blocks...");for(const n of Vc)await Ku(n)}if(s.length===0){console.log("Adding default regions...");for(const n of $c)await Qu(n)}const a=new Date;for(let n=0;n<21;n++){const i=new Date(a);i.setDate(a.getDate()+n);const r=i.toISOString().split("T")[0],c=i.getDay()===0||i.getDay()===6?"weekend":"weekday",d={date:r,dayType:c,slots:{}},u=Vc.filter(l=>l.dayType===c);for(const l of u){d.slots[l.id]={};for(const p of $c)d.slots[l.id][p.id]={available:!0,booked:0,capacity:3}}await Ju(r,d)}console.log("Scheduling data initialized successfully!")}catch(t){console.error("Error initializing scheduling data:",t)}},nw=async()=>{try{console.log("üîß Fixing availability data to match current time blocks...");const t=await vn(),s=await co();console.log("üìÖ Current time blocks:",t),console.log("üè¢ Current regions:",s);const a={morning:"weekend-morning","late-morning":"weekend-morning","early-afternoon":"weekend-afternoon","late-afternoon":"weekend-afternoon",evening:"weekday-evening"},n=new Date;for(let i=0;i<30;i++){const r=new Date(n);r.setDate(n.getDate()+i);const o=r.toISOString().split("T")[0],d=r.getDay()===0||r.getDay()===6?"weekend":"weekday",u=await dn(o);if(u&&u.slots){console.log(`üîÑ Fixing availability for ${o} (${d})`);const l={date:o,dayType:d,slots:{}},p=t.filter(g=>g.dayType===d);for(const g of p){l.slots[g.id]={};for(const b of s){let y=null;Object.keys(u.slots).forEach(f=>{a[f]===g.id&&u.slots[f]?.[b.id]&&(y=u.slots[f][b.id])}),l.slots[g.id][b.id]=y||{available:!0,booked:0,capacity:3}}}await Ju(o,l),console.log(`‚úÖ Fixed availability for ${o}`)}}console.log("üéâ Availability data fix completed!")}catch(t){console.error("‚ùå Error fixing availability data:",t)}},iw=()=>{const[t,s]=h.useState({weekdays:[],weekends:[]}),[a,n]=h.useState([]),[i,r]=h.useState({}),[o,c]=h.useState(!0),[d,u]=h.useState(null),[l,p]=h.useState(null),[g,b]=h.useState(null),[y,f]=h.useState(!1),[v,j]=h.useState(!1),[C,x]=h.useState(!1),R=(()=>{const T=[],W=new Date;for(let P=0;P<21;P++){const L=new Date(W);L.setDate(W.getDate()+P),T.push(L)}return T})();h.useEffect(()=>{(async()=>{try{c(!0),await aw();const W=await vn(),P=W.filter(m=>m.dayType==="weekday"),L=W.filter(m=>m.dayType==="weekend");s({weekdays:P,weekends:L});const q=await co();n(q),c(!1)}catch(W){console.error("Error loading data:",W),c(!1)}})()},[]),h.useEffect(()=>{const T=Yu(L=>{const q=L.filter(D=>D.dayType==="weekday"),m=L.filter(D=>D.dayType==="weekend");s({weekdays:q,weekends:m})}),W=Hy(L=>{n(L)});return(async()=>{const L={};for(const q of R){const m=q.toISOString().split("T")[0],D=await dn(m);D&&(L[m]=D)}r(L)})(),()=>{T(),W()}},[]);const E=async(T,W,P,L)=>{try{const q=t[T].find(m=>m.id===W);q&&await qy(W,{...q,[P]:L})}catch(q){console.error("Error updating time block:",q)}},z=async T=>{try{const W={id:Date.now().toString(),time:"",label:"",available:!0,dayType:T};await Ku(W),p(W.id)}catch(W){console.error("Error adding time block:",W)}},k=async(T,W)=>{try{await _y(W)}catch(P){console.error("Error deleting time block:",P)}},V=async(T,W,P)=>{try{const L=a.find(q=>q.id===T);L&&await zy(T,{...L,[W]:P})}catch(L){console.error("Error updating region:",L)}},$=async()=>{try{const T={id:Date.now().toString(),name:"New Region",reps:[],color:"#3b82f6"};await Qu(T),b(T.id)}catch(T){console.error("Error adding region:",T)}},A=async T=>{try{await Gy(T)}catch(W){console.error("Error deleting region:",W)}},_=async()=>{try{x(!0),await nw(),alert("Availability data has been fixed to match current time blocks!")}catch(T){console.error("Error fixing availability data:",T),alert("Error fixing availability data. Check console for details.")}finally{x(!1)}},O=async(T,W,P,L)=>{try{const q=T.toISOString().split("T")[0],m=await dn(q)||{},D={...m,slots:{...m.slots,[W]:{...m.slots?.[W],[P]:{available:L,booked:m.slots?.[W]?.[P]?.booked||0,capacity:m.slots?.[W]?.[P]?.capacity||3}}}};await r(q,D)}catch(q){console.error("Error updating availability:",q)}},Y=T=>T.getDay()===0||T.getDay()===6,U=T=>Y(T)?t.weekends:t.weekdays;if(o)return e.jsx("div",{className:"time-block-management",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50vh",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:600},children:"Loading Time Block Management..."}),e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}})]})});const w=T=>T.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return e.jsxs("div",{className:"time-block-management",children:[e.jsxs(de.div,{className:"tbm-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("h1",{children:"‚è∞ Time Block Management"}),e.jsx("p",{children:"Configure appointment time blocks, regional assignments, and availability"})]}),e.jsxs("div",{className:"tbm-content",children:[e.jsxs(de.div,{className:"tbm-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:"section-header",children:[e.jsx(sr,{className:"section-icon"}),e.jsx("h2",{children:"Time Blocks Configuration"}),e.jsx("button",{onClick:_,disabled:C,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:8,padding:"0.5rem 1rem",fontSize:"0.875rem",cursor:C?"not-allowed":"pointer",opacity:C?.6:1},children:C?"Fixing...":"üîß Fix Availability Data"})]}),e.jsxs("div",{className:"time-blocks-grid",children:[e.jsxs("div",{className:"day-type-section",children:[e.jsx("h3",{children:"Weekday Blocks"}),e.jsxs("div",{className:"blocks-list",children:[t.weekdays.map(T=>e.jsx("div",{className:"time-block-item",children:l===T.id?e.jsxs("div",{className:"edit-block-form",children:[e.jsx("input",{type:"time",value:T.time,onChange:W=>E("weekdays",T.id,"time",W.target.value),className:"time-input"}),e.jsx("input",{type:"text",placeholder:"Label (e.g., Morning)",value:T.label,onChange:W=>E("weekdays",T.id,"label",W.target.value),className:"label-input"}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>p(null),className:"save-btn",children:e.jsx(ji,{size:16})}),e.jsx("button",{onClick:()=>k("weekdays",T.id),className:"delete-btn",children:e.jsx(wi,{size:16})})]})]}):e.jsxs("div",{className:"block-display",children:[e.jsx("span",{className:"block-time",children:T.time}),e.jsx("span",{className:"block-label",children:T.label}),e.jsx("button",{onClick:()=>p(T.id),className:"edit-btn",children:e.jsx(bi,{size:16})})]})},T.id)),e.jsxs("button",{onClick:()=>z("weekdays"),className:"add-block-btn",children:[e.jsx(yi,{size:16}),"Add Block"]})]})]}),e.jsxs("div",{className:"day-type-section",children:[e.jsx("h3",{children:"Weekend Blocks"}),e.jsxs("div",{className:"blocks-list",children:[t.weekends.map(T=>e.jsx("div",{className:"time-block-item",children:l===T.id?e.jsxs("div",{className:"edit-block-form",children:[e.jsx("input",{type:"time",value:T.time,onChange:W=>E("weekends",T.id,"time",W.target.value),className:"time-input"}),e.jsx("input",{type:"text",placeholder:"Label (e.g., Morning)",value:T.label,onChange:W=>E("weekends",T.id,"label",W.target.value),className:"label-input"}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>p(null),className:"save-btn",children:e.jsx(ji,{size:16})}),e.jsx("button",{onClick:()=>k("weekends",T.id),className:"delete-btn",children:e.jsx(wi,{size:16})})]})]}):e.jsxs("div",{className:"block-display",children:[e.jsx("span",{className:"block-time",children:T.time}),e.jsx("span",{className:"block-label",children:T.label}),e.jsx("button",{onClick:()=>p(T.id),className:"edit-btn",children:e.jsx(bi,{size:16})})]})},T.id)),e.jsxs("button",{onClick:()=>z("weekends"),className:"add-block-btn",children:[e.jsx(yi,{size:16}),"Add Block"]})]})]})]})]}),e.jsxs(de.div,{className:"tbm-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Py,{className:"section-icon"}),e.jsx("h2",{children:"Regional Management"})]}),e.jsxs("div",{className:"regions-grid",children:[(a||[]).filter(T=>T).map(T=>e.jsx("div",{className:"region-card",children:g===T.id?e.jsxs("div",{className:"edit-region-form",children:[e.jsx("input",{type:"text",placeholder:"Region Name",value:T.name,onChange:W=>V(T.id,"name",W.target.value),className:"region-name-input"}),e.jsx("div",{className:"reps-input",children:e.jsx("input",{type:"text",placeholder:"Rep names (comma separated)",value:(T.reps||[]).join(", "),onChange:W=>V(T.id,"reps",W.target.value.split(",").map(P=>P.trim()).filter(P=>P.length>0)),className:"reps-input-field"})}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:()=>b(null),className:"save-btn",children:e.jsx(ji,{size:16})}),e.jsx("button",{onClick:()=>A(T.id),className:"delete-btn",children:e.jsx(wi,{size:16})})]})]}):e.jsxs("div",{className:"region-display",children:[e.jsxs("div",{className:"region-header",children:[e.jsx("div",{className:"region-color",style:{backgroundColor:T.color}}),e.jsx("h3",{children:T.name}),e.jsx("button",{onClick:()=>b(T.id),className:"edit-btn",children:e.jsx(bi,{size:16})})]}),e.jsxs("div",{className:"region-reps",children:[e.jsx(Gu,{size:16}),e.jsxs("span",{children:[(T.reps||[]).length," Reps"]})]}),e.jsx("div",{className:"reps-list",children:(T.reps||[]).map((W,P)=>e.jsx("span",{className:"rep-name",children:W},P))})]})},T.id)),e.jsxs("button",{onClick:$,className:"add-region-btn",children:[e.jsx(yi,{size:16}),"Add Region"]})]})]}),e.jsxs(de.div,{className:"tbm-section",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ln,{className:"section-icon"}),e.jsx("h2",{children:"Availability Calendar (Next 3 Weeks)"})]}),e.jsx("div",{className:"availability-calendar",children:R.map(T=>{const W=T.toISOString().split("T")[0],P=U(T),L=T<new Date;return e.jsxs("div",{className:`calendar-day ${L?"past":""}`,children:[e.jsxs("div",{className:"day-header",children:[e.jsx("span",{className:"day-date",children:w(T)}),Y(T)&&e.jsx("span",{className:"weekend-badge",children:"Weekend"})]}),e.jsx("div",{className:"day-blocks",children:P.map(q=>e.jsxs("div",{className:"availability-block",children:[e.jsxs("div",{className:"block-info",children:[e.jsx("span",{className:"block-time",children:q.time}),e.jsx("span",{className:"block-label",children:q.label})]}),e.jsx("div",{className:"region-availability",children:a.map(m=>{const D=i[W]?.slots?.[q.id]?.[m.id],S=D?.available!==!1,M=D?.booked||0,F=D?.capacity||3;return e.jsxs("button",{className:`region-availability-btn ${S?"available":"unavailable"}`,onClick:()=>!L&&O(W,q.id,m.id,!S),disabled:L,style:{backgroundColor:S?m.color:"#e5e7eb",opacity:L?.5:1},title:`${m.name}: ${S?"Available":"Unavailable"} (${M}/${F} booked)`,children:[m.name," (",M,"/",F,")"]},m.id)})})]},q.id))})]},W)})})]})]})]})},rw=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let a=0;a<32;a++)s+=t.charAt(Math.floor(Math.random()*t.length));return s},Di=async(t,s)=>{try{const a=J(),n=ie(a,"company-invites",t),i=await Te(n);if(i.exists()){const o=i.data();return await wt(n,{companySlug:s,updatedAt:Ie()},{merge:!0}),o.token}const r=rw();return await wt(n,{token:r,companyId:t,companySlug:s,createdAt:Ie(),updatedAt:Ie(),isActive:!0,neverExpires:!0}),r}catch(a){throw console.error("Error creating invite token:",a),a}},ow=async t=>{try{const s=J(),a=ne(s,"company-invites"),n=je(a,Ke("token","==",t)),i=await ue(n);if(!i.empty){const o=i.docs[0].data();return{companyId:o.companyId,companySlug:o.companySlug||o.companyId}}return null}catch(s){return console.error("Error getting company from token:",s),null}},Pi=(t,s)=>{const a=window.location.origin;return s==="long-home"?`${a}/app/invite/${t}`:`${a}/invite/${t}`},wo=({companyId:t})=>{const[s,a]=h.useState(!1),[n,i]=h.useState(!1),[r,o]=h.useState(""),[c,d]=h.useState(""),u="oLuxoJq8SHXXEWm9KSEU";h.useEffect(()=>{(async()=>{if(t)try{const b=J(),y=ie(b,"companies",t),f=await Te(y);if(f.exists()){const v=f.data(),j=v.slug==="long-home"||t===u?"long-home":v.slug||t;d(j);const C=await Di(t,j),x=Pi(C,j);o(x)}}catch(b){console.error("Error fetching company data:",b)}})()},[t]);const l=g=>{try{const b=document.createElement("textarea");b.value=g,b.style.position="fixed",b.style.left="-9999px",document.body.appendChild(b),b.focus(),b.select();const y=document.execCommand("copy");return document.body.removeChild(b),y}catch(b){return console.error("Fallback copy failed:",b),!1}},p=async()=>{if(t){a(!0);try{const g=c||(t===u?"long-home":t);if(r){const f=r;let v=!1;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(f),v=!0}catch(j){console.warn("Immediate clipboard write failed:",j)}if(v||l(f)&&(v=!0),v){(async()=>{try{const j=await Di(t,g),C=Pi(j,g);o(C)}catch(j){console.warn("Background token refresh failed",j)}})(),i(!0),setTimeout(()=>i(!1),2e3);return}}const b=await Di(t,g),y=Pi(b,g);if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(y)}catch(f){if(console.warn("Clipboard API writeText failed, falling back:",f),f&&(f.name==="NotAllowedError"||/Document is not focused/i.test(String(f.message||""))))try{window.focus&&window.focus(),await new Promise(v=>setTimeout(v,50)),await navigator.clipboard.writeText(y)}catch(v){if(console.warn("Retry after focus failed:",v),!l(y))throw v}else if(!l(y))throw f}else if(!l(y))throw new Error("Copy not supported");o(y),i(!0),setTimeout(()=>i(!1),2e3)}catch(g){console.error("Error copying link:",g);const b=r||void 0;b?setTimeout(()=>window.prompt("Copy this link (press Ctrl/Cmd+C):",b),0):alert("Failed to copy link. Please try again.")}finally{a(!1)}}};return t?e.jsx("button",{className:"share-link-button",onClick:p,disabled:s,title:"Copy shareable link for workers",children:s?e.jsx(e.Fragment,{children:"‚è≥ Generating..."}):n?e.jsx(e.Fragment,{children:"‚úì Link Copied!"}):e.jsx(e.Fragment,{children:"üîó Copy Share Link"})}):null},lw="adminSettings:",cw=t=>`${lw}${t||"global"}`,qc={theme:"light",enableCustomerService:!0,enableFAQ:!0,enableRebuttals:!0,companyDisplayName:"",companyLegalName:"",companyPhone:"",companyEmail:"",companyWebsite:"",hqAddress:"",serviceAreasText:"",businessHoursNote:"",enableMaintenanceMode:!1,maintenanceMessage:"",enableSalesforce:!1,salesforceWebhookUrl:"",salesforceAuthToken:"",leadDefaultAssigneeEmail:"",leadCcEmails:""},dw=({companyId:t,companyName:s})=>{const a=h.useMemo(()=>cw(t),[t]),[n,i]=h.useState(qc),[r,o]=h.useState(""),[c,d]=h.useState(""),[u,l]=h.useState(!1),[p,g]=h.useState(""),[b,y]=h.useState(!1),[f,v]=h.useState(""),j=h.useRef(null),[C,x]=h.useState(!1),[N,R]=h.useState("");h.useEffect(()=>{try{const U=localStorage.getItem(a);if(U){const w=JSON.parse(U);i({...qc,...w})}}catch{}},[a]);const E=(U,w)=>{i(T=>({...T,[U]:w}))},z=()=>{try{localStorage.setItem(a,JSON.stringify(n));const U=kt(),w=ie(U,"system","maintenance");wt(w,{enabled:!!n.enableMaintenanceMode,message:n.maintenanceMessage||"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:Ie()},{merge:!0}),o("Saved"),setTimeout(()=>o(""),1500)}catch{o("Error saving")}},k=async()=>{try{o("Backing up...");const[U,w,T]=await Promise.all([us.getAllRebuttals(),us.getArchivedRebuttals(),us.getCategories()]),W={meta:{companyId:t||null,companyName:s||null,exportedAt:new Date().toISOString()},activeRebuttals:U,archivedRebuttals:w,categories:T},P=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),L=URL.createObjectURL(P),q=document.createElement("a");q.href=L,q.download=`rebuttals-backup-${s||"global"}-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,q.click(),URL.revokeObjectURL(L),o("Backup downloaded"),setTimeout(()=>o(""),2e3)}catch(U){console.error(U),o("Backup failed")}},V=async()=>{if(u)return;const U=(s||"DELETE").toLowerCase();if(c.trim().toLowerCase()!==U){o(`Type "${s||"DELETE"}" to confirm`),setTimeout(()=>o(""),2e3);return}try{l(!0),g("Fetching documents...");const w=kt(),[T,W]=await Promise.all([ue(ne(w,"rebuttals")),ue(ne(w,"archived_rebuttals"))]),P=T.size+W.size;if(P===0){g("Nothing to delete"),l(!1);return}const L=(M,F)=>{const X=[];for(let oe=0;oe<M.length;oe+=F)X.push(M.slice(oe,oe+F));return X};let q=0;const m=async M=>{const F=et(w);M.forEach(X=>F.delete(X.ref)),await F.commit(),q+=M.length,g(`Deleted ${q} / ${P}`)},D=T.docs,S=W.docs;for(const M of L(D,450))await m(M);for(const M of L(S,450))await m(M);g("Completed"),o("All rebuttals deleted")}catch(w){console.error(w),g("Delete failed"),o("Delete failed")}finally{l(!1),setTimeout(()=>o(""),2500)}},$=async()=>{if(u)return;const U=(s||"DELETE").toLowerCase();if(c.trim().toLowerCase()!==U){o(`Type "${s||"DELETE"}" to confirm`),setTimeout(()=>o(""),2e3);return}try{l(!0),g("Fetching archived rebuttals...");const w=kt(),T=await ue(ne(w,"archived_rebuttals")),W=T.size;if(W===0){g("No archived rebuttals"),l(!1);return}const P=(q,m)=>{const D=[];for(let S=0;S<q.length;S+=m)D.push(q.slice(S,S+m));return D};let L=0;for(const q of P(T.docs,450)){const m=et(w);q.forEach(D=>m.delete(D.ref)),await m.commit(),L+=q.length,g(`Deleted ${L} / ${W}`)}g("Completed"),o("Archived rebuttals deleted")}catch(w){console.error(w),g("Delete failed"),o("Delete failed")}finally{l(!1),setTimeout(()=>o(""),2500)}},A=async()=>{try{o("Purging empty categories...");const U=kt(),T=(await us.getCategories()).filter(P=>(P.rebuttalCount||0)===0);if(T.length===0){o("No empty categories"),setTimeout(()=>o(""),1500);return}const W=et(U);T.forEach(P=>{const L=ie(U,"categories",P.id);W.delete(L)}),await W.commit(),o(`Purged ${T.length} empty categories`),setTimeout(()=>o(""),2e3)}catch(U){console.error(U),o("Purge failed")}},_=()=>{j.current?.click()},O=async U=>{const w=U.target.files?.[0];if(w){y(!0),v("Reading file...");try{const T=await w.text(),W=JSON.parse(T),P=kt();if(v("Writing categories..."),Array.isArray(W.categories))for(let L=0;L<W.categories.length;L+=400){const q=et(P);W.categories.slice(L,L+400).forEach(D=>{const S=D.id||ie(ne(P,"categories")).id,{id:M,...F}=D;q.set(ie(P,"categories",S),F,{merge:!0})}),await q.commit()}if(v("Writing rebuttals..."),Array.isArray(W.activeRebuttals))for(let L=0;L<W.activeRebuttals.length;L+=400){const q=et(P);W.activeRebuttals.slice(L,L+400).forEach(D=>{const S=D.id||ie(ne(P,"rebuttals")).id,{id:M,...F}=D;q.set(ie(P,"rebuttals",S),F,{merge:!0})}),await q.commit()}if(v("Writing archived rebuttals..."),Array.isArray(W.archivedRebuttals))for(let L=0;L<W.archivedRebuttals.length;L+=400){const q=et(P);W.archivedRebuttals.slice(L,L+400).forEach(D=>{const S=D.id||ie(ne(P,"archived_rebuttals")).id,{id:M,...F}=D;q.set(ie(P,"archived_rebuttals",S),F,{merge:!0})}),await q.commit()}v("Completed"),o("Restore completed")}catch(T){console.error(T),v("Restore failed"),o("Restore failed")}finally{y(!1),U.target.value="",setTimeout(()=>o(""),2500)}}},Y=async()=>{if(C)return;const U=(s||"DELETE").toLowerCase();if(c.trim().toLowerCase()!==U){o(`Type "${s||"DELETE"}" to confirm`),setTimeout(()=>o(""),2e3);return}try{x(!0),R("Fetching archived rebuttals...");const w=kt(),T=await ue(ne(w,"archived_rebuttals")),W=T.size;if(W===0){R("No archived rebuttals"),x(!1);return}const P=T.docs,L=(m,D)=>{const S=[];for(let M=0;M<m.length;M+=D)S.push(m.slice(M,M+D));return S};let q=0;for(const m of L(P,200)){const D=et(w);m.forEach(S=>{const M=S.data(),{archivedAt:F,archivedReason:X,originalCategory:oe,...ae}=M,H=ie(ne(w,"rebuttals"));D.set(H,{...ae,createdAt:ae.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}),D.delete(S.ref)}),await D.commit(),q+=m.length,R(`Restored ${q} / ${W}`)}R("Completed"),o("Archived rebuttals restored")}catch(w){console.error(w),R("Restore failed"),o("Restore failed")}finally{x(!1),setTimeout(()=>o(""),2500)}};return e.jsxs("div",{className:"admin-settings",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("div",{className:"settings-title",children:"‚öôÔ∏è Settings"}),e.jsx("div",{className:"settings-subtitle",children:s?`Manage settings for ${s}`:"Manage admin dashboard preferences"})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"üè¢"}),e.jsx("h3",{className:"settings-card-title",children:"Company"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("div",{className:"kv",children:[e.jsx("span",{className:"kv-key",children:"Company ID"}),e.jsx("span",{className:"kv-value",children:e.jsx("code",{children:t||"N/A"})})]}),e.jsxs("div",{className:"kv",children:[e.jsx("span",{className:"kv-key",children:"Company Name"}),e.jsx("span",{className:"kv-value",children:e.jsx("strong",{children:s||"N/A"})})]}),t&&e.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[e.jsx("label",{className:"field-label",style:{marginBottom:"8px",display:"block",fontWeight:600},children:"Share Link for Workers"}),e.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"12px"},children:"Copy this link to share with your workers. They'll be automatically directed to your company's training page."}),e.jsx(wo,{companyId:t})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Display name"}),e.jsx("input",{className:"field-input",value:n.companyDisplayName,onChange:U=>E("companyDisplayName",U.target.value),placeholder:"Long Home"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Legal name"}),e.jsx("input",{className:"field-input",value:n.companyLegalName,onChange:U=>E("companyLegalName",U.target.value),placeholder:"Long Home Products, Inc."})]})]})]}),e.jsxs("section",{className:"settings-card danger-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"settings-card-title",children:"Danger zone"})]}),e.jsx("div",{className:"settings-card-body",children:e.jsxs("div",{className:"danger-actions",children:[e.jsx("button",{className:"btn",onClick:k,children:"Backup all rebuttals to JSON"}),e.jsxs("div",{children:[e.jsx("input",{ref:j,type:"file",accept:"application/json",style:{display:"none"},onChange:O}),e.jsx("button",{className:"btn",onClick:_,disabled:b,children:b?"Restoring‚Ä¶":"Restore from backup JSON"}),f&&e.jsx("div",{className:"progress-text",children:f})]}),e.jsx("button",{className:"btn",onClick:A,children:"Purge empty categories"}),e.jsxs("div",{className:"danger-delete",children:[e.jsxs("div",{className:"field",children:[e.jsxs("label",{className:"field-label",children:['Type "',s||"DELETE",'" to confirm']}),e.jsx("input",{className:"field-input",value:c,onChange:U=>d(U.target.value),placeholder:s||"DELETE"})]}),e.jsx("button",{className:"btn btn-danger",onClick:V,disabled:u,children:u?"Deleting‚Ä¶":"Delete ALL rebuttals"}),p&&e.jsx("div",{className:"progress-text",children:p}),e.jsx("button",{className:"btn btn-danger",onClick:$,disabled:u,children:u?"Deleting‚Ä¶":"Delete archived rebuttals only"}),e.jsx("button",{className:"btn",onClick:Y,disabled:C,children:C?"Restoring‚Ä¶":"Restore all archived to active"}),N&&e.jsx("div",{className:"progress-text",children:N})]})]})})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"üß©"}),e.jsx("h3",{className:"settings-card-title",children:"Features"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:n.enableRebuttals,onChange:U=>E("enableRebuttals",U.target.checked)}),e.jsx("span",{children:"Enable Rebuttals"})]}),e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:n.enableCustomerService,onChange:U=>E("enableCustomerService",U.target.checked)}),e.jsx("span",{children:"Enable Customer Service"})]}),e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:n.enableFAQ,onChange:U=>E("enableFAQ",U.target.checked)}),e.jsx("span",{children:"Enable FAQ"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"üìû"}),e.jsx("h3",{className:"settings-card-title",children:"Contact & Address"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Phone"}),e.jsx("input",{className:"field-input",value:n.companyPhone,onChange:U=>E("companyPhone",U.target.value),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Email"}),e.jsx("input",{className:"field-input",type:"email",value:n.companyEmail,onChange:U=>E("companyEmail",U.target.value),placeholder:"support@example.com"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Website"}),e.jsx("input",{className:"field-input",type:"url",value:n.companyWebsite,onChange:U=>E("companyWebsite",U.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"HQ Address"}),e.jsx("textarea",{className:"field-input",rows:"3",value:n.hqAddress,onChange:U=>E("hqAddress",U.target.value),placeholder:"123 Main St, City, ST 12345"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"üó∫Ô∏è"}),e.jsx("h3",{className:"settings-card-title",children:"Service Areas"})]}),e.jsx("div",{className:"settings-card-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"ZIPs/States (comma or newline separated)"}),e.jsx("textarea",{className:"field-input",rows:"4",value:n.serviceAreasText,onChange:U=>E("serviceAreasText",U.target.value),placeholder:`DC, MD, VA
20001, 20002, 22202`})]})})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"‚è∞"}),e.jsx("h3",{className:"settings-card-title",children:"Business Hours"})]}),e.jsx("div",{className:"settings-card-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Hours note"}),e.jsx("textarea",{className:"field-input",rows:"3",value:n.businessHoursNote,onChange:U=>E("businessHoursNote",U.target.value),placeholder:"Mon‚ÄìFri 8am‚Äì6pm, Sat 9am‚Äì1pm, Sun closed"})]})})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"ü§ù"}),e.jsx("h3",{className:"settings-card-title",children:"CRM & Integrations"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:n.enableSalesforce,onChange:U=>E("enableSalesforce",U.target.checked)}),e.jsx("span",{children:"Enable Salesforce sync"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Salesforce webhook URL"}),e.jsx("input",{className:"field-input",type:"url",value:n.salesforceWebhookUrl,onChange:U=>E("salesforceWebhookUrl",U.target.value),placeholder:"/api/sendToSalesforce"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Salesforce auth token"}),e.jsx("input",{className:"field-input",value:n.salesforceAuthToken,onChange:U=>E("salesforceAuthToken",U.target.value),placeholder:"token or key"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card-header",children:[e.jsx("span",{className:"settings-card-icon",children:"üõ†Ô∏è"}),e.jsx("h3",{className:"settings-card-title",children:"Maintenance Mode"})]}),e.jsxs("div",{className:"settings-card-body",children:[e.jsxs("label",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",checked:n.enableMaintenanceMode,onChange:U=>E("enableMaintenanceMode",U.target.checked)}),e.jsx("span",{children:"Enable maintenance mode for this company"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"field-label",children:"Maintenance message"}),e.jsx("input",{className:"field-input",value:n.maintenanceMessage,onChange:U=>E("maintenanceMessage",U.target.value),placeholder:"We'll be back soon."})]})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"btn btn-primary",onClick:z,children:"Save changes"}),r&&e.jsx("span",{className:"save-status",children:r})]})]})},uw=()=>{const{currentUser:t,authLoading:s}=Rt(),a=tt(),[n,i]=h.useState(!0),[r,o]=h.useState(null),[c,d]=h.useState(null),[u,l]=h.useState("dashboard"),[p,g]=h.useState(""),[b,y]=h.useState(!1),[f,v]=h.useState(""),[j,C]=h.useState(""),[x,N]=h.useState(!1);h.useEffect(()=>(x?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>{document.body.classList.remove("sidebar-open")}),[x]);const R=V=>({oLuxoJq8SHXXEWm9KSEU:"Long Home","long-home":"Long Home"})[V]||V;h.useEffect(()=>{if(p){const V=R(p);v(V),(async()=>{try{const A=J(),_=ie(A,"companies",p),O=await Te(_);if(O.exists()){const Y=O.data();v(Y.name||V),C(Y.slug||p)}else v(V),C(p)}catch(A){console.error("Error fetching company data:",A),v(V),C(p)}})()}else v(""),C("")},[p]),h.useEffect(()=>{(async()=>{try{console.log("üîç AdminDashboard: Starting auth check..."),console.log("üîç AdminDashboard: Current user:",t),console.log("üîç AdminDashboard: Auth loading:",s);const $=localStorage.getItem("adminUser");if($){const A=JSON.parse($);if(console.log("üîç AdminDashboard: Found admin user in localStorage:",A),A.role==="super-admin"){const O=new URL(window.location.href).searchParams.get("impersonate");let Y=null;try{Y=JSON.parse(localStorage.getItem("impersonation")||"null")}catch{}if(console.log("üîç AdminDashboard: Super admin check:",{impersonateCompanyId:O,impersonation:Y,url:window.location.href,hasImpersonateParam:!!O,hasImpersonationData:!!Y?.enabled}),O||Y?.enabled){const U=O||Y?.companyId||"";g(U),y(!0),localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:U})),console.log("üîç AdminDashboard: Super admin impersonating company:",U),console.log("üîç AdminDashboard: Staying on admin dashboard for impersonation")}else{console.log("üîç AdminDashboard: Super admin (no impersonation), redirecting to SaaS dashboard"),console.log("üîç AdminDashboard: Redirecting to SaaS dashboard because no impersonation found"),a("/admin/saas");return}}else if(A.role==="company-admin"){const _=A.companyId;if(_)g(_),y(!1),v(R(_)),console.log("üîç AdminDashboard: Company admin accessing their company:",_);else{console.error("üîç AdminDashboard: Company admin missing companyId"),o("Company admin missing company information");return}}else if(A.role==="admin"){let _;A.companyId?_=A.companyId:_="oLuxoJq8SHXXEWm9KSEU",g(_),v(R(_))}d(A),i(!1)}else{if(console.log("üîç AdminDashboard: No admin user in localStorage, checking Firestore..."),!t){console.log("üîç AdminDashboard: No current user from Firebase Auth, redirecting to login"),a("/admin/login");return}const A=ie(kt(),"super-admins",t.uid),_=await Te(A);if(_.exists()){const U=_.data();console.log("üîç AdminDashboard: Found super admin in Firestore, redirecting to SaaS dashboard");const w={uid:t.uid,email:t.email,role:"super-admin",...U};localStorage.setItem("adminUser",JSON.stringify(w)),a("/admin/saas");return}const O=ie(kt(),"admins",t.uid),Y=await Te(O);if(Y.exists()){const U=Y.data();console.log("üîç AdminDashboard: Found admin in Firestore:",U);const w={...t,...U};d(w),localStorage.setItem("adminUser",JSON.stringify(w));let T;U.companyId?T=U.companyId:T="oLuxoJq8SHXXEWm9KSEU",g(T),v(R(T)),i(!1)}else{console.log("üîç AdminDashboard: User is not admin, redirecting to login"),a("/admin/login");return}}console.log("üîç AdminDashboard: Auth check completed successfully")}catch($){console.error("üîç AdminDashboard: Auth check error:",$),o("Authentication error: "+$.message),i(!1)}})()},[t,s,a]);const E=()=>{localStorage.removeItem("adminUser"),a("/admin/login")},z=()=>{try{localStorage.removeItem("impersonation")}catch{}y(!1),a("/admin/saas")},k=()=>{switch(u){case"dashboard":return e.jsx(sw,{onGoTab:V=>l(V),companyId:p});case"rebuttals":return e.jsx(Yb,{companyId:p});case"categories":return e.jsx(Kb,{companyId:p});case"dispositions":return e.jsx(Qb,{companyId:p});case"customer-service":return e.jsx(Xb,{companyId:p});case"faq":return e.jsx(Zb,{companyId:p});case"users":return e.jsx(ew,{companyId:p});case"time-blocks":return e.jsx(iw,{companyId:p});case"settings":return e.jsx(dw,{companyId:p,companyName:f});default:return null}};return n?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:600},children:"Loading Admin Dashboard..."}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:"Please wait while we initialize your admin panel"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#999",marginTop:"1rem"},children:[e.jsxs("div",{children:["Current user: ",t?t.email:"None"]}),e.jsxs("div",{children:["Auth loading: ",s?"Yes":"No"]}),e.jsxs("div",{children:["Admin user in localStorage: ",localStorage.getItem("adminUser")?"Yes":"No"]})]}),e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}})]}):r?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:r}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):c?e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("header",{className:"admin-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("button",{className:"hamburger-menu",onClick:()=>N(!x),"aria-label":"Toggle menu",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx("h1",{children:"Admin Dashboard"})]}),(b||c?.role==="company-admin"&&p)&&e.jsx("div",{className:"impersonation-banner",children:e.jsxs("span",{children:[b?"üîç Impersonating Company:":"üè¢ Company Admin for:"," ",f]})}),e.jsxs("div",{className:"admin-actions",children:[c?.role==="super-admin"&&b&&e.jsx("button",{className:"admin-header-button",onClick:z,children:"Back to My Dashboard"}),(p&&(c?.role==="company-admin"||c?.role==="admin"||b)||c?.role==="admin")&&e.jsxs(e.Fragment,{children:[p&&e.jsx(wo,{companyId:p}),e.jsx("button",{className:"admin-header-button training-button",onClick:()=>{if(c?.role==="admin"&&!p){window.open("/app","_blank");return}j==="long-home"||f==="Long Home"||f==="Long Home Products"?window.open("/app","_blank"):j?window.open(`/company/${j}`,"_blank"):p&&window.open(`/company/${p}`,"_blank")},children:"üè¢ View Company Landing Page"})]}),e.jsxs("span",{className:"welcome-text",children:["Welcome, ",c.email]}),e.jsx("button",{onClick:E,className:"logout-button",children:"Logout"})]})]}),e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{className:`sidebar-overlay ${x?"active":""}`,onClick:()=>N(!1)}),e.jsxs("aside",{className:`sidebar ${x?"open":""}`,children:[e.jsx("button",{className:u==="dashboard"?"active":"",onClick:()=>{l("dashboard"),N(!1)},children:"Dashboard"}),e.jsx("button",{className:u==="rebuttals"?"active":"",onClick:()=>{l("rebuttals"),N(!1)},children:"Rebuttals"}),e.jsx("button",{className:u==="categories"?"active":"",onClick:()=>{l("categories"),N(!1)},children:"Categories"}),e.jsx("button",{className:u==="dispositions"?"active":"",onClick:()=>{l("dispositions"),N(!1)},children:"Lead Dispositions"}),e.jsx("button",{className:u==="customer-service"?"active":"",onClick:()=>{l("customer-service"),N(!1)},children:"Customer Service"}),e.jsx("button",{className:u==="faq"?"active":"",onClick:()=>{l("faq"),N(!1)},children:"FAQ"}),e.jsx("button",{className:u==="users"?"active":"",onClick:()=>{l("users"),N(!1)},children:"Users"}),e.jsx("button",{className:u==="time-blocks"?"active":"",onClick:()=>{l("time-blocks"),N(!1)},children:"Time Blocks"}),e.jsx("button",{className:u==="settings"?"active":"",onClick:()=>{l("settings"),N(!1)},children:"Settings"})]}),e.jsx("main",{className:"dashboard-content",children:k()})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access the admin dashboard."}),e.jsx("button",{onClick:()=>a("/admin/login"),children:"Go to Login"})]})},hw=()=>{const[t,s]=h.useState(""),[a,n]=h.useState(""),[i,r]=h.useState(""),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[l,p]=h.useState(""),[g,b]=h.useState(null),y=tt();h.useEffect(()=>{const C=localStorage.getItem("adminUser");C&&(JSON.parse(C).role==="super-admin"?y("/admin/saas"):y("/admin/dashboard"))},[y]);const f=async C=>{try{const x=ie(J(),"super-admins",C.uid),N=await Te(x);if(N.exists()){const $=N.data();console.log("üîç AdminLogin: User is a super admin, redirecting to SaaS dashboard"),console.log("üîç AdminLogin: Super admin data:",$);const A={uid:C.uid,email:C.email,role:"super-admin",...$};return console.log("üîç AdminLogin: Storing admin user in localStorage:",A),localStorage.setItem("adminUser",JSON.stringify(A)),console.log("üîç AdminLogin: Navigating to /admin/saas"),y("/admin/saas"),"super-admin"}const R=ie(J(),"company-admins",C.uid),E=await Te(R);if(E.exists()){const $=E.data();console.log("üîç AdminLogin: User is company admin:",$);const A={uid:C.uid,email:C.email,role:"company-admin",companyId:$.companyId,...$};return localStorage.setItem("adminUser",JSON.stringify(A)),console.log("üîç AdminLogin: Navigating to /admin/company"),y("/admin/company"),"company-admin"}const z=ie(J(),"admins",C.uid),k=await Te(z);if(!k.exists())return await wt(z,{email:C.email,role:"admin",displayName:C.displayName||"",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()}),"admin";const V=k.data();return(!V?.role||V.role!=="admin")&&await wt(z,{role:"admin",lastLogin:new Date().toISOString()},{merge:!0}),"admin"}catch(x){throw console.error("Error verifying admin status:",x),x}},v=async C=>{C.preventDefault(),r(""),c(!0);try{const{user:x,needsDisplayName:N}=await ps.loginUser(t,a);if(N){b(x),u(!0),c(!1);return}await f(x)==="admin"&&(localStorage.setItem("adminUser",JSON.stringify({...x,role:"admin"})),y("/admin/dashboard"))}catch(x){x.message&&x.message.includes("REGISTRATION_PENDING")?r(x.message.replace("REGISTRATION_PENDING: ","")):x.message&&x.message.includes("REGISTRATION_REJECTED")?r(x.message.replace("REGISTRATION_REJECTED: ","")):r(x.message||"Failed to sign in. Please try again.")}finally{c(!1)}},j=async C=>{if(C.preventDefault(),!l.trim()){r("Please enter a display name");return}c(!0);try{await ps.updateDisplayName(g.uid,l.trim()),await f(g)==="admin"&&(localStorage.setItem("adminUser",JSON.stringify({...g,displayName:l.trim(),role:"admin"})),y("/admin/dashboard"))}catch(x){r(x.message||"Failed to update display name. Please try again.")}finally{c(!1)}};return d?e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("button",{className:"back-button",onClick:()=>y("/"),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back to Home"]}),e.jsxs("div",{className:"admin-login-card",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:"Set Your Display Name"}),e.jsx("p",{children:"Please enter your display name to continue"})]}),i&&e.jsx("div",{className:"error-message",children:i}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"displayName",children:"Display Name"}),e.jsx("input",{type:"text",id:"displayName",value:l,onChange:C=>p(C.target.value),placeholder:"Enter your display name",required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",disabled:o,children:o?"Saving...":"Continue"})]})]})]}):e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("button",{className:"back-button",onClick:()=>y("/"),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back to Home"]}),e.jsxs("div",{className:"admin-login-card",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:"Admin Login"}),e.jsx("p",{children:"Sign in to access the admin dashboard"})]}),i&&e.jsx("div",{className:"error-message",children:i}),e.jsxs("form",{onSubmit:v,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:C=>s(C.target.value),placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:a,onChange:C=>n(C.target.value),placeholder:"Enter your password",required:!0})]}),e.jsx("button",{type:"submit",className:"login-button",disabled:o,children:o?"Signing in...":"Sign In"})]})]})]})},mw=async(t,s={})=>{try{const a=ie(J(),"admins",t.uid);await wt(a,{email:t.email,role:"admin",displayName:t.displayName||"",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...s},{merge:!0})}catch(a){throw console.error("Error creating admin entry:",a),a}},pw=async(t,s)=>{try{const n=(await Qc(we,t,s)).user;return await mw(n),n}catch(a){throw console.error("Error creating admin user:",a),a}},gw=()=>{const[t,s]=h.useState(""),[a,n]=h.useState(""),[i,r]=h.useState(""),[o,c]=h.useState(""),[d,u]=h.useState(""),[l,p]=h.useState(!1),g=async b=>{if(b.preventDefault(),c(""),u(""),p(!0),a!==i){c("Passwords do not match"),p(!1);return}if(a.length<6){c("Password must be at least 6 characters long"),p(!1);return}try{await pw(t,a),u("Admin user created successfully! You can now log in."),s(""),n(""),r("")}catch(y){console.error("Error creating admin:",y),y.code==="auth/email-already-in-use"?c("This email is already registered"):c(y.message||"Failed to create admin user")}finally{p(!1)}};return e.jsx("div",{className:"admin-setup-container",children:e.jsxs("div",{className:"admin-setup-card",children:[e.jsx("h1",{children:"Create Admin User"}),e.jsx("p",{children:"Set up your first admin account"}),o&&e.jsx("div",{className:"error-message",children:o}),d&&e.jsx("div",{className:"success-message",children:d}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:b=>s(b.target.value),placeholder:"Enter admin email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:a,onChange:b=>n(b.target.value),placeholder:"Enter password",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:i,onChange:b=>r(b.target.value),placeholder:"Confirm password",required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Creating Admin..."]}):"Create Admin User"})]})]})})},fw=()=>{const t=tt(),{currentUser:s,loading:a}=Rt(),[n,i]=h.useState("initializing");h.useEffect(()=>{if(console.log("üîç AdminDashboardTest: Component mounted"),console.log("üîç AdminDashboardTest: currentUser:",s),console.log("üîç AdminDashboardTest: authLoading:",a),a){i("auth-loading");return}if(!s){i("no-user");return}localStorage.getItem("adminUser")?(console.log("üîç AdminDashboardTest: Found admin user in localStorage"),i("admin-found")):(console.log("üîç AdminDashboardTest: No admin user found"),i("not-admin"))},[s,a]);const r=()=>{t("/admin/login")},o=()=>{window.location.reload()},c=()=>{switch(n){case"initializing":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Initializing..."}),e.jsx("p",{children:"Setting up test environment"})]});case"auth-loading":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Authentication Loading"}),e.jsx("p",{children:"Please wait while we check your authentication status..."}),e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"20px auto"}})]});case"no-user":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"No User Found"}),e.jsx("p",{children:"You need to be logged in to access the admin dashboard."}),e.jsx("button",{onClick:r,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Go to Login"})]});case"admin-found":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Admin Access Confirmed"}),e.jsx("p",{children:"You are logged in as an admin. The dashboard should work properly."}),e.jsxs("div",{style:{backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",padding:"15px",margin:"20px 0",color:"#155724"},children:[e.jsx("strong",{children:"Status:"})," Ready to load full dashboard"]}),e.jsx("button",{onClick:o,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Try Full Dashboard"})]});case"not-admin":return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You are logged in but do not have admin privileges."}),e.jsx("button",{onClick:r,style:{padding:"10px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Go to Login"})]});default:return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Unknown State"}),e.jsxs("p",{children:["Current state: ",n]}),e.jsx("button",{onClick:o,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]})}};return e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Arial, sans-serif"},children:[e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#007bff",color:"white",padding:"20px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Admin Dashboard Test"}),e.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Debugging the white screen issue"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"15px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:[e.jsx("strong",{children:"Debug Info:"}),e.jsx("br",{}),"Auth Loading: ",a?"Yes":"No",e.jsx("br",{}),"Current User: ",s?"Yes":"No",e.jsx("br",{}),"Test State: ",n,e.jsx("br",{}),"Timestamp: ",new Date().toLocaleString()]}),c()]})]})}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},xw=()=>{const{currentUser:t,authLoading:s}=Rt(),[a,n]=h.useState(!0),[i,r]=h.useState(null),[o,c]=h.useState(null),[d,u]=h.useState([]),[l,p]=h.useState([]),[g,b]=h.useState([]),[y,f]=h.useState({}),[v,j]=h.useState([]),[C,x]=h.useState([]),N=async()=>{if(!s){if(n(!0),r(null),!t){r("No user logged in"),n(!1);return}try{const U=ie(J(),"super-admins",t.uid),w=await Te(U);if(w.exists()){const P=w.data();console.log("üîç useSaasAdminData: Found super admin in Firestore:",P);const L={uid:t.uid,email:t.email,role:"super-admin",...P};c(L),n(!1);return}const T=await Te(ie(J(),"admins",t.uid));if(!T.exists()){r("Admin access not found"),n(!1);return}const W=T.data();if(W.role!=="super-admin"){r("Super admin access required"),n(!1);return}c({id:t.uid,...W})}catch(U){console.error("Auth check error:",U),r("Failed to verify admin access"),n(!1)}}},R=async U=>{if(!o){console.log("‚ö†Ô∏è No admin user found, skipping data load");return}try{console.log("üîÑ Starting data load process..."),n(!0),r(null);const w=J(),[T,W,P,L]=await Promise.all([ue(ne(w,"companies")).catch(async M=>(console.log("‚ö†Ô∏è Error loading companies with orderBy, trying without:",M.message),await ue(ne(w,"companies")))),ue(ne(w,"platforms")).catch(async M=>(console.log("‚ö†Ô∏è Error loading platforms with orderBy, trying without:",M.message),await ue(ne(w,"platforms")))),ue(ne(w,"users")).catch(async M=>(console.log("‚ö†Ô∏è Error loading users with orderBy, trying without:",M.message),await ue(ne(w,"users")))),ue(ne(w,"company-registration-requests")).catch(async M=>(console.log("‚ö†Ô∏è Error loading registration requests:",M.message),{docs:[]}))]),q=T.docs.map(M=>{const F=M.data(),X={id:M.id,...F,createdAt:F.createdAt,updatedAt:F.updatedAt||F.createdAt,userCount:0,adminCount:0,status:F.status||"active"};return console.log("üîç Loaded company:",X.name,"Status:",X.status,"Original status:",F.status),X});u(q),console.log("‚úÖ Loaded",q.length,"companies");const m=W.docs.map(M=>{const F=M.data();let X=F.features;if(X){if(Array.isArray(X)){const oe={};X.forEach(ae=>{oe[ae]=!0}),X=oe}}else X={"User Management":!0,"Content Library":!0,"Progress Tracking":!0,"Analytics Dashboard":!0,"Mobile Responsive":!0,"Custom Branding":!0,"Email Notifications":!0,"API Access":!0};return{id:M.id,...F,features:X}});p(m),console.log("‚úÖ Loaded",m.length,"platforms");const D=L.docs.map(M=>{const F=M.data();return{id:M.id,...F,createdAt:F.createdAt?.toDate?.()||F.createdAt||new Date,updatedAt:F.updatedAt?.toDate?.()||F.updatedAt||new Date}});x(D),console.log("‚úÖ Loaded",D.length,"registration requests");const S=P.docs.map(M=>({id:M.id,...M.data()}));b(S),console.log("‚úÖ Loaded",S.length,"users"),await E(q),await z(),console.log("üéâ Data loading completed successfully")}catch(w){console.error("‚ùå Critical error loading data:",w),r(`Failed to load data: ${w.message}`)}finally{n(!1)}},E=async U=>{try{console.log("üîÑ Loading company admins for",U.length,"companies"),console.log("Companies data:",U.map(D=>({id:D.id,name:D.name})));const w={},T=J(),W=await ue(ne(T,"super-admins")),P=new Set(W.docs.map(D=>D.id));console.log(`üîç Found ${P.size} super admins to filter out`),console.log("üîç Checking database collections...");const L=U.map(async D=>{try{console.log(`üîÑ Loading users for company: ${D.name} (${D.id})`),console.log("üìã Company object:",D);const S=async(Z,he)=>{console.log(`üîç Querying ${Z} for company ID: "${he}"`);try{const pe=await ue(je(ne(T,Z),Ke("companyId","==",he)));if(console.log(`üìä Found ${pe.docs.length} documents in ${Z}`),pe.docs.length>0)return pe.docs.forEach((De,Ce)=>{const ze=De.data();console.log(`  ${Ce+1}. ${ze.name||ze.email} (${ze.role||"No Role"})`)}),pe}catch(pe){console.log(`‚ö†Ô∏è Query failed for ${Z}:`,pe.message)}return console.log(`‚ùå No documents found in ${Z} for company ${he}`),{docs:[]}},[M,F,X]=await Promise.all([S("admins",D.id),S("company-admins",D.id),S("users",D.id)]);console.log(`üìä Found ${M.docs.length} regular admins, ${F.docs.length} company admins, and ${X.docs.length} users for ${D.name}`);const oe=M.docs.map(Z=>{const he=Z.data();return{id:Z.id,...he,type:"admin",displayRole:"Admin"}}),ae=F.docs.map(Z=>{const he=Z.data();return{id:Z.id,...he,type:"admin",displayRole:"Company Admin"}}),H=X.docs.map(Z=>{const he=Z.data();return{id:Z.id,...he,type:"user",displayRole:he.role||"User"}}),se=[...oe,...ae,...H].filter(Z=>{const he=Z.uid||Z.id,pe=P.has(he);return pe&&console.log(`üö´ Filtering out super admin: ${Z.email||Z.name} (${he})`),!pe}).sort((Z,he)=>{const pe=Z.createdAt?.toDate?Z.createdAt.toDate():new Date(Z.createdAt||0);return(he.createdAt?.toDate?he.createdAt.toDate():new Date(he.createdAt||0))-pe});return console.log(`‚úÖ Total users for ${D.name}: ${se.length} (super admins filtered out)`),{companyId:D.id,users:se}}catch(S){return console.error(`‚ùå Error loading users for company ${D.id} (${D.name}):`,S),{companyId:D.id,users:[]}}});(await Promise.all(L)).forEach(({companyId:D,users:S})=>{w[D]=S}),f(w);const m=Object.values(w).reduce((D,S)=>D+S.length,0);console.log("‚úÖ Company admins loaded successfully:",Object.keys(w).length,"companies,",m,"total users"),console.log("üìä Final adminsData structure:",Object.entries(w).map(([D,S])=>({companyId:D,userCount:S.length,adminCount:S.filter(M=>M.type==="admin").length})))}catch(w){console.error("‚ùå Error loading company admins:",w),r("Failed to load company administrators")}},z=async()=>{try{console.log("üîÑ Loading deleted companies...");const U=je(ne(J(),"deletedCompanies"),Ge("deletedAt","desc")),T=(await ue(U)).docs.map(W=>({id:W.id,...W.data()}));j(T),console.log(`‚úÖ Loaded ${T.length} deleted companies`)}catch(U){U.code==="permission-denied"||U.message.includes("Missing or insufficient permissions")?(console.warn("‚ö†Ô∏è No access to deleted companies - user may not be super admin"),j([])):console.error("‚ùå Error loading deleted companies:",U)}},k=async U=>{try{const w=await Qe(ne(J(),"companies"),{...U,createdAt:Ie(),status:"active"});return await R(),w.id}catch(w){throw console.error("Error creating company:",w),w}},V=async U=>{try{const w=await Qe(ne(J(),"platforms"),{...U,createdAt:Ie()});return await R(),w.id}catch(w){throw console.error("Error creating platform:",w),w}},$=async(U,w)=>{try{console.log("üîç Updating company:",U,"with data:",w),console.log("üîç Status being saved:",w.status),await _e(ie(J(),"companies",U),w),console.log("‚úÖ Company updated successfully"),await R()}catch(T){throw console.error("Error updating company:",T),T}},A=async(U,w)=>{try{await _e(ie(J(),"platforms",U),w),await R()}catch(T){throw console.error("Error updating platform:",T),T}},_=async U=>{try{await O(U),await ot(ie(J(),"companies",U)),await R()}catch(w){throw console.error("Error deleting company:",w),w}},O=async U=>{try{const w=d.find(W=>W.id===U);if(!w)return;const T={...w,deletedAt:Ie(),originalId:U};await Qe(ne(J(),"deletedCompanies"),T)}catch(w){console.error("Error backing up company data:",w)}},Y=async U=>{try{const w=await Te(ie(J(),"deletedCompanies",U));if(!w.exists())throw new Error("Backup not found");const T=w.data(),{originalId:W,deletedAt:P,...L}=T,q=await Qe(ne(J(),"companies"),{...L,createdAt:Ie(),status:"active"});return await ot(ie(J(),"deletedCompanies",U)),await R(),q.id}catch(w){throw console.error("Error restoring company:",w),w}};return h.useEffect(()=>{N()},[t,s]),h.useEffect(()=>{o&&R()},[o]),{loading:a,error:i,adminUser:o,companies:d,platforms:l,users:g,companyAdmins:y,deletedCompanies:v,registrationRequests:C,createCompany:k,createPlatform:V,updateCompany:$,updatePlatform:A,deleteCompany:_,restoreCompany:Y,loadData:R}},vw=()=>{const[t,s]=h.useState(()=>{try{return localStorage.getItem("saas-admin-active-tab")||"dashboard"}catch(xe){return console.warn("Could not read saas-admin-active-tab from localStorage:",xe),"dashboard"}}),a=xe=>{s(xe);try{localStorage.setItem("saas-admin-active-tab",xe)}catch(Ee){console.warn("Could not persist saas-admin-active-tab to localStorage:",Ee)}},[n,i]=h.useState(!1),[r,o]=h.useState(null),[c,d]=h.useState(new Set),[u,l]=h.useState(!1),[p,g]=h.useState(!1),[b,y]=h.useState(!1),[f,v]=h.useState(!1),[j,C]=h.useState(!1),[x,N]=h.useState(!1),[R,E]=h.useState(null),[z,k]=h.useState(null),[V,$]=h.useState(null),[A,_]=h.useState(null),[O,Y]=h.useState(""),[U,w]=h.useState("pages"),[T,W]=h.useState("dashboard"),[P,L]=h.useState(null),[q,m]=h.useState(!1),[D,S]=h.useState({email:"",name:"",password:"",role:"user",companyId:"",isActive:!0,permissions:[]}),[M,F]=h.useState({name:"",email:"",industry:"",plan:"starter",status:"active",maintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."}),[X,oe]=h.useState(!1),[ae,H]=h.useState(()=>{try{const xe=localStorage.getItem("impersonation");return!!(xe?JSON.parse(xe):null)?.enabled}catch{return!1}}),[se,Z]=h.useState(()=>{try{const xe=localStorage.getItem("impersonation");return(xe?JSON.parse(xe):null)?.companyId||""}catch{return""}});return{activeTab:t,sidebarCollapsed:n,selectedCompany:r,expandedCompanies:c,showCreateCompany:u,showCreatePlatform:p,showEditCompany:b,showEditPlatform:f,showDeleteConfirm:j,showNewModal:x,editingCompany:R,editingPlatform:z,editingAdmin:V,itemToDelete:A,modalType:O,activePageBuilderTab:U,selectedPage:T,selectedSection:P,showLivePreview:q,formData:D,editCompanyForm:M,showPassword:X,impersonateMode:ae,impersonateCompanyId:se,setActiveTab:a,setSidebarCollapsed:i,setSelectedCompany:o,setExpandedCompanies:d,setShowCreateCompany:l,setShowCreatePlatform:g,setShowEditCompany:y,setShowEditPlatform:v,setShowDeleteConfirm:C,setShowNewModal:N,setEditingCompany:E,setEditingPlatform:k,setEditingAdmin:$,setItemToDelete:_,setModalType:Y,setActivePageBuilderTab:w,setSelectedPage:W,setSelectedSection:L,setShowLivePreview:m,setFormData:S,setEditCompanyForm:F,setShowPassword:oe,setImpersonateMode:H,setImpersonateCompanyId:Z,toggleCompanyExpansion:xe=>{const Ee=new Set(c);Ee.has(xe)?Ee.delete(xe):Ee.add(xe),d(Ee)},openDeleteConfirm:(xe,Ee)=>{_({item:xe,type:Ee}),C(!0),document.body.style.overflow="hidden"},closeDeleteConfirm:()=>{_(null),C(!1),document.body.style.overflow="auto"},openCreateUser:()=>{Y("create-user"),S({email:"",name:"",password:"",role:"user",companyId:"",isActive:!0,permissions:[]}),N(!0),document.body.style.overflow="hidden"},openEditAdmin:xe=>{Y("edit-admin"),$(xe),S({email:xe.email||"",name:xe.name||"",password:"",role:xe.role||"admin",companyId:xe.companyId||"",isActive:xe.isActive!==!1,permissions:xe.permissions||[]}),N(!0),document.body.style.overflow="hidden"},closeNewModal:()=>{N(!1),Y(""),$(null),S({email:"",name:"",password:"",role:"user",companyId:"",isActive:!0,permissions:[]}),document.body.style.overflow="auto"},openEditCompany:xe=>{console.log("üîç Opening edit company modal for:",xe),console.log("üîç Company status:",xe.status),E(xe),F({name:xe.name||"",email:xe.email||"",industry:xe.industry||"",plan:xe.plan||"starter",status:xe.status||"active",maintenanceMode:xe.maintenanceMode||!1,maintenanceMessage:xe.maintenanceMessage||"We are currently performing scheduled maintenance. Please check back soon."}),y(!0),document.body.style.overflow="hidden"},closeEditCompany:()=>{y(!1),E(null),F({name:"",email:"",industry:"",plan:"starter",status:"active",maintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."}),document.body.style.overflow="auto"},openEditPlatform:xe=>{k(xe),v(!0),document.body.style.overflow="hidden"},closeEditPlatform:()=>{v(!1),k(null),w("pages"),W("dashboard"),L(null),m(!1),document.body.style.overflow="auto"},toggleImpersonation:()=>{const xe=!ae;if(console.log("üîÑ Toggling impersonation:",{currentMode:ae,newMode:xe,companyId:se}),H(xe),xe&&se){const Ee={enabled:!0,companyId:se};localStorage.setItem("impersonation",JSON.stringify(Ee)),console.log("‚úÖ Impersonation enabled:",Ee)}else localStorage.removeItem("impersonation"),console.log("‚ùå Impersonation disabled")}}},yw=async t=>{try{await navigator.clipboard.writeText(t)}catch{console.warn("Copy failed, falling back to prompt"),prompt("Copy this URL:",t)}},jw=t=>{const s=new Date,a=t.toDate?t.toDate():new Date(t),n=s-a,i=Math.floor(n/(1e3*60*60)),r=Math.floor(i/24);return i<1?"Just now":i<24?`${i} hour${i>1?"s":""} ago`:r<7?`${r} day${r>1?"s":""} ago`:a.toLocaleDateString()},bw=t=>t.reduce((s,a)=>{const n=a.industry||"Other";return s[n]=(s[n]||0)+1,s},{}),ww=t=>t.reduce((s,a)=>{const n=a.plan||"starter";return s[n]=(s[n]||0)+1,s},{}),Ah=(t=null)=>{const s={name:"",companyId:"",domain:"",description:"",theme:"default",features:{rebuttals:!0,dispositions:!0,customerService:!0,faq:!0,scheduling:!0,analytics:!0,notifications:!0,gamification:!1,certificates:!1,progressTracking:!0,socialLearning:!1,mobileApp:!1},branding:{logo:"",primaryColor:"#3B82F6",secondaryColor:"#1E40AF",accentColor:"#F59E0B",fontFamily:"Inter",customCSS:""},pages:{home:{title:"Home",slug:"home",layout:"default",content:{hero:{title:"Welcome to Our Training Platform",subtitle:"Master your skills with our comprehensive training programs",backgroundImage:"",ctaText:"Get Started",ctaLink:"/training"},sections:[{type:"features",title:"Key Features",content:"Our platform offers comprehensive training solutions"},{type:"testimonials",title:"What Our Users Say",content:"Real feedback from our training participants"}]},sidebar:{enabled:!0,position:"left",widgets:["navigation","progress","quick-actions"]}}},navigation:{main:[{label:"Home",url:"/",icon:"üè†"},{label:"Training",url:"/training",icon:"üéì"},{label:"Rebuttals",url:"/rebuttals",icon:"üí¨"},{label:"FAQ",url:"/faq",icon:"‚ùì"},{label:"Contact",url:"/contact",icon:"üìû"}],footer:[{label:"Privacy Policy",url:"/privacy"},{label:"Terms of Service",url:"/terms"},{label:"Support",url:"/support"}]},settings:{allowRegistration:!0,requireEmailVerification:!1,enableNotifications:!0,enableAnalytics:!0,enableMaintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."}};return t?{...s,...t,features:{...s.features,...t.features},branding:{...s.branding,...t.branding},pages:{...s.pages,...t.pages},navigation:{...s.navigation,...t.navigation},settings:{...s.settings,...t.settings}}:s},Nw=({companies:t,platforms:s,users:a,adminUser:n})=>{const[i,r]=h.useState(new Date),[o,c]=h.useState("companies");bw(t),ww(t),h.useEffect(()=>{const v=setInterval(()=>{r(new Date)},6e4);return()=>clearInterval(v)},[]);const d=t.reduce((v,j)=>v+({starter:29,professional:99,enterprise:299}[j.plan]||99),0),u=t.filter(v=>v.status==="active").length;t.filter(v=>v.status==="inactive").length;const l=t.length>0?Math.round(a.length/t.length):0,p=new Date;p.setDate(p.getDate()-30),t.filter(v=>(v.createdAt?.toDate?v.createdAt.toDate():new Date(v.createdAt))>p).length,a.filter(v=>(v.createdAt?.toDate?v.createdAt.toDate():new Date(v.createdAt))>p).length;const g=t.filter(v=>v.createdAt).sort((v,j)=>{const C=v.createdAt.toDate?v.createdAt.toDate():new Date(v.createdAt);return(j.createdAt.toDate?j.createdAt.toDate():new Date(j.createdAt))-C}).slice(0,5),b=a.filter(v=>v.createdAt).sort((v,j)=>{const C=v.createdAt.toDate?v.createdAt.toDate():new Date(v.createdAt);return(j.createdAt.toDate?j.createdAt.toDate():new Date(j.createdAt))-C}).slice(0,3),y=[...g.map(v=>({type:"company",title:`New company registered: ${v.name}`,time:v.createdAt,icon:"üè¢",status:v.status})),...b.map(v=>({type:"user",title:`New user signup: ${v.email||v.name||"Unknown"}`,time:v.createdAt,icon:"üë•",status:v.isActive?"active":"inactive"}))].sort((v,j)=>{const C=v.time.toDate?v.time.toDate():new Date(v.time);return(j.time.toDate?j.time.toDate():new Date(j.time))-C}).slice(0,8),f=t.map(v=>({...v,userCount:a.filter(j=>j.companyId===v.id).length})).sort((v,j)=>j.userCount-v.userCount).slice(0,5);return e.jsxs("div",{className:"saas-content",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{className:"dashboard-title",children:"Dashboard"}),e.jsx("p",{className:"dashboard-subtitle",children:"SaaS Platform Overview"})]}),e.jsx("div",{className:"header-right",children:e.jsxs("div",{className:"status-indicator",children:[e.jsx("div",{className:"status-dot"}),e.jsx("span",{children:"Live"})]})})]})}),e.jsxs("div",{className:"main-dashboard",children:[e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Companies"}),e.jsx("div",{className:"metric-icon",children:"üè¢"})]}),e.jsx("div",{className:"metric-value",children:t.length}),e.jsxs("div",{className:"metric-detail",children:[u," active"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Platforms"}),e.jsx("div",{className:"metric-icon",children:"üéØ"})]}),e.jsx("div",{className:"metric-value",children:s.length}),e.jsx("div",{className:"metric-detail",children:"All deployed"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Users"}),e.jsx("div",{className:"metric-icon",children:"üë•"})]}),e.jsx("div",{className:"metric-value",children:a.length}),e.jsxs("div",{className:"metric-detail",children:["Avg ",l,"/company"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h3",{children:"Revenue"}),e.jsx("div",{className:"metric-icon",children:"üí∞"})]}),e.jsxs("div",{className:"metric-value",children:["$",d.toLocaleString()]}),e.jsx("div",{className:"metric-detail",children:"Monthly MRR"})]})]}),e.jsxs("div",{className:"content-sections",children:[e.jsxs("div",{className:"content-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h3",{children:"Recent Activity"})}),e.jsx("div",{className:"activity-list",children:y.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No recent activity"})}):y.slice(0,4).map((v,j)=>e.jsxs("div",{className:"activity-item",children:[e.jsx("div",{className:"activity-icon",children:v.icon}),e.jsxs("div",{className:"activity-content",children:[e.jsx("div",{className:"activity-title",children:v.title}),e.jsx("div",{className:"activity-time",children:jw(v.time)})]})]},j))})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h3",{children:"Top Companies"})}),e.jsx("div",{className:"companies-list",children:f.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No companies yet"})}):f.slice(0,3).map((v,j)=>e.jsxs("div",{className:"company-item",children:[e.jsxs("div",{className:"company-rank",children:["#",j+1]}),e.jsxs("div",{className:"company-info",children:[e.jsx("div",{className:"company-name",children:v.name}),e.jsxs("div",{className:"company-users",children:[v.userCount," users"]})]}),e.jsx("div",{className:`company-status ${v.status}`,children:v.status})]},v.id))})]})]})]})]})},Sw=({companies:t,companyAdmins:s,expandedCompanies:a,onToggleExpansion:n,onViewPlatforms:i,onEditCompany:r,onToggleStatus:o,onDeleteCompany:c,onCreateCompany:d})=>{const[u,l]=h.useState({}),p=(g,b)=>{const y=`${g}-${b}`;console.log("Toggling expansion for:",y),l(f=>{const v={...f,[y]:!f[y]};return console.log("New expanded state:",v),v})};return e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Companies"}),e.jsx("button",{className:"create-button",onClick:()=>{d(),document.body.style.overflow="hidden"},children:"+ Create Company"})]}),e.jsx("div",{className:"companies-grid",children:t.map(g=>e.jsxs("div",{className:"company-card",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("h3",{children:g.name}),e.jsx("span",{className:`status-badge ${g.status}`,children:g.status})]}),e.jsxs("div",{className:"company-details",children:[e.jsxs("div",{className:"company-info-grid",children:[e.jsxs("div",{className:`info-card clickable-info ${u[`${g.id}-email`]?"expanded":""}`,onClick:()=>p(g.id,"email"),children:[e.jsx("div",{className:"info-icon",children:"üìß"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Contact"}),e.jsx("div",{className:"info-value",children:g.email||"Not specified"}),u[`${g.id}-email`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Full Email:"})," ",g.email||"Not specified"]})})]}),e.jsx("div",{className:"expand-icon",children:"üîç"})]}),e.jsxs("div",{className:`info-card clickable-info ${u[`${g.id}-industry`]?"expanded":""}`,onClick:()=>p(g.id,"industry"),children:[e.jsx("div",{className:"info-icon",children:"üè¢"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Sector"}),e.jsx("div",{className:"info-value",children:g.industry||"General"}),u[`${g.id}-industry`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Industry Details:"})," ",g.industry||"General"]})})]}),e.jsx("div",{className:"expand-icon",children:"üîç"})]}),e.jsxs("div",{className:`info-card clickable-info ${u[`${g.id}-plan`]?"expanded":""}`,onClick:()=>p(g.id,"plan"),children:[e.jsx("div",{className:"info-icon",children:"üíé"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Tier"}),e.jsx("div",{className:"info-value",children:g.plan||"Standard"}),u[`${g.id}-plan`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Plan Details:"})," ",g.plan||"Standard"]})})]}),e.jsx("div",{className:"expand-icon",children:"üîç"})]}),e.jsxs("div",{className:`info-card clickable-info ${u[`${g.id}-date`]?"expanded":""}`,onClick:()=>p(g.id,"date"),children:[e.jsx("div",{className:"info-icon",children:"üìÖ"}),e.jsxs("div",{className:"info-content",children:[e.jsx("div",{className:"info-label",children:"Joined"}),e.jsx("div",{className:"info-value",children:g.createdAt?.toDate?.()?.toLocaleDateString()||"Recently"}),u[`${g.id}-date`]&&e.jsx("div",{className:"info-expanded",children:e.jsxs("div",{className:"expanded-content",children:[e.jsx("strong",{children:"Join Date:"})," ",g.createdAt?.toDate?.()?.toLocaleDateString()||"Recently",e.jsx("br",{}),e.jsx("strong",{children:"Account Age:"})," ",g.createdAt?Math.floor((new Date-g.createdAt.toDate())/(1e3*60*60*24))+" days":"Unknown"]})})]}),e.jsx("div",{className:"expand-icon",children:"üîç"})]})]}),e.jsxs("div",{className:"url-section",children:[e.jsx("span",{className:"detail-label",children:"Public URL"}),e.jsx("div",{className:"url-container",children:(()=>{const b=typeof window<"u"?window.location.origin:"",y=g.slug||g.id,f=g.slug==="long-home"||g.id==="long-home"?`${b}/app`:`${b}/company/${y}`;return e.jsxs(e.Fragment,{children:[e.jsx("input",{value:f,readOnly:!0,className:"url-input",title:f}),e.jsx("button",{className:"action-button primary",onClick:()=>yw(f),children:"üìã Copy"}),e.jsx("button",{className:"action-button secondary",onClick:()=>{window.open(f,"_blank")},children:"üöÄ Visit Training"})]})})()}),e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("span",{className:"detail-label",children:"Share Link (for workers)"}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsx(wo,{companyId:g.id})})]})]})]}),e.jsxs("div",{className:"company-actions",children:[e.jsx("button",{className:"action-button primary",onClick:()=>i(g),children:"üéØ View Platforms"}),e.jsx("button",{className:"action-button secondary",onClick:()=>r(g),children:"‚úèÔ∏è Edit"}),e.jsx("button",{className:"action-button warning",onClick:()=>o(g),children:g.status==="active"?"‚è∏Ô∏è Disable":"‚ñ∂Ô∏è Enable"}),e.jsx("button",{className:"action-button danger",onClick:()=>c(g,"company"),children:"üóëÔ∏è Delete"})]})]},g.id))})]})},Cw=({platforms:t,companies:s,selectedCompany:a,onCreatePlatform:n,onEditPlatform:i,onDeletePlatform:r})=>{const o=a?t.filter(c=>c.companyId===a.id):t;return e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:a?`${a.name} - Platforms`:"All Platforms"}),e.jsx("button",{className:"create-button",onClick:()=>{n(),document.body.style.overflow="hidden"},children:"+ Create Platform"})]}),e.jsx("div",{className:"platforms-grid",children:o.map(c=>{const d=s.find(u=>u.id===c.companyId);return e.jsxs("div",{className:"platform-card",children:[e.jsxs("div",{className:"platform-header",children:[e.jsx("h3",{children:c.name}),e.jsx("span",{className:`status-badge ${c.status||"active"}`,children:c.status||"active"})]}),e.jsxs("div",{className:"platform-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",d?.name||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Domain:"})," ",e.jsx("span",{className:"domain-text",children:c.domain||"Not set"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Theme:"})," ",c.theme||"default"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",c.createdAt?.toDate?.()?.toLocaleDateString()||"N/A"]}),e.jsxs("div",{className:"features-container",children:[e.jsx("div",{className:"features-label",children:"Features:"}),e.jsx("div",{className:"features-list",children:(()=>{let u=[];return c.features&&(Array.isArray(c.features)?u=c.features.map(l=>[l,!0]):typeof c.features=="object"&&(u=Object.entries(c.features))),u.length>0?u.map(([l,p])=>e.jsxs("span",{className:`feature-item ${p?"enabled":"disabled"}`,children:[l," ",p?"‚úì":"‚úó"]},l)):e.jsx("span",{className:"feature-item disabled",children:"No features configured"})})()})]})]}),e.jsxs("div",{className:"platform-actions",children:[e.jsx("button",{className:"action-button primary",onClick:()=>i(c),children:"Edit Platform"}),e.jsx("button",{className:"action-button danger",onClick:()=>r(c,"platform"),children:"Delete"})]})]},c.id)})}),o.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üéØ"}),e.jsx("h3",{children:"No Platforms Found"}),e.jsx("p",{children:a?`${a.name} doesn't have any platforms yet.`:"No platforms have been created yet."}),e.jsx("button",{className:"create-button",onClick:()=>{n(),document.body.style.overflow="hidden"},children:"Create First Platform"})]})]})},kw=(t=[],s={})=>{const a={totalCompanies:t.length,activeCompanies:t.filter(n=>n?.status==="active").length,inactiveCompanies:t.filter(n=>n?.status==="inactive").length,totalUsers:0,totalAdmins:0,companiesWithNoUsers:0,averageUsersPerCompany:0};return s&&typeof s=="object"?(Object.values(s).forEach(n=>{Array.isArray(n)&&(a.totalUsers+=n.length,a.totalAdmins+=n.filter(i=>i?.type==="admin").length)}),a.companiesWithNoUsers=t.filter(n=>!s[n?.id]||!Array.isArray(s[n.id])||s[n.id].length===0).length):a.companiesWithNoUsers=t.length,a.averageUsersPerCompany=a.totalCompanies>0?Math.round(a.totalUsers/a.totalCompanies):0,a},Aw=(t=[],s={},a="")=>{if(!a||a.trim()==="")return t;const n=a.toLowerCase().trim();return t.filter(i=>{if(!i)return!1;const r=i.name?.toLowerCase().includes(n)||i.email?.toLowerCase().includes(n)||i.industry?.toLowerCase().includes(n),o=s&&s[i.id]?s[i.id]:[],c=Array.isArray(o)&&o.some(d=>d?.name?.toLowerCase().includes(n)||d?.email?.toLowerCase().includes(n)||d?.displayRole?.toLowerCase().includes(n));return r||c})},jr=(t,s={})=>{if(!t)return"N/A";const a=t.toDate?t.toDate():new Date(t),n={year:"numeric",month:"short",day:"numeric",...s};return a.toLocaleDateString("en-US",n)},_c=t=>!t||typeof t!="string"?"?":t.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2),Ei=t=>{const s="status-badge";switch(t?.toLowerCase()){case"active":return`${s} active`;case"inactive":return`${s} inactive`;case"pending":return`${s} pending`;default:return s}},Hc=(t,s)=>{const a="role-badge";return t==="admin"?`${a} admin`:s==="super-admin"?`${a} super-admin`:`${a} user`},Tw=({companies:t=[],companyAdmins:s={},onCreateUser:a,onEditAdmin:n,onDeleteUser:i})=>{const{getUserType:r}=Rt(),[o,c]=h.useState("hierarchical"),[d,u]=h.useState(new Set),[l,p]=h.useState(""),g=()=>{t&&Array.isArray(t)&&u(new Set(t.map(x=>x?.id).filter(Boolean)))},b=()=>{u(new Set)},y=x=>{const N=new Set(d);N.has(x)?N.delete(x):N.add(x),u(N)},f=h.useMemo(()=>kw(t,s),[t,s]),v=h.useMemo(()=>Aw(t,s,l),[t,s,l]),j=()=>e.jsx("div",{className:"hierarchical-users",children:v.map(x=>{const N=s[x.id]||[],R=d.has(x.id),E=N.filter(k=>k.type==="admin").length,z=N.filter(k=>k.type==="user").length;return e.jsxs("div",{className:"company-section",children:[e.jsxs("div",{className:"company-header",onClick:()=>y(x.id),children:[e.jsxs("div",{className:"company-info",children:[e.jsx("span",{className:"expand-icon",children:R?"üîΩ":"‚ñ∂Ô∏è"}),e.jsxs("div",{className:"company-details",children:[e.jsx("h3",{className:"company-name",children:x.name}),e.jsxs("div",{className:"company-stats",children:[e.jsxs("span",{className:"user-count",children:["üë• ",N.length," users (",E," admins, ",z," users)"]}),e.jsx("span",{className:Ei(x.status),children:x.status||"active"})]})]})]}),e.jsx("div",{className:"company-actions",children:e.jsxs("span",{className:"total-users",children:["Total: ",N.length]})})]}),R&&e.jsxs("div",{className:"company-users",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"User"}),e.jsx("div",{className:"table-cell",children:"Email"}),e.jsx("div",{className:"table-cell",children:"Role"}),e.jsx("div",{className:"table-cell",children:"Status"}),e.jsx("div",{className:"table-cell",children:"Created"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),N.length>0?N.map(k=>e.jsxs("div",{className:"table-row user-row",children:[e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:`user-avatar ${k.type}`,children:_c(k.name)}),e.jsx("div",{className:"user-details",children:e.jsxs("span",{className:"user-name",children:[k.name||"Unknown User",k.type==="admin"&&e.jsx("span",{className:"admin-badge",children:"üëë"})]})})]})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"user-email",children:k.email})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:Hc(k.type,k.role),children:k.displayRole})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:Ei(k.status||"active"),children:k.status||"active"})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"date-text",children:jr(k.createdAt)})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-button secondary compact",onClick:()=>n&&n(k),title:"Edit User",children:"‚úèÔ∏è"}),(()=>{const V=r?r():null,$=V?V.role:null;return!(k.type==="admin")||$==="super-admin"?e.jsx("button",{className:"action-button danger compact",onClick:()=>i&&i(k),title:"Delete User",children:"üóëÔ∏è"}):e.jsx("button",{className:"action-button danger compact disabled",disabled:!0,title:"Cannot delete admin users","aria-disabled":"true",children:"üóëÔ∏è"})})()]})})]},k.id)):e.jsx("div",{className:"table-row",children:e.jsx("div",{className:"table-cell",style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem"},children:e.jsx("span",{style:{color:"#94a3b8"},children:"No users found for this company"})})})]})]},x.id)})}),C=()=>e.jsxs("div",{className:"users-table-container",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"User"}),e.jsx("div",{className:"table-cell",children:"Company"}),e.jsx("div",{className:"table-cell",children:"Role"}),e.jsx("div",{className:"table-cell",children:"Status"}),e.jsx("div",{className:"table-cell",children:"Created"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),v.flatMap(x=>(s[x.id]||[]).map(N=>e.jsxs("div",{className:"table-row",children:[e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:`user-avatar ${N.type}`,children:_c(N.name)}),e.jsxs("div",{className:"user-details",children:[e.jsxs("span",{className:"user-name",children:[N.name||"Unknown User",N.type==="admin"&&e.jsx("span",{className:"admin-badge",children:"üëë"})]}),e.jsx("span",{className:"user-email",children:N.email})]})]})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"company-name",children:x.name})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:Hc(N.type,N.role),children:N.displayRole})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:Ei(N.status||"active"),children:N.status||"active"})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"date-text",children:jr(N.createdAt)})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-button secondary compact",onClick:()=>n&&n(N),title:"Edit User",children:"‚úèÔ∏è"}),e.jsx("button",{className:"action-button danger compact",onClick:()=>i&&i(N),title:"Delete User",children:"üóëÔ∏è"})]})})]},`${x.id}-${N.id}`)))]});return t?t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üè¢"}),e.jsx("h3",{children:"No Companies Found"}),e.jsx("p",{children:"There are no companies in the system yet."}),e.jsx("button",{className:"create-button",onClick:()=>a&&a(),children:"Create First Company"})]}):e.jsxs("div",{className:"users-management",children:[e.jsxs("div",{className:"content-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Users Management"}),e.jsx("p",{children:"Manage company administrators and users"})]}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search users, companies...",value:l,onChange:x=>p(x.target.value),className:"search-input"})})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{className:`toggle-button ${o==="hierarchical"?"active":""}`,onClick:()=>c("hierarchical"),children:"üìã Hierarchical"}),e.jsx("button",{className:`toggle-button ${o==="table"?"active":""}`,onClick:()=>c("table"),children:"üìä Table"})]}),o==="hierarchical"&&e.jsxs("div",{className:"expand-controls",children:[e.jsx("button",{className:"expand-button",onClick:g,children:"Expand All"}),e.jsx("button",{className:"expand-button",onClick:b,children:"Collapse All"})]}),e.jsx("button",{className:"create-button",onClick:()=>a&&a(),children:"‚ûï Add User"})]})]}),e.jsxs("div",{className:"users-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:f.totalCompanies}),e.jsx("span",{className:"stat-label",children:"Companies"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:f.activeCompanies}),e.jsx("span",{className:"stat-label",children:"Active"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:f.totalUsers}),e.jsx("span",{className:"stat-label",children:"Total Users"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:f.totalAdmins}),e.jsx("span",{className:"stat-label",children:"Admins"})]})]}),o==="hierarchical"?j():C()]}):e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner",children:"‚è≥"}),e.jsx("p",{children:"Loading companies and users..."})]})},Dw=({deletedCompanies:t,onRestoreCompany:s})=>e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Deleted Companies"}),e.jsx("div",{className:"header-info",children:e.jsx("p",{children:"Companies that have been deleted but can be restored from backup"})})]}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üóëÔ∏è"}),e.jsx("h3",{children:"No Deleted Companies"}),e.jsx("p",{children:"No companies have been deleted yet. All deleted companies will appear here with the option to restore them."})]}):e.jsx("div",{className:"deleted-companies-grid",children:t.map(a=>e.jsxs("div",{className:"deleted-company-card",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("h3",{children:a.name}),e.jsx("span",{className:"deleted-badge",children:"Deleted"})]}),e.jsxs("div",{className:"company-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Industry:"})," ",a.industry]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plan:"})," ",a.plan]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Deleted:"})," ",a.deletedAt?.toDate?.()?.toLocaleDateString()||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Original ID:"})," ",a.originalId]})]}),e.jsx("div",{className:"company-actions",children:e.jsx("button",{className:"action-button success",onClick:()=>s(a.id),children:"Restore Company"})})]},a.id))})]}),Pw=({registrationRequests:t=[],onApproveRequest:s,onRejectRequest:a})=>{const[n,i]=h.useState("all"),r=t.filter(l=>n==="all"?!0:l.status===n),o=t.filter(l=>l.status==="pending").length,c=t.filter(l=>l.status==="approved").length,d=t.filter(l=>l.status==="rejected").length,u=l=>{switch(l){case"pending":return"status-badge pending";case"approved":return"status-badge approved";case"rejected":return"status-badge rejected";default:return"status-badge"}};return e.jsxs("div",{className:"saas-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Registration Requests"}),e.jsxs("div",{className:"status-filter-tabs",children:[e.jsxs("button",{className:`status-filter-tab ${n==="all"?"active":""}`,onClick:()=>i("all"),children:["All (",t.length,")"]}),e.jsxs("button",{className:`status-filter-tab ${n==="pending"?"active":""}`,onClick:()=>i("pending"),children:["Pending (",o,")"]}),e.jsxs("button",{className:`status-filter-tab ${n==="approved"?"active":""}`,onClick:()=>i("approved"),children:["Approved (",c,")"]}),e.jsxs("button",{className:`status-filter-tab ${n==="rejected"?"active":""}`,onClick:()=>i("rejected"),children:["Rejected (",d,")"]})]})]}),r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìã"}),e.jsx("h3",{children:"No Registration Requests"}),e.jsx("p",{children:n==="all"?"No registration requests have been submitted yet.":`No ${n} registration requests found.`})]}):e.jsx("div",{className:"registration-requests-grid",children:r.map(l=>e.jsxs("div",{className:"registration-request-card",children:[e.jsxs("div",{className:"request-header",children:[e.jsxs("div",{className:"request-title-section",children:[e.jsx("h3",{children:l.companyName}),e.jsx("span",{className:u(l.status),children:l.status})]}),l.createdAt&&e.jsx("div",{className:"request-date",children:jr(l.createdAt)})]}),e.jsxs("div",{className:"request-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"üë§ Owner/Admin:"}),e.jsx("span",{className:"detail-value",children:l.ownerName})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"üìß Email:"}),e.jsx("span",{className:"detail-value",children:l.email})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"üíé Plan:"}),e.jsx("span",{className:"detail-value capitalize",children:l.plan||"starter"})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"üîó Slug:"}),e.jsx("span",{className:"detail-value code",children:l.slug})]})]}),l.status==="pending"&&e.jsxs("div",{className:"request-actions",children:[e.jsx("button",{className:"action-button approve",onClick:()=>s(l),children:"‚úì Approve"}),e.jsx("button",{className:"action-button reject",onClick:()=>a(l),children:"‚úó Reject"})]}),l.status==="approved"&&e.jsx("div",{className:"request-approved-note",children:"‚úì This request has been approved and the company account has been created."}),l.status==="rejected"&&e.jsx("div",{className:"request-rejected-note",children:"‚úó This request has been rejected."})]},l.id))})]})},Ew=({isOpen:t,onClose:s,title:a,children:n,footer:i,size:r="medium",className:o=""})=>{if(h.useEffect(()=>(t?(document.body.classList.add("modal-open"),document.body.style.overflow="hidden"):(document.body.classList.remove("modal-open"),document.body.style.overflow="unset"),()=>{document.body.classList.remove("modal-open"),document.body.style.overflow="unset"}),[t]),h.useEffect(()=>{const d=u=>{u.key==="Escape"&&t&&s()};return t&&document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[t,s]),!t)return null;const c=()=>{switch(r){case"small":return"universal-modal-small";case"large":return"universal-modal-large";case"extra-large":return"universal-modal-extra-large";default:return"universal-modal-medium"}};return e.jsx("div",{className:"universal-modal-overlay",onClick:s,children:e.jsxs("div",{className:`universal-modal-container ${c()} ${o}`,onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"universal-modal-header",children:[e.jsx("div",{className:"universal-modal-title",children:e.jsx("h2",{children:a})}),e.jsx("button",{className:"universal-modal-close",onClick:s,"aria-label":"Close modal",children:"‚úï"})]}),e.jsx("div",{className:"universal-modal-body",children:n}),i&&e.jsx("div",{className:"universal-modal-footer",children:i})]})})},Rw=({isOpen:t,itemToDelete:s,onConfirm:a,onCancel:n})=>{if(!t||!s)return null;const{item:i,type:r}=s,o=()=>r==="company"||r==="platform"?i.name:r==="user"?i.name||i.email:"item",c=()=>r==="company"?"company":r==="platform"?"platform":r==="user"?"user":"item",d=e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"universal-modal-button secondary",onClick:n,children:"Cancel"}),e.jsxs("button",{className:"universal-modal-button danger",onClick:a,children:["Delete ",c().charAt(0).toUpperCase()+c().slice(1)]})]});return e.jsx(Ew,{isOpen:t,onClose:n,title:"‚ö†Ô∏è Confirm Deletion",footer:d,size:"medium",children:e.jsxs("div",{style:{textAlign:"center",padding:"1rem 0"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",filter:"drop-shadow(0 4px 8px rgba(239, 68, 68, 0.3))"},children:"‚ö†Ô∏è"}),e.jsxs("p",{style:{fontSize:"1.1rem",color:"#374151",marginBottom:"1.5rem",lineHeight:"1.6"},children:["Are you sure you want to delete this ",e.jsx("strong",{children:c()}),"?",e.jsx("br",{}),e.jsx("span",{style:{color:"#ef4444",fontWeight:"600"},children:"This action cannot be undone."})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"2px solid rgba(239, 68, 68, 0.2)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{color:"#dc2626",margin:"0 0 1rem 0",fontSize:"1.2rem",fontWeight:"700"},children:o()}),r==="company"&&e.jsxs("div",{children:[e.jsx("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"‚ö†Ô∏è This will also delete:"}),e.jsxs("ul",{style:{textAlign:"left",color:"#374151",margin:"0 0 1rem 0",paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"All associated platforms"}),e.jsx("li",{children:"All users in this company"}),e.jsx("li",{children:"All training data and content"})]}),e.jsx("p",{style:{color:"#059669",fontWeight:"500",fontSize:"0.9rem",background:"rgba(5, 150, 105, 0.1)",padding:"0.75rem",borderRadius:"8px",margin:0},children:"üíæ A backup will be created before deletion for recovery purposes."})]}),r==="platform"&&e.jsxs("div",{children:[e.jsx("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"‚ö†Ô∏è This will delete the entire platform including:"}),e.jsxs("ul",{style:{textAlign:"left",color:"#374151",margin:0,paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"All training content"}),e.jsx("li",{children:"All user progress"}),e.jsx("li",{children:"All platform settings"})]})]})]})]})})},zc=({isOpen:t,isEdit:s,company:a,formData:n,onFormChange:i,onSubmit:r,onCancel:o})=>{const[c,d]=h.useState("basic");if(!t)return null;const u=y=>{y.preventDefault(),r(y)},l=y=>{const{name:f,value:v,type:j,checked:C}=y.target,x={...n,[f]:j==="checkbox"?C:v};console.log("üîç Form change:",f,"=",j==="checkbox"?C:v),console.log("üîç New form data:",x),i(x)},p=[{id:"basic",label:"Company Details",icon:"üè¢",description:"Basic information"},{id:"settings",label:"Configuration",icon:"‚öôÔ∏è",description:"Settings & status"}],g=[{value:"Technology",label:"Technology"},{value:"Healthcare",label:"Healthcare"},{value:"Finance",label:"Finance"},{value:"Education",label:"Education"},{value:"Real Estate",label:"Real Estate"},{value:"Sales",label:"Sales"},{value:"Marketing",label:"Marketing"},{value:"Home Improvement",label:"Home Improvement"},{value:"Other",label:"Other"}],b=[{value:"starter",label:"Starter",price:"$99/month",description:"Perfect for small teams getting started",features:["Up to 10 users","Basic features","Email support"],icon:"‚≠ê"},{value:"professional",label:"Professional",price:"$199/month",description:"Advanced features for growing businesses",features:["Up to 50 users","Advanced analytics","Priority support"],icon:"üöÄ"},{value:"enterprise",label:"Enterprise",price:"$399/month",description:"Full features for large organizations",features:["Unlimited users","Custom integrations","24/7 support"],icon:"üíé"}];return e.jsx("div",{className:"edit-admin-modal-overlay",onClick:o,children:e.jsxs("div",{className:"edit-admin-modal-container",onClick:y=>y.stopPropagation(),children:[e.jsx("div",{className:"edit-admin-modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-icon-section",children:[e.jsx("div",{className:"modal-main-icon",children:s?"‚úèÔ∏è":"üè¢"}),e.jsxs("div",{className:"modal-title-group",children:[e.jsx("h2",{children:s?"Edit Company":"Create New Company"}),e.jsx("p",{children:"Manage company information and settings"}),s&&a&&e.jsxs("div",{className:"company-status-badge",children:[e.jsx("span",{className:`status-indicator ${n.status||"active"}`}),e.jsx("span",{className:"status-text",children:n.status||"active"})]})]})]}),e.jsx("button",{className:"modal-close-btn",onClick:o,"aria-label":"Close modal",children:e.jsx("span",{children:"‚úï"})})]})}),e.jsx("div",{className:"modal-nav-tabs",children:p.map(y=>e.jsx("button",{className:`nav-tab ${c===y.id?"active":""}`,onClick:()=>d(y.id),children:e.jsxs("div",{className:"nav-tab-content",children:[e.jsx("span",{className:"nav-tab-icon",children:y.icon}),e.jsxs("div",{className:"nav-tab-text",children:[e.jsx("span",{className:"nav-tab-label",children:y.label}),e.jsx("span",{className:"nav-tab-description",children:y.description})]})]})},y.id))}),e.jsxs("form",{onSubmit:u,className:"edit-admin-form",children:[e.jsxs("div",{className:"modal-body",children:[c==="basic"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"üè¢"}),e.jsx("h3",{children:"Company Information"}),e.jsx("p",{children:"Essential company details and identification"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"name",children:[e.jsx("span",{className:"label-icon",children:"üè¢"}),e.jsx("span",{className:"label-text",children:"Company Name"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:l,required:!0,placeholder:"Enter company name",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"üè¢"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx("span",{className:"label-icon",children:"üìß"}),e.jsx("span",{className:"label-text",children:"Contact Email"}),e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:l,required:!0,placeholder:"Enter contact email",className:"form-input"}),e.jsx("div",{className:"input-icon",children:"üìß"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"industry",children:[e.jsx("span",{className:"label-icon",children:"üè≠"}),e.jsx("span",{className:"label-text",children:"Industry"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsxs("select",{id:"industry",name:"industry",value:n.industry,onChange:l,className:"form-select",children:[e.jsx("option",{value:"",children:"Select industry"}),g.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))]}),e.jsx("div",{className:"input-icon",children:"üè≠"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"plan",children:[e.jsx("span",{className:"label-icon",children:"üíé"}),e.jsx("span",{className:"label-text",children:"Subscription Plan"})]}),e.jsx("div",{className:"plan-selector",children:b.map(y=>e.jsxs("div",{className:`plan-option ${n.plan===y.value?"selected":""}`,onClick:()=>l({target:{name:"plan",value:y.value}}),children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("span",{className:"plan-icon",children:y.icon}),e.jsxs("div",{className:"plan-info",children:[e.jsx("span",{className:"plan-label",children:y.label}),e.jsx("span",{className:"plan-price",children:y.price})]}),e.jsxs("div",{className:"plan-radio",children:[e.jsx("input",{type:"radio",name:"plan",value:y.value,checked:n.plan===y.value,onChange:l,className:"radio-input"}),e.jsx("span",{className:"radio-custom"})]})]}),e.jsx("p",{className:"plan-description",children:y.description}),e.jsx("ul",{className:"plan-features",children:y.features.map((f,v)=>e.jsx("li",{children:f},v))})]},y.value))})]})]})]}),c==="settings"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-icon",children:"‚öôÔ∏è"}),e.jsx("h3",{children:"Company Settings"}),e.jsx("p",{children:"Configure company status and maintenance options"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"status",children:[e.jsx("span",{className:"label-icon",children:"üìä"}),e.jsx("span",{className:"label-text",children:"Company Status"})]}),e.jsx("div",{className:"status-selector",children:[{value:"active",label:"Active",icon:"‚úÖ",color:"green",description:"Company is fully operational"},{value:"inactive",label:"Inactive",icon:"‚è∏Ô∏è",color:"yellow",description:"Company is temporarily disabled"},{value:"suspended",label:"Suspended",icon:"üö´",color:"red",description:"Company access is suspended"}].map(y=>e.jsx("div",{className:`status-option ${n.status===y.value?"selected":""} ${y.color}`,onClick:()=>l({target:{name:"status",value:y.value}}),children:e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:"status-icon",children:y.icon}),e.jsxs("div",{className:"status-info",children:[e.jsx("span",{className:"status-label",children:y.label}),e.jsx("span",{className:"status-description",children:y.description})]}),e.jsxs("div",{className:"status-radio",children:[e.jsx("input",{type:"radio",name:"status",value:y.value,checked:n.status===y.value,onChange:l,className:"radio-input"}),e.jsx("span",{className:"radio-custom"})]})]})},y.value))})]}),e.jsx("div",{className:"form-field full-width",children:e.jsxs("div",{className:"maintenance-section",children:[e.jsxs("div",{className:"maintenance-header",children:[e.jsx("span",{className:"maintenance-icon",children:"üîß"}),e.jsxs("div",{className:"maintenance-info",children:[e.jsx("h4",{children:"Maintenance Mode"}),e.jsx("p",{children:"Control company access during maintenance periods"})]})]}),e.jsx("div",{className:"checkbox-field",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"maintenanceMode",checked:n.maintenanceMode,onChange:l,className:"checkbox-input"}),e.jsx("span",{className:"checkbox-custom"}),e.jsxs("div",{className:"checkbox-content",children:[e.jsx("span",{className:"checkbox-title",children:"Enable Maintenance Mode"}),e.jsx("span",{className:"checkbox-description",children:"Temporarily disable company access for maintenance"})]})]})}),n.maintenanceMode&&e.jsxs("div",{className:"maintenance-message-field",children:[e.jsxs("label",{htmlFor:"maintenanceMessage",children:[e.jsx("span",{className:"label-icon",children:"üìù"}),e.jsx("span",{className:"label-text",children:"Maintenance Message"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("textarea",{id:"maintenanceMessage",name:"maintenanceMessage",value:n.maintenanceMessage,onChange:l,rows:"3",placeholder:"Enter maintenance message for users",className:"form-textarea"}),e.jsx("div",{className:"input-icon",children:"üìù"})]}),e.jsxs("div",{className:"field-help",children:[e.jsx("span",{className:"help-icon",children:"üí°"}),e.jsx("span",{className:"help-text",children:"This message will be displayed to users when they try to access the company platform"})]})]})]})})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"footer-actions",children:[e.jsxs("button",{type:"button",className:"modal-btn secondary",onClick:o,children:[e.jsx("span",{className:"btn-icon",children:"‚ùå"}),e.jsx("span",{className:"btn-text",children:"Cancel"})]}),e.jsxs("button",{type:"submit",className:"modal-btn primary",children:[e.jsx("span",{className:"btn-icon",children:s?"üíæ":"‚ú®"}),e.jsx("span",{className:"btn-text",children:s?"Update Company":"Create Company"})]})]}),s&&e.jsxs("div",{className:"footer-info",children:[e.jsx("span",{className:"info-icon",children:"‚ÑπÔ∏è"}),e.jsx("span",{className:"info-text",children:"Changes will be applied immediately"})]})]})]})]})})},Lw=({isOpen:t,onClose:s,onSuccess:a,companies:n=[]})=>{const[i,r]=h.useState(1),[o,c]=h.useState(!1),[d,u]=h.useState(null),[l,p]=h.useState({companyId:"",companyName:"",platformName:"",platformSlug:"",description:"",industry:"",primaryColor:"#1e40af",secondaryColor:"#3b82f6",accentColor:"#10b981",logo:"",favicon:"",fontFamily:"Inter",layout:"modern",template:"training",selectedFeatures:[],pages:[{id:"home",name:"Home",slug:"home",type:"home",template:"hero-with-features",content:{hero:{title:"Welcome to Your Training Platform",subtitle:"Master your skills with our comprehensive training programs",backgroundImage:"",ctaText:"Get Started",ctaLink:"/training"},features:[{title:"Interactive Courses",description:"Engaging learning experiences",icon:"üéì"},{title:"Progress Tracking",description:"Monitor your learning journey",icon:"üìä"},{title:"Expert Instructors",description:"Learn from industry professionals",icon:"üë®‚Äçüè´"}]}},{id:"training",name:"Training",slug:"training",type:"training",template:"course-grid",content:{title:"Training Programs",description:"Choose from our comprehensive training programs",courses:[]}},{id:"courses",name:"Courses",slug:"courses",type:"courses",template:"course-listing",content:{title:"All Courses",description:"Browse our complete course catalog",categories:[]}},{id:"about",name:"About",slug:"about",type:"about",template:"about-page",content:{title:"About Us",description:"Learn more about our training platform",team:[],mission:""}}],heroTitle:"",heroSubtitle:"",categories:[],rebuttals:[],faqs:[],features:{userRegistration:!0,progressTracking:!0,certificates:!0,discussionForums:!1,liveChat:!1,mobileApp:!1,analytics:!0,customDomain:!1},isPublic:!0,allowRegistration:!0,requireApproval:!1,maxUsers:100,seo:{metaTitle:"",metaDescription:"",keywords:[]}}),[g,b]=h.useState(!1),[y,f]=h.useState({}),v=8,j=[{id:"training",name:"Training Platform",description:"Complete training platform with courses, assessments, and progress tracking",icon:"üéì",features:["Courses","Assessments","Progress Tracking","Certificates","Discussion Forums"]},{id:"sales",name:"Sales Training",description:"Sales-focused training with scripts, rebuttals, and role-playing",icon:"üíº",features:["Sales Scripts","Rebuttals","Role Playing","Performance Metrics","Leaderboards"]},{id:"onboarding",name:"Employee Onboarding",description:"Structured onboarding program for new employees",icon:"üë•",features:["Welcome Modules","Company Policies","Team Introductions","Checklists","Feedback Forms"]},{id:"compliance",name:"Compliance Training",description:"Compliance and regulatory training platform",icon:"üìã",features:["Compliance Modules","Certifications","Audit Trails","Reporting","Renewal Tracking"]}],C=["Home Improvement","Real Estate","Insurance","Financial Services","Healthcare","Technology","Retail","Manufacturing","Education","Other"],x=["User Management","Content Library","Progress Tracking","Analytics Dashboard","Mobile Responsive","Custom Branding","Email Notifications","API Access"],N=[{id:"hero-with-features",name:"Hero with Features",description:"Landing page with hero section and feature highlights",icon:"üè†",preview:"hero-features-preview"},{id:"course-grid",name:"Course Grid",description:"Grid layout for displaying courses and programs",icon:"üìö",preview:"course-grid-preview"},{id:"course-listing",name:"Course Listing",description:"List view for courses with filters and search",icon:"üìã",preview:"course-listing-preview"},{id:"about-page",name:"About Page",description:"About page with team, mission, and company info",icon:"üë•",preview:"about-page-preview"},{id:"contact-page",name:"Contact Page",description:"Contact form and company information",icon:"üìû",preview:"contact-page-preview"},{id:"blog-page",name:"Blog Page",description:"Blog listing with articles and posts",icon:"üìù",preview:"blog-page-preview"}],R=[{id:"hero",name:"Hero Section",description:"Main banner with title, subtitle, and CTA",icon:"üéØ",category:"layout"},{id:"features",name:"Features Grid",description:"Grid of features with icons and descriptions",icon:"‚≠ê",category:"content"},{id:"courses",name:"Course Grid",description:"Display courses in a grid layout",icon:"üìö",category:"content"},{id:"testimonials",name:"Testimonials",description:"Customer testimonials and reviews",icon:"üí¨",category:"social"},{id:"team",name:"Team Section",description:"Team members with photos and bios",icon:"üë•",category:"content"},{id:"contact-form",name:"Contact Form",description:"Contact form with fields and validation",icon:"üìß",category:"forms"},{id:"faq",name:"FAQ Section",description:"Frequently asked questions with answers",icon:"‚ùì",category:"content"},{id:"pricing",name:"Pricing Table",description:"Pricing plans and packages",icon:"üí∞",category:"commerce"}],E=[{name:"Inter",value:"Inter"},{name:"Roboto",value:"Roboto"},{name:"Open Sans",value:"Open Sans"},{name:"Lato",value:"Lato"},{name:"Montserrat",value:"Montserrat"},{name:"Poppins",value:"Poppins"},{name:"Source Sans Pro",value:"Source Sans Pro"},{name:"Nunito",value:"Nunito"}],z=[{name:"Modern",value:"modern",description:"Clean, modern design with lots of white space"},{name:"Classic",value:"classic",description:"Traditional business layout"},{name:"Creative",value:"creative",description:"Bold, creative design with unique elements"},{name:"Minimal",value:"minimal",description:"Minimalist design focusing on content"}];h.useEffect(()=>{t&&!o?(r(1),p({companyId:"",companyName:"",platformName:"",platformSlug:"",description:"",industry:"",primaryColor:"#1e40af",secondaryColor:"#3b82f6",accentColor:"#10b981",logo:"",favicon:"",fontFamily:"Inter",layout:"modern",template:"training",selectedFeatures:x,pages:[{id:"home",name:"Home",slug:"home",type:"home",template:"hero-with-features",content:{hero:{title:"Welcome to Your Training Platform",subtitle:"Master your skills with our comprehensive training programs",backgroundImage:"",ctaText:"Get Started",ctaLink:"/training"},features:[{title:"Interactive Courses",description:"Engaging learning experiences",icon:"üéì"},{title:"Progress Tracking",description:"Monitor your learning journey",icon:"üìä"},{title:"Expert Instructors",description:"Learn from industry professionals",icon:"üë®‚Äçüè´"}]}},{id:"training",name:"Training",slug:"training",type:"training",template:"course-grid",content:{title:"Training Programs",description:"Choose from our comprehensive training programs",courses:[]}},{id:"courses",name:"Courses",slug:"courses",type:"courses",template:"course-listing",content:{title:"All Courses",description:"Browse our complete course catalog",categories:[]}},{id:"about",name:"About",slug:"about",type:"about",template:"about-page",content:{title:"About Us",description:"Learn more about our training platform",team:[],mission:""}}],heroTitle:"",heroSubtitle:"",categories:[],rebuttals:[],faqs:[],features:{userRegistration:!0,progressTracking:!0,certificates:!0,discussionForums:!1,liveChat:!1,mobileApp:!1,analytics:!0,customDomain:!1},isPublic:!0,allowRegistration:!0,requireApproval:!1,maxUsers:100,seo:{metaTitle:"",metaDescription:"",keywords:[]}}),f({}),c(!0)):t||(c(!1),d&&!d.closed&&(d.close(),u(null)))},[t,o,d]);const k=(m,D)=>{if(p(S=>({...S,[m]:D})),m==="platformName"){const S=D.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();p(M=>({...M,platformSlug:S}))}y[m]&&f(S=>({...S,[m]:null}))},V=m=>({home:"üè†",training:"üéì",courses:"üìö",about:"üë•",contact:"üìû",blog:"üìù",faq:"‚ùì",pricing:"üí∞"})[m]||"üìÑ",$=()=>{const m={id:`page-${Date.now()}`,name:"New Page",slug:"new-page",type:"content",template:"hero-with-features",content:{hero:{title:"New Page",subtitle:"Add your content here",backgroundImage:"",ctaText:"Learn More",ctaLink:"#"}}};p(D=>({...D,pages:[...D.pages,m]}))},A=m=>{console.log("Edit page:",l.pages[m])},_=m=>{p(D=>({...D,pages:D.pages.filter((S,M)=>M!==m)}))},O=m=>({userRegistration:"User Registration",progressTracking:"Progress Tracking",certificates:"Certificates",discussionForums:"Discussion Forums",liveChat:"Live Chat",mobileApp:"Mobile App",analytics:"Analytics",customDomain:"Custom Domain"})[m]||m,Y=m=>({userRegistration:"Allow users to create accounts and register",progressTracking:"Track user progress through courses and modules",certificates:"Generate completion certificates for users",discussionForums:"Enable community discussions and forums",liveChat:"Real-time chat support for users",mobileApp:"Native mobile app for iOS and Android",analytics:"Detailed analytics and reporting dashboard",customDomain:"Use your own custom domain name"})[m]||"Feature description",U=m=>{const D={};switch(m){case 1:l.companyId||(D.companyId="Please select a company");break;case 2:l.platformName||(D.platformName="Platform name is required"),l.platformSlug||(D.platformSlug="Platform slug is required"),l.description||(D.description="Description is required"),l.industry||(D.industry="Industry is required");break;case 3:break;case 4:l.template||(D.template="Please select a template");break;case 5:l.heroTitle||(D.heroTitle="Hero title is required"),l.heroSubtitle||(D.heroSubtitle="Hero subtitle is required");break}return f(D),Object.keys(D).length===0},w=()=>{U(i)&&r(m=>Math.min(m+1,v))},T=()=>{r(m=>Math.max(m-1,1))},W=()=>{const m=l.platformSlug||(l.platformName?l.platformName.toLowerCase().replace(/[^a-z0-9]/g,"-"):"preview-platform"),S=`${window.location.origin}/company/${m}`,M=window.open(S,"_blank","noopener,noreferrer");u(M),M&&M.addEventListener("load",()=>{P(M)})},P=m=>{if(!m||m.closed)return;const D=l.platformSlug||(l.platformName?l.platformName.toLowerCase().replace(/[^a-z0-9]/g,"-"):"preview-platform");m.postMessage({type:"LIVE_PREVIEW_DATA",data:{platformName:l.platformName,platformSlug:D,description:l.description,heroTitle:l.heroTitle,heroSubtitle:l.heroSubtitle,primaryColor:l.primaryColor,secondaryColor:l.secondaryColor,accentColor:l.accentColor,logo:l.logo,favicon:l.favicon,fontFamily:l.fontFamily,template:l.template,features:l.features,pages:l.pages,branding:{primaryColor:l.primaryColor,secondaryColor:l.secondaryColor,accentColor:l.accentColor,logo:l.logo,favicon:l.favicon,fontFamily:l.fontFamily}}},"*")};h.useEffect(()=>{if(d&&!d.closed){const m=setTimeout(()=>{P(d)},500);return()=>clearTimeout(m)}},[l,d]);const L=async()=>{if(U(i)){b(!0);try{const m=J(),D={};Array.isArray(l.features)?l.features.forEach(oe=>{D[oe]=!0}):typeof l.features=="object"&&Object.assign(D,l.features);const S={name:l.platformName,slug:l.platformSlug,description:l.description,companyId:l.companyId,industry:l.industry,branding:{primaryColor:l.primaryColor,secondaryColor:l.secondaryColor,logo:l.logo,favicon:l.favicon},template:l.template,features:D,content:{hero:{title:l.heroTitle,subtitle:l.heroSubtitle}},settings:{isPublic:l.isPublic,allowRegistration:l.allowRegistration,requireApproval:l.requireApproval,maxUsers:l.maxUsers},status:"active",createdAt:new Date,updatedAt:new Date},M=await Qe(ne(m,"platforms"),S),F=Ah({...S,id:M.id});await _e(M,{form:F});const X=ie(m,"companies",l.companyId);await _e(X,{platformId:M.id,updatedAt:new Date}),a({id:M.id,...S,form:F}),s()}catch(m){console.error("Error creating platform:",m),f({submit:"Failed to create platform. Please try again."})}finally{b(!1)}}},q=()=>{switch(i){case 1:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Select Company"}),e.jsx("p",{children:"Choose which company this platform will belong to"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Company *"}),e.jsxs("select",{value:l.companyId,onChange:m=>{const D=n.find(S=>S.id===m.target.value);k("companyId",m.target.value),k("companyName",D?.name||"")},className:`form-input ${y.companyId?"error":""}`,children:[e.jsx("option",{value:"",children:"Select a company..."}),n.map(m=>e.jsxs("option",{value:m.id,children:[m.name," (",m.email,")"]},m.id))]}),y.companyId&&e.jsx("span",{className:"error-message",children:y.companyId})]})]});case 2:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Platform Details"}),e.jsx("p",{children:"Configure the basic information and settings for your training platform"})]}),e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Name *"}),e.jsx("input",{type:"text",value:l.platformName,onChange:m=>k("platformName",m.target.value),className:`form-input ${y.platformName?"error":""}`,placeholder:"e.g., Sales Training Academy"}),e.jsx("small",{className:"form-help",children:"This will be displayed as the main title of your platform"}),y.platformName&&e.jsx("span",{className:"error-message",children:y.platformName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Slug *"}),e.jsx("input",{type:"text",value:l.platformSlug,onChange:m=>k("platformSlug",m.target.value),className:`form-input ${y.platformSlug?"error":""}`,placeholder:"e.g., sales-training-academy"}),e.jsxs("small",{className:"form-help",children:["Used in URLs: yoursite.com/",l.platformSlug||"platform-slug"]}),y.platformSlug&&e.jsx("span",{className:"error-message",children:y.platformSlug})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Description *"}),e.jsx("textarea",{value:l.description,onChange:m=>k("description",m.target.value),className:`form-textarea ${y.description?"error":""}`,rows:"4",placeholder:"Describe what this platform will be used for, who it's for, and what makes it special..."}),e.jsx("small",{className:"form-help",children:"This description will be used for SEO and platform overview"}),y.description&&e.jsx("span",{className:"error-message",children:y.description})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Industry *"}),e.jsxs("select",{value:l.industry,onChange:m=>k("industry",m.target.value),className:`form-input ${y.industry?"error":""}`,children:[e.jsx("option",{value:"",children:"Select industry..."}),C.map(m=>e.jsx("option",{value:m,children:m},m))]}),e.jsx("small",{className:"form-help",children:"Helps customize templates and content"}),y.industry&&e.jsx("span",{className:"error-message",children:y.industry})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Type"}),e.jsxs("select",{value:l.platformType||"training",onChange:m=>k("platformType",m.target.value),className:"form-input",children:[e.jsx("option",{value:"training",children:"Training Platform"}),e.jsx("option",{value:"education",children:"Educational Platform"}),e.jsx("option",{value:"certification",children:"Certification Platform"}),e.jsx("option",{value:"onboarding",children:"Employee Onboarding"}),e.jsx("option",{value:"compliance",children:"Compliance Training"}),e.jsx("option",{value:"sales",children:"Sales Training"}),e.jsx("option",{value:"custom",children:"Custom Platform"})]}),e.jsx("small",{className:"form-help",children:"Determines default features and templates"})]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Target Audience"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Audience"}),e.jsxs("select",{value:l.primaryAudience||"employees",onChange:m=>k("primaryAudience",m.target.value),className:"form-input",children:[e.jsx("option",{value:"employees",children:"Company Employees"}),e.jsx("option",{value:"customers",children:"Customers"}),e.jsx("option",{value:"partners",children:"Business Partners"}),e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"public",children:"General Public"}),e.jsx("option",{value:"members",children:"Members Only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Skill Level"}),e.jsxs("select",{value:l.skillLevel||"beginner",onChange:m=>k("skillLevel",m.target.value),className:"form-input",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"}),e.jsx("option",{value:"mixed",children:"Mixed Levels"})]})]})]})]}),e.jsxs("div",{className:"details-section",children:[e.jsx("h4",{children:"Platform Goals"}),e.jsx("div",{className:"goals-grid",children:[{id:"skill-development",label:"Skill Development",description:"Help users develop new skills"},{id:"certification",label:"Certification",description:"Provide certification programs"},{id:"compliance",label:"Compliance",description:"Ensure regulatory compliance"},{id:"onboarding",label:"Onboarding",description:"New employee orientation"},{id:"performance",label:"Performance",description:"Improve job performance"},{id:"engagement",label:"Engagement",description:"Increase employee engagement"}].map(m=>e.jsxs("label",{className:"goal-option",children:[e.jsx("input",{type:"checkbox",checked:l.goals?.includes(m.id)||!1,onChange:D=>{const S=l.goals||[],M=D.target.checked?[...S,m.id]:S.filter(F=>F!==m.id);k("goals",M)}}),e.jsxs("div",{className:"goal-content",children:[e.jsx("strong",{children:m.label}),e.jsx("small",{children:m.description})]})]},m.id))})]})]});case 3:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Branding & Design"}),e.jsx("p",{children:"Customize the visual identity and design system for your platform"})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Color Scheme"}),e.jsxs("div",{className:"color-palette",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Color"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:l.primaryColor,onChange:m=>k("primaryColor",m.target.value),className:"color-input"}),e.jsx("input",{type:"text",value:l.primaryColor,onChange:m=>k("primaryColor",m.target.value),className:"form-input color-text"})]}),e.jsx("small",{className:"form-help",children:"Main brand color for headers, buttons, and accents"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Secondary Color"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:l.secondaryColor,onChange:m=>k("secondaryColor",m.target.value),className:"color-input"}),e.jsx("input",{type:"text",value:l.secondaryColor,onChange:m=>k("secondaryColor",m.target.value),className:"form-input color-text"})]}),e.jsx("small",{className:"form-help",children:"Supporting color for backgrounds and secondary elements"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accent Color"}),e.jsxs("div",{className:"color-input-group",children:[e.jsx("input",{type:"color",value:l.accentColor,onChange:m=>k("accentColor",m.target.value),className:"color-input"}),e.jsx("input",{type:"text",value:l.accentColor,onChange:m=>k("accentColor",m.target.value),className:"form-input color-text"})]}),e.jsx("small",{className:"form-help",children:"Highlight color for CTAs and important elements"})]})]}),e.jsxs("div",{className:"color-presets",children:[e.jsx("h5",{children:"Color Presets"}),e.jsx("div",{className:"preset-grid",children:[{name:"Professional Blue",primary:"#1e40af",secondary:"#3b82f6",accent:"#10b981"},{name:"Corporate Green",primary:"#059669",secondary:"#10b981",accent:"#f59e0b"},{name:"Modern Purple",primary:"#7c3aed",secondary:"#a855f7",accent:"#ec4899"},{name:"Warm Orange",primary:"#ea580c",secondary:"#f97316",accent:"#eab308"},{name:"Cool Gray",primary:"#374151",secondary:"#6b7280",accent:"#3b82f6"},{name:"Bold Red",primary:"#dc2626",secondary:"#ef4444",accent:"#f59e0b"}].map(m=>e.jsxs("div",{className:"preset-option",onClick:()=>{k("primaryColor",m.primary),k("secondaryColor",m.secondary),k("accentColor",m.accent)},children:[e.jsxs("div",{className:"preset-colors",children:[e.jsx("div",{className:"preset-color",style:{backgroundColor:m.primary}}),e.jsx("div",{className:"preset-color",style:{backgroundColor:m.secondary}}),e.jsx("div",{className:"preset-color",style:{backgroundColor:m.accent}})]}),e.jsx("span",{className:"preset-name",children:m.name})]},m.name))})]})]})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Typography"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Font Family"}),e.jsx("select",{value:l.fontFamily,onChange:m=>k("fontFamily",m.target.value),className:"form-input",children:E.map(m=>e.jsx("option",{value:m.value,children:m.name},m.value))}),e.jsx("small",{className:"form-help",children:"Choose a font that matches your brand personality"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Font Weight"}),e.jsxs("select",{value:l.fontWeight||"normal",onChange:m=>k("fontWeight",m.target.value),className:"form-input",children:[e.jsx("option",{value:"light",children:"Light (300)"}),e.jsx("option",{value:"normal",children:"Normal (400)"}),e.jsx("option",{value:"medium",children:"Medium (500)"}),e.jsx("option",{value:"semibold",children:"Semibold (600)"}),e.jsx("option",{value:"bold",children:"Bold (700)"})]})]})]}),e.jsxs("div",{className:"typography-preview",children:[e.jsx("h5",{children:"Typography Preview"}),e.jsxs("div",{className:"preview-text",style:{fontFamily:l.fontFamily,fontWeight:l.fontWeight||"normal"},children:[e.jsx("h1",{children:"Heading 1 - Main Title"}),e.jsx("h2",{children:"Heading 2 - Section Title"}),e.jsx("h3",{children:"Heading 3 - Subsection"}),e.jsx("p",{children:"This is a sample paragraph showing how your text will look with the selected font family and weight. It should be easy to read and professional."})]})]})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Layout & Style"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Style"}),e.jsx("select",{value:l.layout,onChange:m=>k("layout",m.target.value),className:"form-input",children:z.map(m=>e.jsx("option",{value:m.value,children:m.name},m.value))}),e.jsx("small",{className:"form-help",children:z.find(m=>m.value===l.layout)?.description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content Width"}),e.jsxs("select",{value:l.contentWidth||"standard",onChange:m=>k("contentWidth",m.target.value),className:"form-input",children:[e.jsx("option",{value:"narrow",children:"Narrow (800px)"}),e.jsx("option",{value:"standard",children:"Standard (1200px)"}),e.jsx("option",{value:"wide",children:"Wide (1400px)"}),e.jsx("option",{value:"full",children:"Full Width"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Header Style"}),e.jsxs("select",{value:l.headerStyle||"standard",onChange:m=>k("headerStyle",m.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Header"}),e.jsx("option",{value:"minimal",children:"Minimal Header"}),e.jsx("option",{value:"centered",children:"Centered Header"}),e.jsx("option",{value:"sidebar",children:"Sidebar Navigation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Footer Style"}),e.jsxs("select",{value:l.footerStyle||"standard",onChange:m=>k("footerStyle",m.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Footer"}),e.jsx("option",{value:"minimal",children:"Minimal Footer"}),e.jsx("option",{value:"extended",children:"Extended Footer"}),e.jsx("option",{value:"none",children:"No Footer"})]})]})]})]}),e.jsxs("div",{className:"design-section",children:[e.jsx("h4",{children:"Brand Assets"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Logo URL"}),e.jsx("input",{type:"url",value:l.logo,onChange:m=>k("logo",m.target.value),className:"form-input",placeholder:"https://example.com/logo.png"}),e.jsx("small",{className:"form-help",children:"Recommended size: 200x60px or similar aspect ratio"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Favicon URL"}),e.jsx("input",{type:"url",value:l.favicon,onChange:m=>k("favicon",m.target.value),className:"form-input",placeholder:"https://example.com/favicon.ico"}),e.jsx("small",{className:"form-help",children:"Recommended size: 32x32px or 16x16px"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Background Image URL"}),e.jsx("input",{type:"url",value:l.backgroundImage||"",onChange:m=>k("backgroundImage",m.target.value),className:"form-input",placeholder:"https://example.com/background.jpg"}),e.jsx("small",{className:"form-help",children:"Optional background image for hero sections"})]})]}),e.jsxs("div",{className:"branding-preview",children:[e.jsx("h4",{children:"Live Design Preview"}),e.jsxs("div",{className:"preview-card",style:{"--primary-color":l.primaryColor,"--secondary-color":l.secondaryColor,"--accent-color":l.accentColor,"font-family":l.fontFamily,"font-weight":l.fontWeight||"normal"},children:[e.jsxs("div",{className:"preview-header",children:[l.logo&&e.jsx("img",{src:l.logo,alt:"Logo",className:"preview-logo"}),e.jsx("h3",{children:l.platformName||"Your Platform"})]}),e.jsx("p",{children:l.description||"Platform description will appear here"}),e.jsxs("div",{className:"preview-actions",children:[e.jsx("button",{className:"preview-btn primary",children:"Primary Button"}),e.jsx("button",{className:"preview-btn secondary",children:"Secondary Button"})]}),e.jsxs("div",{className:"preview-colors",children:[e.jsx("div",{className:"color-swatch",style:{backgroundColor:l.primaryColor}}),e.jsx("div",{className:"color-swatch",style:{backgroundColor:l.secondaryColor}}),e.jsx("div",{className:"color-swatch",style:{backgroundColor:l.accentColor}})]})]})]})]});case 4:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Template Selection"}),e.jsx("p",{children:"Choose a professional template that matches your training platform needs"})]}),e.jsx("div",{className:"template-categories",children:e.jsx("div",{className:"category-tabs",children:["all","training","education","corporate","modern"].map(m=>e.jsx("button",{className:`category-tab ${l.templateCategory===m?"active":""}`,onClick:()=>k("templateCategory",m),children:m.charAt(0).toUpperCase()+m.slice(1)},m))})}),e.jsx("div",{className:"templates-grid",children:j.map(m=>e.jsxs("div",{className:`template-card ${l.template===m.id?"selected":""}`,onClick:()=>k("template",m.id),children:[e.jsxs("div",{className:"template-preview",children:[e.jsx("div",{className:"template-icon",children:m.icon}),e.jsx("h4",{children:m.name}),e.jsx("p",{children:m.description}),e.jsx("div",{className:"template-badge",children:e.jsx("span",{className:"badge-text",children:m.category||"Professional"})})]}),e.jsx("div",{className:"template-features",children:m.features.map((D,S)=>e.jsx("span",{className:"feature-tag",children:D},S))}),e.jsxs("div",{className:"template-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Pages:"}),e.jsx("span",{className:"stat-value",children:m.pageCount||"5"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Sections:"}),e.jsx("span",{className:"stat-value",children:m.sectionCount||"12"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Features:"}),e.jsx("span",{className:"stat-value",children:m.features.length})]})]})]},m.id))}),e.jsxs("div",{className:"template-customization",children:[e.jsx("h4",{children:"Template Customization"}),e.jsxs("div",{className:"customization-options",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Style"}),e.jsxs("select",{value:l.templateLayout||"standard",onChange:m=>k("templateLayout",m.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Layout"}),e.jsx("option",{value:"sidebar",children:"Sidebar Navigation"}),e.jsx("option",{value:"centered",children:"Centered Content"}),e.jsx("option",{value:"dashboard",children:"Dashboard Style"})]}),e.jsx("small",{className:"form-help",children:"Choose how your content will be organized"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Navigation Style"}),e.jsxs("select",{value:l.navigationStyle||"top",onChange:m=>k("navigationStyle",m.target.value),className:"form-input",children:[e.jsx("option",{value:"top",children:"Top Navigation"}),e.jsx("option",{value:"sidebar",children:"Sidebar Navigation"}),e.jsx("option",{value:"tabs",children:"Tab Navigation"}),e.jsx("option",{value:"breadcrumb",children:"Breadcrumb Navigation"})]}),e.jsx("small",{className:"form-help",children:"How users will navigate your platform"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content Density"}),e.jsxs("select",{value:l.contentDensity||"balanced",onChange:m=>k("contentDensity",m.target.value),className:"form-input",children:[e.jsx("option",{value:"spacious",children:"Spacious (More whitespace)"}),e.jsx("option",{value:"balanced",children:"Balanced (Standard spacing)"}),e.jsx("option",{value:"compact",children:"Compact (Dense content)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Visual Style"}),e.jsxs("select",{value:l.visualStyle||"modern",onChange:m=>k("visualStyle",m.target.value),className:"form-input",children:[e.jsx("option",{value:"minimal",children:"Minimal & Clean"}),e.jsx("option",{value:"modern",children:"Modern & Bold"}),e.jsx("option",{value:"classic",children:"Classic & Professional"}),e.jsx("option",{value:"creative",children:"Creative & Dynamic"})]})]})]})]})]}),e.jsxs("div",{className:"template-preview-section",children:[e.jsx("h4",{children:"Template Preview"}),e.jsx("div",{className:"preview-container",children:e.jsxs("div",{className:"preview-mockup",children:[e.jsxs("div",{className:"mockup-header",children:[e.jsx("div",{className:"mockup-logo"}),e.jsxs("div",{className:"mockup-nav",children:[e.jsx("div",{className:"nav-item"}),e.jsx("div",{className:"nav-item"}),e.jsx("div",{className:"nav-item"})]})]}),e.jsxs("div",{className:"mockup-content",children:[e.jsxs("div",{className:"mockup-hero",children:[e.jsx("div",{className:"hero-title"}),e.jsx("div",{className:"hero-subtitle"}),e.jsx("div",{className:"hero-button"})]}),e.jsx("div",{className:"mockup-sections",children:e.jsxs("div",{className:"section-row",children:[e.jsx("div",{className:"section-card"}),e.jsx("div",{className:"section-card"}),e.jsx("div",{className:"section-card"})]})})]})]})})]}),y.template&&e.jsx("span",{className:"error-message",children:y.template})]});case 5:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Page Builder"}),e.jsx("p",{children:"Create and customize your platform pages with drag-and-drop functionality"})]}),e.jsxs("div",{className:"page-builder",children:[e.jsxs("div",{className:"pages-section",children:[e.jsxs("div",{className:"pages-header",children:[e.jsxs("h4",{children:["Your Pages (",l.pages.length,")"]}),e.jsxs("div",{className:"pages-actions",children:[e.jsx("button",{className:"add-page-btn",onClick:$,children:"‚ûï Add New Page"}),e.jsx("button",{className:"import-pages-btn",children:"üìÅ Import Pages"})]})]}),e.jsx("div",{className:"pages-grid",children:l.pages.map((m,D)=>e.jsxs("div",{className:"page-card",draggable:"true",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("div",{className:"page-icon",children:V(m.type)}),e.jsx("div",{className:"page-status",children:e.jsx("span",{className:`status-badge ${m.status||"active"}`,children:m.status||"Active"})})]}),e.jsxs("div",{className:"page-info",children:[e.jsx("h5",{children:m.name}),e.jsxs("p",{className:"page-url",children:["/",m.slug]}),e.jsx("span",{className:"page-template",children:N.find(S=>S.id===m.template)?.name||"Custom"}),e.jsxs("div",{className:"page-meta",children:[e.jsxs("span",{className:"meta-item",children:["üìÑ ",m.sections?.length||0," sections"]}),e.jsxs("span",{className:"meta-item",children:["üëÅÔ∏è ",m.views||0," views"]})]})]}),e.jsxs("div",{className:"page-actions",children:[e.jsx("button",{className:"page-action-btn",onClick:()=>A(D),title:"Edit Page",children:"‚úèÔ∏è"}),e.jsx("button",{className:"page-action-btn",onClick:()=>duplicatePage(D),title:"Duplicate Page",children:"üìã"}),e.jsx("button",{className:"page-action-btn",title:"Preview Page",children:"üëÅÔ∏è"}),m.id!=="home"&&e.jsx("button",{className:"page-action-btn delete",onClick:()=>_(D),title:"Delete Page",children:"üóëÔ∏è"})]})]},m.id))})]}),e.jsxs("div",{className:"content-blocks-section",children:[e.jsxs("div",{className:"blocks-header",children:[e.jsx("h4",{children:"Content Blocks"}),e.jsx("p",{children:"Drag and drop these blocks to build your pages"})]}),e.jsxs("div",{className:"blocks-categories",children:[e.jsxs("div",{className:"category-section",children:[e.jsx("h5",{children:"üìê Layout Blocks"}),e.jsx("div",{className:"blocks-grid",children:R.filter(m=>m.category==="layout").map(m=>e.jsxs("div",{className:"block-card",draggable:"true",children:[e.jsx("div",{className:"block-icon",children:m.icon}),e.jsxs("div",{className:"block-info",children:[e.jsx("h6",{children:m.name}),e.jsx("p",{children:m.description}),e.jsx("span",{className:"block-category",children:m.category})]})]},m.id))})]}),e.jsxs("div",{className:"category-section",children:[e.jsx("h5",{children:"üìù Content Blocks"}),e.jsx("div",{className:"blocks-grid",children:R.filter(m=>m.category==="content").map(m=>e.jsxs("div",{className:"block-card",draggable:"true",children:[e.jsx("div",{className:"block-icon",children:m.icon}),e.jsxs("div",{className:"block-info",children:[e.jsx("h6",{children:m.name}),e.jsx("p",{children:m.description}),e.jsx("span",{className:"block-category",children:m.category})]})]},m.id))})]}),e.jsxs("div",{className:"category-section",children:[e.jsx("h5",{children:"üéØ Interactive Blocks"}),e.jsx("div",{className:"blocks-grid",children:R.filter(m=>["forms","social","commerce"].includes(m.category)).map(m=>e.jsxs("div",{className:"block-card",draggable:"true",children:[e.jsx("div",{className:"block-icon",children:m.icon}),e.jsxs("div",{className:"block-info",children:[e.jsx("h6",{children:m.name}),e.jsx("p",{children:m.description}),e.jsx("span",{className:"block-category",children:m.category})]})]},m.id))})]})]})]})]}),e.jsxs("div",{className:"page-settings",children:[e.jsx("h4",{children:"Page Settings"}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default Page Template"}),e.jsxs("select",{value:l.defaultPageTemplate||"standard",onChange:m=>k("defaultPageTemplate",m.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard Page"}),e.jsx("option",{value:"landing",children:"Landing Page"}),e.jsx("option",{value:"dashboard",children:"Dashboard Page"}),e.jsx("option",{value:"course",children:"Course Page"}),e.jsx("option",{value:"blog",children:"Blog Page"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Page Navigation"}),e.jsxs("select",{value:l.pageNavigation||"auto",onChange:m=>k("pageNavigation",m.target.value),className:"form-input",children:[e.jsx("option",{value:"auto",children:"Auto-generate from pages"}),e.jsx("option",{value:"manual",children:"Manual navigation setup"}),e.jsx("option",{value:"hidden",children:"Hidden navigation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"SEO Settings"}),e.jsxs("div",{className:"checkbox-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:l.autoSeo||!1,onChange:m=>k("autoSeo",m.target.checked)}),"Auto-generate SEO meta tags"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:l.sitemap||!1,onChange:m=>k("sitemap",m.target.checked)}),"Include in sitemap"]})]})]})]})]})]});case 6:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Content Setup"}),e.jsx("p",{children:"Create compelling content that engages your audience and drives results"})]}),e.jsxs("div",{className:"content-sections",children:[e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"Hero Section"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Title *"}),e.jsx("input",{type:"text",value:l.heroTitle,onChange:m=>k("heroTitle",m.target.value),className:`form-input ${y.heroTitle?"error":""}`,placeholder:"Welcome to Your Training Platform"}),e.jsx("small",{className:"form-help",children:"Main headline that captures attention"}),y.heroTitle&&e.jsx("span",{className:"error-message",children:y.heroTitle})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Subtitle *"}),e.jsx("textarea",{value:l.heroSubtitle,onChange:m=>k("heroSubtitle",m.target.value),className:`form-textarea ${y.heroSubtitle?"error":""}`,rows:"3",placeholder:"Start your learning journey with our comprehensive training programs"}),e.jsx("small",{className:"form-help",children:"Supporting text that explains your value proposition"}),y.heroSubtitle&&e.jsx("span",{className:"error-message",children:y.heroSubtitle})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Call-to-Action Button Text"}),e.jsx("input",{type:"text",value:l.ctaText||"Get Started",onChange:m=>k("ctaText",m.target.value),className:"form-input",placeholder:"Get Started"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Background Image URL"}),e.jsx("input",{type:"url",value:l.heroBackground||"",onChange:m=>k("heroBackground",m.target.value),className:"form-input",placeholder:"https://example.com/hero-bg.jpg"})]})]})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"About Section"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"About Title"}),e.jsx("input",{type:"text",value:l.aboutTitle||"About Our Platform",onChange:m=>k("aboutTitle",m.target.value),className:"form-input",placeholder:"About Our Platform"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"About Description"}),e.jsx("textarea",{value:l.aboutDescription||"",onChange:m=>k("aboutDescription",m.target.value),className:"form-textarea",rows:"4",placeholder:"Tell your audience what makes your platform special..."})]})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"Features Section"}),e.jsxs("div",{className:"features-builder",children:[e.jsxs("div",{className:"features-header",children:[e.jsx("h5",{children:"Platform Features"}),e.jsx("button",{className:"add-feature-btn",onClick:()=>addFeature(),children:"‚ûï Add Feature"})]}),e.jsx("div",{className:"features-list",children:(l.features||[]).map((m,D)=>e.jsxs("div",{className:"feature-item",children:[e.jsxs("div",{className:"feature-inputs",children:[e.jsx("input",{type:"text",value:m.title,onChange:S=>updateFeature(D,"title",S.target.value),className:"form-input",placeholder:"Feature title"}),e.jsx("textarea",{value:m.description,onChange:S=>updateFeature(D,"description",S.target.value),className:"form-textarea",rows:"2",placeholder:"Feature description"})]}),e.jsx("button",{className:"remove-feature-btn",onClick:()=>removeFeature(D),children:"üóëÔ∏è"})]},D))})]})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("h4",{children:"Contact Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contact Email"}),e.jsx("input",{type:"email",value:l.contactEmail||"",onChange:m=>k("contactEmail",m.target.value),className:"form-input",placeholder:"contact@yourcompany.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"tel",value:l.contactPhone||"",onChange:m=>k("contactPhone",m.target.value),className:"form-input",placeholder:"+1 (555) 123-4567"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{value:l.contactAddress||"",onChange:m=>k("contactAddress",m.target.value),className:"form-textarea",rows:"2",placeholder:"Your company address"})]})]})]}),e.jsxs("div",{className:"content-preview",children:[e.jsx("h4",{children:"Live Preview"}),e.jsx("div",{className:"preview-hero",children:e.jsxs("div",{className:"preview-bg",style:{backgroundImage:l.heroBackground?`url(${l.heroBackground})`:"none"},children:[e.jsx("h1",{children:l.heroTitle||"Welcome to Your Training Platform"}),e.jsx("p",{children:l.heroSubtitle||"Start your learning journey with our comprehensive training programs"}),e.jsx("button",{className:"preview-cta",children:l.ctaText||"Get Started"})]})}),l.aboutTitle&&e.jsxs("div",{className:"preview-about",children:[e.jsx("h2",{children:l.aboutTitle}),e.jsx("p",{children:l.aboutDescription})]}),(l.features||[]).length>0&&e.jsxs("div",{className:"preview-features",children:[e.jsx("h2",{children:"Features"}),e.jsx("div",{className:"features-grid",children:(l.features||[]).map((m,D)=>e.jsxs("div",{className:"feature-card",children:[e.jsx("h3",{children:m.title}),e.jsx("p",{children:m.description})]},D))})]})]})]});case 7:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Advanced Features"}),e.jsx("p",{children:"Enable powerful features to enhance your training platform"})]}),e.jsxs("div",{className:"features-categories",children:[e.jsxs("div",{className:"feature-category",children:[e.jsx("h4",{children:"üéì Learning & Training"}),e.jsx("div",{className:"features-grid",children:Object.entries(l.features).filter(([m])=>["userRegistration","progressTracking","certificates","quizzes"].includes(m)).map(([m,D])=>e.jsx("div",{className:"feature-setting",children:e.jsxs("label",{className:"feature-label",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:S=>{p(M=>({...M,features:{...M.features,[m]:S.target.checked}}))}}),e.jsxs("div",{className:"feature-content",children:[e.jsxs("div",{className:"feature-icon",children:[m==="userRegistration"&&"üë§",m==="progressTracking"&&"üìä",m==="certificates"&&"üèÜ",m==="quizzes"&&"‚ùì"]}),e.jsxs("div",{className:"feature-text",children:[e.jsx("strong",{children:O(m)}),e.jsx("small",{children:Y(m)})]})]})]})},m))})]}),e.jsxs("div",{className:"feature-category",children:[e.jsx("h4",{children:"üîß Platform Management"}),e.jsx("div",{className:"features-grid",children:Object.entries(l.features).filter(([m])=>["analytics","notifications","userManagement","contentManagement"].includes(m)).map(([m,D])=>e.jsx("div",{className:"feature-setting",children:e.jsxs("label",{className:"feature-label",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:S=>{p(M=>({...M,features:{...M.features,[m]:S.target.checked}}))}}),e.jsxs("div",{className:"feature-content",children:[e.jsxs("div",{className:"feature-icon",children:[m==="analytics"&&"üìà",m==="notifications"&&"üîî",m==="userManagement"&&"üë•",m==="contentManagement"&&"üìù"]}),e.jsxs("div",{className:"feature-text",children:[e.jsx("strong",{children:O(m)}),e.jsx("small",{children:Y(m)})]})]})]})},m))})]}),e.jsxs("div",{className:"feature-category",children:[e.jsx("h4",{children:"üåê Integration & API"}),e.jsx("div",{className:"features-grid",children:Object.entries(l.features).filter(([m])=>["apiAccess","webhooks","sso","thirdPartyIntegrations"].includes(m)).map(([m,D])=>e.jsx("div",{className:"feature-setting",children:e.jsxs("label",{className:"feature-label",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:S=>{p(M=>({...M,features:{...M.features,[m]:S.target.checked}}))}}),e.jsxs("div",{className:"feature-content",children:[e.jsxs("div",{className:"feature-icon",children:[m==="apiAccess"&&"üîå",m==="webhooks"&&"ü™ù",m==="sso"&&"üîê",m==="thirdPartyIntegrations"&&"üîó"]}),e.jsxs("div",{className:"feature-text",children:[e.jsx("strong",{children:O(m)}),e.jsx("small",{children:Y(m)})]})]})]})},m))})]})]}),e.jsxs("div",{className:"feature-settings",children:[e.jsx("h4",{children:"Feature Configuration"}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default User Role"}),e.jsxs("select",{value:l.defaultUserRole||"student",onChange:m=>k("defaultUserRole",m.target.value),className:"form-input",children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"instructor",children:"Instructor"}),e.jsx("option",{value:"admin",children:"Administrator"}),e.jsx("option",{value:"viewer",children:"Viewer Only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content Access Level"}),e.jsxs("select",{value:l.contentAccess||"authenticated",onChange:m=>k("contentAccess",m.target.value),className:"form-input",children:[e.jsx("option",{value:"public",children:"Public (No login required)"}),e.jsx("option",{value:"authenticated",children:"Authenticated Users Only"}),e.jsx("option",{value:"enrolled",children:"Enrolled Students Only"}),e.jsx("option",{value:"premium",children:"Premium Users Only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Progress Tracking Granularity"}),e.jsxs("select",{value:l.progressGranularity||"course",onChange:m=>k("progressGranularity",m.target.value),className:"form-input",children:[e.jsx("option",{value:"course",children:"Course Level"}),e.jsx("option",{value:"lesson",children:"Lesson Level"}),e.jsx("option",{value:"activity",children:"Activity Level"}),e.jsx("option",{value:"detailed",children:"Detailed Tracking"})]})]})]})]}),e.jsxs("div",{className:"feature-preview",children:[e.jsx("h4",{children:"Enabled Features Summary"}),e.jsx("div",{className:"enabled-features",children:Object.entries(l.features).filter(([m,D])=>D).map(([m,D])=>e.jsxs("div",{className:"enabled-feature",children:[e.jsxs("span",{className:"feature-icon",children:[m==="userRegistration"&&"üë§",m==="progressTracking"&&"üìä",m==="certificates"&&"üèÜ",m==="quizzes"&&"‚ùì",m==="analytics"&&"üìà",m==="notifications"&&"üîî",m==="userManagement"&&"üë•",m==="contentManagement"&&"üìù",m==="apiAccess"&&"üîå",m==="webhooks"&&"ü™ù",m==="sso"&&"üîê",m==="thirdPartyIntegrations"&&"üîó"]}),e.jsx("span",{className:"feature-name",children:O(m)})]},m))})]})]});case 8:return e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Platform Settings"}),e.jsx("p",{children:"Configure access, security, and final platform settings"})]}),e.jsxs("div",{className:"settings-sections",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"üîê Access & Security"}),e.jsxs("div",{className:"settings-grid",children:[e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:l.isPublic,onChange:m=>k("isPublic",m.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"üåê"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Public Platform"}),e.jsx("small",{children:"Allow public access to the platform"})]})]})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:l.allowRegistration,onChange:m=>k("allowRegistration",m.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"üë§"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Allow Registration"}),e.jsx("small",{children:"Users can register themselves"})]})]})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:l.requireApproval,onChange:m=>k("requireApproval",m.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"‚úÖ"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Require Approval"}),e.jsx("small",{children:"New users need admin approval"})]})]})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:l.enableTwoFactor||!1,onChange:m=>k("enableTwoFactor",m.target.checked)}),e.jsxs("div",{className:"setting-content",children:[e.jsx("div",{className:"setting-icon",children:"üîí"}),e.jsxs("div",{className:"setting-text",children:[e.jsx("strong",{children:"Two-Factor Authentication"}),e.jsx("small",{children:"Enhanced security for user accounts"})]})]})]})})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"üë• User Management"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Maximum Users"}),e.jsx("input",{type:"number",value:l.maxUsers,onChange:m=>k("maxUsers",parseInt(m.target.value)),className:"form-input",min:"1",max:"10000"}),e.jsx("small",{className:"form-help",children:"Set a limit on total platform users"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"User Session Timeout"}),e.jsxs("select",{value:l.sessionTimeout||"24",onChange:m=>k("sessionTimeout",m.target.value),className:"form-input",children:[e.jsx("option",{value:"1",children:"1 Hour"}),e.jsx("option",{value:"8",children:"8 Hours"}),e.jsx("option",{value:"24",children:"24 Hours"}),e.jsx("option",{value:"168",children:"7 Days"}),e.jsx("option",{value:"720",children:"30 Days"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default User Permissions"}),e.jsxs("select",{value:l.defaultPermissions||"read",onChange:m=>k("defaultPermissions",m.target.value),className:"form-input",children:[e.jsx("option",{value:"read",children:"Read Only"}),e.jsx("option",{value:"participate",children:"Participate in Courses"}),e.jsx("option",{value:"create",children:"Create Content"}),e.jsx("option",{value:"moderate",children:"Moderate Platform"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"User Data Retention"}),e.jsxs("select",{value:l.dataRetention||"indefinite",onChange:m=>k("dataRetention",m.target.value),className:"form-input",children:[e.jsx("option",{value:"indefinite",children:"Indefinite"}),e.jsx("option",{value:"1year",children:"1 Year"}),e.jsx("option",{value:"2years",children:"2 Years"}),e.jsx("option",{value:"5years",children:"5 Years"})]})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"üåê SEO & Analytics"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Meta Title"}),e.jsx("input",{type:"text",value:l.seo.metaTitle,onChange:m=>k("seo",{...l.seo,metaTitle:m.target.value}),className:"form-input",placeholder:"Your Platform - Training & Education"}),e.jsx("small",{className:"form-help",children:"Appears in search engine results (50-60 characters)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Meta Description"}),e.jsx("textarea",{value:l.seo.metaDescription,onChange:m=>k("seo",{...l.seo,metaDescription:m.target.value}),className:"form-textarea",rows:"3",placeholder:"Learn new skills with our comprehensive training platform..."}),e.jsx("small",{className:"form-help",children:"Brief description for search engines (150-160 characters)"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Google Analytics ID"}),e.jsx("input",{type:"text",value:l.analytics?.googleAnalytics||"",onChange:m=>k("analytics",{...l.analytics,googleAnalytics:m.target.value}),className:"form-input",placeholder:"GA-XXXXXXXXX-X"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Google Tag Manager ID"}),e.jsx("input",{type:"text",value:l.analytics?.gtm||"",onChange:m=>k("analytics",{...l.analytics,gtm:m.target.value}),className:"form-input",placeholder:"GTM-XXXXXXX"})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h4",{children:"‚öôÔ∏è Advanced Settings"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Platform Timezone"}),e.jsxs("select",{value:l.timezone||"UTC",onChange:m=>k("timezone",m.target.value),className:"form-input",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default Language"}),e.jsxs("select",{value:l.defaultLanguage||"en",onChange:m=>k("defaultLanguage",m.target.value),className:"form-input",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"it",children:"Italian"}),e.jsx("option",{value:"pt",children:"Portuguese"}),e.jsx("option",{value:"zh",children:"Chinese"}),e.jsx("option",{value:"ja",children:"Japanese"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Custom CSS"}),e.jsx("textarea",{value:l.customCSS||"",onChange:m=>k("customCSS",m.target.value),className:"form-textarea",rows:"4",placeholder:"/* Add custom CSS styles here */"}),e.jsx("small",{className:"form-help",children:"Add custom styling to override default themes"})]})]})]}),e.jsxs("div",{className:"platform-summary",children:[e.jsx("h4",{children:"Platform Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Platform Name:"}),e.jsx("span",{className:"summary-value",children:l.platformName})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"URL Slug:"}),e.jsxs("span",{className:"summary-value",children:["/",l.platformSlug]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Template:"}),e.jsx("span",{className:"summary-value",children:j.find(m=>m.id===l.template)?.name})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Pages:"}),e.jsx("span",{className:"summary-value",children:l.pages.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Features:"}),e.jsx("span",{className:"summary-value",children:Object.values(l.features).filter(Boolean).length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Max Users:"}),e.jsx("span",{className:"summary-value",children:l.maxUsers})]})]})]})]});default:return null}};return t?e.jsx("div",{className:"create-platform-modal-overlay",children:e.jsxs("div",{className:"create-platform-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"Create New Platform"}),e.jsx("p",{children:"Set up a new training platform for your company"})]}),e.jsx("button",{className:"modal-close",onClick:s,children:"√ó"})]}),e.jsxs("div",{className:"modal-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${i/v*100}%`}})}),e.jsx("div",{className:"progress-steps",children:[{number:1,label:"Company"},{number:2,label:"Details"},{number:3,label:"Design"},{number:4,label:"Template"},{number:5,label:"Pages"},{number:6,label:"Content"},{number:7,label:"Features"},{number:8,label:"Settings"}].map((m,D)=>e.jsxs("div",{className:"progress-step-container",children:[e.jsx("div",{className:`progress-step ${i>m.number?"completed":i===m.number?"active":""}`,children:i>m.number?"":m.number}),e.jsx("span",{className:"progress-label",children:m.label})]},m.number))})]}),q(),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"footer-left",children:[i>1&&e.jsx("button",{className:"btn-secondary",onClick:T,children:"‚Üê Previous"}),i>=2&&e.jsx("button",{className:`btn-preview ${d&&!d.closed?"preview-open":""}`,onClick:W,title:d&&!d.closed?"Preview is live - changes update automatically":"Open platform preview in new tab",children:d&&!d.closed?"üîÑ Live Preview":"üëÅÔ∏è Preview"})]}),e.jsx("div",{className:"footer-center"}),e.jsxs("div",{className:"footer-right",children:[e.jsx("button",{className:"btn-secondary",onClick:s,children:"Cancel"}),i<v?e.jsx("button",{className:"btn-primary",onClick:w,children:"Next ‚Üí"}):e.jsx("button",{className:"btn-primary",onClick:L,disabled:g,children:g?"Creating...":"Create Platform"})]})]}),y.submit&&e.jsx("div",{className:"error-banner",children:y.submit})]})}):null},Iw=({isOpen:t,isEdit:s,companies:a,formData:n,showPassword:i,onFormChange:r,onTogglePassword:o,onSubmit:c,onCancel:d})=>{const[u,l]=h.useState("basic");if(!t)return null;const p=j=>{j.preventDefault(),c(j)},g=j=>{const{name:C,value:x,type:N,checked:R}=j.target;r({...n,[C]:N==="checkbox"?R:x})},b=j=>{const C=n.permissions.includes(j)?n.permissions.filter(x=>x!==j):[...n.permissions,j];r({...n,permissions:C})},y=[{id:"manage_users",label:"Manage Users",icon:"üë•",description:"Create, edit, and delete users"},{id:"manage_content",label:"Manage Content",icon:"üìù",description:"Edit rebuttals, FAQs, and categories"},{id:"view_analytics",label:"View Analytics",icon:"üìä",description:"Access reports and analytics"},{id:"manage_settings",label:"Manage Settings",icon:"‚öôÔ∏è",description:"Configure system settings"},{id:"manage_billing",label:"Manage Billing",icon:"üí≥",description:"Handle billing and subscriptions"}],f=[{value:"user",label:"User",icon:"üë§",description:"Basic access level"},{value:"admin",label:"Company Admin",icon:"üõ°Ô∏è",description:"Administrative privileges"},{value:"super-admin",label:"Super Admin",icon:"üëë",description:"Full system access"}],v=[{id:"basic",label:"Basic Info",icon:"üë§"},{id:"security",label:"Security",icon:"üîí"},{id:"permissions",label:"Permissions",icon:"üõ°Ô∏è"}];return e.jsx("div",{className:"edit-admin-modal-overlay",onClick:d,children:e.jsxs("div",{className:"edit-admin-modal-container",onClick:j=>j.stopPropagation(),children:[e.jsx("div",{className:"edit-admin-modal-header",children:e.jsxs("div",{className:"modal-header-content",children:[e.jsxs("div",{className:"modal-icon-section",children:[e.jsx("div",{className:"modal-main-icon",children:"‚úèÔ∏è"}),e.jsxs("div",{className:"modal-title-group",children:[e.jsx("h2",{children:s?"Edit Administrator":"Create New User"}),e.jsx("p",{children:"Manage user information and permissions"})]})]}),e.jsx("button",{className:"modal-close-btn",onClick:d,"aria-label":"Close modal",children:e.jsx("span",{children:"‚úï"})})]})}),e.jsx("div",{className:"modal-nav-tabs",children:v.map(j=>e.jsxs("button",{className:`nav-tab ${u===j.id?"active":""}`,onClick:()=>l(j.id),children:[e.jsx("span",{className:"nav-tab-icon",children:j.icon}),e.jsx("span",{className:"nav-tab-label",children:j.label})]},j.id))}),e.jsxs("form",{onSubmit:p,className:"edit-admin-form",children:[e.jsxs("div",{className:"modal-body",children:[u==="basic"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"üë§ Basic Information"}),e.jsx("p",{children:"Essential user details and identification"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"name",children:[e.jsx("span",{className:"label-icon",children:"üë§"}),"Full Name *"]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:g,required:!0,placeholder:"Enter full name",className:"form-input"})})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx("span",{className:"label-icon",children:"üìß"}),"Email Address *"]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:g,required:!0,placeholder:"Enter email address",className:"form-input"})})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"companyId",children:[e.jsx("span",{className:"label-icon",children:"üè¢"}),"Company *"]}),e.jsx("div",{className:"select-wrapper",children:e.jsxs("select",{id:"companyId",name:"companyId",value:n.companyId,onChange:g,required:!0,className:"form-select",children:[e.jsx("option",{value:"",children:"Select company"}),a.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"role",children:[e.jsx("span",{className:"label-icon",children:"üõ°Ô∏è"}),"User Role *"]}),e.jsx("div",{className:"role-selector",children:f.map(j=>e.jsxs("div",{className:`role-option ${n.role===j.value?"selected":""}`,onClick:()=>g({target:{name:"role",value:j.value}}),children:[e.jsx("div",{className:"role-icon",children:j.icon}),e.jsxs("div",{className:"role-info",children:[e.jsx("div",{className:"role-label",children:j.label}),e.jsx("div",{className:"role-description",children:j.description})]})]},j.value))})]})]}),e.jsx("div",{className:"status-section",children:e.jsx("div",{className:"status-toggle",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:n.isActive,onChange:g,className:"toggle-input"}),e.jsx("span",{className:"toggle-slider"}),e.jsxs("span",{className:"toggle-text",children:[e.jsx("span",{className:"toggle-icon",children:n.isActive?"‚úÖ":"‚ùå"}),n.isActive?"Active User":"Inactive User"]})]})})})]}),u==="security"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"üîí Security Settings"}),e.jsx("p",{children:"Password and authentication configuration"})]}),e.jsxs("div",{className:"security-card",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"password",children:[e.jsx("span",{className:"label-icon",children:"üîë"}),"Password ",s?"(leave blank to keep current)":"*"]}),e.jsxs("div",{className:"password-wrapper",children:[e.jsx("input",{type:i?"text":"password",id:"password",name:"password",value:n.password,onChange:g,required:!s,placeholder:s?"Enter new password to change":"Enter password",className:"form-input password-input"}),e.jsx("button",{type:"button",onClick:o,className:"password-toggle",children:i?"üôà":"üëÅÔ∏è"})]})]}),e.jsxs("div",{className:"security-tips",children:[e.jsxs("div",{className:"tips-header",children:[e.jsx("span",{className:"tips-icon",children:"üí°"}),e.jsx("span",{children:"Password Requirements"})]}),e.jsxs("ul",{className:"tips-list",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Include uppercase and lowercase letters"}),e.jsx("li",{children:"Include at least one number"}),e.jsx("li",{children:"Include at least one special character"})]})]})]})]}),u==="permissions"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"üõ°Ô∏è Permissions & Access"}),e.jsx("p",{children:"Configure what this user can access and modify"})]}),n.role==="admin"?e.jsx("div",{className:"permissions-grid",children:y.map(j=>e.jsxs("div",{className:`permission-card ${n.permissions.includes(j.id)?"selected":""}`,onClick:()=>b(j.id),children:[e.jsxs("div",{className:"permission-header",children:[e.jsx("span",{className:"permission-icon",children:j.icon}),e.jsxs("div",{className:"permission-checkbox",children:[e.jsx("input",{type:"checkbox",checked:n.permissions.includes(j.id),onChange:()=>b(j.id),className:"checkbox-input"}),e.jsx("span",{className:"checkbox-custom"})]})]}),e.jsxs("div",{className:"permission-content",children:[e.jsx("h4",{children:j.label}),e.jsx("p",{children:j.description})]})]},j.id))}):e.jsxs("div",{className:"permissions-notice",children:[e.jsx("div",{className:"notice-icon",children:"‚ÑπÔ∏è"}),e.jsxs("div",{className:"notice-content",children:[e.jsx("h4",{children:"Role-Based Permissions"}),e.jsx("p",{children:n.role==="super-admin"?"Super Administrators have full access to all features and settings.":"Regular users have limited access based on their assigned role."})]})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"footer-actions",children:[e.jsxs("button",{type:"button",className:"btn-secondary",onClick:d,children:[e.jsx("span",{className:"btn-icon",children:"‚ùå"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[e.jsx("span",{className:"btn-icon",children:s?"üíæ":"‚ûï"}),s?"Update Administrator":"Create User"]})]})})]})]})})},Mw=({isOpen:t,platform:s,platformForm:a,setPlatformForm:n,activePageBuilderTab:i,setActivePageBuilderTab:r,selectedPage:o,setSelectedPage:c,selectedSection:d,setSelectedSection:u,showLivePreview:l,setShowLivePreview:p,onSave:g,onCancel:b,companies:y=[]})=>{const[f,v]=h.useState(null),[j,C]=h.useState(""),[x,N]=h.useState(!1),[R,E]=h.useState(!1),[z,k]=h.useState(null),[V,$]=h.useState([]),[A,_]=h.useState([]),[O,Y]=h.useState([]),[U,w]=h.useState([]),[T,W]=h.useState({});if(!t)return null;h.useEffect(()=>{if(s&&s.companyId&&y.length>0){N(!0),E(!0);const H=y.find(se=>se.id===s.companyId);if(H){v(H);const se=typeof window<"u"?window.location.origin:"",Z=H.slug||H.id;C(Z==="long-home"?`${se}/app`:`${se}/company/${Z}`)}P(s.companyId),N(!1)}},[s,y]);const P=async H=>{try{const se=J(),[Z,he,pe,De]=await Promise.all([ue(ne(se,"categories")),ue(ne(se,"rebuttals")),ue(ne(se,"faqs")),ue(ne(se,"serviceTopics"))]),Ce=Z.docs.map(Pe=>({id:Pe.id,...Pe.data()}));$(Ce);const ze=he.docs.map(Pe=>({id:Pe.id,...Pe.data()}));_(ze);const gt=pe.docs.map(Pe=>({id:Pe.id,...Pe.data()}));Y(gt);const ft=De.docs.map(Pe=>({id:Pe.id,...Pe.data()}));w(ft),W({heroTitle:"Long Home Products Training Platform",heroSubtitle:"Master your sales skills with our comprehensive training programs",categories:Ce.slice(0,8),rebuttals:ze.slice(0,4),faqs:gt.slice(0,3),topics:ft.slice(0,4)});const ut={...a,pages:{dashboard:{title:"Dashboard",slug:"dashboard",layout:"training",content:{hero:{title:"Long Home Products Training Dashboard",subtitle:"Welcome to your sales training platform",backgroundImage:"",ctaText:"Start Training",ctaLink:"/training"},sections:[{type:"sidebar",title:"Navigation Sidebar",content:[{icon:"üìä",label:"Dashboard",active:!0},{icon:"üéØ",label:"Rebuttals",active:!1},{icon:"‚ùì",label:"FAQ",active:!1},{icon:"üìà",label:"Progress",active:!1}],description:"Main navigation sidebar"},{type:"stats",title:"Training Statistics",content:[{label:"Rebuttals Mastered",value:"24",icon:"üéØ"},{label:"Training Hours",value:"12.5",icon:"‚è±Ô∏è"},{label:"Progress Score",value:"85%",icon:"üìä"}],description:"Your training progress overview"}]}},rebuttals:{title:"Rebuttal Library",slug:"rebuttals",layout:"rebuttals",content:{hero:{title:"Call Center Rebuttals",subtitle:"Master effective responses to common objections",backgroundImage:"",ctaText:"Browse Categories",ctaLink:"/rebuttals"},sections:[{type:"sidebar",title:"Category Sidebar",content:Ce,description:"Browse rebuttals by category"},{type:"rebuttals",title:"Featured Rebuttals",content:ze.slice(0,6),description:"Essential rebuttals for home improvement sales"}]}},faq:{title:"Frequently Asked Questions",slug:"faq",layout:"faq",content:{hero:{title:"Frequently Asked Questions",subtitle:"Find answers to common questions about our training platform and sales techniques",backgroundImage:"",ctaText:"Browse All FAQs",ctaLink:"/faq"},sections:[{type:"faqs",title:"All Questions",content:gt,description:"Complete FAQ library"}]}},customerService:{title:"Customer Service Training",slug:"customer-service",layout:"customer-service",content:{hero:{title:"Customer Service Excellence",subtitle:"Learn effective customer service techniques for home improvement professionals",backgroundImage:"",ctaText:"Start Training",ctaLink:"/customer-service"},sections:[{type:"topics",title:"Training Topics",content:ft,description:"Customer service training modules"}]}}}};n(ut),k(ut),E(!1)}catch(se){console.error("Error fetching platform data:",se),E(!1)}},L=(H,se)=>{W(he=>({...he,[H]:se}));const Z=document.querySelector(".real-site-iframe");if(Z&&Z.contentWindow)try{Z.contentWindow.postMessage({type:"UPDATE_CONTENT",field:H,value:se},"*")}catch(he){console.log("Could not update iframe content:",he)}},q=(H,se)=>{L(H,se)},m=async()=>{try{const H=J(),se=ie(H,"companies",s.companyId);await _e(se,{heroTitle:T.heroTitle,heroSubtitle:T.heroSubtitle,lastUpdated:new Date}),console.log("‚úÖ Changes saved to database")}catch(H){console.error("‚ùå Error saving changes:",H)}};h.useEffect(()=>{const H=se=>{se.data.type==="IFRAME_READY"&&console.log("‚úÖ Iframe is ready for content updates")};return window.addEventListener("message",H),()=>window.removeEventListener("message",H)},[]);const D=(H,se)=>{const Z=H.split("."),he={...a};let pe=he;for(let De=0;De<Z.length-1;De++)pe[Z[De]]||(pe[Z[De]]={}),pe=pe[Z[De]];pe[Z[Z.length-1]]=se,n(he)},S=()=>{const H=`page_${Date.now()}`,se={title:"New Page",slug:H,layout:"default",content:{hero:{title:"New Page Title",subtitle:"New page content",backgroundImage:"",ctaText:"Get Started",ctaLink:"/"},sections:[]}};n({...a,pages:{...a.pages,[H]:se}})},M=H=>{const se={...a.pages};delete se[H],n({...a,pages:se}),o===H&&c(Object.keys(se)[0]||"home")},F=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"üìÑ Page Management"}),R?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading platform content..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-list",children:[Object.entries(a.pages||{}).map(([H,se])=>e.jsxs("div",{className:`page-item ${o===H?"active":""}`,onClick:()=>c(H),children:[e.jsx("span",{className:"page-icon",children:"üìÑ"}),e.jsxs("div",{className:"page-info",children:[e.jsxs("div",{className:"page-title",children:[se.title,se.content?.sections&&e.jsxs("span",{className:"sections-count",children:["(",se.content.sections.length," sections)"]})]}),e.jsxs("div",{className:"page-slug",children:["/",se.slug]}),se.content?.sections&&se.content.sections.length>0&&e.jsx("div",{className:"page-sections",children:se.content.sections.map((Z,he)=>e.jsx("span",{className:"section-tag",children:Z.type},he))})]}),e.jsx("div",{className:"page-actions",children:e.jsx("button",{className:"page-action-btn",onClick:Z=>{Z.stopPropagation(),M(H)},children:"üóëÔ∏è"})})]},H)),e.jsx("button",{className:"add-page-btn",onClick:S,children:"‚ûï Add Page"})]}),e.jsxs("div",{className:"data-summary",children:[e.jsx("h4",{children:"üìä Content Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"üìÑ"}),e.jsx("span",{className:"summary-label",children:"Pages"}),e.jsx("span",{className:"summary-value",children:Object.keys(a.pages||{}).length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"üí¨"}),e.jsx("span",{className:"summary-label",children:"Rebuttals"}),e.jsx("span",{className:"summary-value",children:A.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"üìã"}),e.jsx("span",{className:"summary-label",children:"Categories"}),e.jsx("span",{className:"summary-value",children:V.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"‚ùì"}),e.jsx("span",{className:"summary-label",children:"FAQs"}),e.jsx("span",{className:"summary-value",children:O.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-icon",children:"üéß"}),e.jsx("span",{className:"summary-label",children:"Service Topics"}),e.jsx("span",{className:"summary-value",children:U.length})]})]})]})]})]}),X=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"üß≠ Navigation"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Navigation"}),e.jsx("div",{className:"navigation-items",children:(a.navigation?.main||[]).map((H,se)=>e.jsxs("div",{className:"navigation-item",children:[e.jsx("input",{type:"text",value:H.label,onChange:Z=>{const he=[...a.navigation?.main||[]];he[se].label=Z.target.value,D("navigation.main",he)},placeholder:"Label"}),e.jsx("input",{type:"text",value:H.url,onChange:Z=>{const he=[...a.navigation?.main||[]];he[se].url=Z.target.value,D("navigation.main",he)},placeholder:"URL"}),e.jsx("input",{type:"text",value:H.icon,onChange:Z=>{const he=[...a.navigation?.main||[]];he[se].icon=Z.target.value,D("navigation.main",he)},placeholder:"Icon"})]},se))})]})]}),oe=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"üé® Branding"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Primary Color"}),e.jsx("input",{type:"color",value:a.branding?.primaryColor||"#3B82F6",onChange:H=>D("branding.primaryColor",H.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Secondary Color"}),e.jsx("input",{type:"color",value:a.branding?.secondaryColor||"#1E40AF",onChange:H=>D("branding.secondaryColor",H.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accent Color"}),e.jsx("input",{type:"color",value:a.branding?.accentColor||"#F59E0B",onChange:H=>D("branding.accentColor",H.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Font Family"}),e.jsxs("select",{value:a.branding?.fontFamily||"Inter",onChange:H=>D("branding.fontFamily",H.target.value),children:[e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"Open Sans",children:"Open Sans"}),e.jsx("option",{value:"Lato",children:"Lato"})]})]})]}),ae=()=>e.jsxs("div",{className:"builder-panel",children:[e.jsx("h3",{children:"‚öôÔ∏è Settings"}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.settings?.allowRegistration!==!1,onChange:H=>D("settings.allowRegistration",H.target.checked)}),"Allow Registration"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.settings?.requireEmailVerification||!1,onChange:H=>D("settings.requireEmailVerification",H.target.checked)}),"Require Email Verification"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.settings?.enableNotifications!==!1,onChange:H=>D("settings.enableNotifications",H.target.checked)}),"Enable Notifications"]})})]});return e.jsx("div",{className:"new-modal-overlay",children:e.jsxs("div",{className:"platform-builder-container",children:[e.jsxs("div",{className:"platform-builder-header",children:[e.jsxs("div",{className:"platform-builder-title",children:[e.jsx("span",{className:"platform-builder-icon",children:"üéØ"}),e.jsxs("div",{className:"title-content",children:[e.jsx("h2",{children:"Platform Page Builder"}),e.jsxs("span",{className:"platform-builder-subtitle",children:["Edit ",a.name," - Visual Page Editor"]}),f&&e.jsxs("div",{className:"company-info-header",children:[e.jsxs("div",{className:"company-badge",children:[e.jsx("span",{className:"company-icon",children:"üè¢"}),e.jsx("span",{className:"company-name",children:f.name}),e.jsx("span",{className:`company-status ${f.status}`,children:f.status})]}),e.jsxs("div",{className:"company-details-mini",children:[e.jsxs("span",{className:"company-email",children:["üìß ",f.email]}),e.jsxs("span",{className:"company-industry",children:["üè≠ ",f.industry]}),e.jsxs("span",{className:"company-plan",children:["üíé ",f.plan]})]})]})]})]}),e.jsxs("div",{className:"platform-builder-actions",children:[j&&e.jsx("button",{className:"preview-btn",onClick:()=>p(!l),children:l?"üìù Edit Mode":"üëÅÔ∏è Live Preview"}),e.jsx("button",{className:"new-modal-close",onClick:b,children:"√ó"})]})]}),e.jsxs("div",{className:"platform-builder-body",children:[e.jsxs("div",{className:"platform-builder-sidebar",children:[e.jsxs("div",{className:"builder-tabs",children:[e.jsx("button",{className:`builder-tab ${i==="pages"?"active":""}`,onClick:()=>r("pages"),children:"üìÑ Pages"}),e.jsx("button",{className:`builder-tab ${i==="navigation"?"active":""}`,onClick:()=>r("navigation"),children:"üß≠ Navigation"}),e.jsx("button",{className:`builder-tab ${i==="branding"?"active":""}`,onClick:()=>r("branding"),children:"üé® Branding"}),e.jsx("button",{className:`builder-tab ${i==="settings"?"active":""}`,onClick:()=>r("settings"),children:"‚öôÔ∏è Settings"})]}),i==="pages"&&F(),i==="navigation"&&X(),i==="branding"&&oe(),i==="settings"&&ae()]}),e.jsx("div",{className:"platform-builder-main",children:e.jsxs("div",{className:"wordpress-style-editor",children:[e.jsxs("div",{className:"wp-toolbar",children:[e.jsxs("div",{className:"toolbar-left",children:[e.jsxs("button",{className:`toolbar-btn ${l?"":"active"}`,onClick:()=>p(!1),children:[e.jsx("span",{className:"btn-icon",children:"‚úèÔ∏è"}),e.jsx("span",{className:"btn-label",children:"Edit"})]}),e.jsxs("button",{className:`toolbar-btn ${l?"active":""}`,onClick:()=>p(!0),children:[e.jsx("span",{className:"btn-icon",children:"üëÅÔ∏è"}),e.jsx("span",{className:"btn-label",children:"Preview"})]})]}),e.jsx("div",{className:"toolbar-center",children:e.jsx("div",{className:"page-selector",children:e.jsx("select",{value:o,onChange:H=>c(H.target.value),className:"page-select",children:Object.entries(a.pages||{}).map(([H,se])=>e.jsx("option",{value:H,children:se.title},H))})})}),e.jsxs("div",{className:"toolbar-right",children:[e.jsxs("button",{className:"toolbar-btn secondary",onClick:m,children:[e.jsx("span",{className:"btn-icon",children:"üíæ"}),e.jsx("span",{className:"btn-label",children:"Save Draft"})]}),e.jsxs("button",{className:"toolbar-btn primary",onClick:async()=>{await m(),g()},children:[e.jsx("span",{className:"btn-icon",children:"üöÄ"}),e.jsx("span",{className:"btn-label",children:"Publish"})]}),e.jsxs("button",{className:"toolbar-btn",onClick:()=>p(!l),children:[e.jsx("span",{className:"btn-icon",children:l?"üìù":"üëÅÔ∏è"}),e.jsx("span",{className:"btn-label",children:l?"Edit Mode":"Live Preview"})]})]})]}),e.jsx("div",{className:"wp-content-area",children:l?e.jsxs("div",{className:"real-site-preview",children:[e.jsxs("div",{className:"preview-header",children:[e.jsxs("div",{className:"preview-info",children:[e.jsx("span",{className:"preview-label",children:"üè† Long Home Products Training Platform"}),e.jsx("span",{className:"preview-url-text",children:j})]}),e.jsxs("div",{className:"preview-controls",children:[e.jsx("button",{className:"preview-control-btn",onClick:()=>p(!1),children:"üìù Edit Mode"}),e.jsx("button",{className:"copy-url-btn",onClick:()=>navigator.clipboard.writeText(j),children:"üìã Copy URL"})]})]}),e.jsx("div",{className:"real-site-iframe-container",children:e.jsx("iframe",{src:j,className:"real-site-iframe",title:"Long Home Products Real Site",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})})]}):e.jsxs("div",{className:"wp-editor-container",children:[e.jsxs("div",{className:"wp-editor-sidebar",children:[e.jsxs("div",{className:"editor-panel",children:[e.jsx("h4",{children:"üìÑ Page Settings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Page Title"}),e.jsx("input",{type:"text",value:a.pages?.[o]?.title||"",onChange:H=>D(`pages.${o}.title`,H.target.value),className:"wp-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Page Slug"}),e.jsx("input",{type:"text",value:a.pages?.[o]?.slug||"",onChange:H=>D(`pages.${o}.slug`,H.target.value),className:"wp-input"})]})]}),e.jsxs("div",{className:"editor-panel",children:[e.jsx("h4",{children:"üé® Hero Section"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Title"}),e.jsx("input",{type:"text",value:T.heroTitle||"",onChange:H=>L("heroTitle",H.target.value),className:"wp-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hero Subtitle"}),e.jsx("textarea",{value:T.heroSubtitle||"",onChange:H=>L("heroSubtitle",H.target.value),rows:"3",className:"wp-textarea"})]})]}),e.jsxs("div",{className:"editor-panel",children:[e.jsx("h4",{children:"üìã Content Sections"}),e.jsx("div",{className:"sections-list",children:a.pages?.[o]?.content?.sections?.map((H,se)=>e.jsxs("div",{className:"section-item",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("span",{className:"section-type",children:H.type}),e.jsx("span",{className:"section-title",children:H.title})]}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"section-btn edit",onClick:()=>u(se),children:"‚úèÔ∏è"}),e.jsx("button",{className:"section-btn delete",onClick:()=>{const Z=a.pages[o].content.sections.filter((he,pe)=>pe!==se);D(`pages.${o}.content.sections`,Z)},children:"üóëÔ∏è"})]})]},se))}),e.jsx("button",{className:"add-section-btn",onClick:()=>{const H={type:"content",title:"New Section",content:"Section content",description:"Section description"},se=a.pages[o]?.content?.sections||[];D(`pages.${o}.content.sections`,[...se,H])},children:"‚ûï Add Section"})]})]}),e.jsx("div",{className:"wp-editor-main",children:e.jsx("div",{className:"wp-canvas",children:e.jsxs("div",{className:"page-preview",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"editable-title",contentEditable:"true",onBlur:H=>q("heroTitle",H.target.textContent),suppressContentEditableWarning:!0,children:T.heroTitle||"Long Home Products Training Platform"}),e.jsx("p",{className:"editable-subtitle",contentEditable:"true",onBlur:H=>q("heroSubtitle",H.target.textContent),suppressContentEditableWarning:!0,children:T.heroSubtitle||"Master your sales skills with our comprehensive training programs"})]}),e.jsx("div",{className:"page-content",children:a.pages?.[o]?.content?.sections?.map((H,se)=>e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{className:"editable-section-title",contentEditable:"true",children:H.title}),e.jsxs("div",{className:"section-controls",children:[e.jsx("button",{className:"section-control-btn",children:"‚öôÔ∏è"}),e.jsx("button",{className:"section-control-btn",children:"üìã"}),e.jsx("button",{className:"section-control-btn",children:"üóëÔ∏è"})]})]}),e.jsxs("div",{className:"section-content",children:[H.type==="sidebar"&&H.content&&e.jsx("div",{className:"sidebar-preview",children:e.jsx("div",{className:"sidebar-nav",children:H.content.map((Z,he)=>e.jsxs("div",{className:`sidebar-item ${Z.active?"active":""}`,children:[e.jsx("span",{className:"sidebar-icon",children:Z.icon}),e.jsx("span",{className:"sidebar-label",children:Z.label})]},he))})}),H.type==="stats"&&H.content&&e.jsx("div",{className:"stats-grid",children:H.content.map((Z,he)=>e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:Z.icon}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:Z.value}),e.jsx("div",{className:"stat-label",children:Z.label})]})]},he))}),H.type==="features"&&H.content&&e.jsx("div",{className:"features-grid",children:H.content.map((Z,he)=>e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:Z.icon}),e.jsx("h4",{className:"feature-title",children:Z.title}),e.jsx("p",{className:"feature-description",children:Z.description})]},he))}),H.type==="categories"&&e.jsx("div",{className:"categories-grid",children:(T.categories||[]).slice(0,6).map((Z,he)=>e.jsxs("div",{className:"category-card",children:[e.jsx("span",{className:"category-icon",children:Z.icon||"üìÅ"}),e.jsx("span",{className:"category-name",children:Z.name})]},he))}),H.type==="rebuttals"&&e.jsx("div",{className:"rebuttals-list",children:(T.rebuttals||[]).slice(0,4).map((Z,he)=>e.jsxs("div",{className:"rebuttal-card",children:[e.jsx("h4",{children:Z.title}),e.jsx("p",{children:Z.content})]},he))}),H.type==="faqs"&&e.jsx("div",{className:"faqs-list",children:(T.faqs||[]).slice(0,3).map((Z,he)=>e.jsxs("div",{className:"faq-item",children:[e.jsx("h4",{children:Z.question}),e.jsx("p",{children:Z.answer})]},he))}),H.type==="topics"&&e.jsx("div",{className:"topics-list",children:(T.topics||[]).slice(0,4).map((Z,he)=>e.jsxs("div",{className:"topic-card",children:[e.jsx("h4",{children:Z.title}),e.jsx("p",{children:Z.description})]},he))})]})]},se))})]})})})]})})]})})]})]})})},Ow=()=>{const{currentUser:t,authLoading:s,logout:a}=Rt(),n=tt(),{loading:i,error:r,adminUser:o,companies:c,platforms:d,users:u,companyAdmins:l,deletedCompanies:p,registrationRequests:g,createCompany:b,updateCompany:y,updatePlatform:f,deleteCompany:v,restoreCompany:j,loadData:C}=xw(),{activeTab:x,sidebarCollapsed:N,selectedCompany:R,expandedCompanies:E,showCreateCompany:z,showCreatePlatform:k,showEditCompany:V,showEditPlatform:$,showDeleteConfirm:A,showNewModal:_,editingCompany:O,editingPlatform:Y,itemToDelete:U,modalType:w,activePageBuilderTab:T,selectedPage:W,selectedSection:P,showLivePreview:L,formData:q,editCompanyForm:m,showPassword:D,impersonateMode:S,impersonateCompanyId:M,setActiveTab:F,setSidebarCollapsed:X,setSelectedCompany:oe,setShowCreateCompany:ae,setShowCreatePlatform:H,setActivePageBuilderTab:se,setSelectedPage:Z,setSelectedSection:he,setShowLivePreview:pe,setFormData:De,setEditCompanyForm:Ce,setShowPassword:ze,setImpersonateCompanyId:gt,toggleCompanyExpansion:ft,openDeleteConfirm:ut,closeDeleteConfirm:Pe,openCreateUser:Nt,openEditAdmin:Ut,closeNewModal:xe,openEditCompany:Ee,closeEditCompany:Dt,openEditPlatform:rs,closeEditPlatform:st,toggleImpersonation:at}=vw(),[ht,_t]=h.useState(Ah()),os=async()=>{if(U)try{const{item:ce,type:ee}=U;ee==="company"?await v(ce.id):ee==="platform"?console.log("Delete platform:",ce.id):ee==="user"&&await Lt(ce),Pe()}catch(ce){console.error("Delete error:",ce)}},Lt=async ce=>{try{console.log("üîç SaasAdminDashboard: Attempting to delete user:",ce),await ps.deleteUser(ce.id),console.log("üîç SaasAdminDashboard: User deleted successfully"),await C()}catch(ee){console.error("üîç SaasAdminDashboard: Error deleting user:",ee),ee.message.includes("must be logged in")?alert("You must be logged in to delete users"):ee.message.includes("Firebase Auth session required")?alert("Your session has expired. Please log in again to continue."):ee.message.includes("permission-denied")?alert("You do not have permission to delete users"):ee.message.includes("not found")?alert("User not found. They may have already been deleted."):alert(`Failed to delete user: ${ee.message}`)}},Ht=ce=>{window.confirm(`Are you sure you want to delete user "${ce.name||ce.email}"?`)&&ut({item:ce,type:"user"})},Q=async ce=>{ce.preventDefault();try{await b(m),ae(!1),Ce({name:"",email:"",industry:"",plan:"starter",status:"active",maintenanceMode:!1,maintenanceMessage:"We are currently performing scheduled maintenance. Please check back soon."})}catch(ee){console.error("Create company error:",ee)}},te=async ce=>{ce.preventDefault();try{console.log("üîç Editing company with form data:",m),console.log("üîç Status in form:",m.status),await y(O.id,m),Dt()}catch(ee){console.error("Edit company error:",ee)}},ge=async ce=>{ce.preventDefault();try{await f(Y.id,ht),st()}catch(ee){console.error("Edit platform error:",ee)}},re=async ce=>{ce.preventDefault();try{console.log("Form submit:",q),xe()}catch(ee){console.error("Form submit error:",ee)}},ke=async ce=>{try{const ee=ce.status==="active"?"inactive":"active";await y(ce.id,{status:ee})}catch(ee){console.error("Toggle status error:",ee)}},Ve=async ce=>{try{const ee=J(),Se=ie(ee,"company-registration-requests",ce.id);await _e(Se,{status:"approved",updatedAt:Ie(),approvedAt:Ie()});const ct={name:ce.companyName,email:ce.email,slug:ce.slug,plan:ce.plan||"starter",status:"active",industry:"Other",createdAt:Ie(),updatedAt:Ie()},xt=ie(ne(ee,"companies"));await wt(xt,ct),await C(),alert(`Registration request approved! Company "${ce.companyName}" has been created.`)}catch(ee){console.error("Error approving request:",ee),alert(`Failed to approve request: ${ee.message}`)}},fe=async ce=>{if(window.confirm(`Are you sure you want to reject the registration request from "${ce.companyName}"?`))try{const ee=J(),Se=ie(ee,"company-registration-requests",ce.id);await _e(Se,{status:"rejected",updatedAt:Ie(),rejectedAt:Ie()}),await C(),alert(`Registration request from "${ce.companyName}" has been rejected.`)}catch(ee){console.error("Error rejecting request:",ee),alert(`Failed to reject request: ${ee.message}`)}},Ue=()=>{localStorage.removeItem("impersonation"),a(),n("/admin/login")},ye=()=>{if(console.log("üöÄ Impersonation navigation:",{impersonateMode:S,impersonateCompanyId:M}),S&&M){const ce=c.find(ee=>ee.id===M);if(ce){const ee=ce.slug||ce.id;let Se;ee==="long-home"?Se=`/admin/dashboard?impersonate=${M}`:Se=`/company/${ee}`,console.log("üöÄ Navigating to company dashboard:",Se),localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:M})),n(Se)}else console.warn("üöÄ Company not found for impersonation:",M)}else console.warn("üöÄ Impersonation navigation failed:",{impersonateMode:S,impersonateCompanyId:M})},Ae=()=>{switch(x){case"dashboard":return e.jsx(Nw,{companies:c,platforms:d,users:u,adminUser:o});case"companies":return e.jsx(Sw,{companies:c,companyAdmins:l,expandedCompanies:E,onToggleExpansion:ft,onViewPlatforms:ce=>{oe(ce),F("platforms")},onEditCompany:Ee,onToggleStatus:ke,onDeleteCompany:ut,onCreateCompany:()=>ae(!0)});case"platforms":return e.jsx(Cw,{platforms:d,companies:c,selectedCompany:R,onCreatePlatform:()=>H(!0),onEditPlatform:rs,onDeletePlatform:ut});case"users":return e.jsx(Tw,{users:u,companies:c,companyAdmins:l,onCreateUser:Nt,onEditAdmin:Ut,onDeleteUser:Ht});case"deleted":return e.jsx(Dw,{deletedCompanies:p,onRestoreCompany:j});case"requests":return e.jsx(Pw,{registrationRequests:g,onApproveRequest:Ve,onRejectRequest:fe});default:return e.jsx("div",{children:"Unknown tab"})}};return s||i?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}):r?e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:r}),e.jsx("button",{onClick:()=>n("/admin/login"),children:"Go to Login"})]}):o?e.jsxs("div",{className:"saas-admin-dashboard dark-mode",children:[e.jsxs("header",{className:"saas-admin-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"üöÄ SaaS Admin Dashboard"}),e.jsx("span",{className:"subtitle",children:"Multi-Tenant Training Platform Management"})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("span",{className:"welcome-user",children:["Welcome, ",o.email]}),o.role==="super-admin"&&e.jsxs("div",{className:"impersonate-controls",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{type:"checkbox",checked:S,onChange:at}),e.jsx("span",{children:"Impersonator Mode"})]}),e.jsxs("select",{value:M,onChange:ce=>{gt(ce.target.value),S&&localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:ce.target.value}))},disabled:!S,style:{padding:"6px 10px",borderRadius:6},children:[e.jsx("option",{value:"",children:"Select company"}),c.map(ce=>e.jsx("option",{value:ce.id,children:ce.name||ce.id},ce.id))]}),e.jsx("button",{className:"header-button",onClick:ye,disabled:!S||!M,children:M&&c.find(ce=>ce.id===M)?.slug==="long-home"?"Visit Admin Dashboard":"Visit Training"})]}),e.jsx("button",{className:"header-button",onClick:()=>n("/"),children:"SaaS Landing"}),e.jsx("button",{className:"header-button",onClick:Ue,children:"Logout"})]})]}),e.jsxs("div",{className:"saas-admin-layout",children:[e.jsxs("aside",{className:`saas-sidebar ${N?"collapsed":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[!N&&e.jsx("h3",{children:"üöÄ SaaS Admin"}),e.jsx("button",{className:"sidebar-toggle",onClick:()=>X(!N),children:N?"‚Üí":"‚Üê"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("button",{className:`sidebar-item ${x==="dashboard"?"active":""}`,onClick:()=>F("dashboard"),children:[e.jsx("span",{className:"sidebar-icon",children:"üè†"}),!N&&e.jsx("span",{children:"Dashboard"})]}),e.jsxs("button",{className:`sidebar-item ${x==="companies"?"active":""}`,onClick:()=>F("companies"),children:[e.jsx("span",{className:"sidebar-icon",children:"üè¢"}),!N&&e.jsx("span",{children:"Companies"})]}),e.jsxs("button",{className:`sidebar-item ${x==="platforms"?"active":""}`,onClick:()=>F("platforms"),children:[e.jsx("span",{className:"sidebar-icon",children:"üéØ"}),!N&&e.jsx("span",{children:"Platforms"})]}),e.jsxs("button",{className:`sidebar-item ${x==="users"?"active":""}`,onClick:()=>F("users"),children:[e.jsx("span",{className:"sidebar-icon",children:"üë•"}),!N&&e.jsx("span",{children:"Users"})]}),e.jsxs("button",{className:`sidebar-item ${x==="requests"?"active":""}`,onClick:()=>F("requests"),children:[e.jsx("span",{className:"sidebar-icon",children:"üìã"}),!N&&e.jsx("span",{children:"Registration Requests"})]}),e.jsxs("button",{className:`sidebar-item ${x==="deleted"?"active":""}`,onClick:()=>F("deleted"),children:[e.jsx("span",{className:"sidebar-icon",children:"üóëÔ∏è"}),!N&&e.jsx("span",{children:"Deleted"})]})]})]}),e.jsx("main",{className:"saas-main",children:Ae()})]}),e.jsx(Rw,{isOpen:A,itemToDelete:U,onConfirm:os,onCancel:Pe}),e.jsx(zc,{isOpen:z,isEdit:!1,formData:m,onFormChange:Ce,onSubmit:Q,onCancel:()=>ae(!1)}),e.jsx(zc,{isOpen:V,isEdit:!0,company:O,formData:m,onFormChange:Ce,onSubmit:te,onCancel:Dt}),e.jsx(Lw,{isOpen:k,companies:c,onClose:()=>H(!1),onSuccess:ce=>{console.log("Platform created successfully:",ce),H(!1),C()}}),e.jsx(Iw,{isOpen:_,isEdit:w==="edit-admin",companies:c,formData:q,showPassword:D,onFormChange:De,onTogglePassword:()=>ze(!D),onSubmit:re,onCancel:xe}),$&&e.jsx(Mw,{isOpen:$,platform:Y,platformForm:ht,setPlatformForm:_t,activePageBuilderTab:T,setActivePageBuilderTab:se,selectedPage:W,setSelectedPage:Z,selectedSection:P,setSelectedSection:he,showLivePreview:L,setShowLivePreview:pe,onSave:ge,onCancel:st,companies:c})]}):e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access the SaaS admin dashboard."}),e.jsx("button",{onClick:()=>n("/admin/login"),children:"Go to Login"})]})},Fw=()=>{const t=tt(),[s,a]=h.useState({email:"",password:""}),[n,i]=h.useState(!1),[r,o]=h.useState(""),c=u=>{const{name:l,value:p}=u.target;a(g=>({...g,[l]:p}))},d=async u=>{u.preventDefault(),i(!0),o("");try{const p=(await en(we,s.email,s.password)).user,g=J(),b=await Te(ie(g,"super-admins",p.uid));if(b.exists()){const f=b.data(),v={uid:p.uid,email:p.email,role:"super-admin",...f};localStorage.setItem("adminUser",JSON.stringify(v)),t("/admin/saas");return}const y=await Te(ie(g,"company-admins",p.uid));if(y.exists()){const f=y.data(),v={uid:p.uid,email:p.email,role:"company-admin",companyId:f.companyId,...f};localStorage.setItem("adminUser",JSON.stringify(v)),t("/admin/dashboard");return}o("Access denied. Super admin or company admin privileges required."),await we.signOut()}catch(l){switch(console.error("Login error:",l),l.code){case"auth/user-not-found":o("No account found with this email address.");break;case"auth/wrong-password":o("Incorrect password.");break;case"auth/invalid-email":o("Invalid email address.");break;case"auth/too-many-requests":o("Too many failed attempts. Please try again later.");break;default:o("Login failed. Please check your credentials.")}}finally{i(!1)}};return e.jsxs("div",{className:"saas-admin-login",children:[e.jsx("button",{className:"back-to-home-btn",onClick:()=>t("/"),children:"‚Üê Back to Home"}),e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{children:"üöÄ Admin Login"}),e.jsx("p",{children:"Super Admin & Company Admin Access"})]}),e.jsxs("form",{onSubmit:d,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:c,required:!0,placeholder:"Enter your admin email",disabled:n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:c,required:!0,placeholder:"Enter your password",disabled:n})]}),r&&e.jsx("div",{className:"error-message",children:r}),e.jsx("button",{type:"submit",className:"login-button",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Signing In..."]}):"Sign In to Admin Panel"})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:"Need access? Contact the system administrator."})})]})]})},Uw=()=>{const[t,s]=h.useState([]),[a,n]=h.useState(null),[i,r]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState({title:"",description:"",icon:"",keySteps:[""],quickTips:[""],tags:[""]});h.useEffect(()=>{l()},[]);const l=async()=>{try{const x=ne(J(),"customerServiceCategories"),R=(await ue(x)).docs.map(E=>({id:E.id,...E.data()}));s(R)}catch(x){console.error("Error loading categories:",x)}},p=async()=>{try{const x=ne(J(),"customerServiceCategories");await Qe(x,{...d,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),r(!1),y(),l()}catch(x){console.error("Error adding category:",x)}},g=async()=>{try{if(!a)return;const x=ie(J(),"customerServiceCategories",a.id);await _e(x,{...d,updatedAt:new Date().toISOString()}),c(!1),y(),l()}catch(x){console.error("Error updating category:",x)}},b=async x=>{if(window.confirm("Are you sure you want to delete this category?"))try{const N=ie(J(),"customerServiceCategories",x);await ot(N),l()}catch(N){console.error("Error deleting category:",N)}},y=()=>{u({title:"",description:"",icon:"",keySteps:[""],quickTips:[""],tags:[""]}),n(null)},f=(x,N)=>{u(R=>({...R,[N]:x.target.value}))},v=(x,N,R)=>{u(E=>({...E,[R]:E[R].map((z,k)=>k===x?N:z)}))},j=x=>{u(N=>({...N,[x]:[...N[x],""]}))},C=(x,N)=>{u(R=>({...R,[N]:R[N].filter((E,z)=>z!==x)}))};return e.jsxs("div",{className:"customer-service-manager",children:[e.jsxs("div",{className:"manager-header",children:[e.jsx("h1",{children:"Customer Service Content Manager"}),e.jsx("button",{className:"add-button",onClick:()=>{y(),r(!0)},children:"Add New Category"})]}),e.jsx("div",{className:"categories-grid",children:t.map(x=>e.jsxs("div",{className:"category-card",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:"category-icon",children:x.icon}),e.jsx("h3",{children:x.title})]}),e.jsx("p",{className:"category-description",children:x.description}),e.jsxs("div",{className:"category-actions",children:[e.jsx("button",{onClick:()=>{n(x),u(x),c(!0)},className:"edit-button",children:"Edit"}),e.jsx("button",{onClick:()=>b(x.id),className:"delete-button",children:"Delete"})]})]},x.id))}),i&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Add New Category"}),e.jsxs("form",{onSubmit:x=>{x.preventDefault(),p()},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",value:d.title,onChange:x=>f(x,"title"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:d.description,onChange:x=>f(x,"description"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:d.icon,onChange:x=>f(x,"icon"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Key Steps"}),d.keySteps.map((x,N)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:x,onChange:R=>v(N,R.target.value,"keySteps"),required:!0}),e.jsx("button",{type:"button",onClick:()=>C(N,"keySteps"),className:"remove-button",children:"Remove"})]},N)),e.jsx("button",{type:"button",onClick:()=>j("keySteps"),className:"add-item-button",children:"Add Step"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Tips"}),d.quickTips.map((x,N)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:x,onChange:R=>v(N,R.target.value,"quickTips"),required:!0}),e.jsx("button",{type:"button",onClick:()=>C(N,"quickTips"),className:"remove-button",children:"Remove"})]},N)),e.jsx("button",{type:"button",onClick:()=>j("quickTips"),className:"add-item-button",children:"Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags"}),d.tags.map((x,N)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:x,onChange:R=>v(N,R.target.value,"tags"),required:!0}),e.jsx("button",{type:"button",onClick:()=>C(N,"tags"),className:"remove-button",children:"Remove"})]},N)),e.jsx("button",{type:"button",onClick:()=>j("tags"),className:"add-item-button",children:"Add Tag"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"save-button",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{r(!1),y()},className:"cancel-button",children:"Cancel"})]})]})]})}),o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Edit Category"}),e.jsxs("form",{onSubmit:x=>{x.preventDefault(),g()},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",value:d.title,onChange:x=>f(x,"title"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:d.description,onChange:x=>f(x,"description"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:d.icon,onChange:x=>f(x,"icon"),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Key Steps"}),d.keySteps.map((x,N)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:x,onChange:R=>v(N,R.target.value,"keySteps"),required:!0}),e.jsx("button",{type:"button",onClick:()=>C(N,"keySteps"),className:"remove-button",children:"Remove"})]},N)),e.jsx("button",{type:"button",onClick:()=>j("keySteps"),className:"add-item-button",children:"Add Step"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Tips"}),d.quickTips.map((x,N)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:x,onChange:R=>v(N,R.target.value,"quickTips"),required:!0}),e.jsx("button",{type:"button",onClick:()=>C(N,"quickTips"),className:"remove-button",children:"Remove"})]},N)),e.jsx("button",{type:"button",onClick:()=>j("quickTips"),className:"add-item-button",children:"Add Tip"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags"}),d.tags.map((x,N)=>e.jsxs("div",{className:"array-input-group",children:[e.jsx("input",{type:"text",value:x,onChange:R=>v(N,R.target.value,"tags"),required:!0}),e.jsx("button",{type:"button",onClick:()=>C(N,"tags"),className:"remove-button",children:"Remove"})]},N)),e.jsx("button",{type:"button",onClick:()=>j("tags"),className:"add-item-button",children:"Add Tag"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"submit",className:"save-button",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>{c(!1),y()},className:"cancel-button",children:"Cancel"})]})]})]})})]})},Bw=()=>{const[t,s]=h.useState({firebaseInit:"pending",auth:"pending",firestore:"pending",collections:"pending"}),[a,n]=h.useState(null);h.useEffect(()=>{(async()=>{try{console.log("üîç FirebaseTest: Starting Firebase tests...");try{console.log("üîç FirebaseTest: Testing Firebase initialization..."),await wr(),s(c=>({...c,firebaseInit:"success"})),console.log("‚úÖ FirebaseTest: Firebase initialized successfully")}catch(c){console.error("‚ùå FirebaseTest: Firebase initialization failed:",c),s(d=>({...d,firebaseInit:"error"})),n(`Firebase initialization failed: ${c.message}`);return}try{if(console.log("üîç FirebaseTest: Testing Auth..."),we)console.log("‚úÖ FirebaseTest: Auth is available"),s(c=>({...c,auth:"success"}));else throw new Error("Auth is not available")}catch(c){console.error("‚ùå FirebaseTest: Auth test failed:",c),s(d=>({...d,auth:"error"}))}try{if(console.log("üîç FirebaseTest: Testing Firestore..."),J())console.log("‚úÖ FirebaseTest: Firestore is available"),s(c=>({...c,firestore:"success"}));else throw new Error("Firestore is not available")}catch(c){console.error("‚ùå FirebaseTest: Firestore test failed:",c),s(d=>({...d,firestore:"error"}))}try{console.log("üîç FirebaseTest: Testing Firestore collections...");const c=["rebuttals","categories","admins","users"];let d=[];for(const u of c)try{const l=await ue(ne(J(),u));console.log(`‚úÖ FirebaseTest: Collection '${u}' is accessible (${l.size} documents)`),d.push(u)}catch(l){console.log(`‚ö†Ô∏è FirebaseTest: Collection '${u}' is not accessible:`,l.message)}d.length>0?s(u=>({...u,collections:"success",accessibleCollections:d})):s(u=>({...u,collections:"error"}))}catch(c){console.error("‚ùå FirebaseTest: Collections test failed:",c),s(d=>({...d,collections:"error"}))}console.log("üîç FirebaseTest: All tests completed")}catch(c){console.error("‚ùå FirebaseTest: Test suite failed:",c),n(`Test suite failed: ${c.message}`)}})()},[]);const i=o=>{switch(o){case"success":return"#28a745";case"error":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}},r=o=>{switch(o){case"success":return"‚úÖ Success";case"error":return"‚ùå Error";case"pending":return"‚è≥ Pending";default:return"‚ùì Unknown"}};return e.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Arial, sans-serif",padding:"20px"},children:e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#007bff",color:"white",padding:"20px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Firebase Connection Test"}),e.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Testing Firebase configuration and connectivity"})]}),e.jsxs("div",{style:{padding:"20px"},children:[a&&e.jsxs("div",{style:{backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",padding:"15px",marginBottom:"20px",color:"#721c24"},children:[e.jsx("strong",{children:"Error:"})," ",a]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{children:"Test Results"}),Object.entries(t).map(([o,c])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",borderBottom:"1px solid #e9ecef",backgroundColor:c==="pending"?"#f8f9fa":"white"},children:[e.jsx("span",{style:{fontWeight:"bold",textTransform:"capitalize"},children:o.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{style:{color:i(c),fontWeight:"bold"},children:r(c)})]},o))]}),t.collections==="success"&&t.accessibleCollections&&e.jsxs("div",{style:{backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",padding:"15px",marginBottom:"20px"},children:[e.jsx("strong",{children:"Accessible Collections:"}),e.jsx("ul",{style:{margin:"10px 0 0 0"},children:t.accessibleCollections.map(o=>e.jsx("li",{children:o},o))})]}),e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"15px",borderRadius:"4px",fontSize:"14px"},children:[e.jsx("strong",{children:"Environment Info:"}),e.jsx("br",{}),"Environment: ","production",e.jsx("br",{}),"Firebase API Key: ","Set",e.jsx("br",{}),"Firebase Project ID: ","Set",e.jsx("br",{}),"Timestamp: ",new Date().toLocaleString()]}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"Run Tests Again"}),e.jsx("button",{onClick:()=>window.history.back(),style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go Back"})]})]})]})})})},Ww=()=>{throw new Error("This is a test error")};class Vw extends Nr.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("Test ErrorBoundary caught error:",s,a)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"red",textAlign:"center",maxWidth:"600px",margin:"40px auto",border:"1px solid red",borderRadius:"4px"},children:[e.jsx("h2",{children:"Error Boundary Test - Working!"}),e.jsxs("p",{children:["Error: ",this.state.error?.message]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}const $w=()=>e.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Arial, sans-serif",padding:"20px"},children:e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#007bff",color:"white",padding:"20px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Error Boundary Test"}),e.jsx("p",{style:{margin:"10px 0 0 0",opacity:.9},children:"Testing if error boundaries work correctly"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"15px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:[e.jsx("strong",{children:"Test Info:"}),e.jsx("br",{}),"This page tests if the ErrorBoundary component is working correctly.",e.jsx("br",{}),"If you see an error message below, the ErrorBoundary is working.",e.jsx("br",{}),"If you see a white screen or the app crashes, there's an issue."]}),e.jsx(Vw,{children:e.jsx(Ww,{})})]})]})})}),qw=()=>{const t=tt(),[s,a]=h.useState(""),[n,i]=h.useState([]),[r,o]=h.useState(!1),[c,d]=h.useState(null),[u,l]=h.useState(!1),[p,g]=h.useState(!1),[b,y]=h.useState(!1),[f,v]=h.useState(null),[j,C]=h.useState(null),[x,N]=h.useState(!1),[R,E]=h.useState(!1),[z,k]=h.useState(!1),[V,$]=h.useState([]),[A,_]=h.useState(0),[O,Y]=h.useState([]),[U,w]=h.useState(!0),[T,W]=h.useState([]),[P,L]=h.useState(null),[q,m]=h.useState([]),[D,S]=h.useState(null),[M,F]=h.useState(null),[X,oe]=h.useState(!1),[ae,H]=h.useState(!0),[se,Z]=h.useState(0);h.useEffect(()=>{if(x||u||p)return document.body.style.overflow="hidden",setTimeout(()=>{const Q=document.querySelector(".modal-content");Q&&(Q.scrollTop=0)},50),()=>{document.body.style.overflow=""}},[x,u,p,j]),h.useEffect(()=>{x&&j&&setTimeout(()=>{const Q=document.querySelector(".modal-content");Q&&(Q.scrollTop=0)},100)},[j,x]);const he=[{name:"Busy",keywords:["busy","time","rushed","quick"],category:"time-concern"},{name:"Call Back",keywords:["call back","callback","later","another time"],category:"callback"},{name:"No Interest",keywords:["not interested","no interest","dont want","not buying"],category:"not-interested"},{name:"Speak to Spouse",keywords:["spouse","husband","wife","talk to","discuss"],category:"spouse-consultation"},{name:"Price Over Phone",keywords:["price","cost","how much","ballpark","estimate"],category:"price-phone"},{name:"One Leg",keywords:["one leg","decision maker","alone","by myself"],category:"one-legger"},{name:"Repair Only",keywords:["repair","fix","liner","just repair"],category:"repair"},{name:"Gov/Free",keywords:["government","free","grant","assistance"],category:"government-grants"}],pe={"how to":["how do i","how can i","how do you","how to","how can","how should","how would"],"when can":["when can i","when is","when will","when should","when do","when to","when are"],"where to":["where can i","where do i","where is","where to","where are","where should"],"what is":["whats","what is","what are","what do","what will","what should","what can"],"why do":["why does","why is","why are","why do","why should","why would","why can"],"can i":["can you","is it possible","is there a way","can i","could i","would you","may i"],"need to":["want to","have to","should i","need to","looking to","trying to","planning to"],"looking for":["searching for","trying to find","want to find","looking for","need to find","seeking"]},De={hoem:"home",paeg:"page",serach:"search",ebveythgin:"everything",arch:"search",shoudl:"should",eveythung:"everything",rebuttals:"rebuttals",disposition:"disposition",customer:"customer",service:"service",price:"price",cost:"cost",schedule:"schedule",appointment:"appointment",cancel:"cancel",reschedule:"reschedule",urgent:"urgent",help:"help",support:"support",question:"question",answer:"answer",problem:"problem",issue:"issue",concern:"concern",complaint:"complaint",feedback:"feedback",review:"review",rating:"rating",quality:"quality",product:"product",installation:"installation",warranty:"warranty",guarantee:"guarantee",payment:"payment",financing:"financing",discount:"discount",offer:"offer",deal:"deal",promotion:"promotion",special:"special",limited:"limited",time:"time",date:"date",availability:"availability",location:"location",address:"address",contact:"contact",phone:"phone",email:"email",message:"message",chat:"chat",call:"call",text:"text",sms:"sms",voicemail:"voicemail",callback:"callback",followup:"follow up","follow-up":"follow up",reminder:"reminder",notification:"notification",alert:"alert",warning:"warning",error:"error",fix:"fix",repair:"repair",maintenance:"maintenance",upgrade:"upgrade",update:"update",change:"change",modify:"modify",postpone:"postpone",delay:"delay",late:"late",early:"early","on-time":"on time",ontime:"on time"},Ce=Q=>Q.toLowerCase().split(" ").map(ge=>De[ge]||ge).join(" "),ze=Q=>{let te=Q.toLowerCase();return Object.entries(pe).forEach(([ge,re])=>{re.forEach(ke=>{te.includes(ke)&&(te=te.replace(ke,ge))})}),te=Ce(te),te},gt=(Q,te)=>{const ge=Array(te.length+1).fill(null).map(()=>Array(Q.length+1).fill(null));for(let re=0;re<=Q.length;re+=1)ge[0][re]=re;for(let re=0;re<=te.length;re+=1)ge[re][0]=re;for(let re=1;re<=te.length;re+=1)for(let ke=1;ke<=Q.length;ke+=1){const Ve=Q[ke-1]===te[re-1]?0:1;ge[re][ke]=Math.min(ge[re][ke-1]+1,ge[re-1][ke]+1,ge[re-1][ke-1]+Ve)}return ge[te.length][Q.length]},ft=(Q,te)=>{const ge=Math.max(Q.length,te.length);return ge===0?1:1-gt(Q,te)/ge},ut=Q=>{if(!Q)return[];const te=Q.toLowerCase().split(/\s+/),ge=new Set(["the","a","an","and","or","but","in","on","at","to","for","with","by","about","as","of","from","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","shall","should","may","might","must","can","could","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","mine","yours","hers","ours","theirs"]);return te.filter(re=>!ge.has(re)&&re.length>2)},Pe=(Q,te)=>{if(!Q||!te)return 0;const ge=ut(Q),re=ut(te);let ke=0;return ge.forEach(Ve=>{re.forEach(fe=>{const Ue=ft(Ve,fe);Ue>.8&&(ke+=Ue)})}),ke/Math.max(ge.length,1)},Nt=Q=>{if(!Q.trim()){i([]);return}const te=ze(Q),ge=[],re=new Set,ke=/^(what|how|why|when|where|can|could|would|should|may|do|does|is|are|will)/i.test(te),Ve=/(call\s*back|callback|call\s*later|call\s*me\s*back|call\s*you\s*back)/i.test(te);q.forEach(fe=>{if(re.has(fe.title))return;const Ue=fe.title.toLowerCase().includes(te),ye=fe.category.toLowerCase().includes(te);let Ae=!1,ce=0;typeof fe.content=="string"?(Ae=fe.content.toLowerCase().includes(te),ce=Pe(te,fe.content)):fe.content&&typeof fe.content=="object"&&(Ae=fe.content.pt1&&fe.content.pt1.toLowerCase().includes(te)||fe.content.pt2&&fe.content.pt2.toLowerCase().includes(te),ce=Math.max(Pe(te,fe.content.pt1||""),Pe(te,fe.content.pt2||"")));const ee=fe.tags?.some(xt=>xt.toLowerCase().includes(te)),Se=fe.tags?.reduce((xt,nt)=>Math.max(xt,Pe(te,nt)),0)||0,ct=(Ue?1:0)*.4+(ye?1:0)*.2+(Ae?1:0)*.2+(ee?1:0)*.1+ce*.1+Se*.1;Ve&&(fe.category==="callback"||fe.title.toLowerCase().includes("callback"))?(ge.push({type:"rebuttal",title:fe.title,category:fe.category,icon:"üìû",relevance:"high",score:ct+.5,data:fe}),re.add(fe.title)):ke&&(Ae||ce>.3)?(ge.push({type:"modal",title:fe.title,category:fe.category,icon:Ut(fe.category),relevance:"high",score:ct+.3,data:fe}),re.add(fe.title)):ct>.2&&(ge.push({type:"rebuttal",title:fe.title,category:fe.category,icon:Ut(fe.category),relevance:ct>.6?"high":ct>.4?"medium":"low",score:ct,data:fe}),re.add(fe.title))}),he.forEach(fe=>{const Ue=fe.name.toLowerCase().includes(te),ye=fe.keywords.some(ee=>ee.toLowerCase().includes(te)),Ae=Math.max(Pe(te,fe.name),...fe.keywords.map(ee=>Pe(te,ee))),ce=(Ue?1:0)*.6+(ye?1:0)*.3+Ae*.1;ce>.2&&ge.push({type:"disposition",title:fe.name,category:fe.category,icon:"üìã",relevance:ce>.6?"high":ce>.4?"medium":"low",score:ce,data:fe})}),ge.sort((fe,Ue)=>Ue.score-fe.score),i(ge.slice(0,10))},Ut=Q=>({"not-interested":"‚ùå","spouse-consultation":"üíë","one-legger":"üë§","not-ready":"‚è≥",curious:"ü§î","time-concern":"‚è∞","cant-afford":"üí∞",spouse:"üë´","price-phone":"üìû",repair:"üîß","government-grants":"üèõÔ∏è","reset-appt":"üîÑ","no-request":"üö´","bad-reviews":"‚≠ê"})[Q]||"üìû";h.useCallback(xe(Q=>{Nt(Q)},300),[]);function xe(Q,te){let ge;return function(...ke){const Ve=()=>{clearTimeout(ge),Q(...ke)};clearTimeout(ge),ge=setTimeout(Ve,te)}}h.useEffect(()=>{Nt(s),o(s.length>0)},[s]);const Ee=()=>{l(!1),g(!1),N(!1),C(null),E(!1),$([])},Dt=()=>{if(D&&D.items){const Q=(se+1)%D.items.length;Z(Q);const te=D.items[Q];at(te);const ge=()=>{const re=document.querySelector(".modal-body"),ke=document.querySelector(".modal-content"),Ve=document.querySelector(".modal-overlay"),fe=document.querySelectorAll('.modal-body, .modal-content, .modal-overlay, [class*="modal"]');re&&(re.scrollTop=0,re.scrollLeft=0),ke&&(ke.scrollTop=0,ke.scrollLeft=0),Ve&&(Ve.scrollTop=0,Ve.scrollLeft=0),fe.forEach(ye=>{ye.scrollTop=0,ye.scrollLeft=0});const Ue=re?.querySelector("*");Ue&&Ue.scrollIntoView({behavior:"instant",block:"start"}),window.scrollTo(0,0)};ge(),setTimeout(ge,50),setTimeout(ge,200),setTimeout(ge,500)}},rs=()=>u?e.jsx("div",{className:"modal-overlay",onClick:Ee,children:e.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{children:"Common Objections & Responses"})}),e.jsxs("div",{className:"modal-header-buttons",children:[e.jsx("button",{className:"modal-expand",onClick:Q=>{Q.stopPropagation(),k(!z)},title:z?"Collapse":"Expand",children:z?e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 3V5C8 5.53043 7.78929 6.03914 7.41421 6.41421C7.03914 6.78929 6.53043 7 6 7H4M4 7H8M4 7V3M16 3V5C16 5.53043 16.2107 6.03914 16.5858 6.41421C16.9609 6.78929 17.4696 7 18 7H20M20 7H16M20 7V3M8 21V19C8 18.4696 7.78929 17.9609 7.41421 17.5858C7.03914 17.2107 6.53043 17 6 17H4M4 17H8M4 17V21M16 21V19C16 18.4696 16.2107 17.9609 16.5858 17.5858C16.9609 17.2107 17.4696 17 18 17H20M20 17H16M20 17V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 8V4M4 4H8M4 4L9 9M20 8V4M20 4H16M20 4L15 9M4 16V20M4 20H8M4 20L9 15M20 16V20M20 20H16M20 20L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("button",{className:"modal-close",onClick:Ee,children:"√ó"})]})]}),e.jsx("div",{className:`modal-body ${z?"expanded":""}`,children:e.jsxs("div",{className:"objection-list",children:[e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Need to Think About It"}),e.jsx("p",{children:'"I need to think about it"'}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"That's completely understandable. Making home improvement decisions requires careful consideration. What specific aspects would you like to think about? I'd be happy to provide more information to help with your decision."`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:`"We're currently offering a special discount for customers who make a decision this week. Would you like to hear more about this limited-time offer?"`})]})]}),e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Need to Consult Spouse"}),e.jsx("p",{children:'"I need to talk to my spouse"'}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"That's a great point. It's important to make this decision together. Would it be helpful if I scheduled a time when both of you can be present to discuss the options?"`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:'"I can prepare a detailed proposal that you can review together. This will include all the information your spouse might need to make an informed decision."'})]})]}),e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Not Ready to Buy"}),e.jsx("p",{children:`"I'm not ready to buy right now"`}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"I understand. When are you planning to make this improvement? We can schedule a consultation for when you're ready to move forward."`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:`"We offer free consultations and estimates with no obligation. This can help you plan for when you're ready to proceed. Would you like to schedule one?"`})]})]}),e.jsxs("div",{className:"objection-item",children:[e.jsx("h3",{children:"Looking for Cheaper Option"}),e.jsx("p",{children:'"I can get it cheaper elsewhere"'}),e.jsxs("div",{className:"response-section",children:[e.jsx("h4",{children:"Initial Response:"}),e.jsx("p",{children:`"I appreciate you sharing that. While price is important, it's also crucial to consider the quality, warranty, and service that comes with your purchase. Our products come with a lifetime warranty and professional installation."`}),e.jsx("h4",{children:"Follow-up Response:"}),e.jsx("p",{children:`"Let me show you a comparison of what's included in our price versus what you might be getting elsewhere. This will help you make a more informed decision."`})]})]})]})})]})}):p?e.jsx("div",{className:"modal-overlay",onClick:Ee,children:e.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{children:"Smart Tips for Success"})}),e.jsx("button",{className:"modal-close",onClick:Ee,children:"√ó"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"tips-list",children:[e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"üéØ Active Listening"}),e.jsx("p",{children:"Always acknowledge the customer's concerns before presenting your rebuttal"})]}),e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"üí° Question-Based Approach"}),e.jsx("p",{children:"Use open-ended questions to understand the customer's needs better"})]}),e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"‚ö° Quick Response Strategy"}),e.jsx("p",{children:"Start with Part 1 of the rebuttal, then escalate to Part 2 if needed"})]}),e.jsxs("div",{className:"tip-item",children:[e.jsx("h3",{children:"ü§ù Building Rapport"}),e.jsx("p",{children:"Establish trust by showing empathy and understanding"})]})]})})]})}):x&&j?e.jsx("div",{className:"modal-overlay",onClick:Ee,children:e.jsxs("div",{className:`modal-content ${z?"expanded":""}`,onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-content",children:e.jsx("h2",{children:j.title})}),e.jsx("div",{className:"modal-header-buttons",children:e.jsx("button",{className:"modal-close",onClick:Ee,children:"√ó"})})]}),e.jsx("div",{className:`modal-body ${z?"expanded":""}`,children:R?e.jsxs("div",{className:"more-options-view",children:[e.jsxs("div",{className:"more-options-header",children:[e.jsx("h3",{children:"More Options"}),e.jsxs("p",{children:["Related rebuttals and options for ",j.category]})]}),e.jsx("div",{className:"category-navigation",children:e.jsxs("button",{className:"view-all-category-button",onClick:()=>{const Q=T.find(te=>te.items.some(ge=>ge.category===j.category));if(Q){C(Q.items.find(ge=>ge.category===j.category)),N(!1);const te=document.querySelector(`[data-category="${Q.id}"]`);te&&te.scrollIntoView({behavior:"smooth"})}},children:["View All ",j.category," Options"]})}),e.jsxs("div",{className:"related-rebuttals",children:[e.jsx("h4",{children:"Related Rebuttals:"}),e.jsx("div",{className:"related-rebuttals-list",children:V.map((Q,te)=>e.jsxs("div",{className:"related-rebuttal-item",onClick:()=>{C({...Q,content:{pt1:typeof Q.content=="string"?Q.content:Q.content?.pt1||Q.response?.pt1||Q.objection||"",pt2:typeof Q.content=="string"?"":Q.content?.pt2||Q.response?.pt2||Q.followUpResponse||""}}),E(!1)},children:[e.jsx("h5",{children:Q.title}),e.jsx("p",{children:typeof Q.content=="string"?Q.content:Q.content?.pt1||Q.response?.pt1||Q.objection||""})]},te))})]})]}):e.jsxs("div",{className:"objection-item",children:[e.jsx("div",{className:"objection-header"}),e.jsxs("div",{className:"rebuttal-content",children:[e.jsx("div",{className:"modal-tags",children:j.tags?.map(Q=>e.jsxs("span",{className:"modal-tag",children:["#",Q]},Q))}),e.jsx("div",{className:"modal-summary",children:e.jsx("p",{className:"modal-summary-text",children:j.situationOverview||j.summary||j.objection||j.description||"No situation overview available."})})]}),e.jsxs("div",{className:"modal-rebuttal-content",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("h3",{children:"Rebuttal Responses"})]}),j.content&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rebuttal-section",id:"initial-response-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:"Initial Response"}),e.jsx("p",{className:"modal-content-text",children:(console.log("Rendering content:",j.content),typeof j.content=="string"?j.content:j.content.pt1||"")})]}),e.jsxs("div",{className:"rebuttal-section",children:[e.jsx("h4",{className:"rebuttal-section-title",children:"Follow-up Response"}),e.jsx("p",{className:"modal-content-text",children:(console.log("Rendering pt2:",j.content?.pt2),typeof j.content=="string"?"":j.content.pt2||"")})]}),e.jsx("div",{className:"rebuttal-actions",children:e.jsxs("button",{className:"next-button",onClick:()=>Dt(),disabled:!D||!D.items||D.items.length<=1,children:["Next Response",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]}),j.tips&&j.tips.length>0&&e.jsxs("div",{className:"modal-tips",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 16v.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M12 8v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("h3",{children:"Tips"})]}),e.jsx("div",{className:"tips-list",children:j.tips.map((Q,te)=>e.jsxs("div",{className:"tip-item",children:[e.jsx("div",{className:"tip-icon",children:"üí°"}),e.jsx("p",{className:"tip-text",children:Q})]},te))})]}),e.jsxs("div",{className:"modal-situations",children:[e.jsxs("div",{className:"modal-section-header",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 8v4l3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("h3",{children:"Situations Used"})]}),e.jsxs("div",{className:"situations-list",children:[e.jsxs("div",{className:"situation-item",children:[e.jsx("div",{className:"situation-icon",children:"üéØ"}),e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:"Initial Contact"}),e.jsx("p",{className:"situation-description",children:"When first addressing the customer's concern about pricing or budget constraints"})]})]}),e.jsxs("div",{className:"situation-item",children:[e.jsx("div",{className:"situation-icon",children:"üí¨"}),e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:"Follow-up Discussion"}),e.jsx("p",{className:"situation-description",children:"When customer needs more information about payment options or financing"})]})]}),e.jsxs("div",{className:"situation-item",children:[e.jsx("div",{className:"situation-icon",children:"ü§ù"}),e.jsxs("div",{className:"situation-content",children:[e.jsx("h4",{className:"situation-title",children:"Negotiation Phase"}),e.jsx("p",{className:"situation-description",children:"During price discussions or when presenting alternative solutions"})]})]})]})]})]})})]})}):null;h.useEffect(()=>{x&&(setTimeout(()=>{const Q=document.querySelector(".modal-content");Q&&(Q.scrollTop=0)},0),setTimeout(()=>{const Q=document.querySelector(".modal-content");Q&&(Q.scrollTop=0)},200))},[x,j]),h.useEffect(()=>{(async()=>{try{w(!0),console.log("Starting to load data...");const te=await Jt.getAllCategories();console.log("Fetched categories:",te);const ge=je(ne(J(),"rebuttals"),Ge("createdAt","desc")),re=ja(ge,ke=>{const Ve=ke.docs.map(ye=>({id:ye.id,...ye.data()})),fe=te.reduce((ye,Ae)=>(ye[Ae.id]=Ae.name,ye),{}),Ue=te.map(ye=>{const Ae=Ve.filter(ee=>{const Se=ee.category||"",ct=ye.name||"",xt=ye.id||"";return Se===ct||Se===xt||Se.toLowerCase()===ct.toLowerCase()});console.log(`Category ${ye.name} (ID: ${ye.id}) has ${Ae.length} rebuttals`),Ae.length>0&&console.log(`  Rebuttals in ${ye.name}:`,Ae.map(ee=>({id:ee.id,title:ee.title,category:ee.category})));let ce="";switch(ye.name){case"Not Interested":ce="Handle objections from customers who are not interested in the service";break;case"Spouse Consultation":ce="Manage situations where spouse approval is needed";break;case"One Legger":ce="Handle single decision-maker scenarios";break;case"Not Ready":ce="Address customers who need more time to decide";break;case"Curious":ce="Engage with customers who are interested but have questions";break;case"Time Concern":ce="Handle scheduling and timing-related objections";break;case"Can't Afford":ce="Address budget and pricing concerns";break;case"Spouse":ce="Manage situations requiring spouse involvement";break;case"Price Phone":ce="Handle price-related phone inquiries";break;case"Repair":ce="Address repair and maintenance concerns";break;case"Government Grants":ce="Information about government assistance programs";break;case"Reset Appointment":ce="Handle appointment rescheduling requests";break;case"No Request":ce="Manage situations with no specific request";break;case"Bad Reviews":ce="Address concerns about negative reviews";break;default:ce=`Handle ${ye.name.toLowerCase()} related inquiries`}return{id:ye.id,name:ye.name,description:ce,icon:ye.icon||"üìã",color:ye.color||"#808080",items:Ae.map(ee=>{let Se={pt1:"",pt2:""};return typeof ee.content=="string"?Se.pt1=ee.content:ee.content&&typeof ee.content=="object"?Se={pt1:ee.content.pt1||ee.content.initial||ee.content.part1||"",pt2:ee.content.pt2||ee.content.followup||ee.content.part2||""}:typeof ee.response=="string"?Se.pt1=ee.response:ee.response&&typeof ee.response=="object"&&(Se={pt1:ee.response.pt1||ee.response.initial||ee.response.part1||"",pt2:ee.response.pt2||ee.response.followup||ee.response.part2||""}),Se.pt1||(Se.pt1=ee.objection||""),{id:ee.id,title:ee.title,description:ee.description||ee.objection||ee.summary||"",category:ye.id,content:Se,steps:ee.steps||["Listen to customer concerns","Address specific needs","Present solution","Follow up as needed"],tips:ee.tips||["Be professional and courteous","Focus on customer needs","Provide clear information"]}})}});console.log("Transformed categories:",Ue),console.log("Sample rebuttal content:",Ue[0]?.items[0]?.content),Y(Ue),W(Ue)});return w(!1),()=>re()}catch(te){console.error("Error loading data:",te),w(!1)}})()},[]);const st=Q=>{if(S(Q),E(!1),Q.items&&Q.items.length>0){const te=Q.items[0];C({...te,content:{pt1:typeof te.content=="string"?te.content:te.content.pt1||"",pt2:typeof te.content=="string"?"":te.content.pt2||""}}),N(!0),k(!0);const ge=()=>{const re=document.getElementById("initial-response-section");if(re)re.scrollIntoView({behavior:"smooth",block:"start"});else{const ke=document.querySelector(".modal-body");ke&&(ke.scrollTop=0)}};setTimeout(ge,100),setTimeout(ge,300),setTimeout(ge,500)}},at=Q=>{C({...Q,content:{pt1:typeof Q.content=="string"?Q.content:Q.content.pt1||"",pt2:typeof Q.content=="string"?"":Q.content.pt2||""}}),N(!0),k(!0);const te=()=>{const ge=document.getElementById("initial-response-section");if(ge)ge.scrollIntoView({behavior:"smooth",block:"start"});else{const re=document.querySelector(".modal-body");re&&(re.scrollTop=0)}};setTimeout(te,100),setTimeout(te,300),setTimeout(te,500)},ht=()=>D?e.jsxs("div",{className:"category-content active",children:[e.jsxs("div",{className:"category-header",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"category-icon",children:D.icon}),D.name]}),e.jsx("p",{className:"category-description",children:D.description})]}),e.jsx("div",{className:"category-items",children:D.items.map(Q=>e.jsxs("div",{className:"category-item",onClick:()=>at(Q),children:[e.jsx("h3",{children:Q.title}),e.jsx("p",{children:Q.description})]},Q.id))})]}):e.jsxs("div",{className:"no-categories",children:[e.jsx("div",{className:"main-title",children:e.jsx("h1",{className:"longhome-title",children:"Long Home Rebuttal"})}),e.jsx("div",{className:"no-categories-icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 9H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 21V9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h3",{children:"No Category Selected"}),e.jsx("p",{children:"Please select a category from the list to view its contents"})]}),_t=()=>e.jsxs("div",{className:"simple-mode-container",children:[e.jsxs("div",{className:"quick-navigation",children:[e.jsx("div",{className:"quick-nav-header",children:e.jsx("h2",{children:"Categories"})}),e.jsx("div",{className:"quick-nav-grid",children:O.map(Q=>e.jsx("div",{className:`quick-nav-card ${D?.id===Q.id?"active":""}`,"data-category":Q.id,onClick:()=>st(Q),children:e.jsxs("div",{className:"quick-nav-card-content",children:[e.jsx("div",{className:"quick-nav-icon",children:Q.icon}),e.jsxs("div",{className:"quick-nav-info",children:[e.jsx("h3",{children:Q.name}),e.jsx("p",{className:"quick-nav-description",children:Q.description})]})]})},Q.id))})]}),e.jsx("div",{className:"simple-mode-grid",children:ht()})]});h.useEffect(()=>{const Q=te=>{const ge=document.querySelector(".search-container");ge&&!ge.contains(te.target)&&(y(!1),o(!1))};return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[]),h.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("adminUser"));L(Q),localStorage.getItem("currentCompanySlug")||(localStorage.setItem("currentCompanySlug","long-home"),console.log("üöÄ Set currentCompanySlug to long-home for Home component"))},[]);const os=()=>{localStorage.removeItem("adminUser"),L(null),t("/")},Lt=()=>{P?.role==="super-admin"?t("/admin/saas"):t("/admin/dashboard")},Ht=()=>{const Q=localStorage.getItem("currentCompanySlug")||"long-home";let te=Q;Q==="long-home"&&(te="oLuxoJq8SHXXEWm9KSEU"),console.log("üöÄ Company Dashboard clicked:",{currentCompanySlug:Q,companyId:te}),console.log("üöÄ Navigating to:",`/admin/dashboard?impersonate=${te}`),console.log("üöÄ Current URL before navigation:",window.location.href),localStorage.setItem("impersonation",JSON.stringify({enabled:!0,companyId:te})),setTimeout(()=>{console.log("üöÄ Navigating after delay..."),t(`/admin/dashboard?impersonate=${te}`,{replace:!0})},100)};return h.useEffect(()=>{(async()=>{try{const te=await us.getAllRebuttals();m(te)}catch(te){console.error("Error loading rebuttals:",te)}})()},[]),h.useEffect(()=>{const Q=te=>{(te.ctrlKey||te.metaKey)&&te.shiftKey&&te.key.toLowerCase()==="l"&&(te.preventDefault(),t("/admin/login"))};return window.addEventListener("keydown",Q),()=>{window.removeEventListener("keydown",Q)}},[t]),e.jsxs("div",{className:"home-container",children:[P?e.jsxs("div",{className:"admin-controls",children:[e.jsxs("button",{onClick:Lt,className:"admin-dashboard-btn",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 13H11V3H3V13ZM3 21H11V15H3V21ZM13 21H21V11H13V21ZM13 3V9H21V3H13Z",fill:"currentColor"})}),P?.role==="super-admin"?"Super Admin":"Dashboard"]}),P?.role==="super-admin"&&localStorage.getItem("currentCompanySlug")&&e.jsxs("button",{onClick:Ht,className:"admin-company-dashboard-btn",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Company Dashboard"]}),e.jsxs("button",{onClick:os,className:"admin-logout-btn",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",fill:"currentColor"})}),"Logout"]})]}):null,rs(),e.jsx("div",{className:"home-content",children:e.jsxs("div",{className:"hero-wrapper",children:[e.jsx("div",{className:"home-hero",children:e.jsx("div",{className:"hero-content"})}),_t()]})})]})},_w=()=>{const t=tt(),{hasPersistentSession:s,getUserType:a}=Rt(),[n,i]=h.useState(""),[r,o]=h.useState(!1),[c,d]=h.useState(!1),[u,l]=h.useState(!1),[p,g]=h.useState("/admin/login"),[b,y]=h.useState(!1);h.useEffect(()=>{if(console.log("üîÑ SaaSLandingPage: Checking for persistent session..."),s()){const k=a();if(console.log("üîÑ SaaSLandingPage: Found user type:",k),k){if(l(!0),k.type==="admin")switch(k.role){case"super-admin":console.log("üîÑ SaaSLandingPage: Super admin detected, setting dashboard path to SaaS dashboard"),g("/admin/saas");break;case"company-admin":console.log("üîÑ SaaSLandingPage: Company admin detected, setting dashboard path to admin dashboard"),g("/admin/dashboard");break;default:console.log("üîÑ SaaSLandingPage: Regular admin detected, setting dashboard path to admin dashboard"),g("/admin/dashboard");break}else if(k.type==="company-user"){const V=localStorage.getItem("currentCompanySlug");V?(console.log("üîÑ SaaSLandingPage: Company user detected, setting dashboard path to company landing page:",V),g(`/company/${V}`)):g("/")}}}else console.log("üîÑ SaaSLandingPage: No persistent session found"),l(!1)},[s,a]);const f=async k=>{k.preventDefault(),n&&(o(!0),setTimeout(()=>{o(!1),t(`/company/register?email=${encodeURIComponent(n)}`)},1e3))},v=()=>{d(!0)},j=()=>{t("/admin/login"),d(!1)},C=()=>{d(!1)},x=()=>{t("/admin/saas-login"),d(!1)},N=()=>{y(!b)},R=()=>{y(!1)},E=[{icon:"üéØ",title:"Smart Rebuttal System",description:"AI-powered rebuttal suggestions that help your team handle objections effectively and close more deals."},{icon:"üìä",title:"Advanced Analytics",description:"Track performance, conversion rates, and objection handling to continuously improve your sales outcomes."},{icon:"ü§ù",title:"Team Collaboration",description:"Share best responses across your team and maintain consistent messaging with shared rebuttal libraries."},{icon:"‚öôÔ∏è",title:"Easy Integration",description:"Works with your existing tools and processes with minimal setup."}],z=[{name:"Alex Johnson",role:"Sales Director",company:"GrowthLabs",content:"This platform transformed our team's objection handling. Our close rates improved within weeks.",avatar:"üßë‚Äçüíº"},{name:"Maria Garcia",role:"Head of Sales Enablement",company:"RevBoost",content:"The structured rebuttal library and analytics helped us standardize our approach and train faster.",avatar:"üë©‚Äçüíº"},{name:"Sam Patel",role:"VP of Operations",company:"ScaleUp Inc",content:"The analytics and insights helped us optimize our entire customer journey. Highly recommended!",avatar:"üë©‚Äçüíº"}];return e.jsxs("div",{className:"saas-landing-page",children:[e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"logo-section",children:[e.jsxs("div",{className:"brand",children:[e.jsx("span",{className:"brand-icon",children:"‚ö°"}),e.jsx("span",{className:"brand-name",children:"Closed Loop"})]}),e.jsxs("div",{className:"mobile-header-wrapper",children:[e.jsx("h1",{className:"mobile-header-title",children:"Closed Loop"}),e.jsxs("button",{className:`mobile-menu-toggle ${b?"active":""}`,onClick:N,"aria-label":"Toggle menu",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]})]}),e.jsxs("nav",{className:"header-nav",children:[e.jsx("a",{href:"#features",className:"nav-item nav-feature",children:"Features"}),e.jsx("a",{href:"#pricing",className:"nav-item nav-pricing",children:"Pricing"}),e.jsx("a",{href:"#testimonials",className:"nav-item nav-testimonials",children:"Testimonials"})]}),e.jsx("div",{className:"header-actions",children:u?e.jsx("button",{className:"btn btn-primary",onClick:()=>t(p),children:"Dashboard"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-ghost",onClick:v,children:"Sign In"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>t("/company/register"),children:"Register Company"})]})})]}),e.jsx("div",{className:`mobile-menu-overlay ${b?"open":""}`,onClick:R}),e.jsx("div",{className:`mobile-menu ${b?"open":""}`,children:e.jsxs("div",{className:"mobile-menu-content",children:[e.jsxs("div",{className:"mobile-menu-header",children:[e.jsx("h2",{className:"mobile-menu-title",children:"Menu"}),e.jsx("button",{className:"mobile-menu-close",onClick:R,"aria-label":"Close menu",children:"‚úï"})]}),e.jsxs("nav",{className:"mobile-nav",children:[e.jsx("a",{href:"#features",className:"mobile-nav-item",onClick:R,children:"Features"}),e.jsx("a",{href:"#pricing",className:"mobile-nav-item",onClick:R,children:"Pricing"}),e.jsx("a",{href:"#testimonials",className:"mobile-nav-item",onClick:R,children:"Testimonials"})]}),e.jsx("div",{className:"mobile-menu-actions",children:u?e.jsx("button",{className:"btn btn-primary mobile-btn",onClick:()=>{t(p),R()},children:"Dashboard"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-ghost mobile-btn",onClick:()=>{v(),R()},children:"Sign In"}),e.jsx("button",{className:"btn btn-primary mobile-btn",onClick:()=>{t("/company/register"),R()},children:"Register Company"})]})})]})})]}),e.jsx("section",{className:"hero-section",children:e.jsxs("div",{className:"hero-container",children:[e.jsxs("div",{className:"hero-content",children:[e.jsx("div",{className:"hero-title-wrapper",children:e.jsx("h1",{className:"hero-title",children:"Rebuttal ‚Äî Sales Training"})}),e.jsx("div",{className:"hero-description-wrapper",children:e.jsx("p",{className:"hero-description",children:"Reusable rebuttals, training modules and analytics to help teams close more deals."})}),e.jsxs("div",{className:"hero-cta",children:[e.jsxs("form",{onSubmit:f,className:"email-form",children:[e.jsx("input",{type:"email",placeholder:"Enter your email address",value:n,onChange:k=>i(k.target.value),required:!0}),e.jsx("button",{type:"submit",disabled:r,children:r?"Getting Started...":"Start Free Trial"})]}),e.jsx("p",{className:"cta-note",children:"No credit card required ‚Ä¢ 14-day free trial"})]}),e.jsxs("div",{className:"hero-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"500+"}),e.jsx("span",{className:"stat-label",children:"Companies"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"40%"}),e.jsx("span",{className:"stat-label",children:"Avg. Close Rate Increase"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-number",children:"99.9%"}),e.jsx("span",{className:"stat-label",children:"Uptime"})]})]})]}),e.jsx("div",{className:"hero-visual",children:e.jsxs("div",{className:"mini-dashboard",children:[e.jsxs("div",{className:"mini-header",children:[e.jsx("span",{className:"mini-title",children:"Dashboard"}),e.jsxs("div",{className:"mini-icons",children:[e.jsx("span",{children:"‚öôÔ∏è"}),e.jsx("span",{children:"üë§"})]}),e.jsxs("div",{className:"mini-status",children:[e.jsx("span",{className:"live",children:"Live"}),e.jsx("span",{className:"sync",children:"Sync On"})]})]}),e.jsxs("div",{className:"mini-nav",children:[e.jsx("span",{className:"nav active",children:"üìä Overview"}),e.jsx("span",{className:"nav",children:"üéØ Rebuttals"}),e.jsx("span",{className:"nav",children:"üìà Analytics"}),e.jsx("span",{className:"nav",children:"üí¨ Support"})]}),e.jsxs("div",{className:"mini-content",children:[e.jsxs("div",{className:"mini-title-bar",children:[e.jsx("span",{children:"Weekly Overview"}),e.jsx("span",{className:"date",children:"Aug 1-7"})]}),e.jsxs("div",{className:"mini-stats",children:[e.jsxs("div",{className:"mini-stat",children:[e.jsx("span",{className:"icon",children:"üìà"}),e.jsx("span",{className:"value",children:"1,284"}),e.jsx("span",{className:"label",children:"Leads"}),e.jsx("span",{className:"trend",children:"+12%"})]}),e.jsxs("div",{className:"mini-stat",children:[e.jsx("span",{className:"icon",children:"ü§ù"}),e.jsx("span",{className:"value",children:"431"}),e.jsx("span",{className:"label",children:"Meetings"}),e.jsx("span",{className:"trend",children:"+9%"})]})]}),e.jsxs("div",{className:"mini-chart",children:[e.jsx("div",{className:"chart-title",children:"Performance"}),e.jsxs("div",{className:"mini-bars",children:[e.jsx("div",{className:"bar",style:{height:"60%"}}),e.jsx("div",{className:"bar",style:{height:"75%"}}),e.jsx("div",{className:"bar",style:{height:"50%"}})]})]}),e.jsxs("div",{className:"mini-footer",children:[e.jsx("span",{children:"üßë‚Äçüíºüë©‚Äçüíªüßë‚Äçüîß"}),e.jsx("span",{children:"Synced 2m ago"})]})]})]})})]})}),e.jsx("section",{id:"features",className:"features-section",children:e.jsxs("div",{className:"features-container",children:[e.jsxs("div",{className:"features-header",children:[e.jsx("h2",{className:"section-title",children:"Powerful Features"}),e.jsx("p",{className:"section-subtitle",children:"Everything you need to empower your sales team and close more deals"})]}),e.jsx("div",{className:"features-grid",children:E.map((k,V)=>e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:k.icon}),e.jsx("h3",{className:"feature-title",children:k.title}),e.jsx("p",{className:"feature-description",children:k.description})]},V))})]})}),e.jsx("section",{id:"pricing",className:"pricing-section",children:e.jsxs("div",{className:"pricing-container",children:[e.jsxs("div",{className:"pricing-header",children:[e.jsx("h2",{className:"section-title",children:"Simple, Transparent Pricing"}),e.jsx("p",{className:"section-subtitle",children:"Choose a plan that fits your team's needs"})]}),e.jsxs("div",{className:"pricing-grid",children:[e.jsxs("div",{className:"pricing-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("div",{className:"plan-name",children:"Starter"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:"$199"}),e.jsx("span",{className:"period",children:"/mo"})]}),e.jsx("div",{className:"plan-description",children:"Perfect for small teams getting started"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Up to 10 users"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Basic training modules"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Email support"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Basic analytics"]})]}),e.jsx("button",{className:"plan-button",onClick:()=>t("/company/register?plan=starter"),children:"Register Company"})]}),e.jsxs("div",{className:"pricing-card popular",children:[e.jsx("div",{className:"popular-badge",children:"Most Popular"}),e.jsxs("div",{className:"plan-header",children:[e.jsx("div",{className:"plan-name",children:"Professional"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:"$499"}),e.jsx("span",{className:"period",children:"/mo"})]}),e.jsx("div",{className:"plan-description",children:"Best for growing teams that need advanced features"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Up to 50 users"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Advanced training modules"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Priority support"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Custom branding"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Advanced analytics"]})]}),e.jsx("button",{className:"plan-button",onClick:()=>t("/company/register?plan=pro"),children:"Register Company"})]}),e.jsxs("div",{className:"pricing-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("div",{className:"plan-name",children:"Enterprise"}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price",children:"$1,299"}),e.jsx("span",{className:"period",children:"/mo"})]}),e.jsx("div",{className:"plan-description",children:"For larger orgs with advanced requirements"})]}),e.jsxs("ul",{className:"plan-features",children:[e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Up to 200 users"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," All training modules"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," 24/7 support"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," White-label solution"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," API access"]}),e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"check-icon",children:"‚úì"})," Dedicated success manager"]})]}),e.jsx("button",{className:"plan-button",onClick:()=>window.location.href="mailto:sales@longhome.com?subject=Enterprise%20Plan%20Inquiry",children:"Contact Sales"})]})]})]})}),e.jsx("section",{id:"testimonials",className:"testimonials-section",children:e.jsxs("div",{className:"testimonials-container",children:[e.jsxs("div",{className:"testimonials-header",children:[e.jsx("h2",{className:"section-title",children:"What Our Customers Say"}),e.jsx("p",{className:"section-subtitle",children:"Trusted by teams across industries"})]}),e.jsx("div",{className:"testimonials-grid",children:z.map((k,V)=>e.jsxs("div",{className:"testimonial-card",children:[e.jsxs("div",{className:"testimonial-rating",children:[e.jsx("span",{className:"star",children:"‚òÖ"}),e.jsx("span",{className:"star",children:"‚òÖ"}),e.jsx("span",{className:"star",children:"‚òÖ"}),e.jsx("span",{className:"star",children:"‚òÖ"}),e.jsx("span",{className:"star",children:"‚òÖ"})]}),e.jsx("div",{className:"testimonial-content",children:e.jsxs("p",{className:"testimonial-text",children:['"',k.content,'"']})}),e.jsxs("div",{className:"testimonial-footer",children:[e.jsx("div",{className:"testimonial-avatar",children:k.avatar}),e.jsxs("div",{className:"testimonial-author",children:[e.jsx("span",{className:"author-name",children:k.name}),e.jsxs("span",{className:"author-meta",children:[k.role," ‚Ä¢ ",k.company]})]})]})]},V))})]})}),e.jsx("footer",{className:"landing-footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section footer-brand",children:[e.jsx("div",{className:"footer-logo",children:e.jsx("span",{className:"logo-icon",children:"üöÄ"})}),e.jsx("p",{className:"footer-description",children:"The complete SaaS platform for modern sales teams"}),e.jsxs("div",{className:"footer-social",children:[e.jsx("a",{href:"#",className:"social-link","aria-label":"Twitter",children:e.jsx("span",{children:"üê¶"})}),e.jsx("a",{href:"#",className:"social-link","aria-label":"LinkedIn",children:e.jsx("span",{children:"üíº"})}),e.jsx("a",{href:"#",className:"social-link","aria-label":"GitHub",children:e.jsx("span",{children:"üíª"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Product"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"#features",children:[e.jsx("span",{className:"link-icon",children:"‚ú®"})," Features"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#pricing",children:[e.jsx("span",{className:"link-icon",children:"üí∞"})," Pricing"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üîó"})," Integrations"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üìä"})," Analytics"]})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Company"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"‚ÑπÔ∏è"})," About"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üìù"})," Blog"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üíº"})," Careers"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üìß"})," Contact"]})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-title",children:"Support"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"‚ùì"})," Help Center"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üìö"})," Documentation"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üîí"})," Privacy"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx("span",{className:"link-icon",children:"üìÑ"})," Terms"]})})]})]})]}),e.jsxs("div",{className:"footer-bottom",children:[e.jsx("div",{className:"footer-divider"}),e.jsx("p",{className:"footer-copyright",children:"¬© 2024. All rights reserved."})]})]})}),c&&e.jsx("div",{className:"enhanced-login-modal-overlay",onClick:C,children:e.jsxs("div",{className:"enhanced-login-modal",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"enhanced-modal-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("div",{className:"header-icon",children:"üîê"}),e.jsxs("div",{className:"header-text",children:[e.jsx("h2",{children:"Choose Your Access Level"}),e.jsx("p",{children:"Select the appropriate login type for your role"})]})]}),e.jsx("button",{className:"enhanced-modal-close",onClick:C,children:e.jsx("span",{children:"‚úï"})})]}),e.jsxs("div",{className:"enhanced-modal-content",children:[e.jsxs("div",{className:"login-options-grid",children:[e.jsxs("div",{className:"enhanced-login-option admin",onClick:j,children:[e.jsx("div",{className:"option-background"}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("div",{className:"option-icon",children:"üë®‚Äçüíº"}),e.jsx("div",{className:"option-badge admin-badge",children:"Admin"})]}),e.jsxs("div",{className:"option-body",children:[e.jsx("h3",{children:"Regular Admin"}),e.jsx("p",{children:"Access your company's admin dashboard and manage your team's training materials, rebuttals, and user settings. Handles all admin types automatically."})]}),e.jsx("div",{className:"option-footer",children:e.jsx("span",{className:"option-arrow",children:"‚Üí"})})]})]}),e.jsxs("div",{className:"enhanced-login-option company",onClick:x,children:[e.jsx("div",{className:"option-background"}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("div",{className:"option-icon",children:"üè¢"}),e.jsx("div",{className:"option-badge company-badge",children:"Company"})]}),e.jsxs("div",{className:"option-body",children:[e.jsx("h3",{children:"Company Admin"}),e.jsx("p",{children:"Manage your entire company's settings, users, training platform, and oversee all administrative functions. For company admins and super admins."})]}),e.jsx("div",{className:"option-footer",children:e.jsx("span",{className:"option-arrow",children:"‚Üí"})})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"help-text",children:[e.jsx("span",{className:"help-icon",children:"üí°"}),e.jsx("span",{children:"Not sure which option to choose? Contact your system administrator for guidance."})]})})]})]})})]})};function Hw(){const t=ss(),s=tt(),a=new URLSearchParams(t.search),n=a.get("email")||"",i=a.get("plan")||"",[r,o]=h.useState({companyName:"",ownerName:"",email:n,password:"",confirmPassword:"",plan:i}),[c,d]=h.useState({}),[u,l]=h.useState(!1),[p,g]=h.useState(0),[b,y]=h.useState(!1),[f,v]=h.useState(""),[j,C]=h.useState(!1);h.useEffect(()=>{const $=document.querySelector("#company-name");$&&$.focus()},[]),h.useEffect(()=>{if(r.password){let $=0;r.password.length>=8&&$++,/[a-z]/.test(r.password)&&/[A-Z]/.test(r.password)&&$++,/\d/.test(r.password)&&$++,/[^a-zA-Z0-9]/.test(r.password)&&$++,g($)}else g(0)},[r.password]);const x=$=>$?$.toString().toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):`company-${Date.now()}`,N=()=>{const $={};return r.companyName.trim()||($.companyName="Company name is required"),r.ownerName.trim()||($.ownerName="Owner/Admin name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||($.email="Please enter a valid email address"):$.email="Email is required",r.password?r.password.length<8?$.password="Password must be at least 8 characters":p<2&&($.password="Password is too weak"):$.password="Password is required",r.password!==r.confirmPassword&&($.confirmPassword="Passwords do not match"),d($),Object.keys($).length===0},R=$=>{const{name:A,value:_}=$.target;o(O=>({...O,[A]:_})),c[A]&&d(O=>({...O,[A]:""}))},E=async $=>{if($.preventDefault(),!!N()){y(!0);try{const A=J(),_=x(r.companyName||r.ownerName||`company-${Date.now()}`),O={companyName:r.companyName,ownerName:r.ownerName,email:r.email,plan:r.plan||"starter",slug:_,status:"pending",createdAt:Ie(),updatedAt:Ie()};await Qe(ne(A,"company-registration-requests"),O),C(!0),y(!1)}catch(A){console.error(A),y(!1),alert("Failed to submit registration request ‚Äî please try again.")}}},z=[{id:"starter",name:"Starter",price:"$199",period:"/mo",description:"Perfect for small teams",features:["Up to 10 users","Basic features","Email support"],popular:!1},{id:"growth",name:"Growth",price:"$499",period:"/mo",description:"Best for growing teams",features:["Up to 50 users","Advanced features","Priority support"],popular:!0},{id:"enterprise",name:"Enterprise",price:"Custom",period:"",description:"For large organizations",features:["Unlimited users","Custom features","Dedicated support"],popular:!1}],k=()=>p===0?"":p<=1?"Weak":p<=2?"Fair":p<=3?"Good":"Strong",V=()=>p<=1?"#ef4444":p<=2?"#f59e0b":p<=3?"#3b82f6":"#10b981";return j?e.jsx("div",{className:"company-register-page",children:e.jsx("div",{className:"company-register-container",children:e.jsxs("div",{className:"confirmation-section",children:[e.jsx("div",{className:"confirmation-icon",children:"‚úì"}),e.jsx("h1",{className:"confirmation-title",children:"Request Received!"}),e.jsxs("p",{className:"confirmation-message",children:["Thank you for registering your company, ",e.jsx("strong",{children:r.companyName}),"."]}),e.jsxs("p",{className:"confirmation-details",children:["We've received your registration request and will contact you at ",e.jsx("strong",{children:r.email})," soon to complete the setup process."]}),e.jsx("p",{className:"confirmation-note",children:"Our team will review your request and get in touch with you shortly. In the meantime, you can return to our homepage."}),e.jsx("button",{type:"button",onClick:()=>s("/"),className:"confirmation-button",children:"Return to Home"})]})})}):e.jsx("div",{className:"company-register-page",children:e.jsxs("div",{className:"company-register-container",children:[e.jsxs("div",{className:"register-header",children:[e.jsx("button",{type:"button",onClick:()=>s("/"),className:"back-to-home-button",children:"‚Üê Back to Home"}),e.jsx("div",{className:"register-icon",children:"üè¢"}),e.jsx("h1",{className:"register-title",children:"Register Your Company"}),e.jsx("p",{className:"register-subtitle",children:"Create your company account to get started. We'll set up an admin account for you automatically."})]}),e.jsxs("form",{onSubmit:E,className:"register-form",children:[e.jsx("div",{className:"form-section-card",children:e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"company-name",className:"form-label",children:[e.jsx("span",{className:"label-icon",children:"üè¢"}),"Company Name",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{id:"company-name",name:"companyName",type:"text",value:r.companyName,onChange:R,onFocus:()=>v("companyName"),onBlur:()=>v(""),className:`form-input ${c.companyName?"error":""} ${f==="companyName"?"focused":""}`,placeholder:"Acme Roofing Inc.",required:!0})}),c.companyName&&e.jsx("span",{className:"error-message",children:c.companyName})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"owner-name",className:"form-label",children:[e.jsx("span",{className:"label-icon",children:"üë§"}),"Owner / Admin Name",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{id:"owner-name",name:"ownerName",type:"text",value:r.ownerName,onChange:R,onFocus:()=>v("ownerName"),onBlur:()=>v(""),className:`form-input ${c.ownerName?"error":""} ${f==="ownerName"?"focused":""}`,placeholder:"Jane Doe",required:!0})}),c.ownerName&&e.jsx("span",{className:"error-message",children:c.ownerName})]})]})}),e.jsx("div",{className:"form-section-card",children:e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"email",className:"form-label",children:[e.jsx("span",{className:"label-icon",children:"üìß"}),"Email Address",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{id:"email",name:"email",type:"email",value:r.email,onChange:R,onFocus:()=>v("email"),onBlur:()=>v(""),className:`form-input ${c.email?"error":""} ${f==="email"?"focused":""}`,placeholder:"you@example.com",required:!0})}),c.email&&e.jsx("span",{className:"error-message",children:c.email})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"password",className:"form-label",children:[e.jsx("span",{className:"label-icon",children:"üîí"}),"Password",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"input-wrapper password-wrapper",children:[e.jsx("input",{id:"password",name:"password",type:u?"text":"password",value:r.password,onChange:R,onFocus:()=>v("password"),onBlur:()=>v(""),className:`form-input ${c.password?"error":""} ${f==="password"?"focused":""}`,placeholder:"Create a secure password",required:!0}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>l(!u),"aria-label":u?"Hide password":"Show password",children:u?"üôà":"üëÅÔ∏è"})]}),r.password&&e.jsxs("div",{className:"password-strength",children:[e.jsx("div",{className:"password-strength-bar",children:e.jsx("div",{className:"password-strength-fill",style:{width:`${p/4*100}%`,backgroundColor:V()}})}),e.jsx("span",{className:"password-strength-label",style:{color:V()},children:k()})]}),c.password&&e.jsx("span",{className:"error-message",children:c.password}),r.password&&!c.password&&p>=2&&e.jsx("span",{className:"success-message",children:"‚úì Password meets requirements"})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"confirm-password",className:"form-label",children:[e.jsx("span",{className:"label-icon",children:"üîí"}),"Confirm Password",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{className:"input-wrapper",children:e.jsx("input",{id:"confirm-password",name:"confirmPassword",type:"password",value:r.confirmPassword,onChange:R,onFocus:()=>v("confirmPassword"),onBlur:()=>v(""),className:`form-input ${c.confirmPassword?"error":""} ${f==="confirmPassword"?"focused":""}`,placeholder:"Confirm your password",required:!0})}),c.confirmPassword&&e.jsx("span",{className:"error-message",children:c.confirmPassword}),r.confirmPassword&&!c.confirmPassword&&r.password===r.confirmPassword&&e.jsx("span",{className:"success-message",children:"‚úì Passwords match"})]})]})}),e.jsx("div",{className:"form-section-card",children:e.jsx("div",{className:"plan-selection",children:z.map($=>e.jsxs("div",{className:`plan-card ${r.plan===$.id?"selected":""} ${$.popular?"popular":""}`,onClick:()=>o(A=>({...A,plan:$.id})),children:[$.popular&&e.jsx("div",{className:"popular-badge",children:"Most Popular"}),e.jsxs("div",{className:"plan-header",children:[e.jsx("h3",{className:"plan-name",children:$.name}),e.jsxs("div",{className:"plan-price",children:[e.jsx("span",{className:"price-amount",children:$.price}),$.period&&e.jsx("span",{className:"price-period",children:$.period})]}),e.jsx("p",{className:"plan-description",children:$.description})]}),e.jsx("ul",{className:"plan-features",children:$.features.map((A,_)=>e.jsxs("li",{className:"plan-feature",children:[e.jsx("span",{className:"feature-check",children:"‚úì"}),A]},_))}),e.jsx("div",{className:"plan-select-indicator",children:r.plan===$.id?"‚úì Selected":"Select Plan"})]},$.id))})}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:b,className:`submit-button ${b?"submitting":""}`,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Creating Your Company..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üöÄ"}),"Create Company Account"]})})})]})]})})}const zw=()=>localStorage.getItem("adminUser")||localStorage.getItem("saasAdminUser")?e.jsx(Eb,{}):e.jsx("div",{className:"schedule-script-container-dark",children:e.jsx(de.div,{className:"schedule-script-content-dark",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(de.div,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",textAlign:"center",padding:"3rem 2rem",background:"linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(51, 65, 85, 0.8) 100%)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.4)"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[e.jsxs(de.div,{style:{display:"inline-flex",alignItems:"center",gap:"12px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",padding:"0.75rem 1.5rem",borderRadius:"30px",fontSize:"1rem",fontWeight:600,marginBottom:"2rem",border:"1px solid rgba(59, 130, 246, 0.2)"},whileHover:{scale:1.05},transition:{type:"spring",stiffness:400},children:[e.jsx(ln,{size:24}),e.jsx("span",{children:"Interactive Scheduling Script"})]}),e.jsx(de.div,{style:{width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2))",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"2rem",border:"3px solid rgba(59, 130, 246, 0.3)"},animate:{rotate:[0,10,-10,0],scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:e.jsx(ky,{size:48,color:"#3b82f6"})}),e.jsx(de.h1,{style:{fontSize:"3rem",fontWeight:800,color:"#f8fafc",marginBottom:"1rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:"Coming Soon! üöÄ"}),e.jsx(de.p,{style:{fontSize:"1.25rem",color:"rgba(248, 250, 252, 0.8)",lineHeight:1.7,maxWidth:"600px",margin:"0 auto 2rem auto"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:"We're working hard to bring you an amazing interactive scheduling experience. This feature is currently under development and will be available soon."}),e.jsxs(de.div,{style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"center",marginTop:"2rem"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:[e.jsx("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"1rem 1.5rem",color:"#3b82f6",fontSize:"0.9rem"},children:"üìÖ Step-by-step scheduling guide"}),e.jsx("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",padding:"1rem 1.5rem",color:"#10b981",fontSize:"0.9rem"},children:"üéØ Interactive call scripts"}),e.jsx("div",{style:{background:"rgba(147, 51, 234, 0.1)",border:"1px solid rgba(147, 51, 234, 0.2)",borderRadius:"12px",padding:"1rem 1.5rem",color:"#9333ea",fontSize:"0.9rem"},children:"‚ú® Smart appointment booking"})]}),e.jsx(de.p,{style:{marginTop:"3rem",fontSize:"0.9rem",color:"rgba(248, 250, 252, 0.6)",fontStyle:"italic"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:1},children:"Stay tuned for updates!"})]})})}),Gw=({onInstall:t,isCollapsed:s=!1})=>{const[a,n]=h.useState(null),[i,r]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(!1);h.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){c(!0);return}const f=C=>{C.preventDefault(),n(C),r(!0),console.log("Install prompt available")},v=()=>{c(!0),r(!1),n(null),console.log("PWA was installed"),b(),setTimeout(()=>{l()},1e3)},j=()=>{if("serviceWorker"in navigator&&"PushManager"in window){const C=document.querySelector('link[rel="manifest"]'),x=navigator.serviceWorker.controller;C&&x&&(console.log("App is installable"),r(!0))}};return window.addEventListener("beforeinstallprompt",f),window.addEventListener("appinstalled",v),setTimeout(j,1e3),()=>{window.removeEventListener("beforeinstallprompt",f),window.removeEventListener("appinstalled",v)}},[]);const l=async()=>{if("Notification"in window&&Notification.permission==="default")try{await Notification.requestPermission()==="granted"&&p("App Installed!",{body:"You can now receive notifications for updates and new features.",icon:"/icons/icon-192x192.png"})}catch{console.log("Notification permission denied")}},p=(f,v={})=>{if("Notification"in window&&Notification.permission==="granted"){const j={icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",vibrate:[100,50,100],...v};return new Notification(f,j)}},g=async()=>{if(a)try{a.prompt();const{outcome:f}=await a.userChoice;f==="accepted"?(console.log("User accepted the install prompt"),c(!0),r(!1),b()):(console.log("User dismissed the install prompt"),y()),n(null),t&&t(f);return}catch(f){console.error("Deferred prompt failed:",f)}try{if("serviceWorker"in navigator&&"PushManager"in window){const f=new Event("beforeinstallprompt");window.dispatchEvent(f),setTimeout(()=>{a||y()},1e3)}else y()}catch(f){console.error("Programmatic install failed:",f),y()}},b=()=>{"Notification"in window&&Notification.permission==="granted"?new Notification("App Installed!",{body:"The app has been successfully installed on your device.",icon:"/icons/icon-192x192.png"}):alert(`‚úÖ App has been successfully installed on your device!

You can now:
‚Ä¢ Use the app offline
‚Ä¢ Access it from your Start Menu/Home Screen
‚Ä¢ Enjoy faster loading times`)},y=()=>{const f=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),v=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),j=/Edg/.test(navigator.userAgent),C=/Firefox/.test(navigator.userAgent),x=/iPad|iPhone|iPod/.test(navigator.userAgent);let N=`üì± Install App

`;f?x?N+=`üì± iPhone/iPad Installation:
1. Tap the share button (üì§) in Safari
2. Scroll down and tap "Add to Home Screen"
3. Tap "Add" to install the app

The app will appear on your home screen like a native app!`:N+=`üì± Android Installation:
1. Tap the menu (‚ãÆ) in Chrome
2. Tap "Install app" or "Add to Home screen"
3. Tap "Install" to confirm

The app will appear on your home screen!`:v?N+=`üíª Chrome Desktop Installation:
1. Look for the install icon (üì±) in the address bar
2. Click the install icon
3. Click "Install" in the popup

The app will install and appear in your Start Menu!`:j?N+=`üíª Edge Desktop Installation:
1. Look for the install icon (üì±) in the address bar
2. Click the install icon
3. Click "Install" in the popup

The app will install and appear in your Start Menu!`:C?N+=`üíª Firefox Desktop Installation:
1. Look for the install icon (üì±) in the address bar
2. Click the install icon
3. Click "Install" in the popup

The app will install and appear in your Start Menu!`:N+=`üíª Desktop Installation:
‚Ä¢ Chrome/Edge: Look for install icon (üì±) in address bar
‚Ä¢ Firefox: Look for install icon (üì±) in address bar
‚Ä¢ Safari: Not supported for PWA installation

The app will install and appear in your Start Menu!`,N+=`

‚ú® Once installed, the app will work offline and feel like a native app!`,alert(N)};return o?e.jsxs("div",{className:"pwa-installed",style:{display:"flex",alignItems:"center",gap:"0.5em",background:"#22c55e",color:"white",borderRadius:"8px",padding:s?"0.25em 0.75em":"0.5em 1em",fontWeight:600,fontSize:s?"0.95em":"1.1em",justifyContent:"center"},children:[e.jsx("span",{className:"pwa-installed-icon",style:{fontSize:s?"1.1em":"1.2em"},children:"‚úÖ"}),e.jsx("span",{className:"pwa-installed-text",children:"Installed"})]}):!i&&!o?e.jsxs("button",{className:"pwa-loading",onClick:y,title:"Install App",children:[e.jsx("span",{className:"pwa-icon",children:"‚è≥"}),!s&&e.jsx("span",{className:"pwa-text",children:"Checking..."})]}):i?e.jsxs("button",{className:"pwa-install-button",onClick:g,title:"Install App",children:[e.jsx("span",{className:"pwa-icon",children:"‚¨áÔ∏è"}),!s&&e.jsx("span",{className:"pwa-text",children:"Install App"})]}):e.jsxs("button",{className:"pwa-manual-install",onClick:y,title:"Install App",children:[e.jsx("span",{className:"pwa-icon",children:"üì±"}),!s&&e.jsx("span",{className:"pwa-text",children:"Install App"})]})},Yw=()=>{const[t,s]=h.useState(!1),[a,n]=h.useState(null);h.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(o=>{n(o),o.addEventListener("updatefound",()=>{const c=o.installing;c.addEventListener("statechange",()=>{c.state==="installed"&&navigator.serviceWorker.controller&&s(!0)})})})},[]);const i=()=>{a&&a.waiting&&(a.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())},r=()=>{s(!1)};return t?e.jsx("div",{className:"pwa-update-notification",children:e.jsxs("div",{className:"pwa-update-content",children:[e.jsx("div",{className:"pwa-update-icon",children:"üîÑ"}),e.jsxs("div",{className:"pwa-update-text",children:[e.jsx("h3",{children:"New Version Available!"}),e.jsx("p",{children:"A new version is ready to install."})]}),e.jsxs("div",{className:"pwa-update-actions",children:[e.jsx("button",{className:"pwa-update-button",onClick:i,children:"Update Now"}),e.jsx("button",{className:"pwa-dismiss-button",onClick:r,children:"Later"})]})]})}):null},Kw=({isCollapsed:t=!1})=>{const[s,a]=h.useState({isInstalled:!1,isStandalone:!1,hasServiceWorker:!1,isOnline:navigator.onLine,cacheSize:"0 MB",swRegistered:!1,swActive:!1,swError:null,isLoading:!0});h.useEffect(()=>{(async()=>{console.log("Checking PWA status...");const u={isInstalled:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,isStandalone:window.matchMedia("(display-mode: standalone)").matches,hasServiceWorker:"serviceWorker"in navigator&&navigator.serviceWorker.controller,isOnline:navigator.onLine,swRegistered:!1,swActive:!1,swError:null,cacheSize:"0 MB",isLoading:!0};a(u);try{const l=Uo(),p=new Promise((b,y)=>setTimeout(()=>y(new Error("Service worker check timeout")),3e3)),g=await Promise.race([l,p]);console.log("Service worker status:",g),a(b=>({...b,swRegistered:g.registered||!1,swActive:g.active||!1,swError:g.error||null,isLoading:!1}))}catch(l){console.log("Service worker check failed:",l.message),a(p=>({...p,swError:l.message,isLoading:!1}))}if("caches"in window)try{const l=(async()=>{const b=await caches.keys();let y=0;for(const f of b){const j=await(await caches.open(f)).keys();y+=j.length}return`${Math.round(y/10)} MB`})(),p=new Promise((b,y)=>setTimeout(()=>y(new Error("Cache check timeout")),2e3)),g=await Promise.race([l,p]);a(b=>({...b,cacheSize:g,isLoading:!1}))}catch(l){console.log("Cache check failed:",l.message),a(p=>({...p,cacheSize:"Unknown",isLoading:!1}))}})();const d=()=>{a(u=>({...u,isOnline:navigator.onLine}))};return window.addEventListener("online",d),window.addEventListener("offline",d),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",d)}},[]);const n=()=>s.isLoading?"‚è≥":s.isInstalled?"‚úÖ":s.swActive?"‚ö°":s.swRegistered?"üîÑ":s.swError?"‚ùå":"üì±",i=()=>s.isLoading?"Checking...":s.isInstalled?"App Installed":s.swActive?"SW Active":s.swRegistered?"SW Registered":s.swError?"SW Error":"Install Available",r=()=>s.isLoading?"#F59E0B":s.isInstalled?"#10B981":s.swActive?"#3B82F6":s.swRegistered?"#F59E0B":s.swError?"#EF4444":"#6B7280",o=async()=>{console.log("Refreshing PWA status...");const c=await Uo();console.log("Updated SW Status:",c),c.error&&(console.log("Service worker error detected, reloading page..."),window.location.reload())};return t?e.jsx("div",{className:"pwa-status-collapsed-center",style:{color:r()},children:e.jsx("span",{className:"pwa-status-icon",style:{fontSize:"2rem",display:"block",textAlign:"center"},children:n()})}):e.jsxs("div",{className:"pwa-status",style:{color:r()},children:[e.jsx("span",{className:"pwa-status-icon",children:n()}),!t&&e.jsx("span",{className:"pwa-status-text",children:i()}),e.jsx("div",{className:"pwa-status-tooltip",children:e.jsxs("div",{className:"tooltip-content",children:[e.jsx("h4",{children:"PWA Status"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Installed: ",s.isInstalled?"Yes":"No"]}),e.jsxs("li",{children:["Standalone: ",s.isStandalone?"Yes":"No"]}),e.jsxs("li",{children:["Service Worker: ",s.swActive?"Active":s.swRegistered?"Registered":"Inactive"]}),e.jsxs("li",{children:["Online: ",s.isOnline?"Yes":"No"]}),e.jsxs("li",{children:["Cache: ",s.cacheSize]}),s.swError&&e.jsxs("li",{style:{color:"red"},children:["Error: ",s.swError]})]}),e.jsx("button",{onClick:o,style:{marginTop:"10px",padding:"5px 10px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Refresh Status"})]})})]})},Cs=({children:t})=>{const s=tt(),a=ss(),[n,i]=h.useState(!1),[r,o]=h.useState(!1),[c,d]=h.useState(!1);Bm(),h.useEffect(()=>{const x=N=>{(N.ctrlKey||N.metaKey)&&N.shiftKey&&N.key.toLowerCase()==="h"&&(N.preventDefault(),d(!0)),(N.ctrlKey||N.metaKey)&&N.shiftKey&&N.key.toLowerCase()==="r"&&(N.preventDefault(),u())};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[]);const u=()=>{console.log("üßπ Clearing company token and returning to SaaS landing page..."),localStorage.removeItem("companyUser"),localStorage.removeItem("currentCompanySlug"),localStorage.removeItem("adminUser"),window.location.href="/"},l=a.pathname.startsWith("/company/")?a.pathname.split("/")[2]:localStorage.getItem("currentCompanySlug")||null,p=l?l==="long-home"?"/app":`/company/${l}`:"/",b=localStorage.getItem("adminUser")||localStorage.getItem("saasAdminUser"),y=[{path:p,label:"Home",icon:"üè†"},{path:"/rebuttals",label:"Rebuttals",icon:"üí¨"},{path:"/disposition",label:"Disposition",icon:"üìã"},{path:"/customerService",label:"Customer Service",icon:"üë•"},{path:"/faq",label:"FAQ",icon:"‚ùì"},{path:"/scheduleScript",label:"Schedule Script",icon:"üìÖ",comingSoon:!b}],f=x=>{x==="accepted"&&console.log("PWA installed successfully!")},v=()=>{i(!n)},j=()=>{o(!r)},C=x=>{try{const N=a.pathname,R=localStorage.getItem("currentCompanySlug");if(console.log("üß≠ Layout: handleNavigation",{path:x,currentPath:N,currentSlug:R}),x===N){console.log("üß≠ Layout: navigation skipped, already on path",x);return}s(x),setTimeout(Fs,0),setTimeout(Fs,200)}catch(N){console.error("üß≠ Layout: navigation error",N),s(x)}};return e.jsxs("div",{className:"layout",children:[e.jsx("main",{className:`main-content ${n?"expanded":""}`,children:t}),!r&&e.jsxs("nav",{className:`side-nav ${n?"collapsed":""}`,children:[e.jsxs("div",{className:"nav-header",children:[!n&&e.jsx("h2",{className:"nav-title",children:"Navigation"}),e.jsxs("div",{className:"nav-buttons",children:[e.jsx("button",{className:"nav-toggle",onClick:v,"aria-label":n?"Expand navigation":"Collapse navigation",children:n?"‚Üí":"‚Üê"}),n&&e.jsx("button",{className:"nav-hide",onClick:j,"aria-label":"Hide navigation",children:"‚úï"})]})]}),e.jsx("ul",{className:"nav-items",children:y.map(x=>e.jsxs("li",{className:`nav-item ${a.pathname===x.path?"active":""}`,onClick:()=>C(x.path),children:[e.jsx("span",{className:"nav-icon",children:x.icon}),!n&&e.jsxs("span",{className:"nav-label",children:[x.label,x.comingSoon&&e.jsx("span",{style:{fontSize:"0.7rem",color:"#fbbf24",marginLeft:"0.5rem",fontWeight:600},children:"üöÄ Soon"})]})]},x.path))}),e.jsx("div",{className:"help-me-section",children:e.jsxs("button",{className:"help-me-button",onClick:()=>d(!0),title:"How to access login page (Ctrl/Cmd + Shift + H)",children:[e.jsx("span",{className:"help-icon",children:"üÜò"}),!n&&e.jsx("span",{className:"help-label",children:"Help Me"})]})}),e.jsxs("div",{className:"nav-footer",children:[e.jsx(Gw,{onInstall:f,isCollapsed:n}),e.jsx(Kw,{isCollapsed:n})]})]}),r&&e.jsx("button",{className:"show-nav-button",onClick:j,"aria-label":"Show navigation",children:"‚Üí"}),e.jsx(Yw,{}),c&&e.jsx("div",{className:"help-modal-overlay",onClick:()=>d(!1),children:e.jsxs("div",{className:"help-modal-content",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"help-modal-header",children:[e.jsx("h3",{children:"How to Access Login Page"}),e.jsx("button",{className:"help-modal-close",onClick:()=>d(!1),children:"√ó"})]}),e.jsxs("div",{className:"help-modal-body",children:[e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Step 1: Navigate to Admin"}),e.jsxs("p",{children:["Add ",e.jsx("code",{children:"/admin"})," to the end of your current URL"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Example:"})," ",e.jsx("code",{children:"https://longhome-rebuttal-hub.netlify.app/admin"})]})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Step 2: Login"}),e.jsx("p",{children:"Use your admin credentials to access the admin dashboard"})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Alternative Method"}),e.jsx("p",{children:"You can also bookmark the admin URL for quick access"})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"Keyboard Shortcuts"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Help Modal:"})," Press ",e.jsx("code",{children:"Ctrl + Shift + H"})," (or ",e.jsx("code",{children:"Cmd + Shift + H"})," on Mac)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Admin Login:"})," Press ",e.jsx("code",{children:"Ctrl + Shift + L"})," (or ",e.jsx("code",{children:"Cmd + Shift + L"})," on Mac)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset Company Token:"})," Press ",e.jsx("code",{children:"Ctrl + Shift + R"})," (or ",e.jsx("code",{children:"Cmd + Shift + R"})," on Mac)"]}),e.jsx("p",{style:{fontSize:"0.9em",color:"#666",marginTop:"8px"},children:e.jsx("em",{children:'Use "Reset Company Token" to clear your company association and return to the SaaS landing page'})})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"For Company Users"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset Company Association:"})," If you're trained to a specific company and want to return to the main SaaS landing page, use the keyboard shortcut above."]}),e.jsx("p",{children:"This will clear your company token and take you back to the main landing page where you can access different company training platforms."})]}),e.jsxs("div",{className:"help-step",children:[e.jsx("h4",{children:"SaaS Admin Dashboard"}),e.jsxs("p",{children:["For managing multiple companies and platforms, visit: ",e.jsx("code",{children:"/admin/saas"})]}),e.jsx("p",{children:"This allows you to create and manage training platforms for different companies."})]})]})]})})]})},No=({variant:t="landing"})=>{const s=t==="company",a=`loading-screen ${s?"company":"landing"}`;return e.jsx("div",{className:a,children:e.jsxs("div",{className:"loading-container",children:[e.jsxs("div",{className:"logo-container",children:[e.jsx("div",{className:"logo-circle"}),e.jsx("div",{className:"logo-text",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"L"}),e.jsx("span",{children:"H"}),e.jsx("span",{children:"P"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"S"}),e.jsx("span",{children:"O"}),e.jsx("span",{children:"S"})]})}),e.jsx("div",{className:"logo-subtext",children:s?"Long Home Products":""})]}),e.jsxs("div",{className:"loading-animation",children:[e.jsx("div",{className:"loading-bar",children:e.jsx("div",{className:"loading-progress"})}),e.jsxs("div",{className:"loading-dots",children:[e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"})]})]}),e.jsxs("div",{className:"loading-text",children:[e.jsx("span",{children:"L"}),e.jsx("span",{children:"o"}),e.jsx("span",{children:"a"}),e.jsx("span",{children:"d"}),e.jsx("span",{children:"i"}),e.jsx("span",{children:"n"}),e.jsx("span",{children:"g"}),e.jsx("span",{className:"dot-1",children:"."}),e.jsx("span",{className:"dot-2",children:"."}),e.jsx("span",{className:"dot-3",children:"."})]})]})})},bt=({children:t,requiredRole:s=null,requiredPermissions:a=[],fallbackPath:n="/admin/login",allowImpersonation:i=!1,allowPublic:r=!1})=>{const{currentUser:o,authLoading:c}=Rt(),d=ss(),[u,l]=h.useState(null),[p,g]=h.useState([]),[b,y]=h.useState(!0),[f,v]=h.useState(null);if(h.useEffect(()=>{(async()=>{try{if(console.log("üîí SecureRoute: Starting access check",{path:d.pathname,requiredRole:s,allowImpersonation:i}),y(!0),v(null),c)return;if(!o){if(r){l("public"),g([]),y(!1);return}y(!1);return}let C=null;if(i)try{C=JSON.parse(localStorage.getItem("impersonation")||"null")}catch{console.warn("Invalid impersonation data in localStorage")}const x=localStorage.getItem("adminUser");if(x)try{const V=JSON.parse(x);l(V.role),g(V.permissions||[]),y(!1);return}catch{console.warn("Invalid admin data in localStorage")}const N=kt();let R=null,E=[];const z=ie(N,"super-admins",o.uid),k=await Te(z);if(k.exists()){const V=k.data();R="super-admin",E=V.permissions||["create-companies","delete-companies","create-platforms","delete-platforms","manage-users","view-analytics","system-settings","impersonate-companies"];const $={uid:o.uid,email:o.email,role:"super-admin",permissions:E,...V};localStorage.setItem("adminUser",JSON.stringify($))}else{const V=ie(N,"company-admins",o.uid),$=await Te(V);if($.exists()){const A=$.data();R="company-admin",E=A.permissions||["manage-rebuttals","manage-categories","manage-users","view-analytics"];const _={uid:o.uid,email:o.email,role:"company-admin",companyId:A.companyId,permissions:E,...A};localStorage.setItem("adminUser",JSON.stringify(_))}else{const A=ie(N,"admins",o.uid),_=await Te(A);if(_.exists()){const O=_.data();R="admin",E=O.permissions||["manage-rebuttals","manage-categories"];const Y={uid:o.uid,email:o.email,role:"admin",companyId:O.companyId,permissions:E,...O};localStorage.setItem("adminUser",JSON.stringify(Y))}else{const O=ie(N,"users",o.uid),Y=await Te(O);if(Y.exists()){const U=Y.data();R=U.role||"user",E=U.permissions||[]}}}}l(R),g(E),y(!1)}catch(C){console.error("Error checking user access:",C),v(C.message),y(!1)}})()},[o,c,i]),c||b){const j=d.pathname,C=j.startsWith("/company")||j.startsWith("/app")||j.startsWith("/rebuttals")||j.startsWith("/disposition")||j.startsWith("/customerService")||j.startsWith("/faq")||j.startsWith("/scheduleScript");return e.jsx(No,{variant:C?"company":"landing"})}if(f)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Access Error"}),e.jsx("p",{children:f}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]});if(!o&&!r)return e.jsx(ra,{to:n,state:{from:d},replace:!0});if(!u)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access this area."}),e.jsx("button",{onClick:()=>window.location.href="/",children:"Go Home"})]});if(s&&u!==s){if(console.log("üîí SecureRoute: Role check failed",{userRole:u,requiredRole:s,allowImpersonation:i,path:d.pathname}),u==="company-admin"&&s==="admin")return console.log("üîí SecureRoute: Company admin accessing admin route, allowing access"),t;if(u==="super-admin"&&(s==="admin"||s==="company-admin")&&i){const C=JSON.parse(localStorage.getItem("impersonation")||"null");if(console.log("üîí SecureRoute: Checking impersonation",{impersonation:C}),C?.enabled)return console.log("üîí SecureRoute: Impersonation allowed, rendering children"),t}let j="/";return u==="super-admin"?j="/admin/saas":(u==="company-admin"||u==="admin")&&(j="/admin/dashboard"),e.jsx(ra,{to:j,replace:!0})}return a.length>0&&!a.every(C=>p.includes(C))?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{children:"Insufficient Permissions"}),e.jsx("p",{children:"You don't have the required permissions to access this area."}),e.jsxs("p",{children:["Required: ",a.join(", ")]}),e.jsxs("p",{children:["Your permissions: ",p.join(", ")]}),e.jsx("button",{onClick:()=>window.history.back(),children:"Go Back"})]}):t},Qw=({children:t})=>{const s=tt(),a=ss(),{hasPersistentSession:n,getUserType:i,loading:r}=Rt();return h.useEffect(()=>{if(console.log("üîÑ PersistentRoute: useEffect triggered",{loading:r,pathname:a.pathname}),r){console.log("üîÑ PersistentRoute: Still loading, skipping");return}if(["/admin"].some(d=>a.pathname.startsWith(d))){console.log("üîÑ PersistentRoute: On admin route, skipping");return}if(n()){const d=i();if(d){console.log("üîÑ PersistentRoute: Found persistent session, user type:",d);const u=a.pathname.startsWith("/company/"),l=a.pathname.startsWith("/app"),p=u||l||a.pathname.startsWith("/rebuttals")||a.pathname.startsWith("/disposition")||a.pathname.startsWith("/customerService")||a.pathname.startsWith("/faq")||a.pathname.startsWith("/scheduleScript");if(console.log("üîÑ PersistentRoute: Route analysis",{isCompanyRoute:u,isAppRoute:l,isCompanyRelatedRoute:p,pathname:a.pathname}),d.type==="admin"){if(d.role==="super-admin"&&u){const g=a.pathname.split("/")[2];if(console.log("üîÑ Checking company route:",{companySlug:g,userRole:d.role}),g==="long-home"||g==="oLuxoJq8SHXXEWm9KSEU"){console.log("üîÑ Super admin accessing Long Home, redirecting to /app"),s("/app",{replace:!0});return}}if(d.role==="super-admin"&&p){console.log("üîÑ Super admin accessing company route, allowing access");return}switch(d.role){case"super-admin":console.log("üîÑ Redirecting super admin to SaaS dashboard"),s("/admin/saas",{replace:!0});break;case"company-admin":console.log("üîÑ Redirecting company admin to company dashboard"),s("/admin/dashboard",{replace:!0});break;default:console.log("üîÑ Redirecting regular admin to admin dashboard"),s("/admin/dashboard",{replace:!0});break}}else if(d.type==="company-user"){const g=localStorage.getItem("currentCompanySlug");g?(console.log("üîÑ Redirecting company user to company landing page:",g),s(`/company/${g}`,{replace:!0})):console.log("üîÑ No company slug found, staying on current page")}}}else console.log("üîÑ PersistentRoute: No persistent session found, user can stay on current page")},[r,n,i,s,a.pathname]),t},Jw=()=>{const[t,s]=h.useState({enabled:!1,message:"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:null}),[a,n]=h.useState(!0);return h.useEffect(()=>{(async()=>{try{const r=J(),o=ie(r,"system","maintenance"),c=await Te(o);if(c.exists()){const d=c.data();s({enabled:d.enabled||!1,message:d.message||"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:d.updatedAt})}n(!1)}catch(r){r.code==="permission-denied"?s({enabled:!1,message:"We are currently performing scheduled maintenance. Please check back soon.",updatedAt:null}):console.error("‚ùå Error checking maintenance mode:",r),n(!1)}})()},[]),a?e.jsx("div",{className:"maintenance-container",children:e.jsx("div",{className:"maintenance-content",children:e.jsxs("div",{className:"maintenance-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Checking system status..."})]})})}):t.enabled?e.jsxs("div",{className:"maintenance-container",children:[e.jsxs("div",{className:"maintenance-content",children:[e.jsx("div",{className:"maintenance-icon",children:"üîß"}),e.jsx("h1",{className:"maintenance-title",children:"System Maintenance"}),e.jsx("p",{className:"maintenance-message",children:t.message}),e.jsx("div",{className:"maintenance-details",children:e.jsxs("div",{className:"maintenance-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Status:"}),e.jsx("span",{className:"info-value maintenance",children:"Under Maintenance"})]}),t.updatedAt&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Started:"}),e.jsx("span",{className:"info-value",children:t.updatedAt.toDate?t.updatedAt.toDate().toLocaleString():"Recently"})]})]})}),e.jsx("div",{className:"maintenance-actions",children:e.jsx("button",{className:"refresh-button",onClick:()=>window.location.reload(),children:"üîÑ Refresh Page"})}),e.jsxs("div",{className:"maintenance-footer",children:[e.jsx("p",{children:"We apologize for any inconvenience. Please check back soon."}),e.jsx("p",{className:"contact-info",children:"For urgent matters, please contact support."})]})]}),e.jsxs("div",{className:"maintenance-background",children:[e.jsx("div",{className:"bg-shape shape-1"}),e.jsx("div",{className:"bg-shape shape-2"}),e.jsx("div",{className:"bg-shape shape-3"})]})]}):null},Gc=()=>{const{token:t}=Ar(),s=tt(),[a,n]=h.useState(!0),[i,r]=h.useState(null);return h.useEffect(()=>{(async()=>{if(!t){r("Invalid invite link"),n(!1);return}try{const c=await ow(t);if(c&&(c.companySlug||c.companyId)){if(c.companySlug==="long-home"){try{localStorage.setItem("currentCompanySlug","long-home")}catch{}console.log("InviteHandler: invite maps to slug long-home; redirecting to /app"),s("/app",{replace:!0});return}if(c.companyId==="oLuxoJq8SHXXEWm9KSEU"){try{localStorage.setItem("currentCompanySlug","long-home")}catch{}console.log("InviteHandler: invite maps to legacy Long Home companyId; redirecting to /app"),s("/app",{replace:!0});return}if(c.companyId)try{const d=J(),u=ie(d,"companies",c.companyId),l=await Te(u);if(l.exists()){const p=l.data(),g=p.slug||c.companyId;if(g==="long-home"||p.landingPath==="/app"){try{localStorage.setItem("currentCompanySlug","long-home")}catch{}console.log("InviteHandler: company doc indicates Long Home or landingPath=/app; redirecting to /app"),s("/app",{replace:!0});return}console.log("InviteHandler: redirecting to company page by slug:",g),s(`/company/${g}`,{replace:!0});return}}catch(d){console.error("InviteHandler: Error fetching company by ID:",d)}if(c.companySlug){s(`/company/${c.companySlug}`,{replace:!0});return}}r("Invalid invite link"),n(!1)}catch(c){console.error("Error handling invite:",c),r("Failed to process invite link"),n(!1)}})()},[t,s]),a?e.jsx(No,{message:"Redirecting to training page..."}):i?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"1rem",padding:"2rem"},children:[e.jsx("h2",{children:"Invalid Invite Link"}),e.jsx("p",{children:i}),e.jsx("button",{onClick:()=>s("/"),style:{padding:"10px 20px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Go to Home"})]}):null},Xw=({Component:t})=>{const s=tt(),a=n=>{if(n==="home"){const i=window.location.pathname.match(/^\/company\/([^/]+)/),r=localStorage.getItem("currentCompanySlug"),o=i&&i[1]||r;if(o){s(`/company/${o}`),Fs();return}}s(`/${n}`),Fs()};return e.jsx(t,{onNavigate:a})};function Zw(){const[t,s]=h.useState(!0),{loading:a}=Rt();if(h.useEffect(()=>(document.body.classList.add("dark"),()=>{document.body.classList.remove("dark")})),h.useEffect(()=>{(async()=>{try{console.log("Initializing PWA..."),await Wm(),$m(),console.log("PWA initialized successfully")}catch(i){console.error("Failed to initialize PWA:",i)}})()},[]),h.useEffect(()=>{const n=setTimeout(()=>{s(!1)},1e3);return()=>clearTimeout(n)},[]),t||a){const n=typeof window<"u"?window.location.pathname:"/",i=n.startsWith("/company")||n.startsWith("/app")||n.startsWith("/rebuttals")||n.startsWith("/disposition")||n.startsWith("/customerService")||n.startsWith("/faq")||n.startsWith("/scheduleScript");return e.jsx(No,{variant:i?"company":"landing"})}return e.jsxs(e.Fragment,{children:[e.jsx(Jw,{}),e.jsx(Fm,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(Im,{children:[e.jsx(Re,{path:"/admin",element:e.jsx(ra,{to:"/admin/dashboard",replace:!0})}),e.jsx(Re,{path:"/admin/setup",element:e.jsx(gw,{})}),e.jsx(Re,{path:"/admin/login",element:e.jsx(hw,{})}),e.jsx(Re,{path:"/admin/saas-login",element:e.jsx(Fw,{})}),e.jsx(Re,{path:"/admin/dashboard",element:e.jsx(bt,{requiredRole:"admin",allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(uw,{})})}),e.jsx(Re,{path:"/admin/saas",element:e.jsx(bt,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(Ow,{})})}),e.jsx(Re,{path:"/admin/company",element:e.jsx(ra,{to:"/admin/dashboard",replace:!0})}),e.jsx(Re,{path:"/admin/test",element:e.jsx(bt,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(fw,{})})}),e.jsx(Re,{path:"/admin/firebase-test",element:e.jsx(bt,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx(Bw,{})})}),e.jsx(Re,{path:"/admin/error-test",element:e.jsx(bt,{requiredRole:"super-admin",fallbackPath:"/admin/saas-login",children:e.jsx($w,{})})}),e.jsx(Re,{path:"/admin/rebuttals/new",element:e.jsx(bt,{requiredRole:"admin",requiredPermissions:["manage-rebuttals"],allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(yr,{})})}),e.jsx(Re,{path:"/admin/rebuttals/edit/:id",element:e.jsx(bt,{requiredRole:"admin",requiredPermissions:["manage-rebuttals"],allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(yr,{})})}),e.jsx(Re,{path:"/admin/customer-service",element:e.jsx(bt,{requiredRole:"admin",requiredPermissions:["manage-customer-service"],allowImpersonation:!0,fallbackPath:"/admin/login",children:e.jsx(Uw,{})})}),e.jsx(Re,{path:"/",element:e.jsx(_w,{})}),e.jsx(Re,{path:"/company/register",element:e.jsx(Hw,{})}),e.jsx(Re,{path:"/invite/:token",element:e.jsx(Gc,{})}),e.jsx(Re,{path:"/app/invite/:token",element:e.jsx(Gc,{})}),e.jsx(Re,{path:"/company/:companySlug",element:e.jsx(Qw,{children:e.jsx(sp,{})})}),e.jsx(Re,{path:"/app",element:e.jsx(Cs,{children:e.jsx(Xw,{Component:qw})})}),e.jsx(Re,{path:"/rebuttals",element:e.jsx(bt,{fallbackPath:"/",allowPublic:!0,children:e.jsx(Cs,{children:e.jsx(ap,{})})})}),e.jsx(Re,{path:"/disposition",element:e.jsx(bt,{fallbackPath:"/",allowPublic:!0,children:e.jsx(Cs,{children:e.jsx(op,{})})})}),e.jsx(Re,{path:"/customerService",element:e.jsx(bt,{fallbackPath:"/",allowPublic:!0,children:e.jsx(Cs,{children:e.jsx(_b,{})})})}),e.jsx(Re,{path:"/faq",element:e.jsx(bt,{fallbackPath:"/",allowPublic:!0,children:e.jsx(Cs,{children:e.jsx(Rb,{})})})}),e.jsx(Re,{path:"/scheduleScript",element:e.jsx(bt,{fallbackPath:"/",allowPublic:!0,children:e.jsx(Cs,{children:e.jsx(zw,{})})})}),e.jsx(Re,{path:"*",element:e.jsx(ra,{to:"/",replace:!0})})]})})]})}const eN=()=>{const t=console.warn,s=console.error,a=console.log;console.log=(...n)=>{const i=n.join(" ");i.includes("Starting app initialization")||i.includes("Root element found")||i.includes("Rendering app")||i.includes("App rendered successfully")||i.includes("Failed to initialize")||i.includes("Unregistered service worker")||i.includes("All service workers unregistered")||i.includes("Error")||i.includes("dispatcher")||i.includes("useState")||i.includes("React")||i.includes("AuthContext")?a(...n):!i.includes("res 65.246.84.74")&&!i.includes("got ip")&&!i.includes("timeDifference")&&!i.includes("firebase mounted")&&!i.includes("should call")&&!i.includes("called")&&!i.includes("Firebase apps")&&!i.includes("Initializing Firebase")&&!i.includes("Firebase initialized")&&!i.includes("Firebase Messaging initialized")&&!i.includes("req token")&&!i.includes("Requesting permission")&&!i.includes("firebase")&&!i.includes("worker init")&&!i.includes("worker messaging")&&!i.includes("loadAppData is resolved")&&!i.includes("Click is in the middle bottom")&&!i.includes("Click is in the bottom-right corner")&&!i.includes("Basemap iframe loaded successfully")&&a(...n)},console.warn=(...n)=>{const i=n.join(" ");!i.includes("mapContainer")&&!i.includes("Google Maps JavaScript API")&&!i.includes("Permissions policy violation")&&!i.includes("getNotifications")&&!i.includes("Invalid DOM property")&&!i.includes("componentWillMount")&&!i.includes("componentWillReceiveProps")&&!i.includes("ReactDOM.render is no longer supported")&&!i.includes("string ref")&&!i.includes("strict-mode-string-ref")&&!i.includes("mapTypeId_changed")&&!i.includes("styles_changed")&&!i.includes("google.maps.places.AutocompleteService")&&!i.includes("google.maps.places.PlacesService")&&!i.includes("google.maps.Marker")&&!i.includes("mapId is present")&&!i.includes("map styles are controlled via the cloud console")&&!i.includes("deprecated")&&!i.includes("not available to new customers")&&!i.includes("not scheduled to be discontinued")&&!i.includes("will continue to receive bug fixes")&&!i.includes("at least 12 months notice")&&!i.includes("migration guide")&&!i.includes("As of March 1st, 2025")&&!i.includes("As of February 21st, 2024")&&t(...n)},console.error=(...n)=>{const i=n.join(" ");i.includes("Failed to initialize")||i.includes("dispatcher is null")||i.includes("useState")||i.includes("React")||i.includes("TypeError")||i.includes("ReferenceError")||i.includes("AuthContext")||i.includes("Cannot read")||i.includes("Cannot access")?s(...n):!i.includes("getNotifications")&&!i.includes("Geolocation access has been blocked")&&!i.includes("InvalidValueError: in property address")&&!i.includes("Failed to decode downloaded font")&&!i.includes("OTS parsing error")&&!i.includes("Failed to load resource")&&!i.includes("Uncaught SyntaxError")&&!i.includes("InvalidAccessError: Failed to execute")&&!i.includes("applicationServerKey is not valid")&&!i.includes("Initialization error")&&!i.includes("Error while retrieving token")&&!i.includes("subscribe on PushManager")&&!i.includes("Error getting location")&&!i.includes("Geolocation has been disabled")&&!i.includes("worker init")&&!i.includes("worker messaging")&&!i.includes("ReferenceError: getNotifications")&&!i.includes("Geolocation has been disabled in this document")&&!i.includes("The notification permission was not granted and blocked instead")&&!i.includes("messaging/permission-blocked")&&s(...n)}};eN();$y();window.addEventListener("error",t=>{const s=t.message||"";if(s.includes("getNotifications")||s.includes("Geolocation")||s.includes("applicationServerKey")||s.includes("PushManager")||s.includes("mapContainer")||s.includes("InvalidValueError")||s.includes("ReferenceError")||s.includes("Failed to decode downloaded font")||s.includes("OTS parsing error")||s.includes("The notification permission was not granted and blocked instead")||s.includes("messaging/permission-blocked")||s.includes("Geolocation has been disabled in this document by permissions policy"))return t.preventDefault(),!1});window.addEventListener("unhandledrejection",t=>{const s=t.reason?.toString()||"";if(s.includes("Firebase")||s.includes("auth")||s.includes("firestore")||s.includes("messaging")||s.includes("ServiceWorker")||s.includes("Cache")||s.includes("fetch")||s.includes("getNotifications")||s.includes("PushManager")||s.includes("applicationServerKey")){console.log("Handled promise rejection:",s),t.preventDefault();return}console.warn("Unhandled promise rejection:",t.reason)});const tN=async()=>{try{console.log("Starting app initialization...");const t=document.getElementById("root");if(!t)throw new Error("Root element not found");console.log("Root element found, creating React root...");const s=qh.createRoot(t);console.log("Rendering app..."),s.render(e.jsx(Um,{children:e.jsx(Zw,{})})),console.log("App rendered successfully")}catch(t){console.error("Failed to initialize app:",t);const s=document.getElementById("root");s&&(s.innerHTML=`
        <div style="color: red; padding: 20px; font-family: Arial, sans-serif;">
          <h2>Failed to initialize application</h2>
          <p>Please try refreshing the page.</p>
          <p><strong>Error:</strong> ${t.message}</p>
          <p><strong>Stack:</strong> ${t.stack}</p>
        </div>
      `)}};console.log("main.jsx loaded, starting initialization...");tN();
